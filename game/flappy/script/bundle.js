/*! For license information please see bundle.js.LICENSE.txt */
!function(i){var o={};function __webpack_require__(a){if(o[a])return o[a].exports;var h=o[a]={i:a,l:!1,exports:{}};return i[a].call(h.exports,h,h.exports,__webpack_require__),h.l=!0,h.exports}__webpack_require__.m=i,__webpack_require__.c=o,__webpack_require__.d=function(i,o,a){__webpack_require__.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:a})},__webpack_require__.r=function(i){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},__webpack_require__.t=function(i,o){if(1&o&&(i=__webpack_require__(i)),8&o)return i;if(4&o&&"object"==typeof i&&i&&i.__esModule)return i;var a=Object.create(null);if(__webpack_require__.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:i}),2&o&&"string"!=typeof i)for(var h in i)__webpack_require__.d(a,h,function(o){return i[o]}.bind(null,h));return a},__webpack_require__.n=function(i){var o=i&&i.__esModule?function getDefault(){return i.default}:function getModuleExports(){return i};return __webpack_require__.d(o,"a",o),o},__webpack_require__.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=327)}([function(i){i.exports={frames:{"baren_idle_0.png":{frame:{x:0,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"baren_idle_1.png":{frame:{x:128,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"baren_idle_2.png":{frame:{x:256,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"baren_idle_3.png":{frame:{x:384,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"baren_idle_4.png":{frame:{x:512,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"baren_idle_5.png":{frame:{x:640,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"baren_idle_6.png":{frame:{x:768,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"baren_idle_7.png":{frame:{x:896,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"baren_idle.png",format:"RGBA8888",size:{w:1024,h:128},scale:"1"}}},function(i){i.exports={frames:{"bat_idle_0.png":{frame:{x:0,y:0,w:92,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:92,h:60},sourceSize:{w:92,h:60}},"bat_idle_1.png":{frame:{x:92,y:0,w:92,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:92,h:60},sourceSize:{w:92,h:60}},"bat_idle_2.png":{frame:{x:184,y:0,w:92,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:92,h:60},sourceSize:{w:92,h:60}},"bat_idle_3.png":{frame:{x:276,y:0,w:92,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:92,h:60},sourceSize:{w:92,h:60}},"bat_idle_4.png":{frame:{x:368,y:0,w:92,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:92,h:60},sourceSize:{w:92,h:60}},"bat_idle_5.png":{frame:{x:460,y:0,w:92,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:92,h:60},sourceSize:{w:92,h:60}},"bat_idle_6.png":{frame:{x:552,y:0,w:92,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:92,h:60},sourceSize:{w:92,h:60}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"bat_idle.png",format:"RGBA8888",size:{w:644,h:60},scale:"1"}}},function(i){i.exports={frames:{"bird_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"bird_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"bird_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"bird_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"bird_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"bird_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"bird_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"bird_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"bird_idle_8.png":{frame:{x:512,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"bird_idle.png",format:"RGBA8888",size:{w:576,h:64},scale:"1"}}},function(i){i.exports={frames:{"bunny_idle_0.png":{frame:{x:0,y:0,w:68,h:88},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:68,h:88},sourceSize:{w:68,h:88}},"bunny_idle_1.png":{frame:{x:68,y:0,w:68,h:88},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:68,h:88},sourceSize:{w:68,h:88}},"bunny_idle_2.png":{frame:{x:136,y:0,w:68,h:88},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:68,h:88},sourceSize:{w:68,h:88}},"bunny_idle_3.png":{frame:{x:204,y:0,w:68,h:88},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:68,h:88},sourceSize:{w:68,h:88}},"bunny_idle_4.png":{frame:{x:272,y:0,w:68,h:88},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:68,h:88},sourceSize:{w:68,h:88}},"bunny_idle_5.png":{frame:{x:340,y:0,w:68,h:88},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:68,h:88},sourceSize:{w:68,h:88}},"bunny_idle_6.png":{frame:{x:408,y:0,w:68,h:88},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:68,h:88},sourceSize:{w:68,h:88}},"bunny_idle_7.png":{frame:{x:476,y:0,w:68,h:88},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:68,h:88},sourceSize:{w:68,h:88}},"bunny_idle_8.png":{frame:{x:544,y:0,w:68,h:88},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:68,h:88},sourceSize:{w:68,h:88}},"bunny_idle_9.png":{frame:{x:612,y:0,w:68,h:88},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:68,h:88},sourceSize:{w:68,h:88}},"bunny_idle_10.png":{frame:{x:680,y:0,w:68,h:88},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:68,h:88},sourceSize:{w:68,h:88}},"bunny_idle_11.png":{frame:{x:748,y:0,w:68,h:88},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:68,h:88},sourceSize:{w:68,h:88}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"bunny_idle.png",format:"RGBA8888",size:{w:816,h:88},scale:"1"}}},function(i){i.exports={frames:{"chameleon_idle_0.png":{frame:{x:0,y:0,w:76,h:76},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:76,h:76},sourceSize:{w:76,h:76}},"chameleon_idle_1.png":{frame:{x:76,y:0,w:76,h:76},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:76,h:76},sourceSize:{w:76,h:76}},"chameleon_idle_2.png":{frame:{x:152,y:0,w:76,h:76},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:76,h:76},sourceSize:{w:76,h:76}},"chameleon_idle_3.png":{frame:{x:228,y:0,w:76,h:76},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:76,h:76},sourceSize:{w:76,h:76}},"chameleon_idle_4.png":{frame:{x:304,y:0,w:76,h:76},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:76,h:76},sourceSize:{w:76,h:76}},"chameleon_idle_5.png":{frame:{x:380,y:0,w:76,h:76},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:76,h:76},sourceSize:{w:76,h:76}},"chameleon_idle_6.png":{frame:{x:456,y:0,w:76,h:76},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:76,h:76},sourceSize:{w:76,h:76}},"chameleon_idle_7.png":{frame:{x:532,y:0,w:76,h:76},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:76,h:76},sourceSize:{w:76,h:76}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"chameleon_idle.png",format:"RGBA8888",size:{w:608,h:76},scale:"1"}}},function(i){i.exports={frames:{"chicken_idle_0.png":{frame:{x:0,y:0,w:64,h:68},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:68},sourceSize:{w:64,h:68}},"chicken_idle_1.png":{frame:{x:64,y:0,w:64,h:68},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:68},sourceSize:{w:64,h:68}},"chicken_idle_2.png":{frame:{x:128,y:0,w:64,h:68},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:68},sourceSize:{w:64,h:68}},"chicken_idle_3.png":{frame:{x:192,y:0,w:64,h:68},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:68},sourceSize:{w:64,h:68}},"chicken_idle_4.png":{frame:{x:256,y:0,w:64,h:68},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:68},sourceSize:{w:64,h:68}},"chicken_idle_5.png":{frame:{x:320,y:0,w:64,h:68},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:68},sourceSize:{w:64,h:68}},"chicken_idle_6.png":{frame:{x:384,y:0,w:64,h:68},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:68},sourceSize:{w:64,h:68}},"chicken_idle_7.png":{frame:{x:448,y:0,w:64,h:68},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:68},sourceSize:{w:64,h:68}},"chicken_idle_8.png":{frame:{x:512,y:0,w:64,h:68},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:68},sourceSize:{w:64,h:68}},"chicken_idle_9.png":{frame:{x:576,y:0,w:64,h:68},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:68},sourceSize:{w:64,h:68}},"chicken_idle_10.png":{frame:{x:640,y:0,w:64,h:68},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:68},sourceSize:{w:64,h:68}},"chicken_idle_11.png":{frame:{x:704,y:0,w:64,h:68},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:68},sourceSize:{w:64,h:68}},"chicken_idle_12.png":{frame:{x:768,y:0,w:64,h:68},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:68},sourceSize:{w:64,h:68}},"chicken_idle_13.png":{frame:{x:832,y:0,w:64,h:68},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:68},sourceSize:{w:64,h:68}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"chicken_idle.png",format:"RGBA8888",size:{w:896,h:68},scale:"1"}}},function(i){i.exports={frames:{"coffee_idle_0.png":{frame:{x:0,y:0,w:50,h:78},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:50,h:78},sourceSize:{w:50,h:78}},"coffee_idle_1.png":{frame:{x:50,y:0,w:50,h:78},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:50,h:78},sourceSize:{w:50,h:78}},"coffee_idle_2.png":{frame:{x:100,y:0,w:50,h:78},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:50,h:78},sourceSize:{w:50,h:78}},"coffee_idle_3.png":{frame:{x:150,y:0,w:50,h:78},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:50,h:78},sourceSize:{w:50,h:78}},"coffee_idle_4.png":{frame:{x:200,y:0,w:50,h:78},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:50,h:78},sourceSize:{w:50,h:78}},"coffee_idle_5.png":{frame:{x:250,y:0,w:50,h:78},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:50,h:78},sourceSize:{w:50,h:78}},"coffee_idle_6.png":{frame:{x:300,y:0,w:50,h:78},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:50,h:78},sourceSize:{w:50,h:78}},"coffee_idle_7.png":{frame:{x:350,y:0,w:50,h:78},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:50,h:78},sourceSize:{w:50,h:78}},"coffee_idle_8.png":{frame:{x:400,y:0,w:50,h:78},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:50,h:78},sourceSize:{w:50,h:78}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"coffee_idle.png",format:"RGBA8888",size:{w:450,h:78},scale:"1"}}},function(i){i.exports={frames:{"cola_idle_0.png":{frame:{x:0,y:0,w:40,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:40,h:70},sourceSize:{w:40,h:70}},"cola_idle_1.png":{frame:{x:40,y:0,w:40,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:40,h:70},sourceSize:{w:40,h:70}},"cola_idle_2.png":{frame:{x:80,y:0,w:40,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:40,h:70},sourceSize:{w:40,h:70}},"cola_idle_3.png":{frame:{x:120,y:0,w:40,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:40,h:70},sourceSize:{w:40,h:70}},"cola_idle_4.png":{frame:{x:160,y:0,w:40,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:40,h:70},sourceSize:{w:40,h:70}},"cola_idle_5.png":{frame:{x:200,y:0,w:40,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:40,h:70},sourceSize:{w:40,h:70}},"cola_idle_6.png":{frame:{x:240,y:0,w:40,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:40,h:70},sourceSize:{w:40,h:70}},"cola_idle_7.png":{frame:{x:280,y:0,w:40,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:40,h:70},sourceSize:{w:40,h:70}},"cola_idle_8.png":{frame:{x:320,y:0,w:40,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:40,h:70},sourceSize:{w:40,h:70}},"cola_idle_9.png":{frame:{x:360,y:0,w:40,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:40,h:70},sourceSize:{w:40,h:70}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"cola_idle.png",format:"RGBA8888",size:{w:400,h:70},scale:"1"}}},function(i){i.exports={frames:{"desert_idle_0.png":{frame:{x:0,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"desert_idle_1.png":{frame:{x:128,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"desert_idle_2.png":{frame:{x:256,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"desert_idle_3.png":{frame:{x:384,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"desert_idle_4.png":{frame:{x:512,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"desert_idle_5.png":{frame:{x:640,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"desert_idle_6.png":{frame:{x:768,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"desert_idle_7.png":{frame:{x:896,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"desert_idle.png",format:"RGBA8888",size:{w:1024,h:128},scale:"1"}}},function(i){i.exports={frames:{"dragon_idle_0.png":{frame:{x:0,y:0,w:108,h:122},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:108,h:122},sourceSize:{w:108,h:122}},"dragon_idle_1.png":{frame:{x:108,y:0,w:108,h:122},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:108,h:122},sourceSize:{w:108,h:122}},"dragon_idle_2.png":{frame:{x:216,y:0,w:108,h:122},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:108,h:122},sourceSize:{w:108,h:122}},"dragon_idle_3.png":{frame:{x:324,y:0,w:108,h:122},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:108,h:122},sourceSize:{w:108,h:122}},"dragon_idle_4.png":{frame:{x:432,y:0,w:108,h:122},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:108,h:122},sourceSize:{w:108,h:122}},"dragon_idle_5.png":{frame:{x:540,y:0,w:108,h:122},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:108,h:122},sourceSize:{w:108,h:122}},"dragon_idle_6.png":{frame:{x:648,y:0,w:108,h:122},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:108,h:122},sourceSize:{w:108,h:122}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"dragon_idle.png",format:"RGBA8888",size:{w:756,h:122},scale:"1"}}},function(i){i.exports={frames:{"droppop_idle_0.png":{frame:{x:0,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"droppop_idle_1.png":{frame:{x:128,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"droppop_idle_2.png":{frame:{x:256,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"droppop_idle_3.png":{frame:{x:384,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"droppop_idle_4.png":{frame:{x:512,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"droppop_idle_5.png":{frame:{x:640,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"droppop_idle_6.png":{frame:{x:768,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"droppop_idle_7.png":{frame:{x:896,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"droppop_idle_8.png":{frame:{x:1024,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"droppop_idle_9.png":{frame:{x:1152,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"droppop_idle_10.png":{frame:{x:1280,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"droppop_idle_11.png":{frame:{x:1408,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"droppop_idle.png",format:"RGBA8888",size:{w:1536,h:128},scale:"1"}}},function(i){i.exports={frames:{"flag_argentina_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_argentina_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_argentina_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_argentina_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_argentina_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_argentina_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_argentina_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_argentina_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_argentina_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_australia_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_australia_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_australia_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_australia_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_australia_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_australia_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_australia_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_australia_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_australia_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_austria_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_austria_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_austria_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_austria_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_austria_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_austria_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_austria_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_austria_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_austria_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_belgium_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_belgium_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_belgium_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_belgium_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_belgium_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_belgium_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_belgium_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_belgium_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_belgium_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_brazil_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_brazil_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_brazil_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_brazil_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_brazil_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_brazil_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_brazil_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_brazil_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_brazil_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_canada_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_canada_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_canada_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_canada_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_canada_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_canada_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_canada_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_canada_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_canada_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_chile_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_chile_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_chile_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_chile_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_chile_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_chile_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_chile_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_chile_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_chile_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_china_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_china_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_china_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_china_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_china_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_china_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_china_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_china_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_china_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_colombia_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_colombia_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_colombia_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_colombia_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_colombia_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_colombia_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_colombia_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_colombia_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_colombia_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_czech_republic_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_czech_republic_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_czech_republic_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_czech_republic_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_czech_republic_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_czech_republic_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_czech_republic_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_czech_republic_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_czech_republic_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_denmark_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_denmark_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_denmark_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_denmark_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_denmark_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_denmark_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_denmark_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_denmark_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_denmark_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_estonia_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_estonia_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_estonia_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_estonia_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_estonia_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_estonia_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_estonia_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_estonia_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_estonia_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_finland_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_finland_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_finland_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_finland_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_finland_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_finland_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_finland_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_finland_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_finland_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_france_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_france_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_france_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_france_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_france_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_france_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_france_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_france_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_france_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_germany_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_germany_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_germany_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_germany_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_germany_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_germany_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_germany_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_germany_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_germany_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_greece_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_greece_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_greece_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_greece_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_greece_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_greece_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_greece_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_greece_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_greece_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_hungary_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_hungary_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_hungary_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_hungary_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_hungary_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_hungary_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_hungary_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_hungary_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_hungary_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_iceland_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_iceland_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_iceland_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_iceland_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_iceland_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_iceland_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_iceland_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_iceland_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_iceland_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_india_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_india_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_india_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_india_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_india_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_india_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_india_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_india_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_india_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_indonesia_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_indonesia_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_indonesia_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_indonesia_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_indonesia_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_indonesia_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_indonesia_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_indonesia_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_indonesia_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_iran_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_iran_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_iran_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_iran_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_iran_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_iran_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_iran_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_iran_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_iran_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_ireland_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_ireland_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_ireland_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_ireland_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_ireland_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_ireland_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_ireland_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_ireland_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_ireland_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_israel_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_israel_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_israel_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_israel_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_israel_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_israel_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_israel_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_israel_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_israel_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_italy_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_italy_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_italy_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_italy_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_italy_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_italy_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_italy_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_italy_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_italy_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_japan_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_japan_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_japan_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_japan_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_japan_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_japan_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_japan_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_japan_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_japan_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_korea_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_korea_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_korea_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_korea_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_korea_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_korea_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_korea_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_korea_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_korea_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_luxembourg_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_luxembourg_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_luxembourg_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_luxembourg_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_luxembourg_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_luxembourg_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_luxembourg_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_luxembourg_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_luxembourg_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_mexico_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_mexico_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_mexico_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_mexico_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_mexico_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_mexico_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_mexico_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_mexico_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_mexico_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_netherlands_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_netherlands_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_netherlands_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_netherlands_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_netherlands_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_netherlands_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_netherlands_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_netherlands_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_netherlands_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_nigeria_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_nigeria_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_nigeria_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_nigeria_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_nigeria_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_nigeria_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_nigeria_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_nigeria_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_nigeria_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_norway_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_norway_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_norway_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_norway_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_norway_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_norway_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_norway_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_norway_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_norway_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_poland_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_poland_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_poland_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_poland_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_poland_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_poland_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_poland_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_poland_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_poland_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_portugal_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_portugal_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_portugal_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_portugal_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_portugal_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_portugal_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_portugal_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_portugal_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_portugal_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_republic_of_south_africa_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_republic_of_south_africa_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_republic_of_south_africa_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_republic_of_south_africa_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_republic_of_south_africa_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_republic_of_south_africa_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_republic_of_south_africa_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_republic_of_south_africa_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_republic_of_south_africa_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_russia_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_russia_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_russia_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_russia_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_russia_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_russia_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_russia_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_russia_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_russia_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_saudi_arabia_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_saudi_arabia_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_saudi_arabia_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_saudi_arabia_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_saudi_arabia_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_saudi_arabia_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_saudi_arabia_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_saudi_arabia_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_saudi_arabia_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_slovakia_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_slovakia_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_slovakia_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_slovakia_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_slovakia_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_slovakia_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_slovakia_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_slovakia_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_slovakia_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_slovenia_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_slovenia_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_slovenia_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_slovenia_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_slovenia_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_slovenia_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_slovenia_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_slovenia_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_slovenia_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_spain_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_spain_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_spain_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_spain_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_spain_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_spain_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_spain_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_spain_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_spain_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_sweden_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_sweden_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_sweden_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_sweden_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_sweden_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_sweden_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_sweden_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_sweden_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_sweden_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_switzerland_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_switzerland_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_switzerland_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_switzerland_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_switzerland_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_switzerland_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_switzerland_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_switzerland_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_switzerland_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_thailand_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_thailand_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_thailand_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_thailand_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_thailand_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_thailand_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_thailand_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_thailand_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_thailand_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_turkey_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_turkey_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_turkey_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_turkey_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_turkey_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_turkey_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_turkey_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_turkey_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_turkey_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_united_arab_emirates_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_arab_emirates_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_arab_emirates_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_arab_emirates_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_arab_emirates_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_arab_emirates_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_arab_emirates_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_arab_emirates_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_united_arab_emirates_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_united_kingdoms_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_kingdoms_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_kingdoms_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_kingdoms_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_kingdoms_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_kingdoms_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_kingdoms_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_kingdoms_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_united_kingdoms_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"flag_united_states_of_america_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_states_of_america_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_states_of_america_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_states_of_america_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_states_of_america_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_states_of_america_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_states_of_america_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"flag_united_states_of_america_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"flag_united_states_of_america_idle.png",format:"RGBA8888",size:{w:512,h:64},scale:"1"}}},function(i){i.exports={frames:{"forest_idle_0.png":{frame:{x:0,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"forest_idle_1.png":{frame:{x:128,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"forest_idle_2.png":{frame:{x:256,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"forest_idle_3.png":{frame:{x:384,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"forest_idle_4.png":{frame:{x:512,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"forest_idle_5.png":{frame:{x:640,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"forest_idle_6.png":{frame:{x:768,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"forest_idle_7.png":{frame:{x:896,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"forest_idle.png",format:"RGBA8888",size:{w:1024,h:128},scale:"1"}}},function(i){i.exports={frames:{"ghost_idle_0.png":{frame:{x:0,y:0,w:88,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:60},sourceSize:{w:88,h:60}},"ghost_idle_1.png":{frame:{x:88,y:0,w:88,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:60},sourceSize:{w:88,h:60}},"ghost_idle_2.png":{frame:{x:176,y:0,w:88,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:60},sourceSize:{w:88,h:60}},"ghost_idle_3.png":{frame:{x:264,y:0,w:88,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:60},sourceSize:{w:88,h:60}},"ghost_idle_4.png":{frame:{x:352,y:0,w:88,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:60},sourceSize:{w:88,h:60}},"ghost_idle_5.png":{frame:{x:440,y:0,w:88,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:60},sourceSize:{w:88,h:60}},"ghost_idle_6.png":{frame:{x:528,y:0,w:88,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:60},sourceSize:{w:88,h:60}},"ghost_idle_7.png":{frame:{x:616,y:0,w:88,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:60},sourceSize:{w:88,h:60}},"ghost_idle_8.png":{frame:{x:704,y:0,w:88,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:60},sourceSize:{w:88,h:60}},"ghost_idle_9.png":{frame:{x:792,y:0,w:88,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:60},sourceSize:{w:88,h:60}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"ghost_idle.png",format:"RGBA8888",size:{w:880,h:60},scale:"1"}}},function(i){i.exports={frames:{"hamburger_idle_0.png":{frame:{x:0,y:0,w:64,h:87},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:87},sourceSize:{w:64,h:87}},"hamburger_idle_1.png":{frame:{x:64,y:0,w:64,h:87},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:87},sourceSize:{w:64,h:87}},"hamburger_idle_2.png":{frame:{x:128,y:0,w:64,h:87},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:87},sourceSize:{w:64,h:87}},"hamburger_idle_3.png":{frame:{x:192,y:0,w:64,h:87},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:87},sourceSize:{w:64,h:87}},"hamburger_idle_4.png":{frame:{x:256,y:0,w:64,h:87},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:87},sourceSize:{w:64,h:87}},"hamburger_idle_5.png":{frame:{x:320,y:0,w:64,h:87},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:87},sourceSize:{w:64,h:87}},"hamburger_idle_6.png":{frame:{x:384,y:0,w:64,h:87},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:87},sourceSize:{w:64,h:87}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"hamburger_idle.png",format:"RGBA8888",size:{w:448,h:87},scale:"1"}}},function(i){i.exports={frames:{"ice_idle_0.png":{frame:{x:0,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"ice_idle_1.png":{frame:{x:128,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"ice_idle_2.png":{frame:{x:256,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"ice_idle_3.png":{frame:{x:384,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"ice_idle_4.png":{frame:{x:512,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"ice_idle_5.png":{frame:{x:640,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"ice_idle_6.png":{frame:{x:768,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"ice_idle_7.png":{frame:{x:896,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"ice_idle.png",format:"RGBA8888",size:{w:1024,h:128},scale:"1"}}},function(i){i.exports={frames:{"lava_idle_0.png":{frame:{x:0,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"lava_idle_1.png":{frame:{x:128,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"lava_idle_2.png":{frame:{x:256,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"lava_idle_3.png":{frame:{x:384,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"lava_idle_4.png":{frame:{x:512,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"lava_idle_5.png":{frame:{x:640,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"lava_idle_6.png":{frame:{x:768,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"lava_idle_7.png":{frame:{x:896,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"lava_idle.png",format:"RGBA8888",size:{w:1024,h:128},scale:"1"}}},function(i){i.exports={frames:{"marlin_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"marlin_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"marlin_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"marlin_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"marlin_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"marlin_idle.png",format:"RGBA8888",size:{w:320,h:64},scale:"1"}}},function(i){i.exports={frames:{"missile_idle_0.png":{frame:{x:0,y:0,w:160,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:160,h:64},sourceSize:{w:160,h:64}},"missile_idle_1.png":{frame:{x:160,y:0,w:160,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:160,h:64},sourceSize:{w:160,h:64}},"missile_idle_2.png":{frame:{x:320,y:0,w:160,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:160,h:64},sourceSize:{w:160,h:64}},"missile_idle_3.png":{frame:{x:480,y:0,w:160,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:160,h:64},sourceSize:{w:160,h:64}},"missile_idle_4.png":{frame:{x:640,y:0,w:160,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:160,h:64},sourceSize:{w:160,h:64}},"missile_idle_5.png":{frame:{x:800,y:0,w:160,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:160,h:64},sourceSize:{w:160,h:64}},"missile_idle_6.png":{frame:{x:960,y:0,w:160,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:160,h:64},sourceSize:{w:160,h:64}},"missile_idle_7.png":{frame:{x:1120,y:0,w:160,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:160,h:64},sourceSize:{w:160,h:64}},"missile_idle_8.png":{frame:{x:1280,y:0,w:160,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:160,h:64},sourceSize:{w:160,h:64}},"missile_idle_9.png":{frame:{x:1440,y:0,w:160,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:160,h:64},sourceSize:{w:160,h:64}},"missile_idle_10.png":{frame:{x:1600,y:0,w:160,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:160,h:64},sourceSize:{w:160,h:64}},"missile_idle_11.png":{frame:{x:1760,y:0,w:160,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:160,h:64},sourceSize:{w:160,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"missile_idle.png",format:"RGBA8888",size:{w:1920,h:64},scale:"1"}}},function(i){i.exports={frames:{"ocean_idle_0.png":{frame:{x:0,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"ocean_idle_1.png":{frame:{x:128,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"ocean_idle_2.png":{frame:{x:256,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"ocean_idle_3.png":{frame:{x:384,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"ocean_idle_4.png":{frame:{x:512,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"ocean_idle_5.png":{frame:{x:640,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"ocean_idle_6.png":{frame:{x:768,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"ocean_idle_7.png":{frame:{x:896,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"ocean_idle.png",format:"RGBA8888",size:{w:1024,h:128},scale:"1"}}},function(i){i.exports={frames:{"paperplane_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"paperplane_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"paperplane_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"paperplane_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"paperplane_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"paperplane_idle_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"paperplane_idle_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"paperplane_idle_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"paperplane_idle_8.png":{frame:{x:512,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"paperplane_idle_9.png":{frame:{x:576,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"paperplane_idle_10.png":{frame:{x:640,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"paperplane_idle.png",format:"RGBA8888",size:{w:704,h:64},scale:"1"}}},function(i){i.exports={frames:{"penguin_idle_0.png":{frame:{x:0,y:0,w:64,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:48},sourceSize:{w:64,h:48}},"penguin_idle_1.png":{frame:{x:64,y:0,w:64,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:48},sourceSize:{w:64,h:48}},"penguin_idle_2.png":{frame:{x:128,y:0,w:64,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:48},sourceSize:{w:64,h:48}},"penguin_idle_3.png":{frame:{x:192,y:0,w:64,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:48},sourceSize:{w:64,h:48}},"penguin_idle_4.png":{frame:{x:256,y:0,w:64,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:48},sourceSize:{w:64,h:48}},"penguin_idle_5.png":{frame:{x:320,y:0,w:64,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:48},sourceSize:{w:64,h:48}},"penguin_idle_6.png":{frame:{x:384,y:0,w:64,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:48},sourceSize:{w:64,h:48}},"penguin_idle_7.png":{frame:{x:448,y:0,w:64,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:48},sourceSize:{w:64,h:48}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"penguin_idle.png",format:"RGBA8888",size:{w:512,h:48},scale:"1"}}},function(i){i.exports={frames:{"pigeon_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"pigeon_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"pigeon_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"pigeon_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"pigeon_idle_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"pigeon_idle.png",format:"RGBA8888",size:{w:320,h:64},scale:"1"}}},function(i){i.exports={frames:{"pizza_idle_0.png":{frame:{x:0,y:0,w:70,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:70,h:70},sourceSize:{w:70,h:70}},"pizza_idle_1.png":{frame:{x:70,y:0,w:70,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:70,h:70},sourceSize:{w:70,h:70}},"pizza_idle_2.png":{frame:{x:140,y:0,w:70,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:70,h:70},sourceSize:{w:70,h:70}},"pizza_idle_3.png":{frame:{x:210,y:0,w:70,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:70,h:70},sourceSize:{w:70,h:70}},"pizza_idle_4.png":{frame:{x:280,y:0,w:70,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:70,h:70},sourceSize:{w:70,h:70}},"pizza_idle_5.png":{frame:{x:350,y:0,w:70,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:70,h:70},sourceSize:{w:70,h:70}},"pizza_idle_6.png":{frame:{x:420,y:0,w:70,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:70,h:70},sourceSize:{w:70,h:70}},"pizza_idle_7.png":{frame:{x:490,y:0,w:70,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:70,h:70},sourceSize:{w:70,h:70}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"pizza_idle.png",format:"RGBA8888",size:{w:560,h:70},scale:"1"}}},function(i){i.exports={frames:{"plant_idle_0.png":{frame:{x:0,y:0,w:88,h:84},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:84},sourceSize:{w:88,h:84}},"plant_idle_1.png":{frame:{x:88,y:0,w:88,h:84},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:84},sourceSize:{w:88,h:84}},"plant_idle_2.png":{frame:{x:176,y:0,w:88,h:84},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:84},sourceSize:{w:88,h:84}},"plant_idle_3.png":{frame:{x:264,y:0,w:88,h:84},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:84},sourceSize:{w:88,h:84}},"plant_idle_4.png":{frame:{x:352,y:0,w:88,h:84},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:84},sourceSize:{w:88,h:84}},"plant_idle_5.png":{frame:{x:440,y:0,w:88,h:84},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:84},sourceSize:{w:88,h:84}},"plant_idle_6.png":{frame:{x:528,y:0,w:88,h:84},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:84},sourceSize:{w:88,h:84}},"plant_idle_7.png":{frame:{x:616,y:0,w:88,h:84},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:84},sourceSize:{w:88,h:84}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"plant_idle.png",format:"RGBA8888",size:{w:704,h:84},scale:"1"}}},function(i){i.exports={frames:{"radish_idle_0.png":{frame:{x:0,y:0,w:60,h:76},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:60,h:76},sourceSize:{w:60,h:76}},"radish_idle_1.png":{frame:{x:60,y:0,w:60,h:76},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:60,h:76},sourceSize:{w:60,h:76}},"radish_idle_2.png":{frame:{x:120,y:0,w:60,h:76},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:60,h:76},sourceSize:{w:60,h:76}},"radish_idle_3.png":{frame:{x:180,y:0,w:60,h:76},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:60,h:76},sourceSize:{w:60,h:76}},"radish_idle_4.png":{frame:{x:240,y:0,w:60,h:76},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:60,h:76},sourceSize:{w:60,h:76}},"radish_idle_5.png":{frame:{x:300,y:0,w:60,h:76},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:60,h:76},sourceSize:{w:60,h:76}},"radish_idle_6.png":{frame:{x:360,y:0,w:60,h:76},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:60,h:76},sourceSize:{w:60,h:76}},"radish_idle_7.png":{frame:{x:420,y:0,w:60,h:76},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:60,h:76},sourceSize:{w:60,h:76}},"radish_idle_8.png":{frame:{x:480,y:0,w:60,h:76},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:60,h:76},sourceSize:{w:60,h:76}},"radish_idle_9.png":{frame:{x:540,y:0,w:60,h:76},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:60,h:76},sourceSize:{w:60,h:76}},"radish_idle_10.png":{frame:{x:600,y:0,w:60,h:76},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:60,h:76},sourceSize:{w:60,h:76}},"radish_idle_11.png":{frame:{x:660,y:0,w:60,h:76},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:60,h:76},sourceSize:{w:60,h:76}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"radish_idle.png",format:"RGBA8888",size:{w:720,h:76},scale:"1"}}},function(i){i.exports={frames:{"rino_idle_0.png":{frame:{x:0,y:0,w:104,h:68},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:104,h:68},sourceSize:{w:104,h:68}},"rino_idle_1.png":{frame:{x:104,y:0,w:104,h:68},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:104,h:68},sourceSize:{w:104,h:68}},"rino_idle_2.png":{frame:{x:208,y:0,w:104,h:68},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:104,h:68},sourceSize:{w:104,h:68}},"rino_idle_3.png":{frame:{x:312,y:0,w:104,h:68},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:104,h:68},sourceSize:{w:104,h:68}},"rino_idle_4.png":{frame:{x:416,y:0,w:104,h:68},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:104,h:68},sourceSize:{w:104,h:68}},"rino_idle_5.png":{frame:{x:520,y:0,w:104,h:68},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:104,h:68},sourceSize:{w:104,h:68}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"rino_idle.png",format:"RGBA8888",size:{w:624,h:68},scale:"1"}}},function(i){i.exports={frames:{"shuriken_idle_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"shuriken_idle_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"shuriken_idle_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"shuriken_idle_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"shuriken_idle.png",format:"RGBA8888",size:{w:256,h:64},scale:"1"}}},function(i){i.exports={frames:{"slime_idle_0.png":{frame:{x:0,y:0,w:88,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:60},sourceSize:{w:88,h:60}},"slime_idle_1.png":{frame:{x:88,y:0,w:88,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:60},sourceSize:{w:88,h:60}},"slime_idle_2.png":{frame:{x:176,y:0,w:88,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:60},sourceSize:{w:88,h:60}},"slime_idle_3.png":{frame:{x:264,y:0,w:88,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:60},sourceSize:{w:88,h:60}},"slime_idle_4.png":{frame:{x:352,y:0,w:88,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:60},sourceSize:{w:88,h:60}},"slime_idle_5.png":{frame:{x:440,y:0,w:88,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:60},sourceSize:{w:88,h:60}},"slime_idle_6.png":{frame:{x:528,y:0,w:88,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:60},sourceSize:{w:88,h:60}},"slime_idle_7.png":{frame:{x:616,y:0,w:88,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:60},sourceSize:{w:88,h:60}},"slime_idle_8.png":{frame:{x:704,y:0,w:88,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:60},sourceSize:{w:88,h:60}},"slime_idle_9.png":{frame:{x:792,y:0,w:88,h:60},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:60},sourceSize:{w:88,h:60}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"slime_idle.png",format:"RGBA8888",size:{w:880,h:60},scale:"1"}}},function(i){i.exports={frames:{"snail_idle_0.png":{frame:{x:0,y:0,w:76,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:76,h:48},sourceSize:{w:76,h:48}},"snail_idle_1.png":{frame:{x:76,y:0,w:76,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:76,h:48},sourceSize:{w:76,h:48}},"snail_idle_2.png":{frame:{x:152,y:0,w:76,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:76,h:48},sourceSize:{w:76,h:48}},"snail_idle_3.png":{frame:{x:228,y:0,w:76,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:76,h:48},sourceSize:{w:76,h:48}},"snail_idle_4.png":{frame:{x:304,y:0,w:76,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:76,h:48},sourceSize:{w:76,h:48}},"snail_idle_5.png":{frame:{x:380,y:0,w:76,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:76,h:48},sourceSize:{w:76,h:48}},"snail_idle_6.png":{frame:{x:456,y:0,w:76,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:76,h:48},sourceSize:{w:76,h:48}},"snail_idle_7.png":{frame:{x:532,y:0,w:76,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:76,h:48},sourceSize:{w:76,h:48}},"snail_idle_8.png":{frame:{x:608,y:0,w:76,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:76,h:48},sourceSize:{w:76,h:48}},"snail_idle_9.png":{frame:{x:684,y:0,w:76,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:76,h:48},sourceSize:{w:76,h:48}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"snail_idle.png",format:"RGBA8888",size:{w:760,h:48},scale:"1"}}},function(i){i.exports={frames:{"sword_idle_0.png":{frame:{x:0,y:0,w:96,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:96,h:48},sourceSize:{w:96,h:48}},"sword_idle_1.png":{frame:{x:96,y:0,w:96,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:96,h:48},sourceSize:{w:96,h:48}},"sword_idle_2.png":{frame:{x:192,y:0,w:96,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:96,h:48},sourceSize:{w:96,h:48}},"sword_idle_3.png":{frame:{x:288,y:0,w:96,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:96,h:48},sourceSize:{w:96,h:48}},"sword_idle_4.png":{frame:{x:384,y:0,w:96,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:96,h:48},sourceSize:{w:96,h:48}},"sword_idle_5.png":{frame:{x:480,y:0,w:96,h:48},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:96,h:48},sourceSize:{w:96,h:48}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"sword_idle.png",format:"RGBA8888",size:{w:576,h:48},scale:"1"}}},function(i){i.exports={frames:{"terran_idle_0.png":{frame:{x:0,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"terran_idle_1.png":{frame:{x:128,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"terran_idle_2.png":{frame:{x:256,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"terran_idle_3.png":{frame:{x:384,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"terran_idle_4.png":{frame:{x:512,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"terran_idle_5.png":{frame:{x:640,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"terran_idle_6.png":{frame:{x:768,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}},"terran_idle_7.png":{frame:{x:896,y:0,w:128,h:128},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:128},sourceSize:{w:128,h:128}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"terran_idle.png",format:"RGBA8888",size:{w:1024,h:128},scale:"1"}}},function(i){i.exports={frames:{"toilet_idle_0.png":{frame:{x:0,y:0,w:70,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:70,h:70},sourceSize:{w:70,h:70}},"toilet_idle_1.png":{frame:{x:70,y:0,w:70,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:70,h:70},sourceSize:{w:70,h:70}},"toilet_idle_2.png":{frame:{x:140,y:0,w:70,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:70,h:70},sourceSize:{w:70,h:70}},"toilet_idle_3.png":{frame:{x:210,y:0,w:70,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:70,h:70},sourceSize:{w:70,h:70}},"toilet_idle_4.png":{frame:{x:280,y:0,w:70,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:70,h:70},sourceSize:{w:70,h:70}},"toilet_idle_5.png":{frame:{x:350,y:0,w:70,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:70,h:70},sourceSize:{w:70,h:70}},"toilet_idle_6.png":{frame:{x:420,y:0,w:70,h:70},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:70,h:70},sourceSize:{w:70,h:70}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"toilet_idle.png",format:"RGBA8888",size:{w:490,h:70},scale:"1"}}},function(i){i.exports={frames:{"trunk_idle_0.png":{frame:{x:0,y:0,w:128,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:64},sourceSize:{w:128,h:64}},"trunk_idle_1.png":{frame:{x:128,y:0,w:128,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:64},sourceSize:{w:128,h:64}},"trunk_idle_2.png":{frame:{x:256,y:0,w:128,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:64},sourceSize:{w:128,h:64}},"trunk_idle_3.png":{frame:{x:384,y:0,w:128,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:64},sourceSize:{w:128,h:64}},"trunk_idle_4.png":{frame:{x:512,y:0,w:128,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:64},sourceSize:{w:128,h:64}},"trunk_idle_5.png":{frame:{x:640,y:0,w:128,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:64},sourceSize:{w:128,h:64}},"trunk_idle_6.png":{frame:{x:768,y:0,w:128,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:64},sourceSize:{w:128,h:64}},"trunk_idle_7.png":{frame:{x:896,y:0,w:128,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:64},sourceSize:{w:128,h:64}},"trunk_idle_8.png":{frame:{x:1024,y:0,w:128,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:64},sourceSize:{w:128,h:64}},"trunk_idle_9.png":{frame:{x:1152,y:0,w:128,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:64},sourceSize:{w:128,h:64}},"trunk_idle_10.png":{frame:{x:1280,y:0,w:128,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:64},sourceSize:{w:128,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"trunk_idle.png",format:"RGBA8888",size:{w:1408,h:64},scale:"1"}}},function(i){i.exports={frames:{"turtle_idle_0.png":{frame:{x:0,y:0,w:88,h:52},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:52},sourceSize:{w:88,h:52}},"turtle_idle_1.png":{frame:{x:88,y:0,w:88,h:52},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:52},sourceSize:{w:88,h:52}},"turtle_idle_2.png":{frame:{x:176,y:0,w:88,h:52},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:52},sourceSize:{w:88,h:52}},"turtle_idle_3.png":{frame:{x:264,y:0,w:88,h:52},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:52},sourceSize:{w:88,h:52}},"turtle_idle_4.png":{frame:{x:352,y:0,w:88,h:52},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:52},sourceSize:{w:88,h:52}},"turtle_idle_5.png":{frame:{x:440,y:0,w:88,h:52},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:52},sourceSize:{w:88,h:52}},"turtle_idle_6.png":{frame:{x:528,y:0,w:88,h:52},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:52},sourceSize:{w:88,h:52}},"turtle_idle_7.png":{frame:{x:616,y:0,w:88,h:52},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:88,h:52},sourceSize:{w:88,h:52}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"turtle_idle.png",format:"RGBA8888",size:{w:704,h:52},scale:"1"}}},function(i){i.exports={frames:{"unicorn_idle_0.png":{frame:{x:0,y:0,w:128,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:64},sourceSize:{w:128,h:64}},"unicorn_idle_1.png":{frame:{x:128,y:0,w:128,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:64},sourceSize:{w:128,h:64}},"unicorn_idle_2.png":{frame:{x:256,y:0,w:128,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:64},sourceSize:{w:128,h:64}},"unicorn_idle_3.png":{frame:{x:384,y:0,w:128,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:64},sourceSize:{w:128,h:64}},"unicorn_idle_4.png":{frame:{x:512,y:0,w:128,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:64},sourceSize:{w:128,h:64}},"unicorn_idle_5.png":{frame:{x:640,y:0,w:128,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:128,h:64},sourceSize:{w:128,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"unicorn_idle.png",format:"RGBA8888",size:{w:768,h:64},scale:"1"}}},function(i){i.exports={frames:{"unicorn_outline_idle_0.png":{frame:{x:0,y:0,w:130,h:66},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:130,h:66},sourceSize:{w:130,h:66}},"unicorn_outline_idle_1.png":{frame:{x:130,y:0,w:130,h:66},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:130,h:66},sourceSize:{w:130,h:66}},"unicorn_outline_idle_2.png":{frame:{x:260,y:0,w:130,h:66},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:130,h:66},sourceSize:{w:130,h:66}},"unicorn_outline_idle_3.png":{frame:{x:390,y:0,w:130,h:66},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:130,h:66},sourceSize:{w:130,h:66}},"unicorn_outline_idle_4.png":{frame:{x:520,y:0,w:130,h:66},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:130,h:66},sourceSize:{w:130,h:66}},"unicorn_outline_idle_5.png":{frame:{x:650,y:0,w:130,h:66},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:130,h:66},sourceSize:{w:130,h:66}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"unicorn_outline_idle.png",format:"RGBA8888",size:{w:780,h:66},scale:"1"}}},function(i){i.exports={alpha:{start:.8,end:.1},scale:{start:.2,end:.1,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:700,end:500,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.5,max:.5},blendMode:"normal",frequency:.008,emitterLifetime:.31,maxParticles:15,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:10}}},function(i){i.exports={alpha:{start:.8,end:.1},scale:{start:.2,end:.1,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:700,end:500,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.2,max:.2},blendMode:"normal",frequency:.008,emitterLifetime:.31,maxParticles:15,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:10}}},function(i){i.exports={alpha:{start:.8,end:.1},scale:{start:1,end:.05,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:500,end:100,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.2,max:.2},blendMode:"normal",frequency:.008,emitterLifetime:.31,maxParticles:5,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:10}}},function(i){i.exports={frames:{"coin_effect_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"coin_effect_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"coin_effect_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"coin_effect_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"coin_effect_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"coin_effect_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"coin_effect_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"coin_effect_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"coin_effect_8.png":{frame:{x:512,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"coin_effect_9.png":{frame:{x:576,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"coin_effect.png",format:"RGBA8888",size:{w:640,h:64},scale:"1"}}},function(i){i.exports={alpha:{start:.4,end:0},scale:{start:1,end:.1,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:500,end:1e3,minimumSpeedMultiplier:.99},acceleration:{x:-2e3,y:500},maxSpeed:0,startRotation:{min:0,max:365},noRotation:!0,rotationSpeed:{min:50,max:50},lifetime:{min:1,max:3},blendMode:"normal",frequency:.05,emitterLifetime:-1,maxParticles:100,pos:{x:0,y:0},addAtBack:!1,spawnType:"point"}},function(i){i.exports={frames:{"jump_effect_0.png":{frame:{x:0,y:0,w:80,h:44},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:80,h:44},sourceSize:{w:80,h:44}},"jump_effect_1.png":{frame:{x:80,y:0,w:80,h:44},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:80,h:44},sourceSize:{w:80,h:44}},"jump_effect_2.png":{frame:{x:160,y:0,w:80,h:44},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:80,h:44},sourceSize:{w:80,h:44}},"jump_effect_3.png":{frame:{x:240,y:0,w:80,h:44},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:80,h:44},sourceSize:{w:80,h:44}},"jump_effect_4.png":{frame:{x:320,y:0,w:80,h:44},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:80,h:44},sourceSize:{w:80,h:44}},"jump_effect_5.png":{frame:{x:400,y:0,w:80,h:44},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:80,h:44},sourceSize:{w:80,h:44}},"jump_effect_6.png":{frame:{x:480,y:0,w:80,h:44},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:80,h:44},sourceSize:{w:80,h:44}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"jump_effect.png",format:"RGBA8888",size:{w:560,h:44},scale:"1"}}},function(i){i.exports={frames:{"life_effect_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"life_effect_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"life_effect_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"life_effect_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"life_effect_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"life_effect_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"life_effect_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"life_effect_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"life_effect_8.png":{frame:{x:512,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"life_effect_9.png":{frame:{x:576,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"life_effect.png",format:"RGBA8888",size:{w:640,h:64},scale:"1"}}},function(i){i.exports={frames:{"magnet_0.png":{frame:{x:0,y:0,w:300,h:300},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:300,h:300},sourceSize:{w:300,h:300}},"magnet_1.png":{frame:{x:300,y:0,w:300,h:300},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:300,h:300},sourceSize:{w:300,h:300}},"magnet_2.png":{frame:{x:600,y:0,w:300,h:300},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:300,h:300},sourceSize:{w:300,h:300}},"magnet_3.png":{frame:{x:900,y:0,w:300,h:300},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:300,h:300},sourceSize:{w:300,h:300}},"magnet_4.png":{frame:{x:1200,y:0,w:300,h:300},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:300,h:300},sourceSize:{w:300,h:300}},"magnet_5.png":{frame:{x:1500,y:0,w:300,h:300},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:300,h:300},sourceSize:{w:300,h:300}},"magnet_6.png":{frame:{x:1800,y:0,w:300,h:300},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:300,h:300},sourceSize:{w:300,h:300}},"magnet_7.png":{frame:{x:2100,y:0,w:300,h:300},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:300,h:300},sourceSize:{w:300,h:300}},"magnet_8.png":{frame:{x:0,y:300,w:300,h:300},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:300,h:300},sourceSize:{w:300,h:300}},"magnet_9.png":{frame:{x:300,y:300,w:300,h:300},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:300,h:300},sourceSize:{w:300,h:300}},"magnet_10.png":{frame:{x:600,y:300,w:300,h:300},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:300,h:300},sourceSize:{w:300,h:300}},"magnet_11.png":{frame:{x:900,y:300,w:300,h:300},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:300,h:300},sourceSize:{w:300,h:300}},"magnet_12.png":{frame:{x:1200,y:300,w:300,h:300},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:300,h:300},sourceSize:{w:300,h:300}},"magnet_13.png":{frame:{x:1500,y:300,w:300,h:300},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:300,h:300},sourceSize:{w:300,h:300}},"magnet_14.png":{frame:{x:1800,y:300,w:300,h:300},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:300,h:300},sourceSize:{w:300,h:300}},"magnet_15.png":{frame:{x:2100,y:300,w:300,h:300},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:300,h:300},sourceSize:{w:300,h:300}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"magnet.png",format:"RGBA8888",size:{w:2400,h:600},scale:"1"}}},function(i){i.exports={alpha:{start:.8,end:0},scale:{start:1,end:1.5,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:300,end:50,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.6,max:.9},blendMode:"normal",frequency:.005,emitterLifetime:.31,maxParticles:30,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:10}}},function(i){i.exports={alpha:{start:.8,end:.1},scale:{start:.2,end:.1,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:700,end:500,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.5,max:.5},blendMode:"normal",frequency:.008,emitterLifetime:.31,maxParticles:60,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:10}}},function(i){i.exports={alpha:{start:.8,end:.1},scale:{start:3,end:2,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:500,end:200,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.7,max:1},blendMode:"normal",frequency:.008,emitterLifetime:.31,maxParticles:50,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:10}}},function(i){i.exports={frames:{"coin_0.png":{frame:{x:0,y:0,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"coin_1.png":{frame:{x:16,y:0,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"coin_2.png":{frame:{x:32,y:0,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"coin_3.png":{frame:{x:48,y:0,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"coin.png",format:"RGBA8888",size:{w:64,h:16},scale:"1"}}},function(i){i.exports={frames:{"ad_0.png":{frame:{x:0,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"ad_1.png":{frame:{x:64,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"ad_2.png":{frame:{x:128,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"ad_3.png":{frame:{x:192,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"ad_4.png":{frame:{x:256,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"ad_5.png":{frame:{x:320,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"ad_6.png":{frame:{x:384,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"ad_7.png":{frame:{x:448,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"ad_8.png":{frame:{x:512,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"ad_9.png":{frame:{x:576,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"ad_10.png":{frame:{x:640,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"ad_11.png":{frame:{x:704,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"ad_12.png":{frame:{x:768,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"ad_13.png":{frame:{x:832,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"ad_14.png":{frame:{x:896,y:0,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"ad.png",format:"RGBA8888",size:{w:960,h:64},scale:"1"}}},function(i){i.exports={frames:{"selected_0.png":{frame:{x:0,y:0,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_1.png":{frame:{x:200,y:0,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_2.png":{frame:{x:400,y:0,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_3.png":{frame:{x:600,y:0,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_4.png":{frame:{x:800,y:0,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_5.png":{frame:{x:1e3,y:0,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_6.png":{frame:{x:1200,y:0,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_7.png":{frame:{x:1400,y:0,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_8.png":{frame:{x:1600,y:0,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_9.png":{frame:{x:1800,y:0,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_10.png":{frame:{x:2e3,y:0,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_11.png":{frame:{x:0,y:200,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_12.png":{frame:{x:200,y:200,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_13.png":{frame:{x:400,y:200,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_14.png":{frame:{x:600,y:200,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_15.png":{frame:{x:800,y:200,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_16.png":{frame:{x:1e3,y:200,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_17.png":{frame:{x:1200,y:200,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_18.png":{frame:{x:1400,y:200,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_19.png":{frame:{x:1600,y:200,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_20.png":{frame:{x:1800,y:200,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}},"selected_21.png":{frame:{x:2e3,y:200,w:200,h:200},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:200,h:200},sourceSize:{w:200,h:200}}},data:{speed:500},meta:{app:"http://zip-lab.co.kr",version:"0.1",image:"selected.png",format:"RGBA8888",size:{w:2200,h:400},scale:"1"}}},function(i){!function webpackMissingModule(){var i=new Error("Cannot find module './image/uncompress/block_test.json'");throw i.code="MODULE_NOT_FOUND",i}()},function(i){!function webpackMissingModule(){var i=new Error("Cannot find module './image/uncompress/data/character.json'");throw i.code="MODULE_NOT_FOUND",i}()},function(i){!function webpackMissingModule(){var i=new Error("Cannot find module './image/uncompress/data/stage.json'");throw i.code="MODULE_NOT_FOUND",i}()},function(i,o,a){!function(i){"use strict";function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}function _defineProperty(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}function ownKeys(i,o){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(i);o&&(h=h.filter((function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable}))),a.push.apply(a,h)}return a}function _objectSpread2(i){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?ownKeys(Object(a),!0).forEach((function(o){_defineProperty(i,o,a[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(a,o))}))}return i}function leftPadding(i,o,a){var h,c="";if((i="number"==typeof i?String(i):i).length>o)return i;for(h=0;h<o;h+=1)c+=String(a);return(c+i).slice(-c.length)}function TimeCounter(){this.reset()}function EventEmitter(){this.events={}}TimeCounter.prototype.toString=function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["hours","minutes","seconds"],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;i=i||["hours","minutes","seconds"],o=o||":",a=a||2;var h,c=[];for(h=0;h<i.length;h+=1)void 0!==this[i[h]]&&("secondTenths"===i[h]?c.push(this[i[h]]):c.push(leftPadding(this[i[h]],a,"0")));return c.join(o)},TimeCounter.prototype.reset=function(){this.secondTenths=0,this.seconds=0,this.minutes=0,this.hours=0,this.days=0},EventEmitter.prototype.on=function(i,o){var a=this;return Array.isArray(this.events[i])||(this.events[i]=[]),this.events[i].push(o),function(){return a.removeListener(i,o)}},EventEmitter.prototype.removeListener=function(i,o){if(Array.isArray(this.events[i])){var a=this.events[i].indexOf(o);a>-1&&this.events[i].splice(a,1)}},EventEmitter.prototype.emit=function(i){for(var o=this,a=arguments.length,h=new Array(a>1?a-1:0),c=1;c<a;c++)h[c-1]=arguments[c];Array.isArray(this.events[i])&&this.events[i].forEach((function(i){return i.apply(o,h)}))};var o="seconds",a="hours",h="days",c=["secondTenths",o,"minutes",a,h],l={secondTenths:100,seconds:1e3,minutes:6e4,hours:36e5,days:864e5},m={secondTenths:10,seconds:60,minutes:60,hours:24};function mod(i,o){return(i%o+o)%o}function Timer(){var i,g,_,x,S,R,k,j,X,Y,q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Z=new TimeCounter,$=new TimeCounter,ee=new EventEmitter,te=!1,re=!1,ie={},ne={detail:{timer:this}};function updateCounters(i,o){$[i]=o,Z[i]=i===h?o:o>=0?mod(o,m[i]):m[i]-mod(o,m[i])}function updateDays(i){return updateUnitByPrecision(i,h)}function updateHours(i){return updateUnitByPrecision(i,a)}function updateMinutes(i){return updateUnitByPrecision(i,"minutes")}function updateSeconds(i){return updateUnitByPrecision(i,o)}function updateSecondTenths(i){return updateUnitByPrecision(i,"secondTenths")}function updateUnitByPrecision(i,o){var a=$[o];return updateCounters(o,calculateIntegerUnitQuotient(i,l[o])),$[o]!==a}function stopTimerAndResetCounters(){stopTimer(),resetCounters()}function stopTimer(){clearInterval(i),i=void 0,te=!1,re=!1}function setParamsAndStartTimer(i){isPaused()?(X=calculateStartingDate(),R=setTarget(S.target)):setParams(i),startTimer()}function startTimer(){var o=l[g];isTargetAchieved(roundTimestamp(Date.now()))||(i=setInterval(updateTimerAndDispatchEvents,o),te=!0,re=!1)}function calculateStartingDate(){return roundTimestamp(Date.now())-$.secondTenths*l.secondTenths*_}function updateTimerAndDispatchEvents(){var i=roundTimestamp(Date.now());dispatchEvents(updateTimer()),x(ne.detail.timer),isTargetAchieved(i)&&(stop(),dispatchEvent("targetAchieved",ne))}function updateTimer(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:roundTimestamp(Date.now()),c=_>0?i-X:X-i,l={};return l.secondTenths=updateSecondTenths(c),l[o]=updateSeconds(c),l.minutes=updateMinutes(c),l[a]=updateHours(c),l[h]=updateDays(c),l}function roundTimestamp(i){return Math.floor(i/l[g])*l[g]}function dispatchEvents(i){i.secondTenths&&dispatchEvent("secondTenthsUpdated",ne),i[o]&&dispatchEvent("secondsUpdated",ne),i.minutes&&dispatchEvent("minutesUpdated",ne),i[a]&&dispatchEvent("hoursUpdated",ne),i[h]&&dispatchEvent("daysUpdated",ne)}function isTargetAchieved(i){return R instanceof Array&&i>=Y}function resetCounters(){Z.reset(),$.reset()}function setParams(i){g=checkPrecision((i=i||{}).precision),x="function"==typeof i.callback?i.callback:function(){},j=!0===i.countdown,_=!0===j?-1:1,"object"===_typeof(i.startValues)?setStartValues(i.startValues):k=null,X=calculateStartingDate(),updateTimer(),"object"===_typeof(i.target)?R=setTarget(i.target):j?(i.target={seconds:0},R=setTarget(i.target)):R=null,ie={precision:g,callback:x,countdown:"object"===_typeof(i)&&!0===i.countdown,target:R,startValues:k},S=i}function checkPrecision(i){if(!isValidInputValue(i="string"==typeof i?i:o))throw new Error("Error in precision parameter: ".concat(i," is not a valid value"));return i}function isValidInputValue(i){return c.indexOf(i)>=0}function configInputValues(i){var o;if("object"===_typeof(i))if(i instanceof Array){if(5!==i.length)throw new Error("Array size not valid");o=i}else{for(var a in i)if(c.indexOf(a)<0)throw new Error("Error in startValues or target parameter: ".concat(a," is not a valid input value"));o=[i.secondTenths||0,i.seconds||0,i.minutes||0,i.hours||0,i.days||0]}var h=o[0],l=o[1]+calculateIntegerUnitQuotient(h,10),m=o[2]+calculateIntegerUnitQuotient(l,60),g=o[3]+calculateIntegerUnitQuotient(m,60),_=o[4]+calculateIntegerUnitQuotient(g,24);return o[0]=h%10,o[1]=l%60,o[2]=m%60,o[3]=g%24,o[4]=_,o}function calculateIntegerUnitQuotient(i,o){var a=i/o;return a<0?Math.ceil(a):Math.floor(a)}function setTarget(i){if(i){var o=calculateTotalCounterFromValues(R=configInputValues(i));return Y=X+o.secondTenths*l.secondTenths*_,R}}function setStartValues(i){k=configInputValues(i),Z.secondTenths=k[0],Z.seconds=k[1],Z.minutes=k[2],Z.hours=k[3],Z.days=k[4],$=calculateTotalCounterFromValues(k,$)}function calculateTotalCounterFromValues(i,o){var a=o||{};return a.days=i[4],a.hours=24*a.days+i[3],a.minutes=60*a.hours+i[2],a.seconds=60*a.minutes+i[1],a.secondTenths=10*a.seconds+i[[0]],a}function stop(){stopTimerAndResetCounters(),dispatchEvent("stopped",ne)}function reset(){stopTimerAndResetCounters(),setParamsAndStartTimer(S),dispatchEvent("reset",ne)}function start(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i=_objectSpread2(_objectSpread2({},q),i),isRunning()||(setParamsAndStartTimer(i),dispatchEvent("started",ne))}function pause(){stopTimer(),re=!0,dispatchEvent("paused",ne)}function addEventListener(i,o){ee.on(i,o)}function removeEventListener(i,o){ee.removeListener(i,o)}function dispatchEvent(i,o){ee.emit(i,o)}function isRunning(){return te}function isPaused(){return re}function getTimeValues(){return Z}function getTotalTimeValues(){return $}function getConfig(){return ie}setParams(q),void 0!==this&&(this.start=start,this.pause=pause,this.stop=stop,this.reset=reset,this.isRunning=isRunning,this.isPaused=isPaused,this.getTimeValues=getTimeValues,this.getTotalTimeValues=getTotalTimeValues,this.getConfig=getConfig,this.addEventListener=addEventListener,this.on=addEventListener,this.removeEventListener=removeEventListener,this.off=removeEventListener)}i.Timer=Timer,i.default=Timer,Object.defineProperty(i,"__esModule",{value:!0})}(o)},function(i,o,a){var h={"./image/compress/button/again.png":101,"./image/compress/button/black-clear.png":102,"./image/compress/button/black-hide.png":103,"./image/compress/button/black.png":104,"./image/compress/button/character.png":105,"./image/compress/button/continue.png":106,"./image/compress/button/exit.png":107,"./image/compress/button/green-clear.png":108,"./image/compress/button/green.png":109,"./image/compress/button/home.png":110,"./image/compress/button/infinity.png":111,"./image/compress/button/leftArrow.png":112,"./image/compress/button/long-left.png":113,"./image/compress/button/long-right.png":114,"./image/compress/button/music-disable.png":115,"./image/compress/button/music-enable.png":116,"./image/compress/button/next.png":117,"./image/compress/button/orange-clear.png":118,"./image/compress/button/orange.png":119,"./image/compress/button/pause-game.png":120,"./image/compress/button/play-game.png":121,"./image/compress/button/play.png":122,"./image/compress/button/red-clear.png":123,"./image/compress/button/red-hide.png":124,"./image/compress/button/red.png":125,"./image/compress/button/restore.png":126,"./image/compress/button/rightArrow.png":127,"./image/compress/button/shop.png":128,"./image/compress/button/sound-disable.png":129,"./image/compress/button/sound-enable.png":130,"./image/compress/button/stage.png":131,"./image/compress/button/x2.png":132,"./image/compress/button/yellow.png":133,"./image/compress/character/baren_idle":0,"./image/compress/character/baren_idle.json":0,"./image/compress/character/baren_idle.png":134,"./image/compress/character/bat_idle":1,"./image/compress/character/bat_idle.json":1,"./image/compress/character/bat_idle.png":135,"./image/compress/character/bird_idle":2,"./image/compress/character/bird_idle.json":2,"./image/compress/character/bird_idle.png":136,"./image/compress/character/bunny_idle":3,"./image/compress/character/bunny_idle.json":3,"./image/compress/character/bunny_idle.png":137,"./image/compress/character/chameleon_idle":4,"./image/compress/character/chameleon_idle.json":4,"./image/compress/character/chameleon_idle.png":138,"./image/compress/character/chicken_idle":5,"./image/compress/character/chicken_idle.json":5,"./image/compress/character/chicken_idle.png":139,"./image/compress/character/coffee_idle":6,"./image/compress/character/coffee_idle.json":6,"./image/compress/character/coffee_idle.png":140,"./image/compress/character/cola_idle":7,"./image/compress/character/cola_idle.json":7,"./image/compress/character/cola_idle.png":141,"./image/compress/character/desert_idle":8,"./image/compress/character/desert_idle.json":8,"./image/compress/character/desert_idle.png":142,"./image/compress/character/dragon_idle":9,"./image/compress/character/dragon_idle.json":9,"./image/compress/character/dragon_idle.png":143,"./image/compress/character/droppop_idle":10,"./image/compress/character/droppop_idle.json":10,"./image/compress/character/droppop_idle.png":144,"./image/compress/character/flag_argentina_idle":11,"./image/compress/character/flag_argentina_idle.json":11,"./image/compress/character/flag_argentina_idle.png":145,"./image/compress/character/flag_australia_idle":12,"./image/compress/character/flag_australia_idle.json":12,"./image/compress/character/flag_australia_idle.png":146,"./image/compress/character/flag_austria_idle":13,"./image/compress/character/flag_austria_idle.json":13,"./image/compress/character/flag_austria_idle.png":147,"./image/compress/character/flag_belgium_idle":14,"./image/compress/character/flag_belgium_idle.json":14,"./image/compress/character/flag_belgium_idle.png":148,"./image/compress/character/flag_brazil_idle":15,"./image/compress/character/flag_brazil_idle.json":15,"./image/compress/character/flag_brazil_idle.png":149,"./image/compress/character/flag_canada_idle":16,"./image/compress/character/flag_canada_idle.json":16,"./image/compress/character/flag_canada_idle.png":150,"./image/compress/character/flag_chile_idle":17,"./image/compress/character/flag_chile_idle.json":17,"./image/compress/character/flag_chile_idle.png":151,"./image/compress/character/flag_china_idle":18,"./image/compress/character/flag_china_idle.json":18,"./image/compress/character/flag_china_idle.png":152,"./image/compress/character/flag_colombia_idle":19,"./image/compress/character/flag_colombia_idle.json":19,"./image/compress/character/flag_colombia_idle.png":153,"./image/compress/character/flag_czech_republic_idle":20,"./image/compress/character/flag_czech_republic_idle.json":20,"./image/compress/character/flag_czech_republic_idle.png":154,"./image/compress/character/flag_denmark_idle":21,"./image/compress/character/flag_denmark_idle.json":21,"./image/compress/character/flag_denmark_idle.png":155,"./image/compress/character/flag_estonia_idle":22,"./image/compress/character/flag_estonia_idle.json":22,"./image/compress/character/flag_estonia_idle.png":156,"./image/compress/character/flag_finland_idle":23,"./image/compress/character/flag_finland_idle.json":23,"./image/compress/character/flag_finland_idle.png":157,"./image/compress/character/flag_france_idle":24,"./image/compress/character/flag_france_idle.json":24,"./image/compress/character/flag_france_idle.png":158,"./image/compress/character/flag_germany_idle":25,"./image/compress/character/flag_germany_idle.json":25,"./image/compress/character/flag_germany_idle.png":159,"./image/compress/character/flag_greece_idle":26,"./image/compress/character/flag_greece_idle.json":26,"./image/compress/character/flag_greece_idle.png":160,"./image/compress/character/flag_hungary_idle":27,"./image/compress/character/flag_hungary_idle.json":27,"./image/compress/character/flag_hungary_idle.png":161,"./image/compress/character/flag_iceland_idle":28,"./image/compress/character/flag_iceland_idle.json":28,"./image/compress/character/flag_iceland_idle.png":162,"./image/compress/character/flag_india_idle":29,"./image/compress/character/flag_india_idle.json":29,"./image/compress/character/flag_india_idle.png":163,"./image/compress/character/flag_indonesia_idle":30,"./image/compress/character/flag_indonesia_idle.json":30,"./image/compress/character/flag_indonesia_idle.png":164,"./image/compress/character/flag_iran_idle":31,"./image/compress/character/flag_iran_idle.json":31,"./image/compress/character/flag_iran_idle.png":165,"./image/compress/character/flag_ireland_idle":32,"./image/compress/character/flag_ireland_idle.json":32,"./image/compress/character/flag_ireland_idle.png":166,"./image/compress/character/flag_israel_idle":33,"./image/compress/character/flag_israel_idle.json":33,"./image/compress/character/flag_israel_idle.png":167,"./image/compress/character/flag_italy_idle":34,"./image/compress/character/flag_italy_idle.json":34,"./image/compress/character/flag_italy_idle.png":168,"./image/compress/character/flag_japan_idle":35,"./image/compress/character/flag_japan_idle.json":35,"./image/compress/character/flag_japan_idle.png":169,"./image/compress/character/flag_korea_idle":36,"./image/compress/character/flag_korea_idle.json":36,"./image/compress/character/flag_korea_idle.png":170,"./image/compress/character/flag_luxembourg_idle":37,"./image/compress/character/flag_luxembourg_idle.json":37,"./image/compress/character/flag_luxembourg_idle.png":171,"./image/compress/character/flag_mexico_idle":38,"./image/compress/character/flag_mexico_idle.json":38,"./image/compress/character/flag_mexico_idle.png":172,"./image/compress/character/flag_netherlands_idle":39,"./image/compress/character/flag_netherlands_idle.json":39,"./image/compress/character/flag_netherlands_idle.png":173,"./image/compress/character/flag_nigeria_idle":40,"./image/compress/character/flag_nigeria_idle.json":40,"./image/compress/character/flag_nigeria_idle.png":174,"./image/compress/character/flag_norway_idle":41,"./image/compress/character/flag_norway_idle.json":41,"./image/compress/character/flag_norway_idle.png":175,"./image/compress/character/flag_poland_idle":42,"./image/compress/character/flag_poland_idle.json":42,"./image/compress/character/flag_poland_idle.png":176,"./image/compress/character/flag_portugal_idle":43,"./image/compress/character/flag_portugal_idle.json":43,"./image/compress/character/flag_portugal_idle.png":177,"./image/compress/character/flag_republic_of_south_africa_idle":44,"./image/compress/character/flag_republic_of_south_africa_idle.json":44,"./image/compress/character/flag_republic_of_south_africa_idle.png":178,"./image/compress/character/flag_russia_idle":45,"./image/compress/character/flag_russia_idle.json":45,"./image/compress/character/flag_russia_idle.png":179,"./image/compress/character/flag_saudi_arabia_idle":46,"./image/compress/character/flag_saudi_arabia_idle.json":46,"./image/compress/character/flag_saudi_arabia_idle.png":180,"./image/compress/character/flag_slovakia_idle":47,"./image/compress/character/flag_slovakia_idle.json":47,"./image/compress/character/flag_slovakia_idle.png":181,"./image/compress/character/flag_slovenia_idle":48,"./image/compress/character/flag_slovenia_idle.json":48,"./image/compress/character/flag_slovenia_idle.png":182,"./image/compress/character/flag_spain_idle":49,"./image/compress/character/flag_spain_idle.json":49,"./image/compress/character/flag_spain_idle.png":183,"./image/compress/character/flag_sweden_idle":50,"./image/compress/character/flag_sweden_idle.json":50,"./image/compress/character/flag_sweden_idle.png":184,"./image/compress/character/flag_switzerland_idle":51,"./image/compress/character/flag_switzerland_idle.json":51,"./image/compress/character/flag_switzerland_idle.png":185,"./image/compress/character/flag_thailand_idle":52,"./image/compress/character/flag_thailand_idle.json":52,"./image/compress/character/flag_thailand_idle.png":186,"./image/compress/character/flag_turkey_idle":53,"./image/compress/character/flag_turkey_idle.json":53,"./image/compress/character/flag_turkey_idle.png":187,"./image/compress/character/flag_united_arab_emirates_idle":54,"./image/compress/character/flag_united_arab_emirates_idle.json":54,"./image/compress/character/flag_united_arab_emirates_idle.png":188,"./image/compress/character/flag_united_kingdoms_idle":55,"./image/compress/character/flag_united_kingdoms_idle.json":55,"./image/compress/character/flag_united_kingdoms_idle.png":189,"./image/compress/character/flag_united_states_of_america_idle":56,"./image/compress/character/flag_united_states_of_america_idle.json":56,"./image/compress/character/flag_united_states_of_america_idle.png":190,"./image/compress/character/forest_idle":57,"./image/compress/character/forest_idle.json":57,"./image/compress/character/forest_idle.png":191,"./image/compress/character/ghost_idle":58,"./image/compress/character/ghost_idle.json":58,"./image/compress/character/ghost_idle.png":192,"./image/compress/character/hamburger_idle":59,"./image/compress/character/hamburger_idle.json":59,"./image/compress/character/hamburger_idle.png":193,"./image/compress/character/ice_idle":60,"./image/compress/character/ice_idle.json":60,"./image/compress/character/ice_idle.png":194,"./image/compress/character/lava_idle":61,"./image/compress/character/lava_idle.json":61,"./image/compress/character/lava_idle.png":195,"./image/compress/character/marlin_idle":62,"./image/compress/character/marlin_idle.json":62,"./image/compress/character/marlin_idle.png":196,"./image/compress/character/missile_idle":63,"./image/compress/character/missile_idle.json":63,"./image/compress/character/missile_idle.png":197,"./image/compress/character/ocean_idle":64,"./image/compress/character/ocean_idle.json":64,"./image/compress/character/ocean_idle.png":198,"./image/compress/character/paperplane_idle":65,"./image/compress/character/paperplane_idle.json":65,"./image/compress/character/paperplane_idle.png":199,"./image/compress/character/penguin_idle":66,"./image/compress/character/penguin_idle.json":66,"./image/compress/character/penguin_idle.png":200,"./image/compress/character/pigeon_idle":67,"./image/compress/character/pigeon_idle.json":67,"./image/compress/character/pigeon_idle.png":201,"./image/compress/character/pizza_idle":68,"./image/compress/character/pizza_idle.json":68,"./image/compress/character/pizza_idle.png":202,"./image/compress/character/plant_idle":69,"./image/compress/character/plant_idle.json":69,"./image/compress/character/plant_idle.png":203,"./image/compress/character/radish_idle":70,"./image/compress/character/radish_idle.json":70,"./image/compress/character/radish_idle.png":204,"./image/compress/character/rino_idle":71,"./image/compress/character/rino_idle.json":71,"./image/compress/character/rino_idle.png":205,"./image/compress/character/shuriken_idle":72,"./image/compress/character/shuriken_idle.json":72,"./image/compress/character/shuriken_idle.png":206,"./image/compress/character/slime_idle":73,"./image/compress/character/slime_idle.json":73,"./image/compress/character/slime_idle.png":207,"./image/compress/character/snail_idle":74,"./image/compress/character/snail_idle.json":74,"./image/compress/character/snail_idle.png":208,"./image/compress/character/sword_idle":75,"./image/compress/character/sword_idle.json":75,"./image/compress/character/sword_idle.png":209,"./image/compress/character/terran_idle":76,"./image/compress/character/terran_idle.json":76,"./image/compress/character/terran_idle.png":210,"./image/compress/character/toilet_idle":77,"./image/compress/character/toilet_idle.json":77,"./image/compress/character/toilet_idle.png":211,"./image/compress/character/trunk_idle":78,"./image/compress/character/trunk_idle.json":78,"./image/compress/character/trunk_idle.png":212,"./image/compress/character/turtle_idle":79,"./image/compress/character/turtle_idle.json":79,"./image/compress/character/turtle_idle.png":213,"./image/compress/character/unicorn_idle":80,"./image/compress/character/unicorn_idle.json":80,"./image/compress/character/unicorn_idle.png":214,"./image/compress/character/unicorn_outline_idle":81,"./image/compress/character/unicorn_outline_idle.json":81,"./image/compress/character/unicorn_outline_idle.png":215,"./image/compress/clear/black.png":216,"./image/compress/clear/green.png":217,"./image/compress/clear/orange.png":218,"./image/compress/clear/red.png":219,"./image/compress/effect/block_break":82,"./image/compress/effect/block_break.json":82,"./image/compress/effect/block_hit":83,"./image/compress/effect/block_hit.json":83,"./image/compress/effect/block_touch":84,"./image/compress/effect/block_touch.json":84,"./image/compress/effect/coin_effect":85,"./image/compress/effect/coin_effect.json":85,"./image/compress/effect/coin_effect.png":220,"./image/compress/effect/collision_particle":86,"./image/compress/effect/collision_particle.json":86,"./image/compress/effect/jump_effect":87,"./image/compress/effect/jump_effect.json":87,"./image/compress/effect/jump_effect.png":221,"./image/compress/effect/life_effect":88,"./image/compress/effect/life_effect.json":88,"./image/compress/effect/life_effect.png":222,"./image/compress/effect/magnet":89,"./image/compress/effect/magnet.json":89,"./image/compress/effect/magnet.png":223,"./image/compress/effect/star_upgrade":90,"./image/compress/effect/star_upgrade.json":90,"./image/compress/effect/unlock_effect":91,"./image/compress/effect/unlock_effect.json":91,"./image/compress/effect/x2_effect":92,"./image/compress/effect/x2_effect.json":92,"./image/compress/game/background1.png":224,"./image/compress/game/background2.png":225,"./image/compress/game/block.png":226,"./image/compress/game/coin":93,"./image/compress/game/coin.json":93,"./image/compress/game/coin.png":227,"./image/compress/game/gradient.png":228,"./image/compress/game/star.png":229,"./image/compress/image.tar":230,"./image/compress/option/background.png":231,"./image/compress/option/center-normal.png":232,"./image/compress/option/center-selected.png":233,"./image/compress/option/left-normal.png":234,"./image/compress/option/left-selected.png":235,"./image/compress/option/right-normal.png":236,"./image/compress/option/right-selected.png":237,"./image/compress/option/ui-background.png":238,"./image/compress/option/volume-background.png":239,"./image/compress/shop/ad_remove.png":240,"./image/compress/shop/all_ad_remove.png":241,"./image/compress/shop/background.png":242,"./image/compress/shop/chameleon.png":243,"./image/compress/shop/double_ad_remove.png":244,"./image/compress/shop/dragon.png":245,"./image/compress/shop/free_ruby.png":246,"./image/compress/shop/item-background1.png":247,"./image/compress/shop/item-background2.png":248,"./image/compress/shop/missile.png":249,"./image/compress/shop/ruby_.png":250,"./image/compress/shop/ruby_10000.png":251,"./image/compress/shop/ruby_100000.png":252,"./image/compress/shop/ruby_2000.png":253,"./image/compress/shop/ruby_22000.png":254,"./image/compress/shop/ruby_4400.png":255,"./image/compress/shop/ruby_49000.png":256,"./image/compress/shop/toilet.png":257,"./image/compress/textbox/black.png":258,"./image/compress/textbox/blue.png":259,"./image/compress/textbox/green.png":260,"./image/compress/textbox/orange.png":261,"./image/compress/textbox/pink.png":262,"./image/compress/textbox/red.png":263,"./image/compress/title/background.png":264,"./image/compress/title/earth.png":265,"./image/compress/title/glow.png":266,"./image/compress/title/part1.png":267,"./image/compress/title/part2.png":268,"./image/compress/title/part3.png":269,"./image/compress/title/part4.png":270,"./image/compress/title/title.png":271,"./image/compress/ui/ad":94,"./image/compress/ui/ad.json":94,"./image/compress/ui/ad.png":272,"./image/compress/ui/bar_empty.png":273,"./image/compress/ui/bar_fill.png":274,"./image/compress/ui/damage.png":275,"./image/compress/ui/game-over.png":276,"./image/compress/ui/jump.png":277,"./image/compress/ui/life.png":278,"./image/compress/ui/lock.png":279,"./image/compress/ui/luck.png":280,"./image/compress/ui/luck_.png":281,"./image/compress/ui/magnet.png":282,"./image/compress/ui/magnet_.png":283,"./image/compress/ui/mission-fail.png":284,"./image/compress/ui/mission-success.png":285,"./image/compress/ui/mission.png":286,"./image/compress/ui/my-coin.png":287,"./image/compress/ui/one.png":288,"./image/compress/ui/result-background.png":289,"./image/compress/ui/result-gray.png":290,"./image/compress/ui/rocket.png":291,"./image/compress/ui/rocket_.png":292,"./image/compress/ui/selected":95,"./image/compress/ui/selected.json":95,"./image/compress/ui/selected.png":293,"./image/compress/ui/speed.png":294,"./image/compress/ui/star.png":295,"./image/compress/ui/star_empty.png":296,"./image/compress/ui/thumbs.db":297,"./image/compress/ui/upgrade-background.png":298,"./image/compress/ui/upgrade-gradient.png":299,"./image/uncompress/block_test":96,"./image/uncompress/block_test.json":96,"./image/uncompress/data/character":97,"./image/uncompress/data/character.json":97,"./image/uncompress/data/stage":98,"./image/uncompress/data/stage.json":98,"./image/uncompress/font/bebasneue.fnt":300,"./image/uncompress/font/bebasneue.png":301,"./image/uncompress/font/bebasneue@x4.fnt":302,"./image/uncompress/font/bebasneue@x4.png":303,"./image/uncompress/font/borsok-outline-blue@x4.fnt":304,"./image/uncompress/font/borsok-outline-blue@x4.png":305,"./image/uncompress/font/borsok-shadow@x4.fnt":306,"./image/uncompress/font/borsok-shadow@x4.png":307,"./image/uncompress/font/borsok-shallow-shadow@x4.fnt":308,"./image/uncompress/font/borsok-shallow-shadow@x4.png":309,"./image/uncompress/font/borsok@x4.fnt":310,"./image/uncompress/font/borsok@x4.png":311,"./sound/background-game.mp3":312,"./sound/background-title.mp3":313,"./sound/booster.mp3":314,"./sound/clear-jingle.mp3":315,"./sound/clear.mp3":316,"./sound/click.mp3":317,"./sound/combo.mp3":318,"./sound/confirm.mp3":319,"./sound/fail-jingle.mp3":320,"./sound/fail.mp3":321,"./sound/gem.mp3":322,"./sound/hit_1.mp3":323,"./sound/hit_2.mp3":324,"./sound/jump.mp3":325,"./sound/life.mp3":326};function webpackContext(i){var o=webpackContextResolve(i);return a(o)}function webpackContextResolve(i){if(!a.o(h,i)){var o=new Error("Cannot find module '"+i+"'");throw o.code="MODULE_NOT_FOUND",o}return h[i]}webpackContext.keys=function webpackContextKeys(){return Object.keys(h)},webpackContext.resolve=webpackContextResolve,i.exports=webpackContext,webpackContext.id=100},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o,a){i.exports=a.p+"../source/image/compress/image.tar"},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '\0' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o){throw new Error("Module parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.\n(Source code omitted for this binary file)")},function(i,o,a){i.exports=a.p+"../source/image/uncompress/font/bebasneue.fnt"},function(i,o,a){i.exports=a.p+"../source/image/uncompress/font/bebasneue.png"},function(i,o,a){i.exports=a.p+"../source/image/uncompress/font/bebasneue@x4.fnt"},function(i,o,a){i.exports=a.p+"../source/image/uncompress/font/bebasneue@x4.png"},function(i,o,a){i.exports=a.p+"../source/image/uncompress/font/borsok-outline-blue@x4.fnt"},function(i,o,a){i.exports=a.p+"../source/image/uncompress/font/borsok-outline-blue@x4.png"},function(i,o,a){i.exports=a.p+"../source/image/uncompress/font/borsok-shadow@x4.fnt"},function(i,o,a){i.exports=a.p+"../source/image/uncompress/font/borsok-shadow@x4.png"},function(i,o,a){i.exports=a.p+"../source/image/uncompress/font/borsok-shallow-shadow@x4.fnt"},function(i,o,a){i.exports=a.p+"../source/image/uncompress/font/borsok-shallow-shadow@x4.png"},function(i,o,a){i.exports=a.p+"../source/image/uncompress/font/borsok@x4.fnt"},function(i,o,a){i.exports=a.p+"../source/image/uncompress/font/borsok@x4.png"},function(i,o,a){i.exports=a.p+"../source/sound/background-game.mp3"},function(i,o,a){i.exports=a.p+"../source/sound/background-title.mp3"},function(i,o,a){i.exports=a.p+"../source/sound/booster.mp3"},function(i,o,a){i.exports=a.p+"../source/sound/clear-jingle.mp3"},function(i,o,a){i.exports=a.p+"../source/sound/clear.mp3"},function(i,o,a){i.exports=a.p+"../source/sound/click.mp3"},function(i,o,a){i.exports=a.p+"../source/sound/combo.mp3"},function(i,o,a){i.exports=a.p+"../source/sound/confirm.mp3"},function(i,o,a){i.exports=a.p+"../source/sound/fail-jingle.mp3"},function(i,o,a){i.exports=a.p+"../source/sound/fail.mp3"},function(i,o,a){i.exports=a.p+"../source/sound/gem.mp3"},function(i,o,a){i.exports=a.p+"../source/sound/hit_1.mp3"},function(i,o,a){i.exports=a.p+"../source/sound/hit_2.mp3"},function(i,o,a){i.exports=a.p+"../source/sound/jump.mp3"},function(i,o,a){i.exports=a.p+"../source/sound/life.mp3"},function(i,o,a){"use strict";function _typeof2(i){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof2(i){return typeof i}:function _typeof2(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}a.r(o);var h=function(i){var o={};function __webpack_require__(a){if(o[a])return o[a].exports;var h=o[a]={i:a,l:!1,exports:{}};return i[a].call(h.exports,h,h.exports,__webpack_require__),h.l=!0,h.exports}return __webpack_require__.m=i,__webpack_require__.c=o,__webpack_require__.d=function(i,o,a){__webpack_require__.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:a})},__webpack_require__.r=function(i){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},__webpack_require__.t=function(i,o){if(1&o&&(i=__webpack_require__(i)),8&o)return i;if(4&o&&"object"==_typeof2(i)&&i&&i.__esModule)return i;var a=Object.create(null);if(__webpack_require__.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:i}),2&o&&"string"!=typeof i)for(var h in i)__webpack_require__.d(a,h,function(o){return i[o]}.bind(null,h));return a},__webpack_require__.n=function(i){var o=i&&i.__esModule?function getDefault(){return i.default}:function getModuleExports(){return i};return __webpack_require__.d(o,"a",o),o},__webpack_require__.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=18)}([function(i,o,a){a.r(o),a.d(o,"BaseTextureCache",(function(){return ee})),a.d(o,"CanvasRenderTarget",(function(){return te})),a.d(o,"DATA_URI",(function(){return ie})),a.d(o,"ProgramCache",(function(){return Z})),a.d(o,"TextureCache",(function(){return $})),a.d(o,"clearTextureCache",(function(){return clearTextureCache})),a.d(o,"correctBlendMode",(function(){return correctBlendMode})),a.d(o,"createIndicesForQuads",(function(){return createIndicesForQuads})),a.d(o,"decomposeDataUri",(function(){return decomposeDataUri})),a.d(o,"deprecation",(function(){return deprecation})),a.d(o,"destroyTextureCache",(function(){return destroyTextureCache})),a.d(o,"determineCrossOrigin",(function(){return determineCrossOrigin})),a.d(o,"getBufferType",(function(){return getBufferType})),a.d(o,"getResolutionOfUrl",(function(){return getResolutionOfUrl})),a.d(o,"hex2rgb",(function(){return hex2rgb})),a.d(o,"hex2string",(function(){return hex2string})),a.d(o,"interleaveTypedArrays",(function(){return interleaveTypedArrays})),a.d(o,"isPow2",(function(){return isPow2})),a.d(o,"isWebGLSupported",(function(){return isWebGLSupported})),a.d(o,"log2",(function(){return log2})),a.d(o,"nextPow2",(function(){return nextPow2})),a.d(o,"premultiplyBlendMode",(function(){return j})),a.d(o,"premultiplyRgba",(function(){return premultiplyRgba})),a.d(o,"premultiplyTint",(function(){return premultiplyTint})),a.d(o,"premultiplyTintToRgba",(function(){return premultiplyTintToRgba})),a.d(o,"removeItems",(function(){return removeItems})),a.d(o,"rgb2hex",(function(){return rgb2hex})),a.d(o,"sayHello",(function(){return sayHello})),a.d(o,"sign",(function(){return sign})),a.d(o,"skipHello",(function(){return skipHello})),a.d(o,"string2hex",(function(){return string2hex})),a.d(o,"trimCanvas",(function(){return trimCanvas})),a.d(o,"uid",(function(){return uid}));var h=a(5);a.d(o,"isMobile",(function(){return h.a}));var c=a(20),l=a.n(c);a.d(o,"EventEmitter",(function(){return l.a}));var m=a(21),g=a.n(m);a.d(o,"earcut",(function(){return g.a}));var _=a(11),x=a.n(_);a.d(o,"url",(function(){return x.a}));var S=a(2);h.b.RETINA_PREFIX=/@([0-9\.]+)x/,h.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var R,k=!1;function skipHello(){k=!0}function sayHello(i){var o;if(!k){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var a=["\n %c %c %c PixiJS 5.3.0 - ✰ "+i+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(o=window.console).log.apply(o,a)}else window.console&&window.console.log("PixiJS 5.3.0 - "+i+" - http://www.pixijs.com/");k=!0}}function isWebGLSupported(){return void 0===R&&(R=function supported(){var i={stencil:!0,failIfMajorPerformanceCaveat:h.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var o=document.createElement("canvas"),a=o.getContext("webgl",i)||o.getContext("experimental-webgl",i),c=!(!a||!a.getContextAttributes().stencil);if(a){var l=a.getExtension("WEBGL_lose_context");l&&l.loseContext()}return a=null,c}catch(i){return!1}}()),R}function hex2rgb(i,o){return void 0===o&&(o=[]),o[0]=(i>>16&255)/255,o[1]=(i>>8&255)/255,o[2]=(255&i)/255,o}function hex2string(i){var o=i.toString(16);return"#"+("000000".substr(0,6-o.length)+o)}function string2hex(i){return"string"==typeof i&&"#"===i[0]&&(i=i.substr(1)),parseInt(i,16)}function rgb2hex(i){return(255*i[0]<<16)+(255*i[1]<<8)+(255*i[2]|0)}var j=function mapPremultipliedBlendModes(){for(var i=[],o=[],a=0;a<32;a++)i[a]=a,o[a]=a;i[S.b.NORMAL_NPM]=S.b.NORMAL,i[S.b.ADD_NPM]=S.b.ADD,i[S.b.SCREEN_NPM]=S.b.SCREEN,o[S.b.NORMAL]=S.b.NORMAL_NPM,o[S.b.ADD]=S.b.ADD_NPM,o[S.b.SCREEN]=S.b.SCREEN_NPM;var h=[];return h.push(o),h.push(i),h}();function correctBlendMode(i,o){return j[o?1:0][i]}function premultiplyRgba(i,o,a,h){return a=a||new Float32Array(4),h||void 0===h?(a[0]=i[0]*o,a[1]=i[1]*o,a[2]=i[2]*o):(a[0]=i[0],a[1]=i[1],a[2]=i[2]),a[3]=o,a}function premultiplyTint(i,o){if(1===o)return(255*o<<24)+i;if(0===o)return 0;var a=i>>16&255,h=i>>8&255,c=255&i;return(255*o<<24)+((a=a*o+.5|0)<<16)+((h=h*o+.5|0)<<8)+(c*o+.5|0)}function premultiplyTintToRgba(i,o,a,h){return(a=a||new Float32Array(4))[0]=(i>>16&255)/255,a[1]=(i>>8&255)/255,a[2]=(255&i)/255,(h||void 0===h)&&(a[0]*=o,a[1]*=o,a[2]*=o),a[3]=o,a}function createIndicesForQuads(i,o){void 0===o&&(o=null);var a=6*i;if((o=o||new Uint16Array(a)).length!==a)throw new Error("Out buffer length is incorrect, got "+o.length+" and expected "+a);for(var h=0,c=0;h<a;h+=6,c+=4)o[h+0]=c+0,o[h+1]=c+1,o[h+2]=c+2,o[h+3]=c+0,o[h+4]=c+2,o[h+5]=c+3;return o}function getBufferType(i){if(4===i.BYTES_PER_ELEMENT)return i instanceof Float32Array?"Float32Array":i instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===i.BYTES_PER_ELEMENT){if(i instanceof Uint16Array)return"Uint16Array"}else if(1===i.BYTES_PER_ELEMENT&&i instanceof Uint8Array)return"Uint8Array";return null}var X={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function interleaveTypedArrays(i,o){for(var a=0,h=0,c={},l=0;l<i.length;l++)h+=o[l],a+=i[l].length;var m=new ArrayBuffer(4*a),g=null,_=0;for(l=0;l<i.length;l++){var x=o[l],S=i[l],R=getBufferType(S);c[R]||(c[R]=new X[R](m)),g=c[R];for(var k=0;k<S.length;k++)g[(k/x|0)*h+_+k%x]=S[k];_+=x}return new Float32Array(m)}function nextPow2(i){return i+=0===i?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,1+(i|=i>>>16)}function isPow2(i){return!(i&i-1||!i)}function log2(i){var o=(i>65535?1:0)<<4,a=((i>>>=o)>255?1:0)<<3;return o|=a,o|=a=((i>>>=a)>15?1:0)<<2,(o|=a=((i>>>=a)>3?1:0)<<1)|(i>>>=a)>>1}function removeItems(i,o,a){var h,c=i.length;if(!(o>=c||0===a)){var l=c-(a=o+a>c?c-o:a);for(h=o;h<l;++h)i[h]=i[h+a];i.length=l}}function sign(i){return 0===i?0:i<0?-1:1}var Y=0;function uid(){return++Y}var q={};function deprecation(i,o,a){if(void 0===a&&(a=3),!q[o]){var h=(new Error).stack;void 0===h?console.warn("PixiJS Deprecation Warning: ",o+"\nDeprecated since v"+i):(h=h.split("\n").splice(a).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",o+"\nDeprecated since v"+i),console.warn(h),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",o+"\nDeprecated since v"+i),console.warn(h))),q[o]=!0}}var Z={},$=Object.create(null),ee=Object.create(null);function destroyTextureCache(){var i;for(i in $)$[i].destroy();for(i in ee)ee[i].destroy()}function clearTextureCache(){var i;for(i in $)delete $[i];for(i in ee)delete ee[i]}var te=function(){function CanvasRenderTarget(i,o,a){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=a||h.b.RESOLUTION,this.resize(i,o)}return CanvasRenderTarget.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},CanvasRenderTarget.prototype.resize=function(i,o){this.canvas.width=i*this.resolution,this.canvas.height=o*this.resolution},CanvasRenderTarget.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(CanvasRenderTarget.prototype,"width",{get:function get(){return this.canvas.width},set:function set(i){this.canvas.width=i},enumerable:!1,configurable:!0}),Object.defineProperty(CanvasRenderTarget.prototype,"height",{get:function get(){return this.canvas.height},set:function set(i){this.canvas.height=i},enumerable:!1,configurable:!0}),CanvasRenderTarget}();function trimCanvas(i){var o,a,h,c=i.width,l=i.height,m=i.getContext("2d"),g=m.getImageData(0,0,c,l).data,_=g.length,x={top:null,left:null,right:null,bottom:null},S=null;for(o=0;o<_;o+=4)0!==g[o+3]&&(a=o/4%c,h=~~(o/4/c),null===x.top&&(x.top=h),(null===x.left||a<x.left)&&(x.left=a),(null===x.right||x.right<a)&&(x.right=a+1),(null===x.bottom||x.bottom<h)&&(x.bottom=h));return null!==x.top&&(c=x.right-x.left,l=x.bottom-x.top+1,S=m.getImageData(x.left,x.top,c,l)),{height:l,width:c,data:S}}var re,ie=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function decomposeDataUri(i){var o=ie.exec(i);if(o)return{mediaType:o[1]?o[1].toLowerCase():void 0,subType:o[2]?o[2].toLowerCase():void 0,charset:o[3]?o[3].toLowerCase():void 0,encoding:o[4]?o[4].toLowerCase():void 0,data:o[5]}}function determineCrossOrigin(i,o){if(void 0===o&&(o=window.location),0===i.indexOf("data:"))return"";o=o||window.location,re||(re=document.createElement("a")),re.href=i;var a=Object(_.parse)(re.href),h=!a.port&&""===o.port||a.port===o.port;return a.hostname===o.hostname&&h&&a.protocol===o.protocol?"":"anonymous"}function getResolutionOfUrl(i,o){var a=h.b.RETINA_PREFIX.exec(i);return a?parseFloat(a[1]):void 0!==o?o:1}},function(i,o,a){a.d(o,"a",(function(){return Lt})),a.d(o,"b",(function(){return Ot})),a.d(o,"c",(function(){return ye})),a.d(o,"d",(function(){return he})),a.d(o,"e",(function(){return X})),a.d(o,"f",(function(){return kt})),a.d(o,"g",(function(){return Nt})),a.d(o,"h",(function(){return jt})),a.d(o,"i",(function(){return Wt})),a.d(o,"j",(function(){return Bt})),a.d(o,"k",(function(){return zt})),a.d(o,"l",(function(){return ve})),a.d(o,"m",(function(){return at})),a.d(o,"n",(function(){return Re})),a.d(o,"o",(function(){return ue})),a.d(o,"p",(function(){return Le})),a.d(o,"q",(function(){return _t})),a.d(o,"r",(function(){return Tt})),a.d(o,"s",(function(){return Te})),a.d(o,"t",(function(){return yt})),a.d(o,"u",(function(){return We})),a.d(o,"v",(function(){return ke})),a.d(o,"w",(function(){return it})),a.d(o,"x",(function(){return Ce})),a.d(o,"y",(function(){return Pe})),a.d(o,"z",(function(){return fe})),a.d(o,"A",(function(){return me})),a.d(o,"B",(function(){return At})),a.d(o,"C",(function(){return nt})),a.d(o,"D",(function(){return ht})),a.d(o,"E",(function(){return ot})),a.d(o,"F",(function(){return ae})),a.d(o,"G",(function(){return pe})),a.d(o,"H",(function(){return ut})),a.d(o,"I",(function(){return ce})),a.d(o,"J",(function(){return Ae})),a.d(o,"K",(function(){return Dt})),a.d(o,"L",(function(){return autoDetectRenderer})),a.d(o,"M",(function(){return checkMaxIfStatementsInShader})),a.d(o,"N",(function(){return Mt})),a.d(o,"O",(function(){return It})),a.d(o,"P",(function(){return oe})),a.d(o,"Q",(function(){return Ct})),a.d(o,"R",(function(){return Qe}));var h=a(5),c=a(2),l=a(0),m=a(10),g=a(9),_=a(3);h.b.PREFER_ENV=l.isMobile.any?c.f.WEBGL:c.f.WEBGL2,h.b.STRICT_TEXTURE_CACHE=!1;var x=[];function autoDetectResource(i,o){if(!i)return null;var a="";if("string"==typeof i){var h=/\.(\w{3,4})(?:$|\?|#)/i.exec(i);h&&(a=h[1].toLowerCase())}for(var c=x.length-1;c>=0;--c){var l=x[c];if(l.test&&l.test(i,a))return new l(i,o)}throw new Error("Unrecognized source type to auto-detect Resource")}var S=function extendStatics(i,o){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)};function __extends(i,o){function __(){this.constructor=i}S(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}var R=function(){function Resource(i,o){void 0===i&&(i=0),void 0===o&&(o=0),this._width=i,this._height=o,this.destroyed=!1,this.internal=!1,this.onResize=new m.a("setRealSize"),this.onUpdate=new m.a("update"),this.onError=new m.a("onError")}return Resource.prototype.bind=function(i){this.onResize.add(i),this.onUpdate.add(i),this.onError.add(i),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},Resource.prototype.unbind=function(i){this.onResize.remove(i),this.onUpdate.remove(i),this.onError.remove(i)},Resource.prototype.resize=function(i,o){i===this._width&&o===this._height||(this._width=i,this._height=o,this.onResize.emit(i,o))},Object.defineProperty(Resource.prototype,"valid",{get:function get(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),Resource.prototype.update=function(){this.destroyed||this.onUpdate.emit()},Resource.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(Resource.prototype,"width",{get:function get(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(Resource.prototype,"height",{get:function get(){return this._height},enumerable:!1,configurable:!0}),Resource.prototype.style=function(i,o,a){return!1},Resource.prototype.dispose=function(){},Resource.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Resource.test=function(i,o){return!1},Resource}(),k=function(i){function BufferResource(o,a){var h=this,c=a||{},l=c.width,m=c.height;if(!l||!m)throw new Error("BufferResource width or height invalid");return(h=i.call(this,l,m)||this).data=o,h}return __extends(BufferResource,i),BufferResource.prototype.upload=function(i,o,a){var h=i.gl;return h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.alphaMode===c.a.UNPACK),a.width===o.width&&a.height===o.height?h.texSubImage2D(o.target,0,0,0,o.width,o.height,o.format,o.type,this.data):(a.width=o.width,a.height=o.height,h.texImage2D(o.target,0,a.internalFormat,o.width,o.height,0,o.format,a.type,this.data)),!0},BufferResource.prototype.dispose=function(){this.data=null},BufferResource.test=function(i){return i instanceof Float32Array||i instanceof Uint8Array||i instanceof Uint32Array},BufferResource}(R),j={scaleMode:c.n.NEAREST,format:c.g.RGBA,alphaMode:c.a.NPM},X=function(i){function BaseTexture(o,a){void 0===o&&(o=null),void 0===a&&(a=null);var m=i.call(this)||this,g=(a=a||{}).alphaMode,_=a.mipmap,x=a.anisotropicLevel,S=a.scaleMode,k=a.width,j=a.height,X=a.wrapMode,Y=a.format,q=a.type,Z=a.target,$=a.resolution,ee=a.resourceOptions;return!o||o instanceof R||((o=autoDetectResource(o,ee)).internal=!0),m.width=k||0,m.height=j||0,m.resolution=$||h.b.RESOLUTION,m.mipmap=void 0!==_?_:h.b.MIPMAP_TEXTURES,m.anisotropicLevel=void 0!==x?x:h.b.ANISOTROPIC_LEVEL,m.wrapMode=X||h.b.WRAP_MODE,m.scaleMode=void 0!==S?S:h.b.SCALE_MODE,m.format=Y||c.g.RGBA,m.type=q||c.p.UNSIGNED_BYTE,m.target=Z||c.o.TEXTURE_2D,m.alphaMode=void 0!==g?g:c.a.UNPACK,void 0!==a.premultiplyAlpha&&(m.premultiplyAlpha=a.premultiplyAlpha),m.uid=Object(l.uid)(),m.touched=0,m.isPowerOfTwo=!1,m._refreshPOT(),m._glTextures={},m.dirtyId=0,m.dirtyStyleId=0,m.cacheId=null,m.valid=k>0&&j>0,m.textureCacheIds=[],m.destroyed=!1,m.resource=null,m._batchEnabled=0,m._batchLocation=0,m.parentTextureArray=null,m.setResource(o),m}return __extends(BaseTexture,i),Object.defineProperty(BaseTexture.prototype,"realWidth",{get:function get(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"realHeight",{get:function get(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),BaseTexture.prototype.setStyle=function(i,o){var a;return void 0!==i&&i!==this.scaleMode&&(this.scaleMode=i,a=!0),void 0!==o&&o!==this.mipmap&&(this.mipmap=o,a=!0),a&&this.dirtyStyleId++,this},BaseTexture.prototype.setSize=function(i,o,a){return this.resolution=a||this.resolution,this.width=i,this.height=o,this._refreshPOT(),this.update(),this},BaseTexture.prototype.setRealSize=function(i,o,a){return this.resolution=a||this.resolution,this.width=i/this.resolution,this.height=o/this.resolution,this._refreshPOT(),this.update(),this},BaseTexture.prototype._refreshPOT=function(){this.isPowerOfTwo=Object(l.isPow2)(this.realWidth)&&Object(l.isPow2)(this.realHeight)},BaseTexture.prototype.setResolution=function(i){var o=this.resolution;return o===i||(this.resolution=i,this.valid&&(this.width=this.width*o/i,this.height=this.height*o/i,this.emit("update",this)),this._refreshPOT()),this},BaseTexture.prototype.setResource=function(i){if(this.resource===i)return this;if(this.resource)throw new Error("Resource can be set only once");return i.bind(this),this.resource=i,this},BaseTexture.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},BaseTexture.prototype.onError=function(i){this.emit("error",this,i)},BaseTexture.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete l.BaseTextureCache[this.cacheId],delete l.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),BaseTexture.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},BaseTexture.prototype.dispose=function(){this.emit("dispose",this)},BaseTexture.prototype.castToBaseTexture=function(){return this},BaseTexture.from=function(i,o,a){void 0===a&&(a=h.b.STRICT_TEXTURE_CACHE);var c="string"==typeof i,m=null;c?m=i:(i._pixiId||(i._pixiId="pixiid_"+Object(l.uid)()),m=i._pixiId);var g=l.BaseTextureCache[m];if(c&&a&&!g)throw new Error('The cacheId "'+m+'" does not exist in BaseTextureCache.');return g||((g=new BaseTexture(i,o)).cacheId=m,BaseTexture.addToCache(g,m)),g},BaseTexture.fromBuffer=function(i,o,a,h){i=i||new Float32Array(o*a*4);var l=new k(i,{width:o,height:a}),m=i instanceof Float32Array?c.p.FLOAT:c.p.UNSIGNED_BYTE;return new BaseTexture(l,Object.assign(j,h||{width:o,height:a,type:m}))},BaseTexture.addToCache=function(i,o){o&&(-1===i.textureCacheIds.indexOf(o)&&i.textureCacheIds.push(o),l.BaseTextureCache[o]&&console.warn("BaseTexture added to the cache with an id ["+o+"] that already had an entry"),l.BaseTextureCache[o]=i)},BaseTexture.removeFromCache=function(i){if("string"==typeof i){var o=l.BaseTextureCache[i];if(o){var a=o.textureCacheIds.indexOf(i);return a>-1&&o.textureCacheIds.splice(a,1),delete l.BaseTextureCache[i],o}}else if(i&&i.textureCacheIds){for(var h=0;h<i.textureCacheIds.length;++h)delete l.BaseTextureCache[i.textureCacheIds[h]];return i.textureCacheIds.length=0,i}return null},BaseTexture._globalBatch=0,BaseTexture}(l.EventEmitter),Y=function(i){function AbstractMultiResource(o,a){var h=this,c=a||{},l=c.width,m=c.height;(h=i.call(this,l,m)||this).items=[],h.itemDirtyIds=[];for(var g=0;g<o;g++){var _=new X;h.items.push(_),h.itemDirtyIds.push(-2)}return h.length=o,h._load=null,h.baseTexture=null,h}return __extends(AbstractMultiResource,i),AbstractMultiResource.prototype.initFromArray=function(i,o){for(var a=0;a<this.length;a++)i[a]&&(i[a].castToBaseTexture?this.addBaseTextureAt(i[a].castToBaseTexture(),a):i[a]instanceof R?this.addResourceAt(i[a],a):this.addResourceAt(autoDetectResource(i[a],o),a))},AbstractMultiResource.prototype.dispose=function(){for(var i=0,o=this.length;i<o;i++)this.items[i].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},AbstractMultiResource.prototype.addResourceAt=function(i,o){if(!this.items[o])throw new Error("Index "+o+" is out of bounds");return i.valid&&!this.valid&&this.resize(i.width,i.height),this.items[o].setResource(i),this},AbstractMultiResource.prototype.bind=function(o){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");i.prototype.bind.call(this,o);for(var a=0;a<this.length;a++)this.items[a].parentTextureArray=o,this.items[a].on("update",o.update,o)},AbstractMultiResource.prototype.unbind=function(o){i.prototype.unbind.call(this,o);for(var a=0;a<this.length;a++)this.items[a].parentTextureArray=null,this.items[a].off("update",o.update,o)},AbstractMultiResource.prototype.load=function(){var i=this;if(this._load)return this._load;var o=this.items.map((function(i){return i.resource})).filter((function(i){return i})).map((function(i){return i.load()}));return this._load=Promise.all(o).then((function(){var o=i.items[0],a=o.realWidth,h=o.realHeight;return i.resize(a,h),Promise.resolve(i)})),this._load},AbstractMultiResource}(R),q=function(i){function ArrayResource(o,a){var h,c,l=this,m=a||{},g=m.width,_=m.height;return Array.isArray(o)?(h=o,c=o.length):c=o,l=i.call(this,c,{width:g,height:_})||this,h&&l.initFromArray(h,a),l}return __extends(ArrayResource,i),ArrayResource.prototype.addBaseTextureAt=function(i,o){if(!i.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(i.resource,o),this},ArrayResource.prototype.bind=function(o){i.prototype.bind.call(this,o),o.target=c.o.TEXTURE_2D_ARRAY},ArrayResource.prototype.upload=function(i,o,a){var h=this.length,c=this.itemDirtyIds,l=this.items,m=i.gl;a.dirtyId<0&&m.texImage3D(m.TEXTURE_2D_ARRAY,0,o.format,this._width,this._height,h,0,o.format,o.type,null);for(var g=0;g<h;g++){var _=l[g];c[g]<_.dirtyId&&(c[g]=_.dirtyId,_.valid&&m.texSubImage3D(m.TEXTURE_2D_ARRAY,0,0,0,g,_.resource.width,_.resource.height,1,o.format,o.type,_.resource.source))}return!0},ArrayResource}(Y),Z=function(i){function BaseImageResource(o){var a=this,h=o,c=h.naturalWidth||h.videoWidth||h.width,l=h.naturalHeight||h.videoHeight||h.height;return(a=i.call(this,c,l)||this).source=o,a.noSubImage=!1,a}return __extends(BaseImageResource,i),BaseImageResource.crossOrigin=function(i,o,a){void 0===a&&0!==o.indexOf("data:")?i.crossOrigin=Object(l.determineCrossOrigin)(o):!1!==a&&(i.crossOrigin="string"==typeof a?a:"anonymous")},BaseImageResource.prototype.upload=function(i,o,a,h){var l=i.gl,m=o.realWidth,g=o.realHeight;return h=h||this.source,l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.alphaMode===c.a.UNPACK),this.noSubImage||o.target!==l.TEXTURE_2D||a.width!==m||a.height!==g?(a.width=m,a.height=g,l.texImage2D(o.target,0,o.format,o.format,o.type,h)):l.texSubImage2D(l.TEXTURE_2D,0,0,0,o.format,o.type,h),!0},BaseImageResource.prototype.update=function(){if(!this.destroyed){var o=this.source,a=o.naturalWidth||o.videoWidth||o.width,h=o.naturalHeight||o.videoHeight||o.height;this.resize(a,h),i.prototype.update.call(this)}},BaseImageResource.prototype.dispose=function(){this.source=null},BaseImageResource}(R),$=function(i){function CanvasResource(){return null!==i&&i.apply(this,arguments)||this}return __extends(CanvasResource,i),CanvasResource.test=function(i){var o=window.OffscreenCanvas;return!!(o&&i instanceof o)||i instanceof HTMLCanvasElement},CanvasResource}(Z),ee=function(i){function CubeResource(o,a){var h=this,l=a||{},m=l.width,g=l.height,_=l.autoLoad,x=l.linkBaseTexture;if(o&&o.length!==CubeResource.SIDES)throw new Error("Invalid length. Got "+o.length+", expected 6");h=i.call(this,6,{width:m,height:g})||this;for(var S=0;S<CubeResource.SIDES;S++)h.items[S].target=c.o.TEXTURE_CUBE_MAP_POSITIVE_X+S;return h.linkBaseTexture=!1!==x,o&&h.initFromArray(o,a),!1!==_&&h.load(),h}return __extends(CubeResource,i),CubeResource.prototype.bind=function(o){i.prototype.bind.call(this,o),o.target=c.o.TEXTURE_CUBE_MAP},CubeResource.prototype.addBaseTextureAt=function(i,o,a){if(void 0===a&&(a=this.linkBaseTexture),!this.items[o])throw new Error("Index "+o+" is out of bounds");if(!this.linkBaseTexture||i.parentTextureArray||Object.keys(i._glTextures).length>0){if(!i.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(i.resource,o)}else i.target=c.o.TEXTURE_CUBE_MAP_POSITIVE_X+o,i.parentTextureArray=this.baseTexture,this.items[o]=i;return i.valid&&!this.valid&&this.resize(i.realWidth,i.realHeight),this.items[o]=i,this},CubeResource.prototype.upload=function(i,o,a){for(var h=this.itemDirtyIds,c=0;c<CubeResource.SIDES;c++){var l=this.items[c];h[c]<l.dirtyId&&(l.valid&&l.resource?(l.resource.upload(i,l,a),h[c]=l.dirtyId):h[c]<-1&&(i.gl.texImage2D(l.target,0,a.internalFormat,o.realWidth,o.realHeight,0,o.format,a.type,null),h[c]=-1))}return!0},CubeResource.test=function(i){return Array.isArray(i)&&i.length===CubeResource.SIDES},CubeResource.SIDES=6,CubeResource}(Y),te=function(i){function ImageResource(o,a){var c=this;if(a=a||{},!(o instanceof HTMLImageElement)){var l=new Image;Z.crossOrigin(l,o,a.crossorigin),l.src=o,o=l}return c=i.call(this,o)||this,!o.complete&&c._width&&c._height&&(c._width=0,c._height=0),c.url=o.src,c._process=null,c.preserveBitmap=!1,c.createBitmap=(void 0!==a.createBitmap?a.createBitmap:h.b.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,c.alphaMode="number"==typeof a.alphaMode?a.alphaMode:null,void 0!==a.premultiplyAlpha&&(c.premultiplyAlpha=a.premultiplyAlpha),c.bitmap=null,c._load=null,!1!==a.autoLoad&&c.load(),c}return __extends(ImageResource,i),ImageResource.prototype.load=function(i){var o=this;return this._load||(void 0!==i&&(this.createBitmap=i),this._load=new Promise((function(i,a){var h=o.source;o.url=h.src;var c=function completed(){o.destroyed||(h.onload=null,h.onerror=null,o.resize(h.width,h.height),o._load=null,o.createBitmap?i(o.process()):i(o))};h.complete&&h.src?c():(h.onload=c,h.onerror=function(i){a(i),o.onError.emit(i)})}))),this._load},ImageResource.prototype.process=function(){var i=this,o=this.source;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(o,0,0,o.width,o.height,{premultiplyAlpha:this.alphaMode===c.a.UNPACK?"premultiply":"none"}).then((function(o){return i.destroyed?Promise.reject():(i.bitmap=o,i.update(),i._process=null,Promise.resolve(i))})),this._process):Promise.resolve(this)},ImageResource.prototype.upload=function(o,a,h){if("number"==typeof this.alphaMode&&(a.alphaMode=this.alphaMode),!this.createBitmap)return i.prototype.upload.call(this,o,a,h);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(i.prototype.upload.call(this,o,a,h,this.bitmap),!this.preserveBitmap){var c=!0,l=a._glTextures;for(var m in l){var g=l[m];if(g!==h&&g.dirtyId!==a.dirtyId){c=!1;break}}c&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},ImageResource.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,i.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},ImageResource.test=function(i){return"string"==typeof i||i instanceof HTMLImageElement},ImageResource}(Z),re=function(i){function SVGResource(o,a){var h=this;return a=a||{},(h=i.call(this,document.createElement("canvas"))||this)._width=0,h._height=0,h.svg=o,h.scale=a.scale||1,h._overrideWidth=a.width,h._overrideHeight=a.height,h._resolve=null,h._crossorigin=a.crossorigin,h._load=null,!1!==a.autoLoad&&h.load(),h}return __extends(SVGResource,i),SVGResource.prototype.load=function(){var i=this;return this._load||(this._load=new Promise((function(o){if(i._resolve=function(){i.resize(i.source.width,i.source.height),o(i)},/^\<svg/.test(i.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");i.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(i.svg)))}i._loadSvg()}))),this._load},SVGResource.prototype._loadSvg=function(){var i=this,o=new Image;Z.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(a){i._resolve&&(o.onerror=null,i.onError.emit(a))},o.onload=function(){if(i._resolve){var a=o.width,h=o.height;if(!a||!h)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var c=a*i.scale,m=h*i.scale;(i._overrideWidth||i._overrideHeight)&&(c=i._overrideWidth||i._overrideHeight/h*a,m=i._overrideHeight||i._overrideWidth/a*h),c=Math.round(c),m=Math.round(m);var g=i.source;g.width=c,g.height=m,g._pixiId="canvas_"+Object(l.uid)(),g.getContext("2d").drawImage(o,0,0,a,h,0,0,c,m),i._resolve(),i._resolve=null}}},SVGResource.getSize=function(i){var o=SVGResource.SVG_SIZE.exec(i),a={};return o&&(a[o[1]]=Math.round(parseFloat(o[3])),a[o[5]]=Math.round(parseFloat(o[7]))),a},SVGResource.prototype.dispose=function(){i.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},SVGResource.test=function(i,o){return"svg"===o||"string"==typeof i&&0===i.indexOf("data:image/svg+xml;base64")||"string"==typeof i&&0===i.indexOf("<svg")},SVGResource.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,SVGResource}(Z),ie=function(i){function VideoResource(o,a){var h=this;if(a=a||{},!(o instanceof HTMLVideoElement)){var c=document.createElement("video");c.setAttribute("preload","auto"),c.setAttribute("webkit-playsinline",""),c.setAttribute("playsinline",""),"string"==typeof o&&(o=[o]);var l=o[0].src||o[0];Z.crossOrigin(c,l,a.crossorigin);for(var m=0;m<o.length;++m){var g=document.createElement("source"),_=o[m],x=_.src,S=_.mime,R=(x=x||o[m]).split("?").shift().toLowerCase(),k=R.substr(R.lastIndexOf(".")+1);S=S||VideoResource.MIME_TYPES[k]||"video/"+k,g.src=x,g.type=S,c.appendChild(g)}o=c}return(h=i.call(this,o)||this).noSubImage=!0,h._autoUpdate=!0,h._isConnectedToTicker=!1,h._updateFPS=a.updateFPS||0,h._msToNextUpdate=0,h.autoPlay=!1!==a.autoPlay,h._load=null,h._resolve=null,h._onCanPlay=h._onCanPlay.bind(h),h._onError=h._onError.bind(h),!1!==a.autoLoad&&h.load(),h}return __extends(VideoResource,i),VideoResource.prototype.update=function(o){if(void 0===o&&(o=0),!this.destroyed){var a=g.a.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-a),(!this._updateFPS||this._msToNextUpdate<=0)&&(i.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},VideoResource.prototype.load=function(){var i=this;if(this._load)return this._load;var o=this.source;return(o.readyState===o.HAVE_ENOUGH_DATA||o.readyState===o.HAVE_FUTURE_DATA)&&o.width&&o.height&&(o.complete=!0),o.addEventListener("play",this._onPlayStart.bind(this)),o.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(o.addEventListener("canplay",this._onCanPlay),o.addEventListener("canplaythrough",this._onCanPlay),o.addEventListener("error",this._onError,!0)),this._load=new Promise((function(a){i.valid?a(i):(i._resolve=a,o.load())})),this._load},VideoResource.prototype._onError=function(){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(event)},VideoResource.prototype._isSourcePlaying=function(){var i=this.source;return i.currentTime>0&&!1===i.paused&&!1===i.ended&&i.readyState>2},VideoResource.prototype._isSourceReady=function(){var i=this.source;return 3===i.readyState||4===i.readyState},VideoResource.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(g.a.shared.add(this.update,this),this._isConnectedToTicker=!0)},VideoResource.prototype._onPlayStop=function(){this._isConnectedToTicker&&(g.a.shared.remove(this.update,this),this._isConnectedToTicker=!1)},VideoResource.prototype._onCanPlay=function(){var i=this.source;i.removeEventListener("canplay",this._onCanPlay),i.removeEventListener("canplaythrough",this._onCanPlay);var o=this.valid;this.resize(i.videoWidth,i.videoHeight),!o&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&i.play()},VideoResource.prototype.dispose=function(){this._isConnectedToTicker&&g.a.shared.remove(this.update,this);var o=this.source;o&&(o.removeEventListener("error",this._onError,!0),o.pause(),o.src="",o.load()),i.prototype.dispose.call(this)},Object.defineProperty(VideoResource.prototype,"autoUpdate",{get:function get(){return this._autoUpdate},set:function set(i){i!==this._autoUpdate&&(this._autoUpdate=i,!this._autoUpdate&&this._isConnectedToTicker?(g.a.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(g.a.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(VideoResource.prototype,"updateFPS",{get:function get(){return this._updateFPS},set:function set(i){i!==this._updateFPS&&(this._updateFPS=i)},enumerable:!1,configurable:!0}),VideoResource.test=function(i,o){return i instanceof HTMLVideoElement||VideoResource.TYPES.indexOf(o)>-1},VideoResource.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],VideoResource.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},VideoResource}(Z),ne=function(i){function ImageBitmapResource(){return null!==i&&i.apply(this,arguments)||this}return __extends(ImageBitmapResource,i),ImageBitmapResource.test=function(i){return!!window.createImageBitmap&&i instanceof ImageBitmap},ImageBitmapResource}(Z);x.push(te,ne,$,ie,re,k,ee,q);var oe={Resource:R,BaseImageResource:Z,INSTALLED:x,autoDetectResource:autoDetectResource,AbstractMultiResource:Y,ArrayResource:q,BufferResource:k,CanvasResource:$,CubeResource:ee,ImageResource:te,SVGResource:re,VideoResource:ie,ImageBitmapResource:ne},ae=function(){function System(i){this.renderer=i}return System.prototype.destroy=function(){this.renderer=null},System}(),se=function(i){function DepthResource(){return null!==i&&i.apply(this,arguments)||this}return __extends(DepthResource,i),DepthResource.prototype.upload=function(i,o,a){var h=i.gl;return h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.alphaMode===c.a.UNPACK),a.width===o.width&&a.height===o.height?h.texSubImage2D(o.target,0,0,0,o.width,o.height,o.format,o.type,this.data):(a.width=o.width,a.height=o.height,h.texImage2D(o.target,0,1===i.context.webGLVersion?h.DEPTH_COMPONENT:h.DEPTH_COMPONENT16,o.width,o.height,0,o.format,o.type,this.data)),!0},DepthResource}(k),ue=function(){function Framebuffer(i,o){this.width=Math.ceil(i||100),this.height=Math.ceil(o||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new m.a("disposeFramebuffer"),this.multisample=c.k.NONE}return Object.defineProperty(Framebuffer.prototype,"colorTexture",{get:function get(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),Framebuffer.prototype.addColorTexture=function(i,o){return void 0===i&&(i=0),this.colorTextures[i]=o||new X(null,{scaleMode:c.n.NEAREST,resolution:1,mipmap:c.j.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},Framebuffer.prototype.addDepthTexture=function(i){return this.depthTexture=i||new X(new se(null,{width:this.width,height:this.height}),{scaleMode:c.n.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:c.j.OFF,format:c.g.DEPTH_COMPONENT,type:c.p.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},Framebuffer.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},Framebuffer.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},Framebuffer.prototype.resize=function(i,o){if(i=Math.ceil(i),o=Math.ceil(o),i!==this.width||o!==this.height){this.width=i,this.height=o,this.dirtyId++,this.dirtySize++;for(var a=0;a<this.colorTextures.length;a++){var h=this.colorTextures[a],c=h.resolution;h.setSize(i/c,o/c)}this.depthTexture&&(c=this.depthTexture.resolution,this.depthTexture.setSize(i/c,o/c))}},Framebuffer.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Framebuffer.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},Framebuffer}(),he=function(i){function BaseRenderTexture(o){var a=this;if("number"==typeof o){var h=arguments[0],c=arguments[1],l=arguments[2],m=arguments[3];o={width:h,height:c,scaleMode:l,resolution:m}}a=i.call(this,null,o)||this;var g=o||{},_=g.width,x=g.height;return a.mipmap=0,a.width=Math.ceil(_)||100,a.height=Math.ceil(x)||100,a.valid=!0,a.clearColor=[0,0,0,0],a.framebuffer=new ue(a.width*a.resolution,a.height*a.resolution).addColorTexture(0,a),a.maskStack=[],a.filterStack=[{}],a}return __extends(BaseRenderTexture,i),BaseRenderTexture.prototype.resize=function(i,o){i=Math.ceil(i),o=Math.ceil(o),this.framebuffer.resize(i*this.resolution,o*this.resolution)},BaseRenderTexture.prototype.dispose=function(){this.framebuffer.dispose(),i.prototype.dispose.call(this)},BaseRenderTexture.prototype.destroy=function(){i.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},BaseRenderTexture}(X),ce=function(){function TextureUvs(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return TextureUvs.prototype.set=function(i,o,a){var h=o.width,c=o.height;if(a){var l=i.width/2/h,m=i.height/2/c,g=i.x/h+l,x=i.y/c+m;a=_.n.add(a,_.n.NW),this.x0=g+l*_.n.uX(a),this.y0=x+m*_.n.uY(a),a=_.n.add(a,2),this.x1=g+l*_.n.uX(a),this.y1=x+m*_.n.uY(a),a=_.n.add(a,2),this.x2=g+l*_.n.uX(a),this.y2=x+m*_.n.uY(a),a=_.n.add(a,2),this.x3=g+l*_.n.uX(a),this.y3=x+m*_.n.uY(a)}else this.x0=i.x/h,this.y0=i.y/c,this.x1=(i.x+i.width)/h,this.y1=i.y/c,this.x2=(i.x+i.width)/h,this.y2=(i.y+i.height)/c,this.x3=i.x/h,this.y3=(i.y+i.height)/c;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},TextureUvs}(),de=new ce,pe=function(i){function Texture(o,a,h,c,l,m){var g=i.call(this)||this;if(g.noFrame=!1,a||(g.noFrame=!0,a=new _.j(0,0,1,1)),o instanceof Texture&&(o=o.baseTexture),g.baseTexture=o,g._frame=a,g.trim=c,g.valid=!1,g._uvs=de,g.uvMatrix=null,g.orig=h||a,g._rotate=Number(l||0),!0===l)g._rotate=2;else if(g._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return g.defaultAnchor=m?new _.g(m.x,m.y):new _.g(0,0),g._updateID=0,g.textureCacheIds=[],o.valid?g.noFrame?o.valid&&g.onBaseTextureUpdated(o):g.frame=a:o.once("loaded",g.onBaseTextureUpdated,g),g.noFrame&&o.on("update",g.onBaseTextureUpdated,g),g}return __extends(Texture,i),Texture.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},Texture.prototype.onBaseTextureUpdated=function(i){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=i.width,this._frame.height=i.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},Texture.prototype.destroy=function(i){if(this.baseTexture){if(i){var o=this.baseTexture;o&&o.url&&l.TextureCache[o.url]&&Texture.removeFromCache(o.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture.removeFromCache(this),this.textureCacheIds=null},Texture.prototype.clone=function(){return new Texture(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},Texture.prototype.updateUvs=function(){this._uvs===de&&(this._uvs=new ce),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},Texture.from=function(i,o,a){void 0===o&&(o={}),void 0===a&&(a=h.b.STRICT_TEXTURE_CACHE);var c="string"==typeof i,m=null;c?m=i:(i._pixiId||(i._pixiId="pixiid_"+Object(l.uid)()),m=i._pixiId);var g=l.TextureCache[m];if(c&&a&&!g)throw new Error('The cacheId "'+m+'" does not exist in TextureCache.');return g||(o.resolution||(o.resolution=Object(l.getResolutionOfUrl)(i)),(g=new Texture(new X(i,o))).baseTexture.cacheId=m,X.addToCache(g.baseTexture,m),Texture.addToCache(g,m)),g},Texture.fromURL=function(i,o){var a=Object.assign({autoLoad:!1},null==o?void 0:o.resourceOptions),h=Texture.from(i,Object.assign({resourceOptions:a},o),!1),c=h.baseTexture.resource;return h.baseTexture.valid?Promise.resolve(h):c.load().then((function(){return Promise.resolve(h)}))},Texture.fromBuffer=function(i,o,a,h){return new Texture(X.fromBuffer(i,o,a,h))},Texture.fromLoader=function(i,o,a){var c=new te(i);c.url=o;var m=new Texture(new X(c,{scaleMode:h.b.SCALE_MODE,resolution:Object(l.getResolutionOfUrl)(o)}));return a||(a=o),X.addToCache(m.baseTexture,a),Texture.addToCache(m,a),a!==o&&(X.addToCache(m.baseTexture,o),Texture.addToCache(m,o)),m},Texture.addToCache=function(i,o){o&&(-1===i.textureCacheIds.indexOf(o)&&i.textureCacheIds.push(o),l.TextureCache[o]&&console.warn("Texture added to the cache with an id ["+o+"] that already had an entry"),l.TextureCache[o]=i)},Texture.removeFromCache=function(i){if("string"==typeof i){var o=l.TextureCache[i];if(o){var a=o.textureCacheIds.indexOf(i);return a>-1&&o.textureCacheIds.splice(a,1),delete l.TextureCache[i],o}}else if(i&&i.textureCacheIds){for(var h=0;h<i.textureCacheIds.length;++h)l.TextureCache[i.textureCacheIds[h]]===i&&delete l.TextureCache[i.textureCacheIds[h]];return i.textureCacheIds.length=0,i}return null},Object.defineProperty(Texture.prototype,"resolution",{get:function get(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(Texture.prototype,"frame",{get:function get(){return this._frame},set:function set(i){this._frame=i,this.noFrame=!1;var o=i.x,a=i.y,h=i.width,c=i.height,l=o+h>this.baseTexture.width,m=a+c>this.baseTexture.height;if(l||m){var g=l&&m?"and":"or",_="X: "+o+" + "+h+" = "+(o+h)+" > "+this.baseTexture.width,x="Y: "+a+" + "+c+" = "+(a+c)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+_+" "+g+" "+x)}this.valid=h&&c&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=i),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(Texture.prototype,"rotate",{get:function get(){return this._rotate},set:function set(i){this._rotate=i,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(Texture.prototype,"width",{get:function get(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(Texture.prototype,"height",{get:function get(){return this.orig.height},enumerable:!1,configurable:!0}),Texture.prototype.castToBaseTexture=function(){return this.baseTexture},Texture}(l.EventEmitter);function removeAllHandlers(i){i.destroy=function _emptyDestroy(){},i.on=function _emptyOn(){},i.once=function _emptyOnce(){},i.emit=function _emptyEmit(){}}pe.EMPTY=new pe(new X),removeAllHandlers(pe.EMPTY),removeAllHandlers(pe.EMPTY.baseTexture),pe.WHITE=function createWhiteTexture(){var i=document.createElement("canvas");i.width=16,i.height=16;var o=i.getContext("2d");return o.fillStyle="white",o.fillRect(0,0,16,16),new pe(new X(new $(i)))}(),removeAllHandlers(pe.WHITE),removeAllHandlers(pe.WHITE.baseTexture);var fe=function(i){function RenderTexture(o,a){var h=this,c=null;if(!(o instanceof he)){var l=arguments[1],m=arguments[2],g=arguments[3],_=arguments[4];console.warn("Please use RenderTexture.create("+l+", "+m+") instead of the ctor directly."),c=arguments[0],a=null,o=new he({width:l,height:m,scaleMode:g,resolution:_})}return(h=i.call(this,o,a)||this).legacyRenderer=c,h.valid=!0,h.filterFrame=null,h.filterPoolKey=null,h.updateUvs(),h}return __extends(RenderTexture,i),Object.defineProperty(RenderTexture.prototype,"framebuffer",{get:function get(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),RenderTexture.prototype.resize=function(i,o,a){void 0===a&&(a=!0),i=Math.ceil(i),o=Math.ceil(o),this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,a&&this.baseTexture.resize(i,o),this.updateUvs()},RenderTexture.prototype.setResolution=function(i){var o=this.baseTexture;o.resolution!==i&&(o.setResolution(i),this.resize(o.width,o.height,!1))},RenderTexture.create=function(i){return"number"==typeof i&&(i={width:i,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new RenderTexture(new he(i))},RenderTexture}(pe),me=function(){function RenderTexturePool(i){this.texturePool={},this.textureOptions=i||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return RenderTexturePool.prototype.createTexture=function(i,o){var a=new he(Object.assign({width:i,height:o,resolution:1},this.textureOptions));return new fe(a)},RenderTexturePool.prototype.getOptimalTexture=function(i,o,a){void 0===a&&(a=1);var h=RenderTexturePool.SCREEN_KEY;i*=a,o*=a,this.enableFullScreen&&i===this._pixelsWidth&&o===this._pixelsHeight||(h=(65535&(i=Object(l.nextPow2)(i)))<<16|65535&(o=Object(l.nextPow2)(o))),this.texturePool[h]||(this.texturePool[h]=[]);var c=this.texturePool[h].pop();return c||(c=this.createTexture(i,o)),c.filterPoolKey=h,c.setResolution(a),c},RenderTexturePool.prototype.getFilterTexture=function(i,o){var a=this.getOptimalTexture(i.width,i.height,o||i.resolution);return a.filterFrame=i.filterFrame,a},RenderTexturePool.prototype.returnTexture=function(i){var o=i.filterPoolKey;i.filterFrame=null,this.texturePool[o].push(i)},RenderTexturePool.prototype.returnFilterTexture=function(i){this.returnTexture(i)},RenderTexturePool.prototype.clear=function(i){if(i=!1!==i)for(var o in this.texturePool){var a=this.texturePool[o];if(a)for(var h=0;h<a.length;h++)a[h].destroy(!0)}this.texturePool={}},RenderTexturePool.prototype.setScreenSize=function(i){if(i.width!==this._pixelsWidth||i.height!==this._pixelsHeight){var o=RenderTexturePool.SCREEN_KEY,a=this.texturePool[o];if(this.enableFullScreen=i.width>0&&i.height>0,a)for(var h=0;h<a.length;h++)a[h].destroy(!0);this.texturePool[o]=[],this._pixelsWidth=i.width,this._pixelsHeight=i.height}},RenderTexturePool.SCREEN_KEY="screen",RenderTexturePool}(),ye=function(){function Attribute(i,o,a,h,c,l,m){void 0===o&&(o=0),void 0===a&&(a=!1),void 0===h&&(h=5126),this.buffer=i,this.size=o,this.normalized=a,this.type=h,this.stride=c,this.start=l,this.instance=m}return Attribute.prototype.destroy=function(){this.buffer=null},Attribute.from=function(i,o,a,h,c){return new Attribute(i,o,a,h,c)},Attribute}(),_e=0,ve=function(){function Buffer(i,o,a){void 0===o&&(o=!0),void 0===a&&(a=!1),this.data=i||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=a,this.static=o,this.id=_e++,this.disposeRunner=new m.a("disposeBuffer")}return Buffer.prototype.update=function(i){this.data=i||this.data,this._updateID++},Buffer.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Buffer.prototype.destroy=function(){this.dispose(),this.data=null},Buffer.from=function(i){return i instanceof Array&&(i=new Float32Array(i)),new Buffer(i)},Buffer}();function getBufferType(i){if(4===i.BYTES_PER_ELEMENT)return i instanceof Float32Array?"Float32Array":i instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===i.BYTES_PER_ELEMENT){if(i instanceof Uint16Array)return"Uint16Array"}else if(1===i.BYTES_PER_ELEMENT&&i instanceof Uint8Array)return"Uint8Array";return null}var xe={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array},Se={5126:4,5123:2,5121:1},be=0,we={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Te=function(){function Geometry(i,o){void 0===i&&(i=[]),void 0===o&&(o={}),this.buffers=i,this.indexBuffer=null,this.attributes=o,this.glVertexArrayObjects={},this.id=be++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new m.a("disposeGeometry"),this.refCount=0}return Geometry.prototype.addAttribute=function(i,o,a,h,c,l,m,g){if(void 0===a&&(a=0),void 0===h&&(h=!1),void 0===g&&(g=!1),!o)throw new Error("You must pass a buffer when creating an attribute");o instanceof ve||(o instanceof Array&&(o=new Float32Array(o)),o=new ve(o));var _=i.split("|");if(_.length>1){for(var x=0;x<_.length;x++)this.addAttribute(_[x],o,a,h,c);return this}var S=this.buffers.indexOf(o);return-1===S&&(this.buffers.push(o),S=this.buffers.length-1),this.attributes[i]=new ye(S,a,h,c,l,m,g),this.instanced=this.instanced||g,this},Geometry.prototype.getAttribute=function(i){return this.attributes[i]},Geometry.prototype.getBuffer=function(i){return this.buffers[this.getAttribute(i).buffer]},Geometry.prototype.addIndex=function(i){return i instanceof ve||(i instanceof Array&&(i=new Uint16Array(i)),i=new ve(i)),i.index=!0,this.indexBuffer=i,-1===this.buffers.indexOf(i)&&this.buffers.push(i),this},Geometry.prototype.getIndex=function(){return this.indexBuffer},Geometry.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var i,o=[],a=[],h=new ve;for(i in this.attributes){var c=this.attributes[i],l=this.buffers[c.buffer];o.push(l.data),a.push(c.size*Se[c.type]/4),c.buffer=0}for(h.data=function interleaveTypedArrays(i,o){for(var a=0,h=0,c={},l=0;l<i.length;l++)h+=o[l],a+=i[l].length;var m=new ArrayBuffer(4*a),g=null,_=0;for(l=0;l<i.length;l++){var x=o[l],S=i[l],R=getBufferType(S);c[R]||(c[R]=new xe[R](m)),g=c[R];for(var k=0;k<S.length;k++)g[(k/x|0)*h+_+k%x]=S[k];_+=x}return new Float32Array(m)}(o,a),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[h],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},Geometry.prototype.getSize=function(){for(var i in this.attributes){var o=this.attributes[i];return this.buffers[o.buffer].data.length/(o.stride/4||o.size)}return 0},Geometry.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Geometry.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},Geometry.prototype.clone=function(){for(var i=new Geometry,o=0;o<this.buffers.length;o++)i.buffers[o]=new ve(this.buffers[o].data.slice(0));for(var o in this.attributes){var a=this.attributes[o];i.attributes[o]=new ye(a.buffer,a.size,a.normalized,a.type,a.stride,a.start,a.instance)}return this.indexBuffer&&(i.indexBuffer=i.buffers[this.buffers.indexOf(this.indexBuffer)],i.indexBuffer.index=!0),i},Geometry.merge=function(i){for(var o,a=new Geometry,h=[],c=[],l=[],m=0;m<i.length;m++){o=i[m];for(var g=0;g<o.buffers.length;g++)c[g]=c[g]||0,c[g]+=o.buffers[g].data.length,l[g]=0}for(m=0;m<o.buffers.length;m++)h[m]=new(we[getBufferType(o.buffers[m].data)])(c[m]),a.buffers[m]=new ve(h[m]);for(m=0;m<i.length;m++)for(o=i[m],g=0;g<o.buffers.length;g++)h[g].set(o.buffers[g].data,l[g]),l[g]+=o.buffers[g].data.length;if(a.attributes=o.attributes,o.indexBuffer){a.indexBuffer=a.buffers[o.buffers.indexOf(o.indexBuffer)],a.indexBuffer.index=!0;var _=0,x=0,S=0,R=0;for(m=0;m<o.buffers.length;m++)if(o.buffers[m]!==o.indexBuffer){R=m;break}for(var m in o.attributes){var k=o.attributes[m];(0|k.buffer)===R&&(x+=k.size*Se[k.type]/4)}for(m=0;m<i.length;m++){var j=i[m].indexBuffer.data;for(g=0;g<j.length;g++)a.indexBuffer.data[g+S]+=_;_+=o.buffers[R].data.length/x,S+=j.length}}return a},Geometry}(),Ce=function(i){function Quad(){var o=i.call(this)||this;return o.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),o}return __extends(Quad,i),Quad}(Te),Pe=function(i){function QuadUv(){var o=i.call(this)||this;return o.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),o.uvs=new Float32Array([0,0,1,0,1,1,0,1]),o.vertexBuffer=new ve(o.vertices),o.uvBuffer=new ve(o.uvs),o.addAttribute("aVertexPosition",o.vertexBuffer).addAttribute("aTextureCoord",o.uvBuffer).addIndex([0,1,2,0,2,3]),o}return __extends(QuadUv,i),QuadUv.prototype.map=function(i,o){var a=0,h=0;return this.uvs[0]=a,this.uvs[1]=h,this.uvs[2]=a+o.width/i.width,this.uvs[3]=h,this.uvs[4]=a+o.width/i.width,this.uvs[5]=h+o.height/i.height,this.uvs[6]=a,this.uvs[7]=h+o.height/i.height,a=o.x,h=o.y,this.vertices[0]=a,this.vertices[1]=h,this.vertices[2]=a+o.width,this.vertices[3]=h,this.vertices[4]=a+o.width,this.vertices[5]=h+o.height,this.vertices[6]=a,this.vertices[7]=h+o.height,this.invalidate(),this},QuadUv.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},QuadUv}(Te),Oe=0,Ae=function(){function UniformGroup(i,o){this.uniforms=i,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Oe++,this.static=!!o}return UniformGroup.prototype.update=function(){this.dirtyId++},UniformGroup.prototype.add=function(i,o,a){this.uniforms[i]=new UniformGroup(o,a)},UniformGroup.from=function(i,o){return new UniformGroup(i,o)},UniformGroup}(),Re=function(){function FilterState(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new _.j,this.destinationFrame=new _.j,this.filters=[]}return FilterState.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},FilterState}(),Ie=function(i){function FilterSystem(o){var a=i.call(this,o)||this;return a.defaultFilterStack=[{}],a.texturePool=new me,a.texturePool.setScreenSize(o.view),a.statePool=[],a.quad=new Ce,a.quadUv=new Pe,a.tempRect=new _.j,a.activeState={},a.globalUniforms=new Ae({outputFrame:a.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),a.forceClear=!1,a.useMaxPadding=!1,a}return __extends(FilterSystem,i),FilterSystem.prototype.push=function(i,o){for(var a=this.renderer,h=this.defaultFilterStack,c=this.statePool.pop()||new Re,l=o[0].resolution,m=o[0].padding,g=o[0].autoFit,_=o[0].legacy,x=1;x<o.length;x++){var S=o[x];l=Math.min(l,S.resolution),m=this.useMaxPadding?Math.max(m,S.padding):m+S.padding,g=g||S.autoFit,_=_||S.legacy}1===h.length&&(this.defaultFilterStack[0].renderTexture=a.renderTexture.current),h.push(c),c.resolution=l,c.legacy=_,c.target=i,c.sourceFrame.copyFrom(i.filterArea||i.getBounds(!0)),c.sourceFrame.pad(m),g&&c.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),c.sourceFrame.ceil(l),c.renderTexture=this.getOptimalFilterTexture(c.sourceFrame.width,c.sourceFrame.height,l),c.filters=o,c.destinationFrame.width=c.renderTexture.width,c.destinationFrame.height=c.renderTexture.height,c.renderTexture.filterFrame=c.sourceFrame,a.renderTexture.bind(c.renderTexture,c.sourceFrame),a.renderTexture.clear()},FilterSystem.prototype.pop=function(){var i=this.defaultFilterStack,o=i.pop(),a=o.filters;this.activeState=o;var h=this.globalUniforms.uniforms;h.outputFrame=o.sourceFrame,h.resolution=o.resolution;var l=h.inputSize,m=h.inputPixel,g=h.inputClamp;if(l[0]=o.destinationFrame.width,l[1]=o.destinationFrame.height,l[2]=1/l[0],l[3]=1/l[1],m[0]=l[0]*o.resolution,m[1]=l[1]*o.resolution,m[2]=1/m[0],m[3]=1/m[1],g[0]=.5*m[2],g[1]=.5*m[3],g[2]=o.sourceFrame.width*l[2]-.5*m[2],g[3]=o.sourceFrame.height*l[3]-.5*m[3],o.legacy){var _=h.filterArea;_[0]=o.destinationFrame.width,_[1]=o.destinationFrame.height,_[2]=o.sourceFrame.x,_[3]=o.sourceFrame.y,h.filterClamp=h.inputClamp}this.globalUniforms.update();var x=i[i.length-1];if(o.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),1===a.length)a[0].apply(this,o.renderTexture,x.renderTexture,c.d.BLEND,o),this.returnFilterTexture(o.renderTexture);else{var S=o.renderTexture,R=this.getOptimalFilterTexture(S.width,S.height,o.resolution);R.filterFrame=S.filterFrame;var k=0;for(k=0;k<a.length-1;++k){a[k].apply(this,S,R,c.d.CLEAR,o);var j=S;S=R,R=j}a[k].apply(this,S,x.renderTexture,c.d.BLEND,o),this.returnFilterTexture(S),this.returnFilterTexture(R)}o.clear(),this.statePool.push(o)},FilterSystem.prototype.bindAndClear=function(i,o){void 0===o&&(o=c.d.CLEAR),this.renderer.renderTexture.bind(i,i?i.filterFrame:null),"boolean"==typeof o&&(o=o?c.d.CLEAR:c.d.BLEND,Object(l.deprecation)("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(o===c.d.CLEAR||o===c.d.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},FilterSystem.prototype.applyFilter=function(i,o,a,h){var l=this.renderer;this.bindAndClear(a,h),i.uniforms.uSampler=o,i.uniforms.filterGlobals=this.globalUniforms,l.state.set(i.state),l.shader.bind(i),i.legacy?(this.quadUv.map(o._frame,o.filterFrame),l.geometry.bind(this.quadUv),l.geometry.draw(c.e.TRIANGLES)):(l.geometry.bind(this.quad),l.geometry.draw(c.e.TRIANGLE_STRIP))},FilterSystem.prototype.calculateSpriteMatrix=function(i,o){var a=this.activeState,h=a.sourceFrame,c=a.destinationFrame,l=o._texture.orig,m=i.set(c.width,0,0,c.height,h.x,h.y),g=o.worldTransform.copyTo(_.d.TEMP_MATRIX);return g.invert(),m.prepend(g),m.scale(1/l.width,1/l.height),m.translate(o.anchor.x,o.anchor.y),m},FilterSystem.prototype.destroy=function(){this.texturePool.clear(!1)},FilterSystem.prototype.getOptimalFilterTexture=function(i,o,a){return void 0===a&&(a=1),this.texturePool.getOptimalTexture(i,o,a)},FilterSystem.prototype.getFilterTexture=function(i,o){if("number"==typeof i){var a=i;i=o,o=a}i=i||this.activeState.renderTexture;var h=this.texturePool.getOptimalTexture(i.width,i.height,o||i.resolution);return h.filterFrame=i.filterFrame,h},FilterSystem.prototype.returnFilterTexture=function(i){this.texturePool.returnTexture(i)},FilterSystem.prototype.emptyPool=function(){this.texturePool.clear(!0)},FilterSystem.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},FilterSystem}(ae),ke=function(){function ObjectRenderer(i){this.renderer=i}return ObjectRenderer.prototype.flush=function(){},ObjectRenderer.prototype.destroy=function(){this.renderer=null},ObjectRenderer.prototype.start=function(){},ObjectRenderer.prototype.stop=function(){this.flush()},ObjectRenderer.prototype.render=function(i){},ObjectRenderer}(),Fe=function(i){function BatchSystem(o){var a=i.call(this,o)||this;return a.emptyRenderer=new ke(o),a.currentRenderer=a.emptyRenderer,a}return __extends(BatchSystem,i),BatchSystem.prototype.setObjectRenderer=function(i){this.currentRenderer!==i&&(this.currentRenderer.stop(),this.currentRenderer=i,this.currentRenderer.start())},BatchSystem.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},BatchSystem.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},BatchSystem.prototype.copyBoundTextures=function(i,o){for(var a=this.renderer.texture.boundTextures,h=o-1;h>=0;--h)i[h]=a[h]||null,i[h]&&(i[h]._batchLocation=h)},BatchSystem.prototype.boundArray=function(i,o,a,h){for(var c=i.elements,l=i.ids,m=i.count,g=0,_=0;_<m;_++){var x=c[_],S=x._batchLocation;if(S>=0&&S<h&&o[S]===x)l[_]=S;else for(;g<h;){var R=o[g];if(!R||R._batchEnabled!==a||R._batchLocation!==g){l[_]=g,x._batchLocation=g,o[g]=x;break}g++}}},BatchSystem}(ae),ze=0,De=function(i){function ContextSystem(o){var a=i.call(this,o)||this;return a.webGLVersion=1,a.extensions={},a.supports={uint32Indices:!1},a.handleContextLost=a.handleContextLost.bind(a),a.handleContextRestored=a.handleContextRestored.bind(a),o.view.addEventListener("webglcontextlost",a.handleContextLost,!1),o.view.addEventListener("webglcontextrestored",a.handleContextRestored,!1),a}return __extends(ContextSystem,i),Object.defineProperty(ContextSystem.prototype,"isLost",{get:function get(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),ContextSystem.prototype.contextChange=function(i){this.gl=i,this.renderer.gl=i,this.renderer.CONTEXT_UID=ze++,i.isContextLost()&&i.getExtension("WEBGL_lose_context")&&i.getExtension("WEBGL_lose_context").restoreContext()},ContextSystem.prototype.initFromContext=function(i){this.gl=i,this.validateContext(i),this.renderer.gl=i,this.renderer.CONTEXT_UID=ze++,this.renderer.runners.contextChange.emit(i)},ContextSystem.prototype.initFromOptions=function(i){var o=this.createContext(this.renderer.view,i);this.initFromContext(o)},ContextSystem.prototype.createContext=function(i,o){var a;if(h.b.PREFER_ENV>=c.f.WEBGL2&&(a=i.getContext("webgl2",o)),a)this.webGLVersion=2;else if(this.webGLVersion=1,!(a=i.getContext("webgl",o)||i.getContext("experimental-webgl",o)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=a,this.getExtensions(),this.gl},ContextSystem.prototype.getExtensions=function(){var i=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:i.getExtension("WEBGL_draw_buffers"),depthTexture:i.getExtension("WEBGL_depth_texture"),loseContext:i.getExtension("WEBGL_lose_context"),vertexArrayObject:i.getExtension("OES_vertex_array_object")||i.getExtension("MOZ_OES_vertex_array_object")||i.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:i.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:i.getExtension("OES_element_index_uint"),floatTexture:i.getExtension("OES_texture_float"),floatTextureLinear:i.getExtension("OES_texture_float_linear"),textureHalfFloat:i.getExtension("OES_texture_half_float"),textureHalfFloatLinear:i.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:i.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:i.getExtension("EXT_color_buffer_float"),floatTextureLinear:i.getExtension("OES_texture_float_linear")})},ContextSystem.prototype.handleContextLost=function(i){i.preventDefault()},ContextSystem.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},ContextSystem.prototype.destroy=function(){var i=this.renderer.view;i.removeEventListener("webglcontextlost",this.handleContextLost),i.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},ContextSystem.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},ContextSystem.prototype.validateContext=function(i){i.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var o="WebGL2RenderingContext"in window&&i instanceof window.WebGL2RenderingContext||!!i.getExtension("OES_element_index_uint");this.supports.uint32Indices=o,o||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},ContextSystem}(ae),Le=function Rt(i){this.framebuffer=i,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=c.k.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},Be=new _.j,Ne=function(i){function FramebufferSystem(o){var a=i.call(this,o)||this;return a.managedFramebuffers=[],a.unknownFramebuffer=new ue(10,10),a.msaaSamples=null,a}return __extends(FramebufferSystem,i),FramebufferSystem.prototype.contextChange=function(){var i=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new _.j,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var o=this.renderer.context.extensions.drawBuffers,a=this.renderer.context.extensions.depthTexture;h.b.PREFER_ENV===c.f.WEBGL_LEGACY&&(o=null,a=null),o?i.drawBuffers=function(i){return o.drawBuffersWEBGL(i)}:(this.hasMRT=!1,i.drawBuffers=function(){}),a||(this.writeDepthTexture=!1)}else this.msaaSamples=i.getInternalformatParameter(i.RENDERBUFFER,i.RGBA8,i.SAMPLES)},FramebufferSystem.prototype.bind=function(i,o){var a=this.gl;if(i){var h=i.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(i);this.current!==i&&(this.current=i,a.bindFramebuffer(a.FRAMEBUFFER,h.framebuffer)),h.dirtyId!==i.dirtyId&&(h.dirtyId=i.dirtyId,h.dirtyFormat!==i.dirtyFormat?(h.dirtyFormat=i.dirtyFormat,this.updateFramebuffer(i)):h.dirtySize!==i.dirtySize&&(h.dirtySize=i.dirtySize,this.resizeFramebuffer(i)));for(var c=0;c<i.colorTextures.length;c++){var l=i.colorTextures[c];this.renderer.texture.unbind(l.parentTextureArray||l)}i.depthTexture&&this.renderer.texture.unbind(i.depthTexture),o?this.setViewport(o.x,o.y,o.width,o.height):this.setViewport(0,0,i.width,i.height)}else this.current&&(this.current=null,a.bindFramebuffer(a.FRAMEBUFFER,null)),o?this.setViewport(o.x,o.y,o.width,o.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},FramebufferSystem.prototype.setViewport=function(i,o,a,h){var c=this.viewport;c.width===a&&c.height===h&&c.x===i&&c.y===o||(c.x=i,c.y=o,c.width=a,c.height=h,this.gl.viewport(i,o,a,h))},Object.defineProperty(FramebufferSystem.prototype,"size",{get:function get(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),FramebufferSystem.prototype.clear=function(i,o,a,h,l){void 0===l&&(l=c.c.COLOR|c.c.DEPTH);var m=this.gl;m.clearColor(i,o,a,h),m.clear(l)},FramebufferSystem.prototype.initFramebuffer=function(i){var o=this.gl,a=new Le(o.createFramebuffer());return a.multisample=this.detectSamples(i.multisample),i.glFramebuffers[this.CONTEXT_UID]=a,this.managedFramebuffers.push(i),i.disposeRunner.add(this),a},FramebufferSystem.prototype.resizeFramebuffer=function(i){var o=this.gl,a=i.glFramebuffers[this.CONTEXT_UID];a.stencil&&(o.bindRenderbuffer(o.RENDERBUFFER,a.stencil),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,i.width,i.height));for(var h=i.colorTextures,c=0;c<h.length;c++)this.renderer.texture.bind(h[c],0);i.depthTexture&&this.renderer.texture.bind(i.depthTexture,0)},FramebufferSystem.prototype.updateFramebuffer=function(i){var o=this.gl,a=i.glFramebuffers[this.CONTEXT_UID],h=i.colorTextures.length;o.drawBuffers||(h=Math.min(h,1)),a.multisample>1&&(a.msaaBuffer=o.createRenderbuffer(),o.bindRenderbuffer(o.RENDERBUFFER,a.msaaBuffer),o.renderbufferStorageMultisample(o.RENDERBUFFER,a.multisample,o.RGBA8,i.width,i.height),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.RENDERBUFFER,a.msaaBuffer));for(var c=[],l=0;l<h;l++)if(!(0===l&&a.multisample>1)){var m=i.colorTextures[l],g=m.parentTextureArray||m;this.renderer.texture.bind(g,0),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0+l,m.target,g._glTextures[this.CONTEXT_UID].texture,0),c.push(o.COLOR_ATTACHMENT0+l)}if(c.length>1&&o.drawBuffers(c),i.depthTexture&&this.writeDepthTexture){var _=i.depthTexture;this.renderer.texture.bind(_,0),o.framebufferTexture2D(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.TEXTURE_2D,_._glTextures[this.CONTEXT_UID].texture,0)}a.stencil||!i.stencil&&!i.depth||(a.stencil=o.createRenderbuffer(),o.bindRenderbuffer(o.RENDERBUFFER,a.stencil),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,i.width,i.height),i.depthTexture||o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,a.stencil))},FramebufferSystem.prototype.detectSamples=function(i){var o=this.msaaSamples,a=c.k.NONE;if(i<=1||null===o)return a;for(var h=0;h<o.length;h++)if(o[h]<=i){a=o[h];break}return 1===a&&(a=c.k.NONE),a},FramebufferSystem.prototype.blit=function(i,o,a){var h=this.current,c=this.renderer,l=this.gl,m=this.CONTEXT_UID;if(2===c.context.webGLVersion&&h){var g=h.glFramebuffers[m];if(g){if(!i){if(g.multisample<=1)return;g.blitFramebuffer||(g.blitFramebuffer=new ue(h.width,h.height),g.blitFramebuffer.addColorTexture(0,h.colorTextures[0])),(i=g.blitFramebuffer).width=h.width,i.height=h.height}o||((o=Be).width=h.width,o.height=h.height),a||(a=o);var _=o.width===a.width&&o.height===a.height;this.bind(i),l.bindFramebuffer(l.READ_FRAMEBUFFER,g.framebuffer),l.blitFramebuffer(o.x,o.y,o.width,o.height,a.x,a.y,a.width,a.height,l.COLOR_BUFFER_BIT,_?l.NEAREST:l.LINEAR)}}},FramebufferSystem.prototype.disposeFramebuffer=function(i,o){var a=i.glFramebuffers[this.CONTEXT_UID],h=this.gl;if(a){delete i.glFramebuffers[this.CONTEXT_UID];var c=this.managedFramebuffers.indexOf(i);c>=0&&this.managedFramebuffers.splice(c,1),i.disposeRunner.remove(this),o||(h.deleteFramebuffer(a.framebuffer),a.stencil&&h.deleteRenderbuffer(a.stencil))}},FramebufferSystem.prototype.disposeAll=function(i){var o=this.managedFramebuffers;this.managedFramebuffers=[];for(var a=0;a<o.length;a++)this.disposeFramebuffer(o[a],i)},FramebufferSystem.prototype.forceStencil=function(){var i=this.current;if(i){var o=i.glFramebuffers[this.CONTEXT_UID];if(o&&!o.stencil){i.enableStencil();var a=i.width,h=i.height,c=this.gl,l=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,l),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,a,h),o.stencil=l,c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,l)}}},FramebufferSystem.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new _.j},FramebufferSystem}(ae),Ge=function Ft(i){this.buffer=i||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},Ue={5126:4,5123:2,5121:1},je=function(i){function GeometrySystem(o){var a=i.call(this,o)||this;return a._activeGeometry=null,a._activeVao=null,a.hasVao=!0,a.hasInstance=!0,a.canUseUInt32ElementIndex=!1,a.managedGeometries={},a.managedBuffers={},a}return __extends(GeometrySystem,i),GeometrySystem.prototype.contextChange=function(){this.disposeAll(!0);var i=this.gl=this.renderer.gl,o=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,!i.createVertexArray){var a=this.renderer.context.extensions.vertexArrayObject;h.b.PREFER_ENV===c.f.WEBGL_LEGACY&&(a=null),a?(i.createVertexArray=function(){return a.createVertexArrayOES()},i.bindVertexArray=function(i){return a.bindVertexArrayOES(i)},i.deleteVertexArray=function(i){return a.deleteVertexArrayOES(i)}):(this.hasVao=!1,i.createVertexArray=function(){return null},i.bindVertexArray=function(){return null},i.deleteVertexArray=function(){return null})}if(!i.vertexAttribDivisor){var l=i.getExtension("ANGLE_instanced_arrays");l?(i.vertexAttribDivisor=function(i,o){return l.vertexAttribDivisorANGLE(i,o)},i.drawElementsInstanced=function(i,o,a,h,c){return l.drawElementsInstancedANGLE(i,o,a,h,c)},i.drawArraysInstanced=function(i,o,a,h){return l.drawArraysInstancedANGLE(i,o,a,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===o.webGLVersion||!!o.extensions.uint32ElementIndex},GeometrySystem.prototype.bind=function(i,o){o=o||this.renderer.shader.shader;var a=this.gl,h=i.glVertexArrayObjects[this.CONTEXT_UID];h||(this.managedGeometries[i.id]=i,i.disposeRunner.add(this),i.glVertexArrayObjects[this.CONTEXT_UID]=h={});var c=h[o.program.id]||this.initGeometryVao(i,o.program);this._activeGeometry=i,this._activeVao!==c&&(this._activeVao=c,this.hasVao?a.bindVertexArray(c):this.activateVao(i,o.program)),this.updateBuffers()},GeometrySystem.prototype.reset=function(){this.unbind()},GeometrySystem.prototype.updateBuffers=function(){for(var i=this._activeGeometry,o=this.gl,a=0;a<i.buffers.length;a++){var h=i.buffers[a],c=h._glBuffers[this.CONTEXT_UID];if(h._updateID!==c.updateID){c.updateID=h._updateID;var l=h.index?o.ELEMENT_ARRAY_BUFFER:o.ARRAY_BUFFER;if(o.bindBuffer(l,c.buffer),this._boundBuffer=c,c.byteLength>=h.data.byteLength)o.bufferSubData(l,0,h.data);else{var m=h.static?o.STATIC_DRAW:o.DYNAMIC_DRAW;c.byteLength=h.data.byteLength,o.bufferData(l,h.data,m)}}}},GeometrySystem.prototype.checkCompatibility=function(i,o){var a=i.attributes,h=o.attributeData;for(var c in h)if(!a[c])throw new Error('shader and geometry incompatible, geometry missing the "'+c+'" attribute')},GeometrySystem.prototype.getSignature=function(i,o){var a=i.attributes,h=o.attributeData,c=["g",i.id];for(var l in a)h[l]&&c.push(l);return c.join("-")},GeometrySystem.prototype.initGeometryVao=function(i,o){this.checkCompatibility(i,o);var a=this.gl,h=this.CONTEXT_UID,c=this.getSignature(i,o),l=i.glVertexArrayObjects[this.CONTEXT_UID],m=l[c];if(m)return l[o.id]=m,m;var g=i.buffers,_=i.attributes,x={},S={};for(var R in g)x[R]=0,S[R]=0;for(var R in _)!_[R].size&&o.attributeData[R]?_[R].size=o.attributeData[R].size:_[R].size||console.warn("PIXI Geometry attribute '"+R+"' size cannot be determined (likely the bound shader does not have the attribute)"),x[_[R].buffer]+=_[R].size*Ue[_[R].type];for(var R in _){var k=_[R],j=k.size;void 0===k.stride&&(x[k.buffer]===j*Ue[k.type]?k.stride=0:k.stride=x[k.buffer]),void 0===k.start&&(k.start=S[k.buffer],S[k.buffer]+=j*Ue[k.type])}m=a.createVertexArray(),a.bindVertexArray(m);for(var X=0;X<g.length;X++){var Y=g[X];Y._glBuffers[h]||(Y._glBuffers[h]=new Ge(a.createBuffer()),this.managedBuffers[Y.id]=Y,Y.disposeRunner.add(this)),Y._glBuffers[h].refCount++}return this.activateVao(i,o),this._activeVao=m,l[o.id]=m,l[c]=m,m},GeometrySystem.prototype.disposeBuffer=function(i,o){if(this.managedBuffers[i.id]){delete this.managedBuffers[i.id];var a=i._glBuffers[this.CONTEXT_UID],h=this.gl;i.disposeRunner.remove(this),a&&(o||h.deleteBuffer(a.buffer),delete i._glBuffers[this.CONTEXT_UID])}},GeometrySystem.prototype.disposeGeometry=function(i,o){if(this.managedGeometries[i.id]){delete this.managedGeometries[i.id];var a=i.glVertexArrayObjects[this.CONTEXT_UID],h=this.gl,c=i.buffers;if(i.disposeRunner.remove(this),a){for(var l=0;l<c.length;l++){var m=c[l]._glBuffers[this.CONTEXT_UID];m.refCount--,0!==m.refCount||o||this.disposeBuffer(c[l],o)}if(!o)for(var g in a)if("g"===g[0]){var _=a[g];this._activeVao===_&&this.unbind(),h.deleteVertexArray(_)}delete i.glVertexArrayObjects[this.CONTEXT_UID]}}},GeometrySystem.prototype.disposeAll=function(i){for(var o=Object.keys(this.managedGeometries),a=0;a<o.length;a++)this.disposeGeometry(this.managedGeometries[o[a]],i);for(o=Object.keys(this.managedBuffers),a=0;a<o.length;a++)this.disposeBuffer(this.managedBuffers[o[a]],i)},GeometrySystem.prototype.activateVao=function(i,o){var a=this.gl,h=this.CONTEXT_UID,c=i.buffers,l=i.attributes;i.indexBuffer&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,i.indexBuffer._glBuffers[h].buffer);var m=null;for(var g in l){var _=l[g],x=c[_.buffer]._glBuffers[h];if(o.attributeData[g]){m!==x&&(a.bindBuffer(a.ARRAY_BUFFER,x.buffer),m=x);var S=o.attributeData[g].location;if(a.enableVertexAttribArray(S),a.vertexAttribPointer(S,_.size,_.type||a.FLOAT,_.normalized,_.stride,_.start),_.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");a.vertexAttribDivisor(S,1)}}}},GeometrySystem.prototype.draw=function(i,o,a,h){var c=this.gl,l=this._activeGeometry;if(l.indexBuffer){var m=l.indexBuffer.data.BYTES_PER_ELEMENT,g=2===m?c.UNSIGNED_SHORT:c.UNSIGNED_INT;2===m||4===m&&this.canUseUInt32ElementIndex?l.instanced?c.drawElementsInstanced(i,o||l.indexBuffer.data.length,g,(a||0)*m,h||1):c.drawElements(i,o||l.indexBuffer.data.length,g,(a||0)*m):console.warn("unsupported index buffer type: uint32")}else l.instanced?c.drawArraysInstanced(i,a,o||l.getSize(),h||1):c.drawArrays(i,a,o||l.getSize());return this},GeometrySystem.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},GeometrySystem}(ae),We=function(){function MaskData(i){void 0===i&&(i=null),this.type=c.i.NONE,this.autoDetect=!0,this.maskObject=i||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return MaskData.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=c.i.NONE,this.autoDetect=!0),this._target=null},MaskData.prototype.copyCountersOrReset=function(i){i?(this._stencilCounter=i._stencilCounter,this._scissorCounter=i._scissorCounter,this._scissorRect=i._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},MaskData}();function compileShader(i,o,a){var h=i.createShader(o);return i.shaderSource(h,a),i.compileShader(h),h}function compileProgram(i,o,a,h){var c=compileShader(i,i.VERTEX_SHADER,o),l=compileShader(i,i.FRAGMENT_SHADER,a),m=i.createProgram();if(i.attachShader(m,c),i.attachShader(m,l),h)for(var g in h)i.bindAttribLocation(m,h[g],g);return i.linkProgram(m),i.getProgramParameter(m,i.LINK_STATUS)||(i.getShaderParameter(c,i.COMPILE_STATUS)||(console.warn(o),console.error(i.getShaderInfoLog(c))),i.getShaderParameter(l,i.COMPILE_STATUS)||(console.warn(a),console.error(i.getShaderInfoLog(l))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",i.getProgramParameter(m,i.VALIDATE_STATUS)),console.error("gl.getError()",i.getError()),""!==i.getProgramInfoLog(m)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",i.getProgramInfoLog(m)),i.deleteProgram(m),m=null),i.deleteShader(c),i.deleteShader(l),m}function booleanArray(i){for(var o=new Array(i),a=0;a<o.length;a++)o[a]=!1;return o}function defaultValue(i,o){switch(i){case"float":return 0;case"vec2":return new Float32Array(2*o);case"vec3":return new Float32Array(3*o);case"vec4":return new Float32Array(4*o);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*o);case"ivec3":return new Int32Array(3*o);case"ivec4":return new Int32Array(4*o);case"bool":return!1;case"bvec2":return booleanArray(2*o);case"bvec3":return booleanArray(3*o);case"bvec4":return booleanArray(4*o);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Xe,He={},Ve=He;function getTestContext(){if(Ve===He||Ve&&Ve.isContextLost()){var i=document.createElement("canvas"),o=void 0;h.b.PREFER_ENV>=c.f.WEBGL2&&(o=i.getContext("webgl2",{})),o||((o=i.getContext("webgl",{})||i.getContext("experimental-webgl",{}))?o.getExtension("WEBGL_draw_buffers"):o=null),Ve=o}return Ve}function setPrecision(i,o,a){if("precision"!==i.substring(0,9)){var h=o;return o===c.l.HIGH&&a!==c.l.HIGH&&(h=c.l.MEDIUM),"precision "+h+" float;\n"+i}return a!==c.l.HIGH&&"precision highp"===i.substring(0,15)?i.replace("precision highp","precision mediump"):i}var Ye={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(i){return Ye[i]}var qe=null,Ke={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(i,o){if(!qe){var a=Object.keys(Ke);qe={};for(var h=0;h<a.length;++h){var c=a[h];qe[i[c]]=Ke[c]}}return qe[o]}var Ze,Qe=[{test:function test(i){return"float"===i.type&&1===i.size},code:function code(i){return'\n            if(uv["'+i+'"] !== ud["'+i+'"].value)\n            {\n                ud["'+i+'"].value = uv["'+i+'"]\n                gl.uniform1f(ud["'+i+'"].location, uv["'+i+'"])\n            }\n            '}},{test:function test(i){return("sampler2D"===i.type||"samplerCube"===i.type||"sampler2DArray"===i.type)&&1===i.size&&!i.isArray},code:function code(i){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+i+'"], t);\n\n            if(ud["'+i+'"].value !== t)\n            {\n                ud["'+i+'"].value = t;\n                gl.uniform1i(ud["'+i+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function test(i,o){return"mat3"===i.type&&1===i.size&&void 0!==o.a},code:function code(i){return'\n            gl.uniformMatrix3fv(ud["'+i+'"].location, false, uv["'+i+'"].toArray(true));\n            '}},{test:function test(i,o){return"vec2"===i.type&&1===i.size&&void 0!==o.x},code:function code(i){return'\n                cv = ud["'+i+'"].value;\n                v = uv["'+i+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+i+'"].location, v.x, v.y);\n                }'}},{test:function test(i){return"vec2"===i.type&&1===i.size},code:function code(i){return'\n                cv = ud["'+i+'"].value;\n                v = uv["'+i+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+i+'"].location, v[0], v[1]);\n                }\n            '}},{test:function test(i,o){return"vec4"===i.type&&1===i.size&&void 0!==o.width},code:function code(i){return'\n                cv = ud["'+i+'"].value;\n                v = uv["'+i+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+i+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function test(i){return"vec4"===i.type&&1===i.size},code:function code(i){return'\n                cv = ud["'+i+'"].value;\n                v = uv["'+i+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+i+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Je={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},$e={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},et=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function generateIfTestSrc(i){for(var o="",a=0;a<i;++a)a>0&&(o+="\nelse "),a<i-1&&(o+="if(test == "+a+".0){}");return o}function checkMaxIfStatementsInShader(i,o){if(0===i)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var a=o.createShader(o.FRAGMENT_SHADER);;){var h=et.replace(/%forloop%/gi,generateIfTestSrc(i));if(o.shaderSource(a,h),o.compileShader(a),o.getShaderParameter(a,o.COMPILE_STATUS))break;i=i/2|0}return i}var tt=0,rt={},it=function(){function Program(i,o,a){void 0===a&&(a="pixi-shader"),this.id=tt++,this.vertexSrc=i||Program.defaultVertexSrc,this.fragmentSrc=o||Program.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(a=a.replace(/\s+/g,"-"),rt[a]?(rt[a]++,a+="-"+rt[a]):rt[a]=1,this.vertexSrc="#define SHADER_NAME "+a+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+a+"\n"+this.fragmentSrc,this.vertexSrc=setPrecision(this.vertexSrc,h.b.PRECISION_VERTEX,c.l.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,h.b.PRECISION_FRAGMENT,function getMaxFragmentPrecision(){if(!Xe){Xe=c.l.MEDIUM;var i=getTestContext();if(i&&i.getShaderPrecisionFormat){var o=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);Xe=o.precision?c.l.HIGH:c.l.MEDIUM}}return Xe}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return Program.prototype.extractData=function(i,o){var a=getTestContext();if(a){var h=compileProgram(a,i,o);this.attributeData=this.getAttributeData(h,a),this.uniformData=this.getUniformData(h,a),a.deleteProgram(h)}else this.uniformData={},this.attributeData={}},Program.prototype.getAttributeData=function(i,o){for(var a={},h=[],c=o.getProgramParameter(i,o.ACTIVE_ATTRIBUTES),l=0;l<c;l++){var m=o.getActiveAttrib(i,l),g=mapType(o,m.type),_={type:g,name:m.name,size:mapSize(g),location:0};a[m.name]=_,h.push(_)}for(h.sort((function(i,o){return i.name>o.name?1:-1})),l=0;l<h.length;l++)h[l].location=l;return a},Program.prototype.getUniformData=function(i,o){for(var a={},h=o.getProgramParameter(i,o.ACTIVE_UNIFORMS),c=0;c<h;c++){var l=o.getActiveUniform(i,c),m=l.name.replace(/\[.*?\]$/,""),g=l.name.match(/\[.*?\]$/),_=mapType(o,l.type);a[m]={type:_,size:l.size,isArray:g,value:defaultValue(_,l.size)}}return a},Object.defineProperty(Program,"defaultVertexSrc",{get:function get(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(Program,"defaultFragmentSrc",{get:function get(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),Program.from=function(i,o,a){var h=i+o,c=l.ProgramCache[h];return c||(l.ProgramCache[h]=c=new Program(i,o,a)),c},Program}(),nt=function(){function Shader(i,o){for(var a in this.program=i,this.uniformGroup=o?o instanceof Ae?o:new Ae(o):new Ae({}),i.uniformData)this.uniformGroup.uniforms[a]instanceof Array&&(this.uniformGroup.uniforms[a]=new Float32Array(this.uniformGroup.uniforms[a]))}return Shader.prototype.checkUniformExists=function(i,o){if(o.uniforms[i])return!0;for(var a in o.uniforms){var h=o.uniforms[a];if(h.group&&this.checkUniformExists(i,h))return!0}return!1},Shader.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(Shader.prototype,"uniforms",{get:function get(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),Shader.from=function(i,o,a){return new Shader(it.from(i,o),a)},Shader}(),ot=function(){function State(){this.data=0,this.blendMode=c.b.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(State.prototype,"blend",{get:function get(){return!!(1&this.data)},set:function set(i){!!(1&this.data)!==i&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"offsets",{get:function get(){return!!(2&this.data)},set:function set(i){!!(2&this.data)!==i&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"culling",{get:function get(){return!!(4&this.data)},set:function set(i){!!(4&this.data)!==i&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"depthTest",{get:function get(){return!!(8&this.data)},set:function set(i){!!(8&this.data)!==i&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"clockwiseFrontFace",{get:function get(){return!!(16&this.data)},set:function set(i){!!(16&this.data)!==i&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"blendMode",{get:function get(){return this._blendMode},set:function set(i){this.blend=i!==c.b.NONE,this._blendMode=i},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"polygonOffset",{get:function get(){return this._polygonOffset},set:function set(i){this.offsets=!!i,this._polygonOffset=i},enumerable:!1,configurable:!0}),State.for2d=function(){var i=new State;return i.depthTest=!1,i.blend=!0,i},State}(),at=function(i){function Filter(o,a,c){var l=this,m=it.from(o||Filter.defaultVertexSrc,a||Filter.defaultFragmentSrc);return(l=i.call(this,m,c)||this).padding=0,l.resolution=h.b.FILTER_RESOLUTION,l.enabled=!0,l.autoFit=!0,l.legacy=!!l.program.attributeData.aTextureCoord,l.state=new ot,l}return __extends(Filter,i),Filter.prototype.apply=function(i,o,a,h,c){i.applyFilter(this,o,a,h)},Object.defineProperty(Filter.prototype,"blendMode",{get:function get(){return this.state.blendMode},set:function set(i){this.state.blendMode=i},enumerable:!1,configurable:!0}),Object.defineProperty(Filter,"defaultVertexSrc",{get:function get(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(Filter,"defaultFragmentSrc",{get:function get(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),Filter}(nt),st=new _.d,ut=function(){function TextureMatrix(i,o){this._texture=i,this.mapCoord=new _.d,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._updateID=-1,this.clampOffset=0,this.clampMargin=void 0===o?.5:o,this.isSimple=!1}return Object.defineProperty(TextureMatrix.prototype,"texture",{get:function get(){return this._texture},set:function set(i){this._texture=i,this._updateID=-1},enumerable:!1,configurable:!0}),TextureMatrix.prototype.multiplyUvs=function(i,o){void 0===o&&(o=i);for(var a=this.mapCoord,h=0;h<i.length;h+=2){var c=i[h],l=i[h+1];o[h]=c*a.a+l*a.c+a.tx,o[h+1]=c*a.b+l*a.d+a.ty}return o},TextureMatrix.prototype.update=function(i){var o=this._texture;if(!o||!o.valid)return!1;if(!i&&this._updateID===o._updateID)return!1;this._updateID=o._updateID;var a=o._uvs;this.mapCoord.set(a.x1-a.x0,a.y1-a.y0,a.x3-a.x0,a.y3-a.y0,a.x0,a.y0);var h=o.orig,c=o.trim;c&&(st.set(h.width/c.width,0,0,h.height/c.height,-c.x/c.width,-c.y/c.height),this.mapCoord.append(st));var l=o.baseTexture,m=this.uClampFrame,g=this.clampMargin/l.resolution,_=this.clampOffset;return m[0]=(o._frame.x+g+_)/l.width,m[1]=(o._frame.y+g+_)/l.height,m[2]=(o._frame.x+o._frame.width-g+_)/l.width,m[3]=(o._frame.y+o._frame.height-g+_)/l.height,this.uClampOffset[0]=_/l.realWidth,this.uClampOffset[1]=_/l.realHeight,this.isSimple=o._frame.width===l.width&&o._frame.height===l.height&&0===o.rotate,!0},TextureMatrix}(),ht=function(i){function SpriteMaskFilter(o){var a=this,h=new _.d;return a=i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this,o.renderable=!1,a.maskSprite=o,a.maskMatrix=h,a}return __extends(SpriteMaskFilter,i),SpriteMaskFilter.prototype.apply=function(i,o,a,h){var c=this.maskSprite,l=c._texture;l.valid&&(l.uvMatrix||(l.uvMatrix=new ut(l,0)),l.uvMatrix.update(),this.uniforms.npmAlpha=l.baseTexture.alphaMode?0:1,this.uniforms.mask=l,this.uniforms.otherMatrix=i.calculateSpriteMatrix(this.maskMatrix,c).prepend(l.uvMatrix.mapCoord),this.uniforms.alpha=c.worldAlpha,this.uniforms.maskClamp=l.uvMatrix.uClampFrame,i.applyFilter(this,o,a,h))},SpriteMaskFilter}(at),ct=function(i){function MaskSystem(o){var a=i.call(this,o)||this;return a.enableScissor=!1,a.alphaMaskPool=[],a.maskDataPool=[],a.maskStack=[],a.alphaMaskIndex=0,a}return __extends(MaskSystem,i),MaskSystem.prototype.setMaskStack=function(i){this.maskStack=i,this.renderer.scissor.setMaskStack(i),this.renderer.stencil.setMaskStack(i)},MaskSystem.prototype.push=function(i,o){var a=o;if(!a.isMaskData){var h=this.maskDataPool.pop()||new We;h.pooled=!0,h.maskObject=o,a=h}switch(a.autoDetect&&this.detect(a),a.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),a._target=i,a.type){case c.i.SCISSOR:this.maskStack.push(a),this.renderer.scissor.push(a);break;case c.i.STENCIL:this.maskStack.push(a),this.renderer.stencil.push(a);break;case c.i.SPRITE:a.copyCountersOrReset(null),this.pushSpriteMask(a),this.maskStack.push(a)}},MaskSystem.prototype.pop=function(i){var o=this.maskStack.pop();if(o&&o._target===i){switch(o.type){case c.i.SCISSOR:this.renderer.scissor.pop();break;case c.i.STENCIL:this.renderer.stencil.pop(o.maskObject);break;case c.i.SPRITE:this.popSpriteMask()}o.reset(),o.pooled&&this.maskDataPool.push(o)}},MaskSystem.prototype.detect=function(i){var o=i.maskObject;if(o.isSprite)i.type=c.i.SPRITE;else if(i.type=c.i.STENCIL,this.enableScissor&&o.isFastRect&&o.isFastRect()){var a=o.worldTransform,h=Math.atan2(a.b,a.a),l=Math.atan2(a.d,a.c);h=Math.round(h*(180/Math.PI)*100),l=((l=Math.round(l*(180/Math.PI)*100)-h)%18e3+18e3)%18e3,0==(h=(h%9e3+9e3)%9e3)&&9e3===l&&(i.type=c.i.SCISSOR)}},MaskSystem.prototype.pushSpriteMask=function(i){var o=i.maskObject,a=i._target,h=this.alphaMaskPool[this.alphaMaskIndex];h||(h=this.alphaMaskPool[this.alphaMaskIndex]=[new ht(o)]),h[0].resolution=this.renderer.resolution,h[0].maskSprite=o;var c=a.filterArea;a.filterArea=o.getBounds(!0),this.renderer.filter.push(a,h),a.filterArea=c,this.alphaMaskIndex++},MaskSystem.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},MaskSystem}(ae),lt=function(i){function AbstractMaskSystem(o){var a=i.call(this,o)||this;return a.maskStack=[],a.glConst=0,a}return __extends(AbstractMaskSystem,i),AbstractMaskSystem.prototype.getStackLength=function(){return this.maskStack.length},AbstractMaskSystem.prototype.setMaskStack=function(i){var o=this.renderer.gl,a=this.getStackLength();this.maskStack=i;var h=this.getStackLength();h!==a&&(0===h?o.disable(this.glConst):(o.enable(this.glConst),this._useCurrent()))},AbstractMaskSystem.prototype._useCurrent=function(){},AbstractMaskSystem.prototype.destroy=function(){i.prototype.destroy.call(this),this.maskStack=null},AbstractMaskSystem}(ae),dt=function(i){function ScissorSystem(o){var a=i.call(this,o)||this;return a.glConst=WebGLRenderingContext.SCISSOR_TEST,a}return __extends(ScissorSystem,i),ScissorSystem.prototype.getStackLength=function(){var i=this.maskStack[this.maskStack.length-1];return i?i._scissorCounter:0},ScissorSystem.prototype.push=function(i){var o=i.maskObject;o.renderable=!0;var a=i._scissorRect,h=o.getBounds(!0),c=this.renderer.gl;o.renderable=!1,a?h.fit(a):c.enable(c.SCISSOR_TEST),i._scissorCounter++,i._scissorRect=h,this._useCurrent()},ScissorSystem.prototype.pop=function(){var i=this.renderer.gl;this.getStackLength()>0?this._useCurrent():i.disable(i.SCISSOR_TEST)},ScissorSystem.prototype._useCurrent=function(){var i=this.maskStack[this.maskStack.length-1]._scissorRect,o=this.renderer.renderTexture.current,a=this.renderer.projection,h=a.transform,c=a.sourceFrame,l=a.destinationFrame,m=o?o.resolution:this.renderer.resolution,g=(i.x-c.x)*m+l.x,_=(i.y-c.y)*m+l.y,x=i.width*m,S=i.height*m;h&&(g+=h.tx*m,_+=h.ty*m),o||(_=this.renderer.height-S-_),this.renderer.gl.scissor(g,_,x,S)},ScissorSystem}(lt),pt=function(i){function StencilSystem(o){var a=i.call(this,o)||this;return a.glConst=WebGLRenderingContext.STENCIL_TEST,a}return __extends(StencilSystem,i),StencilSystem.prototype.getStackLength=function(){var i=this.maskStack[this.maskStack.length-1];return i?i._stencilCounter:0},StencilSystem.prototype.push=function(i){var o=i.maskObject,a=this.renderer.gl,h=i._stencilCounter;0===h&&(this.renderer.framebuffer.forceStencil(),a.enable(a.STENCIL_TEST)),i._stencilCounter++,a.colorMask(!1,!1,!1,!1),a.stencilFunc(a.EQUAL,h,this._getBitwiseMask()),a.stencilOp(a.KEEP,a.KEEP,a.INCR),o.renderable=!0,o.render(this.renderer),this.renderer.batch.flush(),o.renderable=!1,this._useCurrent()},StencilSystem.prototype.pop=function(i){var o=this.renderer.gl;0===this.getStackLength()?(o.disable(o.STENCIL_TEST),o.clear(o.STENCIL_BUFFER_BIT),o.clearStencil(0)):(o.colorMask(!1,!1,!1,!1),o.stencilOp(o.KEEP,o.KEEP,o.DECR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent())},StencilSystem.prototype._useCurrent=function(){var i=this.renderer.gl;i.colorMask(!0,!0,!0,!0),i.stencilFunc(i.EQUAL,this.getStackLength(),this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)},StencilSystem.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},StencilSystem}(lt),ft=function(i){function ProjectionSystem(o){var a=i.call(this,o)||this;return a.destinationFrame=null,a.sourceFrame=null,a.defaultFrame=null,a.projectionMatrix=new _.d,a.transform=null,a}return __extends(ProjectionSystem,i),ProjectionSystem.prototype.update=function(i,o,a,h){this.destinationFrame=i||this.destinationFrame||this.defaultFrame,this.sourceFrame=o||this.sourceFrame||i,this.calculateProjection(this.destinationFrame,this.sourceFrame,a,h),this.transform&&this.projectionMatrix.append(this.transform);var c=this.renderer;c.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,c.globalUniforms.update(),c.shader.shader&&c.shader.syncUniformGroup(c.shader.shader.uniforms.globals)},ProjectionSystem.prototype.calculateProjection=function(i,o,a,h){var c=this.projectionMatrix,l=h?-1:1;c.a=1/i.width*2*a,c.d=l*(1/i.height*2)*a,c.tx=-1-o.x*c.a,c.ty=-l-o.y*c.d},ProjectionSystem.prototype.setTransform=function(i){},ProjectionSystem}(ae),mt=new _.j,gt=function(i){function RenderTextureSystem(o){var a=i.call(this,o)||this;return a.clearColor=o._backgroundColorRgba,a.defaultMaskStack=[],a.current=null,a.sourceFrame=new _.j,a.destinationFrame=new _.j,a}return __extends(RenderTextureSystem,i),RenderTextureSystem.prototype.bind=function(i,o,a){void 0===i&&(i=null),this.current=i;var h,c=this.renderer;if(i){var l=i.baseTexture;h=l.resolution,a||(mt.width=l.realWidth,mt.height=l.realHeight,a=mt),o||(o=a),this.renderer.framebuffer.bind(l.framebuffer,a),this.renderer.projection.update(a,o,h,!1),this.renderer.mask.setMaskStack(l.maskStack)}else h=this.renderer.resolution,a||(mt.width=c.width,mt.height=c.height,a=mt),o||(o=a),c.framebuffer.bind(null,a),this.renderer.projection.update(a,o,h,!0),this.renderer.mask.setMaskStack(this.defaultMaskStack);this.sourceFrame.copyFrom(o),this.destinationFrame.x=a.x/h,this.destinationFrame.y=a.y/h,this.destinationFrame.width=a.width/h,this.destinationFrame.height=a.height/h,o===a&&this.sourceFrame.copyFrom(this.destinationFrame)},RenderTextureSystem.prototype.clear=function(i,o){i=this.current?i||this.current.baseTexture.clearColor:i||this.clearColor,this.renderer.framebuffer.clear(i[0],i[1],i[2],i[3],o)},RenderTextureSystem.prototype.resize=function(){this.bind(null)},RenderTextureSystem.prototype.reset=function(){this.bind(null)},RenderTextureSystem}(ae),yt=function le(){},_t=function(){function GLProgram(i,o){this.program=i,this.uniformData=o,this.uniformGroups={}}return GLProgram.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},GLProgram}(),vt=0,xt={textureCount:0},St=function(i){function ShaderSystem(o){var a=i.call(this,o)||this;return a.destroyed=!1,a.systemCheck(),a.gl=null,a.shader=null,a.program=null,a.cache={},a.id=vt++,a}return __extends(ShaderSystem,i),ShaderSystem.prototype.systemCheck=function(){if(!function unsafeEvalSupported(){if("boolean"==typeof Ze)return Ze;try{var i=new Function("param1","param2","param3","return param1[param2] === param3;");Ze=!0===i({a:"b"},"a","b")}catch(i){Ze=!1}return Ze}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},ShaderSystem.prototype.contextChange=function(i){this.gl=i,this.reset()},ShaderSystem.prototype.bind=function(i,o){i.uniforms.globals=this.renderer.globalUniforms;var a=i.program,h=a.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(i);return this.shader=i,this.program!==a&&(this.program=a,this.gl.useProgram(h.program)),o||(xt.textureCount=0,this.syncUniformGroup(i.uniformGroup,xt)),h},ShaderSystem.prototype.setUniforms=function(i){var o=this.shader.program,a=o.glPrograms[this.renderer.CONTEXT_UID];o.syncUniforms(a.uniformData,i,this.renderer)},ShaderSystem.prototype.syncUniformGroup=function(i,o){var a=this.getglProgram();i.static&&i.dirtyId===a.uniformGroups[i.id]||(a.uniformGroups[i.id]=i.dirtyId,this.syncUniforms(i,a,o))},ShaderSystem.prototype.syncUniforms=function(i,o,a){(i.syncUniforms[this.shader.program.id]||this.createSyncGroups(i))(o.uniformData,i.uniforms,this.renderer,a)},ShaderSystem.prototype.createSyncGroups=function(i){var o=this.getSignature(i,this.shader.program.uniformData);return this.cache[o]||(this.cache[o]=function generateUniformsSync(i,o){var a=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(var h in i.uniforms){var c=o[h];if(c){for(var l=i.uniforms[h],m=!1,g=0;g<Qe.length;g++)if(Qe[g].test(c,l)){a.push(Qe[g].code(h,l)),m=!0;break}if(!m){var _=(1===c.size?Je:$e)[c.type].replace("location",'ud["'+h+'"].location');a.push('\n            cv = ud["'+h+'"].value;\n            v = uv["'+h+'"];\n            '+_+";")}}else i.uniforms[h].group&&a.push('\n                    renderer.shader.syncUniformGroup(uv["'+h+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",a.join("\n"))}(i,this.shader.program.uniformData)),i.syncUniforms[this.shader.program.id]=this.cache[o],i.syncUniforms[this.shader.program.id]},ShaderSystem.prototype.getSignature=function(i,o){var a=i.uniforms,h=[];for(var c in a)h.push(c),o[c]&&h.push(o[c].type);return h.join("-")},ShaderSystem.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},ShaderSystem.prototype.generateShader=function(i){var o=this.gl,a=i.program,h={};for(var c in a.attributeData)h[c]=a.attributeData[c].location;var l=compileProgram(o,a.vertexSrc,a.fragmentSrc,h),m={};for(var c in a.uniformData){var g=a.uniformData[c];m[c]={location:o.getUniformLocation(l,c),value:defaultValue(g.type,g.size)}}var _=new _t(l,m);return a.glPrograms[this.renderer.CONTEXT_UID]=_,_},ShaderSystem.prototype.reset=function(){this.program=null,this.shader=null},ShaderSystem.prototype.destroy=function(){this.destroyed=!0},ShaderSystem}(ae),bt=function(i){function StateSystem(o){var a=i.call(this,o)||this;return a.gl=null,a.stateId=0,a.polygonOffset=0,a.blendMode=c.b.NONE,a._blendEq=!1,a.map=[],a.map[0]=a.setBlend,a.map[1]=a.setOffset,a.map[2]=a.setCullFace,a.map[3]=a.setDepthTest,a.map[4]=a.setFrontFace,a.checks=[],a.defaultState=new ot,a.defaultState.blend=!0,a}return __extends(StateSystem,i),StateSystem.prototype.contextChange=function(i){this.gl=i,this.blendModes=function mapWebGLBlendModesToPixi(i,o){return void 0===o&&(o=[]),o[c.b.NORMAL]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[c.b.ADD]=[i.ONE,i.ONE],o[c.b.MULTIPLY]=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],o[c.b.SCREEN]=[i.ONE,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],o[c.b.OVERLAY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[c.b.DARKEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[c.b.LIGHTEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[c.b.COLOR_DODGE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[c.b.COLOR_BURN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[c.b.HARD_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[c.b.SOFT_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[c.b.DIFFERENCE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[c.b.EXCLUSION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[c.b.HUE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[c.b.SATURATION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[c.b.COLOR]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[c.b.LUMINOSITY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[c.b.NONE]=[0,0],o[c.b.NORMAL_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],o[c.b.ADD_NPM]=[i.SRC_ALPHA,i.ONE,i.ONE,i.ONE],o[c.b.SCREEN_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],o[c.b.SRC_IN]=[i.DST_ALPHA,i.ZERO],o[c.b.SRC_OUT]=[i.ONE_MINUS_DST_ALPHA,i.ZERO],o[c.b.SRC_ATOP]=[i.DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],o[c.b.DST_OVER]=[i.ONE_MINUS_DST_ALPHA,i.ONE],o[c.b.DST_IN]=[i.ZERO,i.SRC_ALPHA],o[c.b.DST_OUT]=[i.ZERO,i.ONE_MINUS_SRC_ALPHA],o[c.b.DST_ATOP]=[i.ONE_MINUS_DST_ALPHA,i.SRC_ALPHA],o[c.b.XOR]=[i.ONE_MINUS_DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],o[c.b.SUBTRACT]=[i.ONE,i.ONE,i.ONE,i.ONE,i.FUNC_REVERSE_SUBTRACT,i.FUNC_ADD],o}(i),this.set(this.defaultState),this.reset()},StateSystem.prototype.set=function(i){if(i=i||this.defaultState,this.stateId!==i.data){for(var o=this.stateId^i.data,a=0;o;)1&o&&this.map[a].call(this,!!(i.data&1<<a)),o>>=1,a++;this.stateId=i.data}for(a=0;a<this.checks.length;a++)this.checks[a](this,i)},StateSystem.prototype.forceState=function(i){i=i||this.defaultState;for(var o=0;o<this.map.length;o++)this.map[o].call(this,!!(i.data&1<<o));for(o=0;o<this.checks.length;o++)this.checks[o](this,i);this.stateId=i.data},StateSystem.prototype.setBlend=function(i){this.updateCheck(StateSystem.checkBlendMode,i),this.gl[i?"enable":"disable"](this.gl.BLEND)},StateSystem.prototype.setOffset=function(i){this.updateCheck(StateSystem.checkPolygonOffset,i),this.gl[i?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},StateSystem.prototype.setDepthTest=function(i){this.gl[i?"enable":"disable"](this.gl.DEPTH_TEST)},StateSystem.prototype.setCullFace=function(i){this.gl[i?"enable":"disable"](this.gl.CULL_FACE)},StateSystem.prototype.setFrontFace=function(i){this.gl.frontFace(this.gl[i?"CW":"CCW"])},StateSystem.prototype.setBlendMode=function(i){if(i!==this.blendMode){this.blendMode=i;var o=this.blendModes[i],a=this.gl;2===o.length?a.blendFunc(o[0],o[1]):a.blendFuncSeparate(o[0],o[1],o[2],o[3]),6===o.length?(this._blendEq=!0,a.blendEquationSeparate(o[4],o[5])):this._blendEq&&(this._blendEq=!1,a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD))}},StateSystem.prototype.setPolygonOffset=function(i,o){this.gl.polygonOffset(i,o)},StateSystem.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},StateSystem.prototype.updateCheck=function(i,o){var a=this.checks.indexOf(i);o&&-1===a?this.checks.push(i):o||-1===a||this.checks.splice(a,1)},StateSystem.checkBlendMode=function(i,o){i.setBlendMode(o.blendMode)},StateSystem.checkPolygonOffset=function(i,o){i.setPolygonOffset(1,o.polygonOffset)},StateSystem}(ae),wt=function(i){function TextureGCSystem(o){var a=i.call(this,o)||this;return a.count=0,a.checkCount=0,a.maxIdle=h.b.GC_MAX_IDLE,a.checkCountMax=h.b.GC_MAX_CHECK_COUNT,a.mode=h.b.GC_MODE,a}return __extends(TextureGCSystem,i),TextureGCSystem.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==c.h.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},TextureGCSystem.prototype.run=function(){for(var i=this.renderer.texture,o=i.managedTextures,a=!1,h=0;h<o.length;h++){var c=o[h];!c.framebuffer&&this.count-c.touched>this.maxIdle&&(i.destroyTexture(c,!0),o[h]=null,a=!0)}if(a){var l=0;for(h=0;h<o.length;h++)null!==o[h]&&(o[l++]=o[h]);o.length=l}},TextureGCSystem.prototype.unload=function(i){var o,a=this.renderer.texture;(null===(o=i._texture)||void 0===o?void 0:o.framebuffer)&&a.destroyTexture(i._texture);for(var h=i.children.length-1;h>=0;h--)this.unload(i.children[h])},TextureGCSystem}(ae),Tt=function ge(i){this.texture=i,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},Et=function(i){function TextureSystem(o){var a=i.call(this,o)||this;return a.boundTextures=[],a.currentLocation=-1,a.managedTextures=[],a._unknownBoundTextures=!1,a.unknownTexture=new X,a}return __extends(TextureSystem,i),TextureSystem.prototype.contextChange=function(){var i=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var o=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=o;for(var a=0;a<o;a++)this.boundTextures[a]=null;this.emptyTextures={};var h=new Tt(i.createTexture());for(i.bindTexture(i.TEXTURE_2D,h.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[i.TEXTURE_2D]=h,this.emptyTextures[i.TEXTURE_CUBE_MAP]=new Tt(i.createTexture()),i.bindTexture(i.TEXTURE_CUBE_MAP,this.emptyTextures[i.TEXTURE_CUBE_MAP].texture),a=0;a<6;a++)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,null);for(i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MIN_FILTER,i.LINEAR),a=0;a<this.boundTextures.length;a++)this.bind(null,a)},TextureSystem.prototype.bind=function(i,o){void 0===o&&(o=0);var a=this.gl;if(i){if((i=i.castToBaseTexture()).parentTextureArray)return;if(i.valid){i.touched=this.renderer.textureGC.count;var h=i._glTextures[this.CONTEXT_UID]||this.initTexture(i);this.boundTextures[o]!==i&&(this.currentLocation!==o&&(this.currentLocation=o,a.activeTexture(a.TEXTURE0+o)),a.bindTexture(i.target,h.texture)),h.dirtyId!==i.dirtyId&&(this.currentLocation!==o&&(this.currentLocation=o,a.activeTexture(a.TEXTURE0+o)),this.updateTexture(i)),this.boundTextures[o]=i}}else this.currentLocation!==o&&(this.currentLocation=o,a.activeTexture(a.TEXTURE0+o)),a.bindTexture(a.TEXTURE_2D,this.emptyTextures[a.TEXTURE_2D].texture),this.boundTextures[o]=null},TextureSystem.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]=this.unknownTexture},TextureSystem.prototype.unbind=function(i){var o=this.gl,a=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var h=0;h<a.length;h++)a[h]===this.unknownTexture&&this.bind(null,h)}for(h=0;h<a.length;h++)a[h]===i&&(this.currentLocation!==h&&(o.activeTexture(o.TEXTURE0+h),this.currentLocation=h),o.bindTexture(o.TEXTURE_2D,this.emptyTextures[i.target].texture),a[h]=null)},TextureSystem.prototype.initTexture=function(i){var o=new Tt(this.gl.createTexture());return o.dirtyId=-1,i._glTextures[this.CONTEXT_UID]=o,this.managedTextures.push(i),i.on("dispose",this.destroyTexture,this),o},TextureSystem.prototype.initTextureType=function(i,o){if(o.internalFormat=i.format,o.type=i.type,2===this.webGLVersion){var a=this.renderer.gl;i.type===a.FLOAT&&i.format===a.RGBA&&(o.internalFormat=a.RGBA32F),i.type===c.p.HALF_FLOAT&&(o.type=a.HALF_FLOAT),o.type===a.HALF_FLOAT&&i.format===a.RGBA&&(o.internalFormat=a.RGBA16F)}},TextureSystem.prototype.updateTexture=function(i){var o=i._glTextures[this.CONTEXT_UID];if(o){var a=this.renderer;if(this.initTextureType(i,o),i.resource&&i.resource.upload(a,i,o));else{var h=i.realWidth,c=i.realHeight,l=a.gl;(o.width!==h||o.height!==c||o.dirtyId<0)&&(o.width=h,o.height=c,l.texImage2D(i.target,0,o.internalFormat,h,c,0,i.format,o.type,null))}i.dirtyStyleId!==o.dirtyStyleId&&this.updateTextureStyle(i),o.dirtyId=i.dirtyId}},TextureSystem.prototype.destroyTexture=function(i,o){var a=this.gl;if((i=i.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(i),a.deleteTexture(i._glTextures[this.CONTEXT_UID].texture),i.off("dispose",this.destroyTexture,this),delete i._glTextures[this.CONTEXT_UID],!o)){var h=this.managedTextures.indexOf(i);-1!==h&&Object(l.removeItems)(this.managedTextures,h,1)}},TextureSystem.prototype.updateTextureStyle=function(i){var o=i._glTextures[this.CONTEXT_UID];o&&(i.mipmap!==c.j.POW2&&2===this.webGLVersion||i.isPowerOfTwo?o.mipmap=i.mipmap>=1:o.mipmap=!1,2===this.webGLVersion||i.isPowerOfTwo?o.wrapMode=i.wrapMode:o.wrapMode=c.q.CLAMP,i.resource&&i.resource.style(this.renderer,i,o)||this.setStyle(i,o),o.dirtyStyleId=i.dirtyStyleId)},TextureSystem.prototype.setStyle=function(i,o){var a=this.gl;if(o.mipmap&&a.generateMipmap(i.target),a.texParameteri(i.target,a.TEXTURE_WRAP_S,o.wrapMode),a.texParameteri(i.target,a.TEXTURE_WRAP_T,o.wrapMode),o.mipmap){a.texParameteri(i.target,a.TEXTURE_MIN_FILTER,i.scaleMode===c.n.LINEAR?a.LINEAR_MIPMAP_LINEAR:a.NEAREST_MIPMAP_NEAREST);var h=this.renderer.context.extensions.anisotropicFiltering;if(h&&i.anisotropicLevel>0&&i.scaleMode===c.n.LINEAR){var l=Math.min(i.anisotropicLevel,a.getParameter(h.MAX_TEXTURE_MAX_ANISOTROPY_EXT));a.texParameterf(i.target,h.TEXTURE_MAX_ANISOTROPY_EXT,l)}}else a.texParameteri(i.target,a.TEXTURE_MIN_FILTER,i.scaleMode===c.n.LINEAR?a.LINEAR:a.NEAREST);a.texParameteri(i.target,a.TEXTURE_MAG_FILTER,i.scaleMode===c.n.LINEAR?a.LINEAR:a.NEAREST)},TextureSystem}(ae),Ct={FilterSystem:Ie,BatchSystem:Fe,ContextSystem:De,FramebufferSystem:Ne,GeometrySystem:je,MaskSystem:ct,ScissorSystem:dt,StencilSystem:pt,ProjectionSystem:ft,RenderTextureSystem:gt,ShaderSystem:St,StateSystem:bt,TextureGCSystem:wt,TextureSystem:Et},Pt=new _.d,Ot=function(i){function AbstractRenderer(o,a){void 0===o&&(o=c.m.UNKNOWN);var m=i.call(this)||this;return(a=Object.assign({},h.b.RENDER_OPTIONS,a)).roundPixels&&(h.b.ROUND_PIXELS=a.roundPixels,Object(l.deprecation)("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),m.options=a,m.type=o,m.screen=new _.j(0,0,a.width,a.height),m.view=a.view||document.createElement("canvas"),m.resolution=a.resolution||h.b.RESOLUTION,m.transparent=a.transparent,m.autoDensity=a.autoDensity||a.autoResize||!1,m.preserveDrawingBuffer=a.preserveDrawingBuffer,m.clearBeforeRender=a.clearBeforeRender,m._backgroundColor=0,m._backgroundColorRgba=[0,0,0,0],m._backgroundColorString="#000000",m.backgroundColor=a.backgroundColor||m._backgroundColor,m._lastObjectRendered=null,m.plugins={},m}return __extends(AbstractRenderer,i),AbstractRenderer.prototype.initPlugins=function(i){for(var o in i)this.plugins[o]=new i[o](this)},Object.defineProperty(AbstractRenderer.prototype,"width",{get:function get(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractRenderer.prototype,"height",{get:function get(){return this.view.height},enumerable:!1,configurable:!0}),AbstractRenderer.prototype.resize=function(i,o){this.screen.width=i,this.screen.height=o,this.view.width=i*this.resolution,this.view.height=o*this.resolution,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=o+"px"),this.emit("resize",i,o)},AbstractRenderer.prototype.generateTexture=function(i,o,a,h){0===(h=h||i.getLocalBounds(null,!0)).width&&(h.width=1),0===h.height&&(h.height=1);var c=fe.create({width:0|h.width,height:0|h.height,scaleMode:o,resolution:a});return Pt.tx=-h.x,Pt.ty=-h.y,this.render(i,c,!1,Pt,!!i.parent),c},AbstractRenderer.prototype.destroy=function(i){for(var o in this.plugins)this.plugins[o].destroy(),this.plugins[o]=null;i&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=c.m.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(AbstractRenderer.prototype,"backgroundColor",{get:function get(){return this._backgroundColor},set:function set(i){this._backgroundColor=i,this._backgroundColorString=Object(l.hex2string)(i),Object(l.hex2rgb)(i,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),AbstractRenderer}(l.EventEmitter),At=function(i){function Renderer(o){var a=i.call(this,c.m.WEBGL,o)||this;return o=a.options,a.gl=null,a.CONTEXT_UID=0,a.runners={destroy:new m.a("destroy"),contextChange:new m.a("contextChange"),reset:new m.a("reset"),update:new m.a("update"),postrender:new m.a("postrender"),prerender:new m.a("prerender"),resize:new m.a("resize")},a.globalUniforms=new Ae({projectionMatrix:new _.d},!0),a.addSystem(ct,"mask").addSystem(De,"context").addSystem(bt,"state").addSystem(St,"shader").addSystem(Et,"texture").addSystem(je,"geometry").addSystem(Ne,"framebuffer").addSystem(dt,"scissor").addSystem(pt,"stencil").addSystem(ft,"projection").addSystem(wt,"textureGC").addSystem(Ie,"filter").addSystem(gt,"renderTexture").addSystem(Fe,"batch"),a.initPlugins(Renderer.__plugins),o.context?a.context.initFromContext(o.context):a.context.initFromOptions({alpha:!!a.transparent,antialias:o.antialias,premultipliedAlpha:a.transparent&&"notMultiplied"!==a.transparent,stencil:!0,preserveDrawingBuffer:o.preserveDrawingBuffer,powerPreference:a.options.powerPreference}),a.renderingToScreen=!0,Object(l.sayHello)(2===a.context.webGLVersion?"WebGL 2":"WebGL 1"),a.resize(a.options.width,a.options.height),a}return __extends(Renderer,i),Renderer.create=function(i){if(Object(l.isWebGLSupported)())return new Renderer(i);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},Renderer.prototype.addSystem=function(i,o){o||(o=i.name);var a=new i(this);if(this[o])throw new Error('Whoops! The name "'+o+'" is already in use');for(var h in this[o]=a,this.runners)this.runners[h].add(a);return this},Renderer.prototype.render=function(i,o,a,h,c){if(this.renderingToScreen=!o,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=h,!this.context.isLost){if(o||(this._lastObjectRendered=i),!c){var l=i.enableTempParent();i.updateTransform(),i.disableTempParent(l)}this.renderTexture.bind(o),this.batch.currentRenderer.start(),(void 0!==a?a:this.clearBeforeRender)&&this.renderTexture.clear(),i.render(this),this.batch.currentRenderer.flush(),o&&o.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},Renderer.prototype.resize=function(o,a){i.prototype.resize.call(this,o,a),this.runners.resize.emit(o,a)},Renderer.prototype.reset=function(){return this.runners.reset.emit(),this},Renderer.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},Renderer.prototype.destroy=function(o){for(var a in this.runners.destroy.emit(),this.runners)this.runners[a].destroy();i.prototype.destroy.call(this,o),this.gl=null},Renderer.registerPlugin=function(i,o){Renderer.__plugins=Renderer.__plugins||{},Renderer.__plugins[i]=o},Renderer}(Ot);function autoDetectRenderer(i){return At.create(i)}var It="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",Mt="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",kt=function Ee(){this.texArray=null,this.blend=0,this.type=c.e.TRIANGLES,this.start=0,this.size=0,this.data=null},zt=function(){function BatchTextureArray(){this.elements=[],this.ids=[],this.count=0}return BatchTextureArray.prototype.clear=function(){for(var i=0;i<this.count;i++)this.elements[i]=null;this.count=0},BatchTextureArray}(),Dt=function(){function ViewableBuffer(i){this.rawBinaryData=new ArrayBuffer(i),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(ViewableBuffer.prototype,"int8View",{get:function get(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(ViewableBuffer.prototype,"uint8View",{get:function get(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(ViewableBuffer.prototype,"int16View",{get:function get(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(ViewableBuffer.prototype,"uint16View",{get:function get(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(ViewableBuffer.prototype,"int32View",{get:function get(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),ViewableBuffer.prototype.view=function(i){return this[i+"View"]},ViewableBuffer.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},ViewableBuffer.sizeOf=function(i){switch(i){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(i+" isn't a valid view type")}},ViewableBuffer}(),Lt=function(i){function AbstractBatchRenderer(o){var a=i.call(this,o)||this;return a.shaderGenerator=null,a.geometryClass=null,a.vertexSize=null,a.state=ot.for2d(),a.size=4*h.b.SPRITE_BATCH_SIZE,a._vertexCount=0,a._indexCount=0,a._bufferedElements=[],a._bufferedTextures=[],a._bufferSize=0,a._shader=null,a._packedGeometries=[],a._packedGeometryPoolSize=2,a._flushId=0,a._aBuffers={},a._iBuffers={},a.MAX_TEXTURES=1,a.renderer.on("prerender",a.onPrerender,a),o.runners.contextChange.add(a),a._dcIndex=0,a._aIndex=0,a._iIndex=0,a._attributeBuffer=null,a._indexBuffer=null,a._tempBoundTextures=[],a}return __extends(AbstractBatchRenderer,i),AbstractBatchRenderer.prototype.contextChange=function(){var i=this.renderer.gl;h.b.PREFER_ENV===c.f.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),h.b.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=checkMaxIfStatementsInShader(this.MAX_TEXTURES,i)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var o=0;o<this._packedGeometryPoolSize;o++)this._packedGeometries[o]=new this.geometryClass;this.initFlushBuffers()},AbstractBatchRenderer.prototype.initFlushBuffers=function(){for(var i=AbstractBatchRenderer._drawCallPool,o=AbstractBatchRenderer._textureArrayPool,a=this.size/4,h=Math.floor(a/this.MAX_TEXTURES)+1;i.length<a;)i.push(new kt);for(;o.length<h;)o.push(new zt);for(var c=0;c<this.MAX_TEXTURES;c++)this._tempBoundTextures[c]=null},AbstractBatchRenderer.prototype.onPrerender=function(){this._flushId=0},AbstractBatchRenderer.prototype.render=function(i){i._texture.valid&&(this._vertexCount+i.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=i.vertexData.length/2,this._indexCount+=i.indices.length,this._bufferedTextures[this._bufferSize]=i._texture.baseTexture,this._bufferedElements[this._bufferSize++]=i)},AbstractBatchRenderer.prototype.buildTexturesAndDrawCalls=function(){var i=this._bufferedTextures,o=this.MAX_TEXTURES,a=AbstractBatchRenderer._textureArrayPool,h=this.renderer.batch,c=this._tempBoundTextures,l=this.renderer.textureGC.count,m=++X._globalBatch,g=0,_=a[0],x=0;h.copyBoundTextures(c,o);for(var S=0;S<this._bufferSize;++S){var R=i[S];i[S]=null,R._batchEnabled!==m&&(_.count>=o&&(h.boundArray(_,c,m,o),this.buildDrawCalls(_,x,S),x=S,_=a[++g],++m),R._batchEnabled=m,R.touched=l,_.elements[_.count++]=R)}for(_.count>0&&(h.boundArray(_,c,m,o),this.buildDrawCalls(_,x,this._bufferSize),++g,++m),S=0;S<c.length;S++)c[S]=null;X._globalBatch=m},AbstractBatchRenderer.prototype.buildDrawCalls=function(i,o,a){var h=this._bufferedElements,c=this._attributeBuffer,m=this._indexBuffer,g=this.vertexSize,_=AbstractBatchRenderer._drawCallPool,x=this._dcIndex,S=this._aIndex,R=this._iIndex,k=_[x];k.start=this._iIndex,k.texArray=i;for(var j=o;j<a;++j){var X=h[j],Y=X._texture.baseTexture,q=l.premultiplyBlendMode[Y.alphaMode?1:0][X.blendMode];h[j]=null,o<j&&k.blend!==q&&(k.size=R-k.start,o=j,(k=_[++x]).texArray=i,k.start=R),this.packInterleavedGeometry(X,c,m,S,R),S+=X.vertexData.length/2*g,R+=X.indices.length,k.blend=q}o<a&&(k.size=R-k.start,++x),this._dcIndex=x,this._aIndex=S,this._iIndex=R},AbstractBatchRenderer.prototype.bindAndClearTexArray=function(i){for(var o=this.renderer.texture,a=0;a<i.count;a++)o.bind(i.elements[a],i.ids[a]),i.elements[a]=null;i.count=0},AbstractBatchRenderer.prototype.updateGeometry=function(){var i=this._packedGeometries,o=this._attributeBuffer,a=this._indexBuffer;h.b.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(o.rawBinaryData),i[this._flushId]._indexBuffer.update(a),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(o.rawBinaryData),i[this._flushId]._indexBuffer.update(a),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},AbstractBatchRenderer.prototype.drawBatches=function(){for(var i=this._dcIndex,o=this.renderer,a=o.gl,h=o.state,c=AbstractBatchRenderer._drawCallPool,l=null,m=0;m<i;m++){var g=c[m],_=g.texArray,x=g.type,S=g.size,R=g.start,k=g.blend;l!==_&&(l=_,this.bindAndClearTexArray(_)),this.state.blendMode=k,h.set(this.state),a.drawElements(x,S,a.UNSIGNED_SHORT,2*R)}},AbstractBatchRenderer.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},AbstractBatchRenderer.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),h.b.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},AbstractBatchRenderer.prototype.stop=function(){this.flush()},AbstractBatchRenderer.prototype.destroy=function(){for(var o=0;o<this._packedGeometryPoolSize;o++)this._packedGeometries[o]&&this._packedGeometries[o].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),i.prototype.destroy.call(this)},AbstractBatchRenderer.prototype.getAttributeBuffer=function(i){var o=Object(l.nextPow2)(Math.ceil(i/8)),a=Object(l.log2)(o),h=8*o;this._aBuffers.length<=a&&(this._iBuffers.length=a+1);var c=this._aBuffers[h];return c||(this._aBuffers[h]=c=new Dt(h*this.vertexSize*4)),c},AbstractBatchRenderer.prototype.getIndexBuffer=function(i){var o=Object(l.nextPow2)(Math.ceil(i/12)),a=Object(l.log2)(o),h=12*o;this._iBuffers.length<=a&&(this._iBuffers.length=a+1);var c=this._iBuffers[a];return c||(this._iBuffers[a]=c=new Uint16Array(h)),c},AbstractBatchRenderer.prototype.packInterleavedGeometry=function(i,o,a,h,c){for(var m=o.uint32View,g=o.float32View,_=h/this.vertexSize,x=i.uvs,S=i.indices,R=i.vertexData,k=i._texture.baseTexture._batchLocation,j=Math.min(i.worldAlpha,1),X=j<1&&i._texture.baseTexture.alphaMode?Object(l.premultiplyTint)(i._tintRGB,j):i._tintRGB+(255*j<<24),Y=0;Y<R.length;Y+=2)g[h++]=R[Y],g[h++]=R[Y+1],g[h++]=x[Y],g[h++]=x[Y+1],m[h++]=X,g[h++]=k;for(Y=0;Y<S.length;Y++)a[c++]=_+S[Y]},AbstractBatchRenderer._drawCallPool=[],AbstractBatchRenderer._textureArrayPool=[],AbstractBatchRenderer}(ke),Bt=function(){function BatchShaderGenerator(i,o){if(this.vertexSrc=i,this.fragTemplate=o,this.programCache={},this.defaultGroupCache={},o.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(o.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return BatchShaderGenerator.prototype.generateShader=function(i){if(!this.programCache[i]){for(var o=new Int32Array(i),a=0;a<i;a++)o[a]=a;this.defaultGroupCache[i]=Ae.from({uSamplers:o},!0);var h=this.fragTemplate;h=(h=h.replace(/%count%/gi,""+i)).replace(/%forloop%/gi,this.generateSampleSrc(i)),this.programCache[i]=new it(this.vertexSrc,h)}var c={tint:new Float32Array([1,1,1,1]),translationMatrix:new _.d,default:this.defaultGroupCache[i]};return new nt(this.programCache[i],c)},BatchShaderGenerator.prototype.generateSampleSrc=function(i){var o="";o+="\n",o+="\n";for(var a=0;a<i;a++)a>0&&(o+="\nelse "),a<i-1&&(o+="if(vTextureId < "+a+".5)"),o+="\n{",o+="\n\tcolor = texture2D(uSamplers["+a+"], vTextureCoord);",o+="\n}";return(o+="\n")+"\n"},BatchShaderGenerator}(),Nt=function(i){function BatchGeometry(o){void 0===o&&(o=!1);var a=i.call(this)||this;return a._buffer=new ve(null,o,!1),a._indexBuffer=new ve(null,o,!0),a.addAttribute("aVertexPosition",a._buffer,2,!1,c.p.FLOAT).addAttribute("aTextureCoord",a._buffer,2,!1,c.p.FLOAT).addAttribute("aColor",a._buffer,4,!0,c.p.UNSIGNED_BYTE).addAttribute("aTextureId",a._buffer,1,!0,c.p.FLOAT).addIndex(a._indexBuffer),a}return __extends(BatchGeometry,i),BatchGeometry}(Te),Gt="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Ut="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",jt=function(){function BatchPluginFactory(){}return BatchPluginFactory.create=function(i){var o=Object.assign({vertex:Gt,fragment:Ut,geometryClass:Nt,vertexSize:6},i),a=o.vertex,h=o.fragment,c=o.vertexSize,l=o.geometryClass;return function(i){function BatchPlugin(o){var m=i.call(this,o)||this;return m.shaderGenerator=new Bt(a,h),m.geometryClass=l,m.vertexSize=c,m}return __extends(BatchPlugin,i),BatchPlugin}(Lt)},Object.defineProperty(BatchPluginFactory,"defaultVertexSrc",{get:function get(){return Gt},enumerable:!1,configurable:!0}),Object.defineProperty(BatchPluginFactory,"defaultFragmentTemplate",{get:function get(){return Ut},enumerable:!1,configurable:!0}),BatchPluginFactory}(),Wt=jt.create()},function(i,o,a){var h,c,l,m,g,_,x,S,R,k,j,X,Y,q,Z,$,ee;a.d(o,"a",(function(){return X})),a.d(o,"b",(function(){return m})),a.d(o,"c",(function(){return l})),a.d(o,"d",(function(){return Y})),a.d(o,"e",(function(){return g})),a.d(o,"f",(function(){return h})),a.d(o,"g",(function(){return _})),a.d(o,"h",(function(){return q})),a.d(o,"i",(function(){return $})),a.d(o,"j",(function(){return j})),a.d(o,"k",(function(){return ee})),a.d(o,"l",(function(){return Z})),a.d(o,"m",(function(){return c})),a.d(o,"n",(function(){return R})),a.d(o,"o",(function(){return x})),a.d(o,"p",(function(){return S})),a.d(o,"q",(function(){return k})),function(i){i[i.WEBGL_LEGACY=0]="WEBGL_LEGACY",i[i.WEBGL=1]="WEBGL",i[i.WEBGL2=2]="WEBGL2"}(h||(h={})),function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.WEBGL=1]="WEBGL",i[i.CANVAS=2]="CANVAS"}(c||(c={})),function(i){i[i.COLOR=16384]="COLOR",i[i.DEPTH=256]="DEPTH",i[i.STENCIL=1024]="STENCIL"}(l||(l={})),function(i){i[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR"}(m||(m={})),function(i){i[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(g||(g={})),function(i){i[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(_||(_={})),function(i){i[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(x||(x={})),function(i){i[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.FLOAT=5126]="FLOAT",i[i.HALF_FLOAT=36193]="HALF_FLOAT"}(S||(S={})),function(i){i[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR"}(R||(R={})),function(i){i[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(k||(k={})),function(i){i[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON"}(j||(j={})),function(i){i[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(X||(X={})),function(i){i[i.NO=0]="NO",i[i.YES=1]="YES",i[i.AUTO=2]="AUTO",i[i.BLEND=0]="BLEND",i[i.CLEAR=1]="CLEAR",i[i.BLIT=2]="BLIT"}(Y||(Y={})),function(i){i[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL"}(q||(q={})),function(i){i.LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp"}(Z||(Z={})),function(i){i[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE"}($||($={})),function(i){i[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH"}(ee||(ee={}))},function(i,o,a){a.d(o,"a",(function(){return _})),a.d(o,"b",(function(){return m})),a.d(o,"c",(function(){return x})),a.d(o,"d",(function(){return X})),a.d(o,"e",(function(){return j})),a.d(o,"f",(function(){return c})),a.d(o,"g",(function(){return k})),a.d(o,"h",(function(){return S})),a.d(o,"i",(function(){return l})),a.d(o,"j",(function(){return g})),a.d(o,"k",(function(){return R})),a.d(o,"l",(function(){return h})),a.d(o,"m",(function(){return ne})),a.d(o,"n",(function(){return ie}));var h,c=2*Math.PI,l=180/Math.PI,m=Math.PI/180;!function(i){i[i.POLY=0]="POLY",i[i.RECT=1]="RECT",i[i.CIRC=2]="CIRC",i[i.ELIP=3]="ELIP",i[i.RREC=4]="RREC"}(h||(h={}));var g=function(){function Rectangle(i,o,a,c){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===c&&(c=0),this.x=Number(i),this.y=Number(o),this.width=Number(a),this.height=Number(c),this.type=h.RECT}return Object.defineProperty(Rectangle.prototype,"left",{get:function get(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(Rectangle.prototype,"right",{get:function get(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(Rectangle.prototype,"top",{get:function get(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(Rectangle.prototype,"bottom",{get:function get(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(Rectangle,"EMPTY",{get:function get(){return new Rectangle(0,0,0,0)},enumerable:!1,configurable:!0}),Rectangle.prototype.clone=function(){return new Rectangle(this.x,this.y,this.width,this.height)},Rectangle.prototype.copyFrom=function(i){return this.x=i.x,this.y=i.y,this.width=i.width,this.height=i.height,this},Rectangle.prototype.copyTo=function(i){return i.x=this.x,i.y=this.y,i.width=this.width,i.height=this.height,i},Rectangle.prototype.contains=function(i,o){return!(this.width<=0||this.height<=0)&&i>=this.x&&i<this.x+this.width&&o>=this.y&&o<this.y+this.height},Rectangle.prototype.pad=function(i,o){return void 0===i&&(i=0),void 0===o&&(o=i),this.x-=i,this.y-=o,this.width+=2*i,this.height+=2*o,this},Rectangle.prototype.fit=function(i){var o=Math.max(this.x,i.x),a=Math.min(this.x+this.width,i.x+i.width),h=Math.max(this.y,i.y),c=Math.min(this.y+this.height,i.y+i.height);return this.x=o,this.width=Math.max(a-o,0),this.y=h,this.height=Math.max(c-h,0),this},Rectangle.prototype.ceil=function(i,o){void 0===i&&(i=1),void 0===o&&(o=.001);var a=Math.ceil((this.x+this.width-o)*i)/i,h=Math.ceil((this.y+this.height-o)*i)/i;return this.x=Math.floor((this.x+o)*i)/i,this.y=Math.floor((this.y+o)*i)/i,this.width=a-this.x,this.height=h-this.y,this},Rectangle.prototype.enlarge=function(i){var o=Math.min(this.x,i.x),a=Math.max(this.x+this.width,i.x+i.width),h=Math.min(this.y,i.y),c=Math.max(this.y+this.height,i.y+i.height);return this.x=o,this.width=a-o,this.y=h,this.height=c-h,this},Rectangle}(),_=function(){function Circle(i,o,a){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),this.x=i,this.y=o,this.radius=a,this.type=h.CIRC}return Circle.prototype.clone=function(){return new Circle(this.x,this.y,this.radius)},Circle.prototype.contains=function(i,o){if(this.radius<=0)return!1;var a=this.radius*this.radius,h=this.x-i,c=this.y-o;return(h*=h)+(c*=c)<=a},Circle.prototype.getBounds=function(){return new g(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},Circle}(),x=function(){function Ellipse(i,o,a,c){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===c&&(c=0),this.x=i,this.y=o,this.width=a,this.height=c,this.type=h.ELIP}return Ellipse.prototype.clone=function(){return new Ellipse(this.x,this.y,this.width,this.height)},Ellipse.prototype.contains=function(i,o){if(this.width<=0||this.height<=0)return!1;var a=(i-this.x)/this.width,h=(o-this.y)/this.height;return(a*=a)+(h*=h)<=1},Ellipse.prototype.getBounds=function(){return new g(this.x-this.width,this.y-this.height,this.width,this.height)},Ellipse}(),S=function(){function Polygon(){for(var i=arguments,o=[],a=0;a<arguments.length;a++)o[a]=i[a];var c=Array.isArray(o[0])?o[0]:o;if("number"!=typeof c[0]){for(var l=[],m=0,g=c.length;m<g;m++)l.push(c[m].x,c[m].y);c=l}this.points=c,this.type=h.POLY,this.closeStroke=!0}return Polygon.prototype.clone=function(){var i=new Polygon(this.points.slice());return i.closeStroke=this.closeStroke,i},Polygon.prototype.contains=function(i,o){for(var a=!1,h=this.points.length/2,c=0,l=h-1;c<h;l=c++){var m=this.points[2*c],g=this.points[2*c+1],_=this.points[2*l],x=this.points[2*l+1];g>o!=x>o&&i<(o-g)/(x-g)*(_-m)+m&&(a=!a)}return a},Polygon}(),R=function(){function RoundedRectangle(i,o,a,c,l){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===c&&(c=0),void 0===l&&(l=20),this.x=i,this.y=o,this.width=a,this.height=c,this.radius=l,this.type=h.RREC}return RoundedRectangle.prototype.clone=function(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},RoundedRectangle.prototype.contains=function(i,o){if(this.width<=0||this.height<=0)return!1;if(i>=this.x&&i<=this.x+this.width&&o>=this.y&&o<=this.y+this.height){if(o>=this.y+this.radius&&o<=this.y+this.height-this.radius||i>=this.x+this.radius&&i<=this.x+this.width-this.radius)return!0;var a=i-(this.x+this.radius),h=o-(this.y+this.radius),c=this.radius*this.radius;if(a*a+h*h<=c)return!0;if((a=i-(this.x+this.width-this.radius))*a+h*h<=c)return!0;if(a*a+(h=o-(this.y+this.height-this.radius))*h<=c)return!0;if((a=i-(this.x+this.radius))*a+h*h<=c)return!0}return!1},RoundedRectangle}(),k=function(){function Point(i,o){void 0===i&&(i=0),void 0===o&&(o=0),this.x=i,this.y=o}return Point.prototype.clone=function(){return new Point(this.x,this.y)},Point.prototype.copyFrom=function(i){return this.set(i.x,i.y),this},Point.prototype.copyTo=function(i){return i.set(this.x,this.y),i},Point.prototype.equals=function(i){return i.x===this.x&&i.y===this.y},Point.prototype.set=function(i,o){return void 0===i&&(i=0),void 0===o&&(o=i),this.x=i,this.y=o,this},Point}(),j=function(){function ObservablePoint(i,o,a,h){void 0===a&&(a=0),void 0===h&&(h=0),this._x=a,this._y=h,this.cb=i,this.scope=o}return ObservablePoint.prototype.clone=function(i,o){return void 0===i&&(i=this.cb),void 0===o&&(o=this.scope),new ObservablePoint(i,o,this._x,this._y)},ObservablePoint.prototype.set=function(i,o){return void 0===i&&(i=0),void 0===o&&(o=i),this._x===i&&this._y===o||(this._x=i,this._y=o,this.cb.call(this.scope)),this},ObservablePoint.prototype.copyFrom=function(i){return this._x===i.x&&this._y===i.y||(this._x=i.x,this._y=i.y,this.cb.call(this.scope)),this},ObservablePoint.prototype.copyTo=function(i){return i.set(this._x,this._y),i},ObservablePoint.prototype.equals=function(i){return i.x===this._x&&i.y===this._y},Object.defineProperty(ObservablePoint.prototype,"x",{get:function get(){return this._x},set:function set(i){this._x!==i&&(this._x=i,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(ObservablePoint.prototype,"y",{get:function get(){return this._y},set:function set(i){this._y!==i&&(this._y=i,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),ObservablePoint}(),X=function(){function Matrix(i,o,a,h,c,l){void 0===i&&(i=1),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=1),void 0===c&&(c=0),void 0===l&&(l=0),this.array=null,this.a=i,this.b=o,this.c=a,this.d=h,this.tx=c,this.ty=l}return Matrix.prototype.fromArray=function(i){this.a=i[0],this.b=i[1],this.c=i[3],this.d=i[4],this.tx=i[2],this.ty=i[5]},Matrix.prototype.set=function(i,o,a,h,c,l){return this.a=i,this.b=o,this.c=a,this.d=h,this.tx=c,this.ty=l,this},Matrix.prototype.toArray=function(i,o){this.array||(this.array=new Float32Array(9));var a=o||this.array;return i?(a[0]=this.a,a[1]=this.b,a[2]=0,a[3]=this.c,a[4]=this.d,a[5]=0,a[6]=this.tx,a[7]=this.ty,a[8]=1):(a[0]=this.a,a[1]=this.c,a[2]=this.tx,a[3]=this.b,a[4]=this.d,a[5]=this.ty,a[6]=0,a[7]=0,a[8]=1),a},Matrix.prototype.apply=function(i,o){o=o||new k;var a=i.x,h=i.y;return o.x=this.a*a+this.c*h+this.tx,o.y=this.b*a+this.d*h+this.ty,o},Matrix.prototype.applyInverse=function(i,o){o=o||new k;var a=1/(this.a*this.d+this.c*-this.b),h=i.x,c=i.y;return o.x=this.d*a*h+-this.c*a*c+(this.ty*this.c-this.tx*this.d)*a,o.y=this.a*a*c+-this.b*a*h+(-this.ty*this.a+this.tx*this.b)*a,o},Matrix.prototype.translate=function(i,o){return this.tx+=i,this.ty+=o,this},Matrix.prototype.scale=function(i,o){return this.a*=i,this.d*=o,this.c*=i,this.b*=o,this.tx*=i,this.ty*=o,this},Matrix.prototype.rotate=function(i){var o=Math.cos(i),a=Math.sin(i),h=this.a,c=this.c,l=this.tx;return this.a=h*o-this.b*a,this.b=h*a+this.b*o,this.c=c*o-this.d*a,this.d=c*a+this.d*o,this.tx=l*o-this.ty*a,this.ty=l*a+this.ty*o,this},Matrix.prototype.append=function(i){var o=this.a,a=this.b,h=this.c,c=this.d;return this.a=i.a*o+i.b*h,this.b=i.a*a+i.b*c,this.c=i.c*o+i.d*h,this.d=i.c*a+i.d*c,this.tx=i.tx*o+i.ty*h+this.tx,this.ty=i.tx*a+i.ty*c+this.ty,this},Matrix.prototype.setTransform=function(i,o,a,h,c,l,m,g,_){return this.a=Math.cos(m+_)*c,this.b=Math.sin(m+_)*c,this.c=-Math.sin(m-g)*l,this.d=Math.cos(m-g)*l,this.tx=i-(a*this.a+h*this.c),this.ty=o-(a*this.b+h*this.d),this},Matrix.prototype.prepend=function(i){var o=this.tx;if(1!==i.a||0!==i.b||0!==i.c||1!==i.d){var a=this.a,h=this.c;this.a=a*i.a+this.b*i.c,this.b=a*i.b+this.b*i.d,this.c=h*i.a+this.d*i.c,this.d=h*i.b+this.d*i.d}return this.tx=o*i.a+this.ty*i.c+i.tx,this.ty=o*i.b+this.ty*i.d+i.ty,this},Matrix.prototype.decompose=function(i){var o=this.a,a=this.b,h=this.c,l=this.d,m=-Math.atan2(-h,l),g=Math.atan2(a,o),_=Math.abs(m+g);return _<1e-5||Math.abs(c-_)<1e-5?(i.rotation=g,i.skew.x=i.skew.y=0):(i.rotation=0,i.skew.x=m,i.skew.y=g),i.scale.x=Math.sqrt(o*o+a*a),i.scale.y=Math.sqrt(h*h+l*l),i.position.x=this.tx,i.position.y=this.ty,i},Matrix.prototype.invert=function(){var i=this.a,o=this.b,a=this.c,h=this.d,c=this.tx,l=i*h-o*a;return this.a=h/l,this.b=-o/l,this.c=-a/l,this.d=i/l,this.tx=(a*this.ty-h*c)/l,this.ty=-(i*this.ty-o*c)/l,this},Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Matrix.prototype.clone=function(){var i=new Matrix;return i.a=this.a,i.b=this.b,i.c=this.c,i.d=this.d,i.tx=this.tx,i.ty=this.ty,i},Matrix.prototype.copyTo=function(i){return i.a=this.a,i.b=this.b,i.c=this.c,i.d=this.d,i.tx=this.tx,i.ty=this.ty,i},Matrix.prototype.copyFrom=function(i){return this.a=i.a,this.b=i.b,this.c=i.c,this.d=i.d,this.tx=i.tx,this.ty=i.ty,this},Object.defineProperty(Matrix,"IDENTITY",{get:function get(){return new Matrix},enumerable:!1,configurable:!0}),Object.defineProperty(Matrix,"TEMP_MATRIX",{get:function get(){return new Matrix},enumerable:!1,configurable:!0}),Matrix}(),Y=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],q=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Z=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],$=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],ee=[],te=[],re=Math.sign;!function init(){for(var i=0;i<16;i++){var o=[];ee.push(o);for(var a=0;a<16;a++)for(var h=re(Y[i]*Y[a]+Z[i]*q[a]),c=re(q[i]*Y[a]+$[i]*q[a]),l=re(Y[i]*Z[a]+Z[i]*$[a]),m=re(q[i]*Z[a]+$[i]*$[a]),g=0;g<16;g++)if(Y[g]===h&&q[g]===c&&Z[g]===l&&$[g]===m){o.push(g);break}}for(i=0;i<16;i++){var _=new X;_.set(Y[i],q[i],Z[i],$[i],0,0),te.push(_)}}();var ie={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function uX(i){return Y[i]},uY:function uY(i){return q[i]},vX:function vX(i){return Z[i]},vY:function vY(i){return $[i]},inv:function inv(i){return 8&i?15&i:7&-i},add:function add(i,o){return ee[i][o]},sub:function sub(i,o){return ee[i][ie.inv(o)]},rotate180:function rotate180(i){return 4^i},isVertical:function isVertical(i){return 2==(3&i)},byDirection:function byDirection(i,o){return 2*Math.abs(i)<=Math.abs(o)?o>=0?ie.S:ie.N:2*Math.abs(o)<=Math.abs(i)?i>0?ie.E:ie.W:o>0?i>0?ie.SE:ie.SW:i>0?ie.NE:ie.NW},matrixAppendRotationInv:function matrixAppendRotationInv(i,o,a,h){void 0===a&&(a=0),void 0===h&&(h=0);var c=te[ie.inv(o)];c.tx=a,c.ty=h,i.append(c)}},ne=function(){function Transform(){this.worldTransform=new X,this.localTransform=new X,this.position=new j(this.onChange,this,0,0),this.scale=new j(this.onChange,this,1,1),this.pivot=new j(this.onChange,this,0,0),this.skew=new j(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return Transform.prototype.onChange=function(){this._localID++},Transform.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},Transform.prototype.updateLocalTransform=function(){var i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1)},Transform.prototype.updateTransform=function(i){var o=this.localTransform;if(this._localID!==this._currentLocalID&&(o.a=this._cx*this.scale.x,o.b=this._sx*this.scale.x,o.c=this._cy*this.scale.y,o.d=this._sy*this.scale.y,o.tx=this.position.x-(this.pivot.x*o.a+this.pivot.y*o.c),o.ty=this.position.y-(this.pivot.x*o.b+this.pivot.y*o.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==i._worldID){var a=i.worldTransform,h=this.worldTransform;h.a=o.a*a.a+o.b*a.c,h.b=o.a*a.b+o.b*a.d,h.c=o.c*a.a+o.d*a.c,h.d=o.c*a.b+o.d*a.d,h.tx=o.tx*a.a+o.ty*a.c+a.tx,h.ty=o.tx*a.b+o.ty*a.d+a.ty,this._parentID=i._worldID,this._worldID++}},Transform.prototype.setFromMatrix=function(i){i.decompose(this),this._localID++},Object.defineProperty(Transform.prototype,"rotation",{get:function get(){return this._rotation},set:function set(i){this._rotation!==i&&(this._rotation=i,this.updateSkew())},enumerable:!1,configurable:!0}),Transform.IDENTITY=new Transform,Transform}()},function(i,o,a){a.r(o),a.d(o,"utils",(function(){return R})),a.d(o,"AccessibilityManager",(function(){return te})),a.d(o,"accessibleTarget",(function(){return ee})),a.d(o,"InteractionData",(function(){return ie})),a.d(o,"InteractionEvent",(function(){return oe})),a.d(o,"InteractionManager",(function(){return ce})),a.d(o,"InteractionTrackingData",(function(){return ae})),a.d(o,"interactiveTarget",(function(){return ue})),a.d(o,"Application",(function(){return pe})),a.d(o,"AbstractBatchRenderer",(function(){return de.a})),a.d(o,"AbstractRenderer",(function(){return de.b})),a.d(o,"Attribute",(function(){return de.c})),a.d(o,"BaseRenderTexture",(function(){return de.d})),a.d(o,"BaseTexture",(function(){return de.e})),a.d(o,"BatchDrawCall",(function(){return de.f})),a.d(o,"BatchGeometry",(function(){return de.g})),a.d(o,"BatchPluginFactory",(function(){return de.h})),a.d(o,"BatchRenderer",(function(){return de.i})),a.d(o,"BatchShaderGenerator",(function(){return de.j})),a.d(o,"BatchTextureArray",(function(){return de.k})),a.d(o,"Buffer",(function(){return de.l})),a.d(o,"Filter",(function(){return de.m})),a.d(o,"FilterState",(function(){return de.n})),a.d(o,"Framebuffer",(function(){return de.o})),a.d(o,"GLFramebuffer",(function(){return de.p})),a.d(o,"GLProgram",(function(){return de.q})),a.d(o,"GLTexture",(function(){return de.r})),a.d(o,"Geometry",(function(){return de.s})),a.d(o,"IGLUniformData",(function(){return de.t})),a.d(o,"MaskData",(function(){return de.u})),a.d(o,"ObjectRenderer",(function(){return de.v})),a.d(o,"Program",(function(){return de.w})),a.d(o,"Quad",(function(){return de.x})),a.d(o,"QuadUv",(function(){return de.y})),a.d(o,"RenderTexture",(function(){return de.z})),a.d(o,"RenderTexturePool",(function(){return de.A})),a.d(o,"Renderer",(function(){return de.B})),a.d(o,"Shader",(function(){return de.C})),a.d(o,"SpriteMaskFilter",(function(){return de.D})),a.d(o,"State",(function(){return de.E})),a.d(o,"System",(function(){return de.F})),a.d(o,"Texture",(function(){return de.G})),a.d(o,"TextureMatrix",(function(){return de.H})),a.d(o,"TextureUvs",(function(){return de.I})),a.d(o,"UniformGroup",(function(){return de.J})),a.d(o,"ViewableBuffer",(function(){return de.K})),a.d(o,"autoDetectRenderer",(function(){return de.L})),a.d(o,"checkMaxIfStatementsInShader",(function(){return de.M})),a.d(o,"defaultFilterVertex",(function(){return de.N})),a.d(o,"defaultVertex",(function(){return de.O})),a.d(o,"resources",(function(){return de.P})),a.d(o,"systems",(function(){return de.Q})),a.d(o,"uniformParsers",(function(){return de.R})),a.d(o,"Extract",(function(){return ye})),a.d(o,"AppLoaderPlugin",(function(){return De})),a.d(o,"Loader",(function(){return ze})),a.d(o,"LoaderResource",(function(){return Ie})),a.d(o,"TextureLoader",(function(){return Fe})),a.d(o,"ParticleContainer",(function(){return Ue})),a.d(o,"ParticleRenderer",(function(){return We})),a.d(o,"BasePrepare",(function(){return It})),a.d(o,"CountLimiter",(function(){return At})),a.d(o,"Prepare",(function(){return Mt})),a.d(o,"TimeLimiter",(function(){return kt})),a.d(o,"Spritesheet",(function(){return zt})),a.d(o,"SpritesheetLoader",(function(){return Dt})),a.d(o,"TilingSprite",(function(){return Nt})),a.d(o,"TilingSpriteRenderer",(function(){return jt})),a.d(o,"BitmapFont",(function(){return $t})),a.d(o,"BitmapFontData",(function(){return Qt})),a.d(o,"BitmapFontLoader",(function(){return ir})),a.d(o,"BitmapText",(function(){return rr})),a.d(o,"Ticker",(function(){return re.a})),a.d(o,"TickerPlugin",(function(){return re.b})),a.d(o,"UPDATE_PRIORITY",(function(){return re.c})),a.d(o,"ALPHA_MODES",(function(){return Le.a})),a.d(o,"BLEND_MODES",(function(){return Le.b})),a.d(o,"BUFFER_BITS",(function(){return Le.c})),a.d(o,"CLEAR_MODES",(function(){return Le.d})),a.d(o,"DRAW_MODES",(function(){return Le.e})),a.d(o,"ENV",(function(){return Le.f})),a.d(o,"FORMATS",(function(){return Le.g})),a.d(o,"GC_MODES",(function(){return Le.h})),a.d(o,"MASK_TYPES",(function(){return Le.i})),a.d(o,"MIPMAP_MODES",(function(){return Le.j})),a.d(o,"MSAA_QUALITY",(function(){return Le.k})),a.d(o,"PRECISION",(function(){return Le.l})),a.d(o,"RENDERER_TYPE",(function(){return Le.m})),a.d(o,"SCALE_MODES",(function(){return Le.n})),a.d(o,"TARGETS",(function(){return Le.o})),a.d(o,"TYPES",(function(){return Le.p})),a.d(o,"WRAP_MODES",(function(){return Le.q})),a.d(o,"Bounds",(function(){return X})),a.d(o,"Container",(function(){return $})),a.d(o,"DisplayObject",(function(){return q})),a.d(o,"TemporaryDisplayObject",(function(){return Z})),a.d(o,"FillStyle",(function(){return He})),a.d(o,"GRAPHICS_CURVES",(function(){return Xe})),a.d(o,"Graphics",(function(){return mt})),a.d(o,"GraphicsData",(function(){return ut})),a.d(o,"GraphicsGeometry",(function(){return lt})),a.d(o,"LINE_CAP",(function(){return Ge})),a.d(o,"LINE_JOIN",(function(){return Ne})),a.d(o,"LineStyle",(function(){return dt})),a.d(o,"graphicsUtils",(function(){return st})),a.d(o,"Circle",(function(){return j.a})),a.d(o,"DEG_TO_RAD",(function(){return j.b})),a.d(o,"Ellipse",(function(){return j.c})),a.d(o,"Matrix",(function(){return j.d})),a.d(o,"ObservablePoint",(function(){return j.e})),a.d(o,"PI_2",(function(){return j.f})),a.d(o,"Point",(function(){return j.g})),a.d(o,"Polygon",(function(){return j.h})),a.d(o,"RAD_TO_DEG",(function(){return j.i})),a.d(o,"Rectangle",(function(){return j.j})),a.d(o,"RoundedRectangle",(function(){return j.k})),a.d(o,"SHAPES",(function(){return j.l})),a.d(o,"Transform",(function(){return j.m})),a.d(o,"groupD8",(function(){return j.n})),a.d(o,"Mesh",(function(){return Yt})),a.d(o,"MeshBatchUvs",(function(){return Xt})),a.d(o,"MeshGeometry",(function(){return Kt})),a.d(o,"MeshMaterial",(function(){return qt})),a.d(o,"NineSlicePlane",(function(){return Hr})),a.d(o,"PlaneGeometry",(function(){return Gr})),a.d(o,"RopeGeometry",(function(){return Ur})),a.d(o,"SimpleMesh",(function(){return Xr})),a.d(o,"SimplePlane",(function(){return Wr})),a.d(o,"SimpleRope",(function(){return jr})),a.d(o,"Runner",(function(){return Vr.a})),a.d(o,"Sprite",(function(){return vt})),a.d(o,"AnimatedSprite",(function(){return qr})),a.d(o,"TEXT_GRADIENT",(function(){return Je})),a.d(o,"Text",(function(){return Pt})),a.d(o,"TextMetrics",(function(){return Tt})),a.d(o,"TextStyle",(function(){return wt})),a.d(o,"isMobile",(function(){return k.a})),a.d(o,"settings",(function(){return k.b})),a.d(o,"VERSION",(function(){return Qr})),a.d(o,"filters",(function(){return Jr})),a.d(o,"useDeprecated",(function(){return useDeprecated}));var h=a(54),c=a(55),l=a.n(c);if(window.Promise||(window.Promise=h.Polyfill),Object.assign||(Object.assign=l.a),Date.now&&Date.prototype.getTime||(Date.now=function now(){return(new Date).getTime()}),!window.performance||!window.performance.now){var m=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-m}}for(var g=Date.now(),_=["ms","moz","webkit","o"],x=0;x<_.length&&!window.requestAnimationFrame;++x){var S=_[x];window.requestAnimationFrame=window[S+"RequestAnimationFrame"],window.cancelAnimationFrame=window[S+"CancelAnimationFrame"]||window[S+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(i){if("function"!=typeof i)throw new TypeError(i+"is not a function");var o=Date.now(),a=16+g-o;return a<0&&(a=0),g=o,window.setTimeout((function(){g=Date.now(),i(performance.now())}),a)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(i){return clearTimeout(i)}),Math.sign||(Math.sign=function mathSign(i){return 0===(i=Number(i))||isNaN(i)?i:i>0?1:-1}),Number.isInteger||(Number.isInteger=function numberIsInteger(i){return"number"==typeof i&&isFinite(i)&&Math.floor(i)===i}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array);var R=a(0),k=a(5),j=a(3);k.b.SORTABLE_CHILDREN=!1;var X=function(){function Bounds(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return Bounds.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},Bounds.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},Bounds.prototype.getRectangle=function(i){return this.minX>this.maxX||this.minY>this.maxY?j.j.EMPTY:((i=i||new j.j(0,0,1,1)).x=this.minX,i.y=this.minY,i.width=this.maxX-this.minX,i.height=this.maxY-this.minY,i)},Bounds.prototype.addPoint=function(i){this.minX=Math.min(this.minX,i.x),this.maxX=Math.max(this.maxX,i.x),this.minY=Math.min(this.minY,i.y),this.maxY=Math.max(this.maxY,i.y)},Bounds.prototype.addQuad=function(i){var o=this.minX,a=this.minY,h=this.maxX,c=this.maxY,l=i[0],m=i[1];o=l<o?l:o,a=m<a?m:a,h=l>h?l:h,c=m>c?m:c,o=(l=i[2])<o?l:o,a=(m=i[3])<a?m:a,h=l>h?l:h,c=m>c?m:c,o=(l=i[4])<o?l:o,a=(m=i[5])<a?m:a,h=l>h?l:h,c=m>c?m:c,o=(l=i[6])<o?l:o,a=(m=i[7])<a?m:a,h=l>h?l:h,c=m>c?m:c,this.minX=o,this.minY=a,this.maxX=h,this.maxY=c},Bounds.prototype.addFrame=function(i,o,a,h,c){this.addFrameMatrix(i.worldTransform,o,a,h,c)},Bounds.prototype.addFrameMatrix=function(i,o,a,h,c){var l=i.a,m=i.b,g=i.c,_=i.d,x=i.tx,S=i.ty,R=this.minX,k=this.minY,j=this.maxX,X=this.maxY,Y=l*o+g*a+x,q=m*o+_*a+S;R=Y<R?Y:R,k=q<k?q:k,j=Y>j?Y:j,X=q>X?q:X,R=(Y=l*h+g*a+x)<R?Y:R,k=(q=m*h+_*a+S)<k?q:k,j=Y>j?Y:j,X=q>X?q:X,R=(Y=l*o+g*c+x)<R?Y:R,k=(q=m*o+_*c+S)<k?q:k,j=Y>j?Y:j,X=q>X?q:X,R=(Y=l*h+g*c+x)<R?Y:R,k=(q=m*h+_*c+S)<k?q:k,j=Y>j?Y:j,X=q>X?q:X,this.minX=R,this.minY=k,this.maxX=j,this.maxY=X},Bounds.prototype.addVertexData=function(i,o,a){for(var h=this.minX,c=this.minY,l=this.maxX,m=this.maxY,g=o;g<a;g+=2){var _=i[g],x=i[g+1];h=_<h?_:h,c=x<c?x:c,l=_>l?_:l,m=x>m?x:m}this.minX=h,this.minY=c,this.maxX=l,this.maxY=m},Bounds.prototype.addVertices=function(i,o,a,h){this.addVerticesMatrix(i.worldTransform,o,a,h)},Bounds.prototype.addVerticesMatrix=function(i,o,a,h,c,l){void 0===c&&(c=0),void 0===l&&(l=c);for(var m=i.a,g=i.b,_=i.c,x=i.d,S=i.tx,R=i.ty,k=this.minX,j=this.minY,X=this.maxX,Y=this.maxY,q=a;q<h;q+=2){var Z=o[q],$=o[q+1],ee=m*Z+_*$+S,te=x*$+g*Z+R;k=Math.min(k,ee-c),X=Math.max(X,ee+c),j=Math.min(j,te-l),Y=Math.max(Y,te+l)}this.minX=k,this.minY=j,this.maxX=X,this.maxY=Y},Bounds.prototype.addBounds=function(i){var o=this.minX,a=this.minY,h=this.maxX,c=this.maxY;this.minX=i.minX<o?i.minX:o,this.minY=i.minY<a?i.minY:a,this.maxX=i.maxX>h?i.maxX:h,this.maxY=i.maxY>c?i.maxY:c},Bounds.prototype.addBoundsMask=function(i,o){var a=i.minX>o.minX?i.minX:o.minX,h=i.minY>o.minY?i.minY:o.minY,c=i.maxX<o.maxX?i.maxX:o.maxX,l=i.maxY<o.maxY?i.maxY:o.maxY;if(a<=c&&h<=l){var m=this.minX,g=this.minY,_=this.maxX,x=this.maxY;this.minX=a<m?a:m,this.minY=h<g?h:g,this.maxX=c>_?c:_,this.maxY=l>x?l:x}},Bounds.prototype.addBoundsMatrix=function(i,o){this.addFrameMatrix(o,i.minX,i.minY,i.maxX,i.maxY)},Bounds.prototype.addBoundsArea=function(i,o){var a=i.minX>o.x?i.minX:o.x,h=i.minY>o.y?i.minY:o.y,c=i.maxX<o.x+o.width?i.maxX:o.x+o.width,l=i.maxY<o.y+o.height?i.maxY:o.y+o.height;if(a<=c&&h<=l){var m=this.minX,g=this.minY,_=this.maxX,x=this.maxY;this.minX=a<m?a:m,this.minY=h<g?h:g,this.maxX=c>_?c:_,this.maxY=l>x?l:x}},Bounds.prototype.pad=function(i,o){void 0===i&&(i=0),void 0===o&&(o=i),this.isEmpty()||(this.minX-=i,this.maxX+=i,this.minY-=o,this.maxY+=o)},Bounds.prototype.addFramePad=function(i,o,a,h,c,l){i-=c,o-=l,a+=c,h+=l,this.minX=this.minX<i?this.minX:i,this.maxX=this.maxX>a?this.maxX:a,this.minY=this.minY<o?this.minY:o,this.maxY=this.maxY>h?this.maxY:h},Bounds}(),Y=function extendStatics(i,o){return(Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)};function __extends(i,o){function __(){this.constructor=i}Y(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}var q=function(i){function DisplayObject(){var o=i.call(this)||this;return o.tempDisplayObjectParent=null,o.transform=new j.m,o.alpha=1,o.visible=!0,o.renderable=!0,o.parent=null,o.worldAlpha=1,o._lastSortedIndex=0,o._zIndex=0,o.filterArea=null,o.filters=null,o._enabledFilters=null,o._bounds=new X,o._localBounds=null,o._boundsID=0,o._boundsRect=null,o._localBoundsRect=null,o._mask=null,o._destroyed=!1,o.isSprite=!1,o.isMask=!1,o}return __extends(DisplayObject,i),DisplayObject.mixin=function(i){for(var o=Object.keys(i),a=0;a<o.length;++a){var h=o[a];Object.defineProperty(DisplayObject.prototype,h,Object.getOwnPropertyDescriptor(i,h))}},DisplayObject.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},DisplayObject.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},DisplayObject.prototype.getBounds=function(i,o){return i||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),o||(this._boundsRect||(this._boundsRect=new j.j),o=this._boundsRect),this._bounds.getRectangle(o)},DisplayObject.prototype.getLocalBounds=function(i){i||(this._localBoundsRect||(this._localBoundsRect=new j.j),i=this._localBoundsRect),this._localBounds||(this._localBounds=new X);var o=this.transform,a=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var h=this._bounds,c=this._boundsID;this._bounds=this._localBounds;var l=this.getBounds(!1,i);return this.parent=a,this.transform=o,this._bounds=h,this._bounds.updateID+=this._boundsID-c,l},DisplayObject.prototype.toGlobal=function(i,o,a){return void 0===a&&(a=!1),a||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(i,o)},DisplayObject.prototype.toLocal=function(i,o,a,h){return o&&(i=o.toGlobal(i,a,h)),h||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(i,a)},DisplayObject.prototype.setParent=function(i){if(!i||!i.addChild)throw new Error("setParent: Argument must be a Container");return i.addChild(this),i},DisplayObject.prototype.setTransform=function(i,o,a,h,c,l,m,g,_){return void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=1),void 0===h&&(h=1),void 0===c&&(c=0),void 0===l&&(l=0),void 0===m&&(m=0),void 0===g&&(g=0),void 0===_&&(_=0),this.position.x=i,this.position.y=o,this.scale.x=a||1,this.scale.y=h||1,this.rotation=c,this.skew.x=l,this.skew.y=m,this.pivot.x=g,this.pivot.y=_,this},DisplayObject.prototype.destroy=function(i){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(DisplayObject.prototype,"_tempDisplayObjectParent",{get:function get(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Z),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),DisplayObject.prototype.enableTempParent=function(){var i=this.parent;return this.parent=this._tempDisplayObjectParent,i},DisplayObject.prototype.disableTempParent=function(i){this.parent=i},Object.defineProperty(DisplayObject.prototype,"x",{get:function get(){return this.position.x},set:function set(i){this.transform.position.x=i},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"y",{get:function get(){return this.position.y},set:function set(i){this.transform.position.y=i},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"worldTransform",{get:function get(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"localTransform",{get:function get(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"position",{get:function get(){return this.transform.position},set:function set(i){this.transform.position.copyFrom(i)},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"scale",{get:function get(){return this.transform.scale},set:function set(i){this.transform.scale.copyFrom(i)},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"pivot",{get:function get(){return this.transform.pivot},set:function set(i){this.transform.pivot.copyFrom(i)},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"skew",{get:function get(){return this.transform.skew},set:function set(i){this.transform.skew.copyFrom(i)},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"rotation",{get:function get(){return this.transform.rotation},set:function set(i){this.transform.rotation=i},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"angle",{get:function get(){return this.transform.rotation*j.i},set:function set(i){this.transform.rotation=i*j.b},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"zIndex",{get:function get(){return this._zIndex},set:function set(i){this._zIndex=i,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"worldVisible",{get:function get(){var i=this;do{if(!i.visible)return!1;i=i.parent}while(i);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"mask",{get:function get(){return this._mask},set:function set(i){var o;this._mask&&((o=this._mask.maskObject||this._mask).renderable=!0,o.isMask=!1),this._mask=i,this._mask&&((o=this._mask.maskObject||this._mask).renderable=!1,o.isMask=!0)},enumerable:!1,configurable:!0}),DisplayObject}(R.EventEmitter),Z=function(i){function TemporaryDisplayObject(){var o=null!==i&&i.apply(this,arguments)||this;return o.sortDirty=null,o}return __extends(TemporaryDisplayObject,i),TemporaryDisplayObject}(q);function sortChildren(i,o){return i.zIndex===o.zIndex?i._lastSortedIndex-o._lastSortedIndex:i.zIndex-o.zIndex}q.prototype.displayObjectUpdateTransform=q.prototype.updateTransform;var $=function(i){function Container(){var o=i.call(this)||this;return o.children=[],o.sortableChildren=k.b.SORTABLE_CHILDREN,o.sortDirty=!1,o}return __extends(Container,i),Container.prototype.onChildrenChange=function(i){},Container.prototype.addChild=function(){for(var i=arguments,o=[],a=0;a<arguments.length;a++)o[a]=i[a];if(o.length>1)for(var h=0;h<o.length;h++)this.addChild(o[h]);else{var c=o[0];c.parent&&c.parent.removeChild(c),c.parent=this,this.sortDirty=!0,c.transform._parentID=-1,this.children.push(c),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",c,this,this.children.length-1),c.emit("added",this)}return o[0]},Container.prototype.addChildAt=function(i,o){if(o<0||o>this.children.length)throw new Error(i+"addChildAt: The index "+o+" supplied is out of bounds "+this.children.length);return i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.splice(o,0,i),this._boundsID++,this.onChildrenChange(o),i.emit("added",this),this.emit("childAdded",i,this,o),i},Container.prototype.swapChildren=function(i,o){if(i!==o){var a=this.getChildIndex(i),h=this.getChildIndex(o);this.children[a]=o,this.children[h]=i,this.onChildrenChange(a<h?a:h)}},Container.prototype.getChildIndex=function(i){var o=this.children.indexOf(i);if(-1===o)throw new Error("The supplied DisplayObject must be a child of the caller");return o},Container.prototype.setChildIndex=function(i,o){if(o<0||o>=this.children.length)throw new Error("The index "+o+" supplied is out of bounds "+this.children.length);var a=this.getChildIndex(i);Object(R.removeItems)(this.children,a,1),this.children.splice(o,0,i),this.onChildrenChange(o)},Container.prototype.getChildAt=function(i){if(i<0||i>=this.children.length)throw new Error("getChildAt: Index ("+i+") does not exist.");return this.children[i]},Container.prototype.removeChild=function(){for(var i=arguments,o=[],a=0;a<arguments.length;a++)o[a]=i[a];if(o.length>1)for(var h=0;h<o.length;h++)this.removeChild(o[h]);else{var c=o[0],l=this.children.indexOf(c);if(-1===l)return null;c.parent=null,c.transform._parentID=-1,Object(R.removeItems)(this.children,l,1),this._boundsID++,this.onChildrenChange(l),c.emit("removed",this),this.emit("childRemoved",c,this,l)}return o[0]},Container.prototype.removeChildAt=function(i){var o=this.getChildAt(i);return o.parent=null,o.transform._parentID=-1,Object(R.removeItems)(this.children,i,1),this._boundsID++,this.onChildrenChange(i),o.emit("removed",this),this.emit("childRemoved",o,this,i),o},Container.prototype.removeChildren=function(i,o){void 0===i&&(i=0),void 0===o&&(o=this.children.length);var a,h=i,c=o-h;if(c>0&&c<=o){a=this.children.splice(h,c);for(var l=0;l<a.length;++l)a[l].parent=null,a[l].transform&&(a[l].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(i),l=0;l<a.length;++l)a[l].emit("removed",this),this.emit("childRemoved",a[l],this,l);return a}if(0===c&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},Container.prototype.sortChildren=function(){for(var i=!1,o=0,a=this.children.length;o<a;++o){var h=this.children[o];h._lastSortedIndex=o,i||0===h.zIndex||(i=!0)}i&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1},Container.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var i=0,o=this.children.length;i<o;++i){var a=this.children[i];a.visible&&a.updateTransform()}},Container.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var i=0;i<this.children.length;i++){var o=this.children[i];if(o.visible&&o.renderable)if(o.calculateBounds(),o._mask){var a=o._mask.maskObject||o._mask;a.calculateBounds(),this._bounds.addBoundsMask(o._bounds,a._bounds)}else o.filterArea?this._bounds.addBoundsArea(o._bounds,o.filterArea):this._bounds.addBounds(o._bounds)}this._bounds.updateID=this._boundsID},Container.prototype.getLocalBounds=function(o,a){void 0===a&&(a=!1);var h=i.prototype.getLocalBounds.call(this,o);if(!a)for(var c=0,l=this.children.length;c<l;++c){var m=this.children[c];m.visible&&m.updateTransform()}return h},Container.prototype._calculateBounds=function(){},Container.prototype.render=function(i){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(i);else{this._render(i);for(var o=0,a=this.children.length;o<a;++o)this.children[o].render(i)}},Container.prototype.renderAdvanced=function(i){i.batch.flush();var o=this.filters,a=this._mask;if(o){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var h=0;h<o.length;h++)o[h].enabled&&this._enabledFilters.push(o[h]);this._enabledFilters.length&&i.filter.push(this,this._enabledFilters)}a&&i.mask.push(this,this._mask),this._render(i),h=0;for(var c=this.children.length;h<c;h++)this.children[h].render(i);i.batch.flush(),a&&i.mask.pop(this),o&&this._enabledFilters&&this._enabledFilters.length&&i.filter.pop()},Container.prototype._render=function(i){},Container.prototype.destroy=function(o){i.prototype.destroy.call(this),this.sortDirty=!1;var a="boolean"==typeof o?o:o&&o.children,h=this.removeChildren(0,this.children.length);if(a)for(var c=0;c<h.length;++c)h[c].destroy(o)},Object.defineProperty(Container.prototype,"width",{get:function get(){return this.scale.x*this.getLocalBounds().width},set:function set(i){var o=this.getLocalBounds().width;this.scale.x=0!==o?i/o:1,this._width=i},enumerable:!1,configurable:!0}),Object.defineProperty(Container.prototype,"height",{get:function get(){return this.scale.y*this.getLocalBounds().height},set:function set(i){var o=this.getLocalBounds().height;this.scale.y=0!==o?i/o:1,this._height=i},enumerable:!1,configurable:!0}),Container}(q);$.prototype.containerUpdateTransform=$.prototype.updateTransform;var ee={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};q.mixin(ee);var te=function(){function AccessibilityManager(i){this._hookDiv=null,(R.isMobile.tablet||R.isMobile.phone)&&this.createTouchHook();var o=document.createElement("div");o.style.width="100px",o.style.height="100px",o.style.position="absolute",o.style.top="0px",o.style.left="0px",o.style.zIndex=2..toString(),this.div=o,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=i,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(AccessibilityManager.prototype,"isActive",{get:function get(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(AccessibilityManager.prototype,"isMobileAccessibility",{get:function get(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),AccessibilityManager.prototype.createTouchHook=function(){var i=this,o=document.createElement("button");o.style.width="1px",o.style.height="1px",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.style.zIndex=2..toString(),o.style.backgroundColor="#FF0000",o.title="select to enable accessability for this content",o.addEventListener("focus",(function(){i._isMobileAccessibility=!0,i.activate(),i.destroyTouchHook()})),document.body.appendChild(o),this._hookDiv=o},AccessibilityManager.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},AccessibilityManager.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},AccessibilityManager.prototype.deactivate=function(){this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},AccessibilityManager.prototype.updateAccessibleObjects=function(i){if(i.visible&&i.accessibleChildren){i.accessible&&i.interactive&&(i._accessibleActive||this.addChild(i),i.renderId=this.renderId);for(var o=i.children,a=0;a<o.length;a++)this.updateAccessibleObjects(o[a])}},AccessibilityManager.prototype.update=function(){var i=performance.now();if(!(R.isMobile.android.device&&i<this.androidUpdateCount)&&(this.androidUpdateCount=i+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var o=this.renderer.view.getBoundingClientRect(),a=this.renderer.resolution,h=o.width/this.renderer.width*a,c=o.height/this.renderer.height*a,l=this.div;l.style.left=o.left+"px",l.style.top=o.top+"px",l.style.width=this.renderer.width+"px",l.style.height=this.renderer.height+"px";for(var m=0;m<this.children.length;m++){var g=this.children[m];if(g.renderId!==this.renderId)g._accessibleActive=!1,Object(R.removeItems)(this.children,m,1),this.div.removeChild(g._accessibleDiv),this.pool.push(g._accessibleDiv),g._accessibleDiv=null,m--;else{l=g._accessibleDiv;var _=g.hitArea,x=g.worldTransform;g.hitArea?(l.style.left=(x.tx+_.x*x.a)*h+"px",l.style.top=(x.ty+_.y*x.d)*c+"px",l.style.width=_.width*x.a*h+"px",l.style.height=_.height*x.d*c+"px"):(_=g.getBounds(),this.capHitArea(_),l.style.left=_.x*h+"px",l.style.top=_.y*c+"px",l.style.width=_.width*h+"px",l.style.height=_.height*c+"px",l.title!==g.accessibleTitle&&null!==g.accessibleTitle&&(l.title=g.accessibleTitle),l.getAttribute("aria-label")!==g.accessibleHint&&null!==g.accessibleHint&&l.setAttribute("aria-label",g.accessibleHint)),g.accessibleTitle===l.title&&g.tabIndex===l.tabIndex||(l.title=g.accessibleTitle,l.tabIndex=g.tabIndex,this.debug&&this.updateDebugHTML(l))}}this.renderId++}},AccessibilityManager.prototype.updateDebugHTML=function(i){i.innerHTML="type: "+i.type+"</br> title : "+i.title+"</br> tabIndex: "+i.tabIndex},AccessibilityManager.prototype.capHitArea=function(i){i.x<0&&(i.width+=i.x,i.x=0),i.y<0&&(i.height+=i.y,i.y=0),i.x+i.width>this.renderer.width&&(i.width=this.renderer.width-i.x),i.y+i.height>this.renderer.height&&(i.height=this.renderer.height-i.y)},AccessibilityManager.prototype.addChild=function(i){var o=this.pool.pop();o||((o=document.createElement("button")).style.width="100px",o.style.height="100px",o.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",o.style.position="absolute",o.style.zIndex=2..toString(),o.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?o.setAttribute("aria-live","off"):o.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?o.setAttribute("aria-relevant","additions"):o.setAttribute("aria-relevant","text"),o.addEventListener("click",this._onClick.bind(this)),o.addEventListener("focus",this._onFocus.bind(this)),o.addEventListener("focusout",this._onFocusOut.bind(this))),o.style.pointerEvents=i.accessiblePointerEvents,o.type=i.accessibleType,i.accessibleTitle&&null!==i.accessibleTitle?o.title=i.accessibleTitle:i.accessibleHint&&null!==i.accessibleHint||(o.title="displayObject "+i.tabIndex),i.accessibleHint&&null!==i.accessibleHint&&o.setAttribute("aria-label",i.accessibleHint),this.debug&&this.updateDebugHTML(o),i._accessibleActive=!0,i._accessibleDiv=o,o.displayObject=i,this.children.push(i),this.div.appendChild(i._accessibleDiv),i._accessibleDiv.tabIndex=i.tabIndex},AccessibilityManager.prototype._onClick=function(i){var o=this.renderer.plugins.interaction;o.dispatchEvent(i.target.displayObject,"click",o.eventData),o.dispatchEvent(i.target.displayObject,"pointertap",o.eventData),o.dispatchEvent(i.target.displayObject,"tap",o.eventData)},AccessibilityManager.prototype._onFocus=function(i){i.target.getAttribute("aria-live")||i.target.setAttribute("aria-live","assertive");var o=this.renderer.plugins.interaction;o.dispatchEvent(i.target.displayObject,"mouseover",o.eventData)},AccessibilityManager.prototype._onFocusOut=function(i){i.target.getAttribute("aria-live")||i.target.setAttribute("aria-live","polite");var o=this.renderer.plugins.interaction;o.dispatchEvent(i.target.displayObject,"mouseout",o.eventData)},AccessibilityManager.prototype._onKeyDown=function(i){9===i.keyCode&&this.activate()},AccessibilityManager.prototype._onMouseMove=function(i){0===i.movementX&&0===i.movementY||this.deactivate()},AccessibilityManager.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},AccessibilityManager}(),re=a(9),ie=function(){function InteractionData(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new j.g,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(InteractionData.prototype,"pointerId",{get:function get(){return this.identifier},enumerable:!1,configurable:!0}),InteractionData.prototype.getLocalPosition=function(i,o,a){return i.worldTransform.applyInverse(a||this.global,o)},InteractionData.prototype.copyEvent=function(i){"isPrimary"in i&&i.isPrimary&&(this.isPrimary=!0),this.button="button"in i&&i.button;var o="buttons"in i&&i.buttons;this.buttons=Number.isInteger(o)?o:"which"in i&&i.which,this.width="width"in i&&i.width,this.height="height"in i&&i.height,this.tiltX="tiltX"in i&&i.tiltX,this.tiltY="tiltY"in i&&i.tiltY,this.pointerType="pointerType"in i&&i.pointerType,this.pressure="pressure"in i&&i.pressure,this.rotationAngle="rotationAngle"in i&&i.rotationAngle,this.twist="twist"in i&&i.twist||0,this.tangentialPressure="tangentialPressure"in i&&i.tangentialPressure||0},InteractionData.prototype.reset=function(){this.isPrimary=!1},InteractionData}(),ne=function interaction_es_extendStatics(i,o){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)},oe=function(){function InteractionEvent(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return InteractionEvent.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},InteractionEvent.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},InteractionEvent}(),ae=function(){function InteractionTrackingData(i){this._pointerId=i,this._flags=InteractionTrackingData.FLAGS.NONE}return InteractionTrackingData.prototype._doSet=function(i,o){this._flags=o?this._flags|i:this._flags&~i},Object.defineProperty(InteractionTrackingData.prototype,"pointerId",{get:function get(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionTrackingData.prototype,"flags",{get:function get(){return this._flags},set:function set(i){this._flags=i},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionTrackingData.prototype,"none",{get:function get(){return this._flags===InteractionTrackingData.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionTrackingData.prototype,"over",{get:function get(){return 0!=(this._flags&InteractionTrackingData.FLAGS.OVER)},set:function set(i){this._doSet(InteractionTrackingData.FLAGS.OVER,i)},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionTrackingData.prototype,"rightDown",{get:function get(){return 0!=(this._flags&InteractionTrackingData.FLAGS.RIGHT_DOWN)},set:function set(i){this._doSet(InteractionTrackingData.FLAGS.RIGHT_DOWN,i)},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionTrackingData.prototype,"leftDown",{get:function get(){return 0!=(this._flags&InteractionTrackingData.FLAGS.LEFT_DOWN)},set:function set(i){this._doSet(InteractionTrackingData.FLAGS.LEFT_DOWN,i)},enumerable:!1,configurable:!0}),InteractionTrackingData.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),InteractionTrackingData}(),se=function(){function TreeSearch(){this._tempPoint=new j.g}return TreeSearch.prototype.recursiveFindHit=function(i,o,a,h,c){if(!o||!o.visible)return!1;var l=i.data.global,m=!1,g=c=o.interactive||c,_=!0;if(o.hitArea?(h&&(o.worldTransform.applyInverse(l,this._tempPoint),o.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?m=!0:(h=!1,_=!1)),g=!1):o._mask&&h&&(o._mask.containsPoint&&o._mask.containsPoint(l)||(h=!1)),_&&o.interactiveChildren&&o.children)for(var x=o.children,S=x.length-1;S>=0;S--){var R=x[S],k=this.recursiveFindHit(i,R,a,h,g);if(k){if(!R.parent)continue;g=!1,k&&(i.target&&(h=!1),m=!0)}}return c&&(h&&!i.target&&!o.hitArea&&o.containsPoint&&o.containsPoint(l)&&(m=!0),o.interactive&&(m&&!i.target&&(i.target=o),a&&a(i,o,!!m))),m},TreeSearch.prototype.findHit=function(i,o,a,h){this.recursiveFindHit(i,o,a,h,!1)},TreeSearch}(),ue={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(i){i?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};q.mixin(ue);var he={target:null,data:{global:null}},ce=function(i){function InteractionManager(o,a){var h=i.call(this)||this;return a=a||{},h.renderer=o,h.autoPreventDefault=void 0===a.autoPreventDefault||a.autoPreventDefault,h.interactionFrequency=a.interactionFrequency||10,h.mouse=new ie,h.mouse.identifier=1,h.mouse.global.set(-999999),h.activeInteractionData={},h.activeInteractionData[1]=h.mouse,h.interactionDataPool=[],h.eventData=new oe,h.interactionDOMElement=null,h.moveWhenInside=!1,h.eventsAdded=!1,h.tickerAdded=!1,h.mouseOverRenderer=!1,h.supportsTouchEvents="ontouchstart"in window,h.supportsPointerEvents=!!window.PointerEvent,h.onPointerUp=h.onPointerUp.bind(h),h.processPointerUp=h.processPointerUp.bind(h),h.onPointerCancel=h.onPointerCancel.bind(h),h.processPointerCancel=h.processPointerCancel.bind(h),h.onPointerDown=h.onPointerDown.bind(h),h.processPointerDown=h.processPointerDown.bind(h),h.onPointerMove=h.onPointerMove.bind(h),h.processPointerMove=h.processPointerMove.bind(h),h.onPointerOut=h.onPointerOut.bind(h),h.processPointerOverOut=h.processPointerOverOut.bind(h),h.onPointerOver=h.onPointerOver.bind(h),h.cursorStyles={default:"inherit",pointer:"pointer"},h.currentCursorMode=null,h.cursor=null,h.resolution=1,h.delayedEvents=[],h.search=new se,h._tempDisplayObject=new Z,h._useSystemTicker=void 0===a.useSystemTicker||a.useSystemTicker,h.setTargetElement(h.renderer.view,h.renderer.resolution),h}return function interaction_es_extends(i,o){function __(){this.constructor=i}ne(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}(InteractionManager,i),Object.defineProperty(InteractionManager.prototype,"useSystemTicker",{get:function get(){return this._useSystemTicker},set:function set(i){this._useSystemTicker=i,i?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionManager.prototype,"lastObjectRendered",{get:function get(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),InteractionManager.prototype.hitTest=function(i,o){return he.target=null,he.data.global=i,o||(o=this.lastObjectRendered),this.processInteractive(he,o,null,!0),he.target},InteractionManager.prototype.setTargetElement=function(i,o){void 0===o&&(o=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=i,this.resolution=o,this.addEvents(),this.addTickerListener()},InteractionManager.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(re.a.system.add(this.tickerUpdate,this,re.c.INTERACTION),this.tickerAdded=!0)},InteractionManager.prototype.removeTickerListener=function(){this.tickerAdded&&(re.a.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},InteractionManager.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var i=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(i.msContentZooming="none",i.msTouchAction="none"):this.supportsPointerEvents&&(i.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},InteractionManager.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var i=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(i.msContentZooming="",i.msTouchAction=""):this.supportsPointerEvents&&(i.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},InteractionManager.prototype.tickerUpdate=function(i){this._deltaTime+=i,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},InteractionManager.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var i in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(i)){var o=this.activeInteractionData[i];if(o.originalEvent&&"touch"!==o.pointerType){var a=this.configureInteractionEventForDOMEvent(this.eventData,o.originalEvent,o);this.processInteractive(a,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},InteractionManager.prototype.setCursorMode=function(i){if(i=i||"default",this.currentCursorMode!==i){this.currentCursorMode=i;var o=this.cursorStyles[i];if(o)switch(_typeof2(o)){case"string":this.interactionDOMElement.style.cursor=o;break;case"function":o(i);break;case"object":Object.assign(this.interactionDOMElement.style,o)}else"string"!=typeof i||Object.prototype.hasOwnProperty.call(this.cursorStyles,i)||(this.interactionDOMElement.style.cursor=i)}},InteractionManager.prototype.dispatchEvent=function(i,o,a){a.stopPropagationHint&&i!==a.stopsPropagatingAt||(a.currentTarget=i,a.type=o,i.emit(o,a),i[o]&&i[o](a))},InteractionManager.prototype.delayDispatchEvent=function(i,o,a){this.delayedEvents.push({displayObject:i,eventString:o,eventData:a})},InteractionManager.prototype.mapPositionToPoint=function(i,o,a){var h;h=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var c=1/this.resolution;i.x=(o-h.left)*(this.interactionDOMElement.width/h.width)*c,i.y=(a-h.top)*(this.interactionDOMElement.height/h.height)*c},InteractionManager.prototype.processInteractive=function(i,o,a,h){var c=this.search.findHit(i,o,a,h),l=this.delayedEvents;if(!l.length)return c;i.stopPropagationHint=!1;var m=l.length;this.delayedEvents=[];for(var g=0;g<m;g++){var _=l[g],x=_.displayObject,S=_.eventString,R=_.eventData;R.stopsPropagatingAt===x&&(R.stopPropagationHint=!0),this.dispatchEvent(x,S,R)}return c},InteractionManager.prototype.onPointerDown=function(i){if(!this.supportsTouchEvents||"touch"!==i.pointerType){var o=this.normalizeToPointerData(i);this.autoPreventDefault&&o[0].isNormalized&&(i.cancelable||!("cancelable"in i))&&i.preventDefault();for(var a=o.length,h=0;h<a;h++){var c=o[h],l=this.getInteractionDataForPointerId(c),m=this.configureInteractionEventForDOMEvent(this.eventData,c,l);if(m.data.originalEvent=i,this.processInteractive(m,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",m),"touch"===c.pointerType)this.emit("touchstart",m);else if("mouse"===c.pointerType||"pen"===c.pointerType){var g=2===c.button;this.emit(g?"rightdown":"mousedown",this.eventData)}}}},InteractionManager.prototype.processPointerDown=function(i,o,a){var h=i.data,c=i.data.identifier;if(a)if(o.trackedPointers[c]||(o.trackedPointers[c]=new ae(c)),this.dispatchEvent(o,"pointerdown",i),"touch"===h.pointerType)this.dispatchEvent(o,"touchstart",i);else if("mouse"===h.pointerType||"pen"===h.pointerType){var l=2===h.button;l?o.trackedPointers[c].rightDown=!0:o.trackedPointers[c].leftDown=!0,this.dispatchEvent(o,l?"rightdown":"mousedown",i)}},InteractionManager.prototype.onPointerComplete=function(i,o,a){for(var h=this.normalizeToPointerData(i),c=h.length,l=i.target!==this.interactionDOMElement?"outside":"",m=0;m<c;m++){var g=h[m],_=this.getInteractionDataForPointerId(g),x=this.configureInteractionEventForDOMEvent(this.eventData,g,_);if(x.data.originalEvent=i,this.processInteractive(x,this.lastObjectRendered,a,o||!l),this.emit(o?"pointercancel":"pointerup"+l,x),"mouse"===g.pointerType||"pen"===g.pointerType){var S=2===g.button;this.emit(S?"rightup"+l:"mouseup"+l,x)}else"touch"===g.pointerType&&(this.emit(o?"touchcancel":"touchend"+l,x),this.releaseInteractionDataForPointerId(g.pointerId))}},InteractionManager.prototype.onPointerCancel=function(i){this.supportsTouchEvents&&"touch"===i.pointerType||this.onPointerComplete(i,!0,this.processPointerCancel)},InteractionManager.prototype.processPointerCancel=function(i,o){var a=i.data,h=i.data.identifier;void 0!==o.trackedPointers[h]&&(delete o.trackedPointers[h],this.dispatchEvent(o,"pointercancel",i),"touch"===a.pointerType&&this.dispatchEvent(o,"touchcancel",i))},InteractionManager.prototype.onPointerUp=function(i){this.supportsTouchEvents&&"touch"===i.pointerType||this.onPointerComplete(i,!1,this.processPointerUp)},InteractionManager.prototype.processPointerUp=function(i,o,a){var h=i.data,c=i.data.identifier,l=o.trackedPointers[c],m="touch"===h.pointerType,g="mouse"===h.pointerType||"pen"===h.pointerType,_=!1;if(g){var x=2===h.button,S=ae.FLAGS,R=x?S.RIGHT_DOWN:S.LEFT_DOWN,k=void 0!==l&&l.flags&R;a?(this.dispatchEvent(o,x?"rightup":"mouseup",i),k&&(this.dispatchEvent(o,x?"rightclick":"click",i),_=!0)):k&&this.dispatchEvent(o,x?"rightupoutside":"mouseupoutside",i),l&&(x?l.rightDown=!1:l.leftDown=!1)}a?(this.dispatchEvent(o,"pointerup",i),m&&this.dispatchEvent(o,"touchend",i),l&&(g&&!_||this.dispatchEvent(o,"pointertap",i),m&&(this.dispatchEvent(o,"tap",i),l.over=!1))):l&&(this.dispatchEvent(o,"pointerupoutside",i),m&&this.dispatchEvent(o,"touchendoutside",i)),l&&l.none&&delete o.trackedPointers[c]},InteractionManager.prototype.onPointerMove=function(i){if(!this.supportsTouchEvents||"touch"!==i.pointerType){var o=this.normalizeToPointerData(i);"mouse"!==o[0].pointerType&&"pen"!==o[0].pointerType||(this._didMove=!0,this.cursor=null);for(var a=o.length,h=0;h<a;h++){var c=o[h],l=this.getInteractionDataForPointerId(c),m=this.configureInteractionEventForDOMEvent(this.eventData,c,l);m.data.originalEvent=i,this.processInteractive(m,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",m),"touch"===c.pointerType&&this.emit("touchmove",m),"mouse"!==c.pointerType&&"pen"!==c.pointerType||this.emit("mousemove",m)}"mouse"===o[0].pointerType&&this.setCursorMode(this.cursor)}},InteractionManager.prototype.processPointerMove=function(i,o,a){var h=i.data,c="touch"===h.pointerType,l="mouse"===h.pointerType||"pen"===h.pointerType;l&&this.processPointerOverOut(i,o,a),this.moveWhenInside&&!a||(this.dispatchEvent(o,"pointermove",i),c&&this.dispatchEvent(o,"touchmove",i),l&&this.dispatchEvent(o,"mousemove",i))},InteractionManager.prototype.onPointerOut=function(i){if(!this.supportsTouchEvents||"touch"!==i.pointerType){var o=this.normalizeToPointerData(i)[0];"mouse"===o.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var a=this.getInteractionDataForPointerId(o),h=this.configureInteractionEventForDOMEvent(this.eventData,o,a);h.data.originalEvent=o,this.processInteractive(h,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",h),"mouse"===o.pointerType||"pen"===o.pointerType?this.emit("mouseout",h):this.releaseInteractionDataForPointerId(a.identifier)}},InteractionManager.prototype.processPointerOverOut=function(i,o,a){var h=i.data,c=i.data.identifier,l="mouse"===h.pointerType||"pen"===h.pointerType,m=o.trackedPointers[c];a&&!m&&(m=o.trackedPointers[c]=new ae(c)),void 0!==m&&(a&&this.mouseOverRenderer?(m.over||(m.over=!0,this.delayDispatchEvent(o,"pointerover",i),l&&this.delayDispatchEvent(o,"mouseover",i)),l&&null===this.cursor&&(this.cursor=o.cursor)):m.over&&(m.over=!1,this.dispatchEvent(o,"pointerout",this.eventData),l&&this.dispatchEvent(o,"mouseout",i),m.none&&delete o.trackedPointers[c]))},InteractionManager.prototype.onPointerOver=function(i){var o=this.normalizeToPointerData(i)[0],a=this.getInteractionDataForPointerId(o),h=this.configureInteractionEventForDOMEvent(this.eventData,o,a);h.data.originalEvent=o,"mouse"===o.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",h),"mouse"!==o.pointerType&&"pen"!==o.pointerType||this.emit("mouseover",h)},InteractionManager.prototype.getInteractionDataForPointerId=function(i){var o,a=i.pointerId;return 1===a||"mouse"===i.pointerType?o=this.mouse:this.activeInteractionData[a]?o=this.activeInteractionData[a]:((o=this.interactionDataPool.pop()||new ie).identifier=a,this.activeInteractionData[a]=o),o.copyEvent(i),o},InteractionManager.prototype.releaseInteractionDataForPointerId=function(i){var o=this.activeInteractionData[i];o&&(delete this.activeInteractionData[i],o.reset(),this.interactionDataPool.push(o))},InteractionManager.prototype.configureInteractionEventForDOMEvent=function(i,o,a){return i.data=a,this.mapPositionToPoint(a.global,o.clientX,o.clientY),"touch"===o.pointerType&&(o.globalX=a.global.x,o.globalY=a.global.y),a.originalEvent=o,i.reset(),i},InteractionManager.prototype.normalizeToPointerData=function(i){var o=[];if(this.supportsTouchEvents&&i instanceof TouchEvent)for(var a=0,h=i.changedTouches.length;a<h;a++){var c=i.changedTouches[a];void 0===c.button&&(c.button=i.touches.length?1:0),void 0===c.buttons&&(c.buttons=i.touches.length?1:0),void 0===c.isPrimary&&(c.isPrimary=1===i.touches.length&&"touchstart"===i.type),void 0===c.width&&(c.width=c.radiusX||1),void 0===c.height&&(c.height=c.radiusY||1),void 0===c.tiltX&&(c.tiltX=0),void 0===c.tiltY&&(c.tiltY=0),void 0===c.pointerType&&(c.pointerType="touch"),void 0===c.pointerId&&(c.pointerId=c.identifier||0),void 0===c.pressure&&(c.pressure=c.force||.5),void 0===c.twist&&(c.twist=0),void 0===c.tangentialPressure&&(c.tangentialPressure=0),void 0===c.layerX&&(c.layerX=c.offsetX=c.clientX),void 0===c.layerY&&(c.layerY=c.offsetY=c.clientY),c.isNormalized=!0,o.push(c)}else if(!(i instanceof MouseEvent)||this.supportsPointerEvents&&i instanceof window.PointerEvent)o.push(i);else{var l=i;void 0===l.isPrimary&&(l.isPrimary=!0),void 0===l.width&&(l.width=1),void 0===l.height&&(l.height=1),void 0===l.tiltX&&(l.tiltX=0),void 0===l.tiltY&&(l.tiltY=0),void 0===l.pointerType&&(l.pointerType="mouse"),void 0===l.pointerId&&(l.pointerId=1),void 0===l.pressure&&(l.pressure=.5),void 0===l.twist&&(l.twist=0),void 0===l.tangentialPressure&&(l.tangentialPressure=0),l.isNormalized=!0,o.push(l)}return o},InteractionManager.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},InteractionManager}(R.EventEmitter),de=a(1),pe=function(){function Application(i){var o=this;i=Object.assign({forceCanvas:!1},i),this.renderer=Object(de.L)(i),this.stage=new $,Application._plugins.forEach((function(a){a.init.call(o,i)}))}return Application.registerPlugin=function(i){Application._plugins.push(i)},Application.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(Application.prototype,"view",{get:function get(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(Application.prototype,"screen",{get:function get(){return this.renderer.screen},enumerable:!1,configurable:!0}),Application.prototype.destroy=function(i,o){var a=this,h=Application._plugins.slice(0);h.reverse(),h.forEach((function(i){i.destroy.call(a)})),this.stage.destroy(o),this.stage=null,this.renderer.destroy(i),this.renderer=null},Application}();pe._plugins=[];var fe=function(){function ResizePlugin(){}return ResizePlugin.init=function(i){var o=this;Object.defineProperty(this,"resizeTo",{set:function set(i){window.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function get(){return this._resizeTo}}),this.queueResize=function(){o._resizeTo&&(o.cancelResize(),o._resizeId=requestAnimationFrame((function(){return o.resize()})))},this.cancelResize=function(){o._resizeId&&(cancelAnimationFrame(o._resizeId),o._resizeId=null)},this.resize=function(){if(o._resizeTo){var i,a;if(o.cancelResize(),o._resizeTo===window)i=window.innerWidth,a=window.innerHeight;else{var h=o._resizeTo;i=h.clientWidth,a=h.clientHeight}o.renderer.resize(i,a)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=i.resizeTo||null},ResizePlugin.destroy=function(){this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},ResizePlugin}();pe.registerPlugin(fe);var me=new j.j,ye=function(){function Extract(i){this.renderer=i,i.extract=this}return Extract.prototype.image=function(i,o,a){var h=new Image;return h.src=this.base64(i,o,a),h},Extract.prototype.base64=function(i,o,a){return this.canvas(i).toDataURL(o,a)},Extract.prototype.canvas=function(i){var o,a,h,c=this.renderer,l=!1,m=!1;i&&(i instanceof de.z?h=i:(h=this.renderer.generateTexture(i),m=!0)),h?(o=h.baseTexture.resolution,a=h.frame,l=!1,c.renderTexture.bind(h)):(o=this.renderer.resolution,l=!0,(a=me).width=this.renderer.width,a.height=this.renderer.height,c.renderTexture.bind(null));var g=Math.floor(a.width*o+1e-4),_=Math.floor(a.height*o+1e-4),x=new R.CanvasRenderTarget(g,_,1),S=new Uint8Array(4*g*_),k=c.gl;k.readPixels(a.x*o,a.y*o,g,_,k.RGBA,k.UNSIGNED_BYTE,S);var j=x.context.getImageData(0,0,g,_);if(Extract.arrayPostDivide(S,j.data),x.context.putImageData(j,0,0),l){var X=new R.CanvasRenderTarget(x.width,x.height,1);X.context.scale(1,-1),X.context.drawImage(x.canvas,0,-_),x.destroy(),x=X}return m&&h.destroy(!0),x.canvas},Extract.prototype.pixels=function(i){var o,a,h,c=this.renderer,l=!1;i&&(i instanceof de.z?h=i:(h=this.renderer.generateTexture(i),l=!0)),h?(o=h.baseTexture.resolution,a=h.frame,c.renderTexture.bind(h)):(o=c.resolution,(a=me).width=c.width,a.height=c.height,c.renderTexture.bind(null));var m=a.width*o,g=a.height*o,_=new Uint8Array(4*m*g),x=c.gl;return x.readPixels(a.x*o,a.y*o,m,g,x.RGBA,x.UNSIGNED_BYTE,_),l&&h.destroy(!0),Extract.arrayPostDivide(_,_),_},Extract.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},Extract.arrayPostDivide=function(i,o){for(var a=0;a<i.length;a+=4){var h=o[a+3]=i[a+3];0!==h?(o[a]=Math.round(Math.min(255*i[a]/h,255)),o[a+1]=Math.round(Math.min(255*i[a+1]/h,255)),o[a+2]=Math.round(Math.min(255*i[a+2]/h,255))):(o[a]=i[a],o[a+1]=i[a+1],o[a+2]=i[a+2])}},Extract}(),_e=a(39),ve=a.n(_e),xe=a(14),Se=a.n(xe);function _noop(){}function eachSeries(i,o,a,h){var c=0,l=i.length;!function next(m){m||c===l?a&&a(m):h?setTimeout((function(){o(i[c++],next)}),1):o(i[c++],next)}()}function onlyOnce(i){return function onceWrapper(){if(null===i)throw new Error("Callback was already called.");var o=i;i=null,o.apply(this,arguments)}}var be={};function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}function _createClass(i,o,a){return o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a),i}var we=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),Te=null;function _noop$1(){}var Ce=function(){function Resource(i,o,a){if("string"!=typeof i||"string"!=typeof o)throw new Error("Both name and url are required for constructing a resource.");a=a||{},this._flags=0,this._setFlag(Resource.STATUS_FLAGS.DATA_URL,0===o.indexOf("data:")),this.name=i,this.url=o,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===a.crossOrigin?"anonymous":a.crossOrigin,this.timeout=a.timeout||0,this.loadType=a.loadType||this._determineLoadType(),this.xhrType=a.xhrType,this.metadata=a.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=Resource.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=_noop$1,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Se.a,this.onProgress=new Se.a,this.onComplete=new Se.a,this.onAfterMiddleware=new Se.a}Resource.setExtensionLoadType=function setExtensionLoadType(i,o){setExtMap(Resource._loadTypeMap,i,o)},Resource.setExtensionXhrType=function setExtensionXhrType(i,o){setExtMap(Resource._xhrTypeMap,i,o)};var i=Resource.prototype;return i.complete=function complete(){this._clearEvents(),this._finish()},i.abort=function abort(i){if(!this.error){if(this.error=new Error(i),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=Resource.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},i.load=function load(i){var o=this;if(!this.isLoading)if(this.isComplete)i&&setTimeout((function(){return i(o)}),1);else switch(i&&this.onComplete.once(i),this._setFlag(Resource.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case Resource.LOAD_TYPE.IMAGE:this.type=Resource.TYPE.IMAGE,this._loadElement("image");break;case Resource.LOAD_TYPE.AUDIO:this.type=Resource.TYPE.AUDIO,this._loadSourceElement("audio");break;case Resource.LOAD_TYPE.VIDEO:this.type=Resource.TYPE.VIDEO,this._loadSourceElement("video");break;case Resource.LOAD_TYPE.XHR:default:we&&this.crossOrigin?this._loadXdr():this._loadXhr()}},i._hasFlag=function _hasFlag(i){return 0!=(this._flags&i)},i._setFlag=function _setFlag(i,o){this._flags=o?this._flags|i:this._flags&~i},i._clearEvents=function _clearEvents(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},i._finish=function _finish(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(Resource.STATUS_FLAGS.COMPLETE,!0),this._setFlag(Resource.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},i._loadElement=function _loadElement(i){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===i&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(i),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},i._loadSourceElement=function _loadSourceElement(i){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===i&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(i),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var o=this.metadata.mimeType,a=0;a<this.url.length;++a)this.data.appendChild(this._createSource(i,this.url[a],Array.isArray(o)?o[a]:o));else{var h=this.metadata.mimeType;this.data.appendChild(this._createSource(i,this.url,Array.isArray(h)?h[0]:h))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+i)},i._loadXhr=function _loadXhr(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var i=this.xhr=new XMLHttpRequest;i.open("GET",this.url,!0),i.timeout=this.timeout,this.xhrType===Resource.XHR_RESPONSE_TYPE.JSON||this.xhrType===Resource.XHR_RESPONSE_TYPE.DOCUMENT?i.responseType=Resource.XHR_RESPONSE_TYPE.TEXT:i.responseType=this.xhrType,i.addEventListener("error",this._boundXhrOnError,!1),i.addEventListener("timeout",this._boundXhrOnTimeout,!1),i.addEventListener("abort",this._boundXhrOnAbort,!1),i.addEventListener("progress",this._boundOnProgress,!1),i.addEventListener("load",this._boundXhrOnLoad,!1),i.send()},i._loadXdr=function _loadXdr(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var i=this.xhr=new XDomainRequest;i.timeout=this.timeout||5e3,i.onerror=this._boundXhrOnError,i.ontimeout=this._boundXhrOnTimeout,i.onprogress=this._boundOnProgress,i.onload=this._boundXhrOnLoad,i.open("GET",this.url,!0),setTimeout((function(){return i.send()}),1)},i._createSource=function _createSource(i,o,a){a||(a=i+"/"+this._getExtension(o));var h=document.createElement("source");return h.src=o,h.type=a,h},i._onError=function _onError(i){this.abort("Failed to load element using: "+i.target.nodeName)},i._onProgress=function _onProgress(i){i&&i.lengthComputable&&this.onProgress.dispatch(this,i.loaded/i.total)},i._onTimeout=function _onTimeout(){this.abort("Load timed out.")},i._xhrOnError=function _xhrOnError(){var i=this.xhr;this.abort(reqType(i)+" Request failed. Status: "+i.status+', text: "'+i.statusText+'"')},i._xhrOnTimeout=function _xhrOnTimeout(){var i=this.xhr;this.abort(reqType(i)+" Request timed out.")},i._xhrOnAbort=function _xhrOnAbort(){var i=this.xhr;this.abort(reqType(i)+" Request was aborted by the user.")},i._xhrOnLoad=function _xhrOnLoad(){var i=this.xhr,o="",a=void 0===i.status?200:i.status;if(""!==i.responseType&&"text"!==i.responseType&&void 0!==i.responseType||(o=i.responseText),0===a&&(o.length>0||i.responseType===Resource.XHR_RESPONSE_TYPE.BUFFER)?a=200:1223===a&&(a=204),2==(a/100|0)){if(this.xhrType===Resource.XHR_RESPONSE_TYPE.TEXT)this.data=o,this.type=Resource.TYPE.TEXT;else if(this.xhrType===Resource.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(o),this.type=Resource.TYPE.JSON}catch(i){return void this.abort("Error trying to parse loaded json: "+i)}else if(this.xhrType===Resource.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var h=new DOMParser;this.data=h.parseFromString(o,"text/xml")}else{var c=document.createElement("div");c.innerHTML=o,this.data=c}this.type=Resource.TYPE.XML}catch(i){return void this.abort("Error trying to parse loaded xml: "+i)}else this.data=i.response||o;this.complete()}else this.abort("["+i.status+"] "+i.statusText+": "+i.responseURL)},i._determineCrossOrigin=function _determineCrossOrigin(i,o){if(0===i.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";o=o||window.location,Te||(Te=document.createElement("a")),Te.href=i;var a=!(i=ve()(Te.href,{strictMode:!0})).port&&""===o.port||i.port===o.port,h=i.protocol?i.protocol+":":"";return i.host===o.hostname&&a&&h===o.protocol?"":"anonymous"},i._determineXhrType=function _determineXhrType(){return Resource._xhrTypeMap[this.extension]||Resource.XHR_RESPONSE_TYPE.TEXT},i._determineLoadType=function _determineLoadType(){return Resource._loadTypeMap[this.extension]||Resource.LOAD_TYPE.XHR},i._getExtension=function _getExtension(){var i=this.url,o="";if(this.isDataUrl){var a=i.indexOf("/");o=i.substring(a+1,i.indexOf(";",a))}else{var h=i.indexOf("?"),c=i.indexOf("#"),l=Math.min(h>-1?h:i.length,c>-1?c:i.length);o=(i=i.substring(0,l)).substring(i.lastIndexOf(".")+1)}return o.toLowerCase()},i._getMimeFromXhrType=function _getMimeFromXhrType(i){switch(i){case Resource.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case Resource.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case Resource.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case Resource.XHR_RESPONSE_TYPE.JSON:return"application/json";case Resource.XHR_RESPONSE_TYPE.DEFAULT:case Resource.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},_createClass(Resource,[{key:"isDataUrl",get:function get(){return this._hasFlag(Resource.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function get(){return this._hasFlag(Resource.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function get(){return this._hasFlag(Resource.STATUS_FLAGS.LOADING)}}]),Resource}();function setExtMap(i,o,a){o&&0===o.indexOf(".")&&(o=o.substring(1)),o&&(i[o]=a)}function reqType(i){return i.toString().replace("object ","")}Ce.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},Ce.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},Ce.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},Ce.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},Ce._loadTypeMap={gif:Ce.LOAD_TYPE.IMAGE,png:Ce.LOAD_TYPE.IMAGE,bmp:Ce.LOAD_TYPE.IMAGE,jpg:Ce.LOAD_TYPE.IMAGE,jpeg:Ce.LOAD_TYPE.IMAGE,tif:Ce.LOAD_TYPE.IMAGE,tiff:Ce.LOAD_TYPE.IMAGE,webp:Ce.LOAD_TYPE.IMAGE,tga:Ce.LOAD_TYPE.IMAGE,svg:Ce.LOAD_TYPE.IMAGE,"svg+xml":Ce.LOAD_TYPE.IMAGE,mp3:Ce.LOAD_TYPE.AUDIO,ogg:Ce.LOAD_TYPE.AUDIO,wav:Ce.LOAD_TYPE.AUDIO,mp4:Ce.LOAD_TYPE.VIDEO,webm:Ce.LOAD_TYPE.VIDEO},Ce._xhrTypeMap={xhtml:Ce.XHR_RESPONSE_TYPE.DOCUMENT,html:Ce.XHR_RESPONSE_TYPE.DOCUMENT,htm:Ce.XHR_RESPONSE_TYPE.DOCUMENT,xml:Ce.XHR_RESPONSE_TYPE.DOCUMENT,tmx:Ce.XHR_RESPONSE_TYPE.DOCUMENT,svg:Ce.XHR_RESPONSE_TYPE.DOCUMENT,tsx:Ce.XHR_RESPONSE_TYPE.DOCUMENT,gif:Ce.XHR_RESPONSE_TYPE.BLOB,png:Ce.XHR_RESPONSE_TYPE.BLOB,bmp:Ce.XHR_RESPONSE_TYPE.BLOB,jpg:Ce.XHR_RESPONSE_TYPE.BLOB,jpeg:Ce.XHR_RESPONSE_TYPE.BLOB,tif:Ce.XHR_RESPONSE_TYPE.BLOB,tiff:Ce.XHR_RESPONSE_TYPE.BLOB,webp:Ce.XHR_RESPONSE_TYPE.BLOB,tga:Ce.XHR_RESPONSE_TYPE.BLOB,json:Ce.XHR_RESPONSE_TYPE.JSON,text:Ce.XHR_RESPONSE_TYPE.TEXT,txt:Ce.XHR_RESPONSE_TYPE.TEXT,ttf:Ce.XHR_RESPONSE_TYPE.BUFFER,otf:Ce.XHR_RESPONSE_TYPE.BUFFER},Ce.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var Pe=window.URL||window.webkitURL,Oe={caching:function caching(i,o){var a=this;be[i.url]?(i.data=be[i.url],i.complete()):i.onComplete.once((function(){return be[a.url]=a.data})),o()},parsing:function parsing(i,o){if(i.data){if(i.xhr&&i.xhrType===Ce.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof i.data){if(0===i.data.type.indexOf("image")){var a=Pe.createObjectURL(i.data);return i.blob=i.data,i.data=new Image,i.data.src=a,i.type=Ce.TYPE.IMAGE,void(i.data.onload=function(){Pe.revokeObjectURL(a),i.data.onload=null,o()})}}else{var h=i.xhr.getResponseHeader("content-type");if(h&&0===h.indexOf("image"))return i.data=new Image,i.data.src="data:"+h+";base64,"+function encodeBinary(i){for(var o="",a=0;a<i.length;){for(var h=[0,0,0],c=[0,0,0,0],l=0;l<h.length;++l)a<i.length?h[l]=255&i.charCodeAt(a++):h[l]=0;switch(c[0]=h[0]>>2,c[1]=(3&h[0])<<4|h[1]>>4,c[2]=(15&h[1])<<2|h[2]>>6,c[3]=63&h[2],a-(i.length-1)){case 2:c[3]=64,c[2]=64;break;case 1:c[3]=64}for(var m=0;m<c.length;++m)o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c[m])}return o}(i.xhr.responseText),i.type=Ce.TYPE.IMAGE,void(i.data.onload=function(){i.data.onload=null,o()})}o()}else o()}},Ae=/(#[\w-]+)?$/,Re=function(){function Loader(i,o){var a=this;void 0===i&&(i=""),void 0===o&&(o=10),this.baseUrl=i,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(i,o){return a._loadResource(i,o)},this._queue=function resource_loader_esm_queue(i,o){if(null==o)o=1;else if(0===o)throw new Error("Concurrency must not be zero");var a=0,h={_tasks:[],concurrency:o,saturated:_noop,unsaturated:_noop,buffer:o/4,empty:_noop,drain:_noop,error:_noop,started:!1,paused:!1,push:function push(i,o){_insert(i,!1,o)},kill:function kill(){a=0,h.drain=_noop,h.started=!1,h._tasks=[]},unshift:function unshift(i,o){_insert(i,!0,o)},process:function process(){for(;!h.paused&&a<h.concurrency&&h._tasks.length;){var o=h._tasks.shift();0===h._tasks.length&&h.empty(),(a+=1)===h.concurrency&&h.saturated(),i(o.data,onlyOnce(_next(o)))}},length:function length(){return h._tasks.length},running:function running(){return a},idle:function idle(){return h._tasks.length+a===0},pause:function pause(){!0!==h.paused&&(h.paused=!0)},resume:function resume(){if(!1!==h.paused){h.paused=!1;for(var i=1;i<=h.concurrency;i++)h.process()}}};function _insert(i,o,a){if(null!=a&&"function"!=typeof a)throw new Error("task callback must be a function");if(h.started=!0,null==i&&h.idle())setTimeout((function(){return h.drain()}),1);else{var c={data:i,callback:"function"==typeof a?a:_noop};o?h._tasks.unshift(c):h._tasks.push(c),setTimeout((function(){return h.process()}),1)}}function _next(i){return function next(){a-=1,i.callback.apply(i,arguments),null!=arguments[0]&&h.error(arguments[0],i.data),a<=h.concurrency-h.buffer&&h.unsaturated(),h.idle()&&h.drain(),h.process()}}return h}(this._boundLoadResource,o),this._queue.pause(),this.resources={},this.onProgress=new Se.a,this.onError=new Se.a,this.onLoad=new Se.a,this.onStart=new Se.a,this.onComplete=new Se.a;for(var h=0;h<Loader._defaultBeforeMiddleware.length;++h)this.pre(Loader._defaultBeforeMiddleware[h]);for(var c=0;c<Loader._defaultAfterMiddleware.length;++c)this.use(Loader._defaultAfterMiddleware[c])}var i=Loader.prototype;return i.add=function add(i,o,a,h){if(Array.isArray(i)){for(var c=0;c<i.length;++c)this.add(i[c]);return this}if("object"==_typeof2(i)&&(h=o||i.callback||i.onComplete,a=i,o=i.url,i=i.name||i.key||i.url),"string"!=typeof o&&(h=a,a=o,o=i),"string"!=typeof o)throw new Error("No url passed to add resource to loader.");if("function"==typeof a&&(h=a,a=null),this.loading&&(!a||!a.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[i])throw new Error('Resource named "'+i+'" already exists.');if(o=this._prepareUrl(o),this.resources[i]=new Ce(i,o,a),"function"==typeof h&&this.resources[i].onAfterMiddleware.once(h),this.loading){for(var l=a.parentResource,m=[],g=0;g<l.children.length;++g)l.children[g].isComplete||m.push(l.children[g]);var _=l.progressChunk*(m.length+1)/(m.length+2);l.children.push(this.resources[i]),l.progressChunk=_;for(var x=0;x<m.length;++x)m[x].progressChunk=_;this.resources[i].progressChunk=_}return this._queue.push(this.resources[i]),this},i.pre=function pre(i){return this._beforeMiddleware.push(i),this},i.use=function use(i){return this._afterMiddleware.push(i),this},i.reset=function reset(){for(var i in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var o=this.resources[i];o._onLoadBinding&&o._onLoadBinding.detach(),o.isLoading&&o.abort()}return this.resources={},this},i.load=function load(i){if("function"==typeof i&&this.onComplete.once(i),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var o=100/this._queue._tasks.length,a=0;a<this._queue._tasks.length;++a)this._queue._tasks[a].data.progressChunk=o;this._onStart(),this._queue.resume()}return this},i._prepareUrl=function _prepareUrl(i){var o,a=ve()(i,{strictMode:!0});if(o=a.protocol||!a.path||0===i.indexOf("//")?i:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==i.charAt(0)?this.baseUrl+"/"+i:this.baseUrl+i,this.defaultQueryString){var h=Ae.exec(o)[0];-1!==(o=o.substr(0,o.length-h.length)).indexOf("?")?o+="&"+this.defaultQueryString:o+="?"+this.defaultQueryString,o+=h}return o},i._loadResource=function _loadResource(i,o){var a=this;i._dequeue=o,eachSeries(this._beforeMiddleware,(function(o,h){o.call(a,i,(function(){h(i.isComplete?{}:null)}))}),(function(){i.isComplete?a._onLoad(i):(i._onLoadBinding=i.onComplete.once(a._onLoad,a),i.load())}),!0)},i._onStart=function _onStart(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},i._onComplete=function _onComplete(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},i._onLoad=function _onLoad(i){var o=this;i._onLoadBinding=null,this._resourcesParsing.push(i),i._dequeue(),eachSeries(this._afterMiddleware,(function(a,h){a.call(o,i,h)}),(function(){i.onAfterMiddleware.dispatch(i),o.progress=Math.min(100,o.progress+i.progressChunk),o.onProgress.dispatch(o,i),i.error?o.onError.dispatch(i.error,o,i):o.onLoad.dispatch(o,i),o._resourcesParsing.splice(o._resourcesParsing.indexOf(i),1),o._queue.idle()&&0===o._resourcesParsing.length&&o._onComplete()}),!0)},_createClass(Loader,[{key:"concurrency",get:function get(){return this._queue.concurrency},set:function set(i){this._queue.concurrency=i}}]),Loader}();Re._defaultBeforeMiddleware=[],Re._defaultAfterMiddleware=[],Re.pre=function LoaderPreStatic(i){return Re._defaultBeforeMiddleware.push(i),Re},Re.use=function LoaderUseStatic(i){return Re._defaultAfterMiddleware.push(i),Re};var Ie=Ce,ke=function loaders_es_extendStatics(i,o){return(ke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)},Fe=function(){function TextureLoader(){}return TextureLoader.use=function(i,o){i.data&&i.type===Ce.TYPE.IMAGE&&(i.texture=de.G.fromLoader(i.data,i.url,i.name)),o()},TextureLoader}(),ze=function(i){function Loader(o,a){for(var h=i.call(this,o,a)||this,c=0;c<Loader._plugins.length;++c){var l=Loader._plugins[c],m=l.pre,g=l.use;m&&h.pre(m),g&&h.use(g)}return h._protected=!1,h}return function loaders_es_extends(i,o){function __(){this.constructor=i}ke(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}(Loader,i),Loader.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(Loader,"shared",{get:function get(){var i=Loader._shared;return i||((i=new Loader)._protected=!0,Loader._shared=i),i},enumerable:!1,configurable:!0}),Loader.registerPlugin=function(i){return Loader._plugins.push(i),i.add&&i.add(),Loader},Loader._plugins=[],Loader}(Re);ze.registerPlugin({use:Oe.parsing}),ze.registerPlugin(Fe);var De=function(){function AppLoaderPlugin(){}return AppLoaderPlugin.init=function(i){i=Object.assign({sharedLoader:!1},i),this.loader=i.sharedLoader?ze.shared:new ze},AppLoaderPlugin.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},AppLoaderPlugin}(),Le=a(2),Be=function particles_es_extendStatics(i,o){return(Be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)};function particles_es_extends(i,o){function __(){this.constructor=i}Be(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}var Ne,Ge,Ue=function(i){function ParticleContainer(o,a,h,c){void 0===o&&(o=1500),void 0===h&&(h=16384),void 0===c&&(c=!1);var l=i.call(this)||this;return h>16384&&(h=16384),l._properties=[!1,!0,!1,!1,!1],l._maxSize=o,l._batchSize=h,l._buffers=null,l._bufferUpdateIDs=[],l._updateID=0,l.interactiveChildren=!1,l.blendMode=Le.b.NORMAL,l.autoResize=c,l.roundPixels=!0,l.baseTexture=null,l.setProperties(a),l._tint=0,l.tintRgb=new Float32Array(4),l.tint=16777215,l}return particles_es_extends(ParticleContainer,i),ParticleContainer.prototype.setProperties=function(i){i&&(this._properties[0]="vertices"in i||"scale"in i?!!i.vertices||!!i.scale:this._properties[0],this._properties[1]="position"in i?!!i.position:this._properties[1],this._properties[2]="rotation"in i?!!i.rotation:this._properties[2],this._properties[3]="uvs"in i?!!i.uvs:this._properties[3],this._properties[4]="tint"in i||"alpha"in i?!!i.tint||!!i.alpha:this._properties[4])},ParticleContainer.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(ParticleContainer.prototype,"tint",{get:function get(){return this._tint},set:function set(i){this._tint=i,Object(R.hex2rgb)(i,this.tintRgb)},enumerable:!1,configurable:!0}),ParticleContainer.prototype.render=function(i){var o=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return o.onChildrenChange(0)}))),i.batch.setObjectRenderer(i.plugins.particle),i.plugins.particle.render(this))},ParticleContainer.prototype.onChildrenChange=function(i){for(var o=Math.floor(i/this._batchSize);this._bufferUpdateIDs.length<o;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[o]=++this._updateID},ParticleContainer.prototype.dispose=function(){if(this._buffers){for(var i=0;i<this._buffers.length;++i)this._buffers[i].destroy();this._buffers=null}},ParticleContainer.prototype.destroy=function(o){i.prototype.destroy.call(this,o),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},ParticleContainer}($),je=function(){function ParticleBuffer(i,o,a){this.geometry=new de.s,this.indexBuffer=null,this.size=a,this.dynamicProperties=[],this.staticProperties=[];for(var h=0;h<i.length;++h){var c=i[h];c={attributeName:c.attributeName,size:c.size,uploadFunction:c.uploadFunction,type:c.type||Le.p.FLOAT,offset:c.offset},o[h]?this.dynamicProperties.push(c):this.staticProperties.push(c)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return ParticleBuffer.prototype.initBuffers=function(){var i=this.geometry,o=0;this.indexBuffer=new de.l(Object(R.createIndicesForQuads)(this.size),!0,!0),i.addIndex(this.indexBuffer),this.dynamicStride=0;for(var a=0;a<this.dynamicProperties.length;++a)(m=this.dynamicProperties[a]).offset=o,o+=m.size,this.dynamicStride+=m.size;var h=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(h),this.dynamicDataUint32=new Uint32Array(h),this.dynamicBuffer=new de.l(this.dynamicData,!1,!1);var c=0;for(this.staticStride=0,a=0;a<this.staticProperties.length;++a)(m=this.staticProperties[a]).offset=c,c+=m.size,this.staticStride+=m.size;var l=new ArrayBuffer(this.size*this.staticStride*4*4);for(this.staticData=new Float32Array(l),this.staticDataUint32=new Uint32Array(l),this.staticBuffer=new de.l(this.staticData,!0,!1),a=0;a<this.dynamicProperties.length;++a){var m=this.dynamicProperties[a];i.addAttribute(m.attributeName,this.dynamicBuffer,0,m.type===Le.p.UNSIGNED_BYTE,m.type,4*this.dynamicStride,4*m.offset)}for(a=0;a<this.staticProperties.length;++a)m=this.staticProperties[a],i.addAttribute(m.attributeName,this.staticBuffer,0,m.type===Le.p.UNSIGNED_BYTE,m.type,4*this.staticStride,4*m.offset)},ParticleBuffer.prototype.uploadDynamic=function(i,o,a){for(var h=0;h<this.dynamicProperties.length;h++){var c=this.dynamicProperties[h];c.uploadFunction(i,o,a,c.type===Le.p.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,c.offset)}this.dynamicBuffer._updateID++},ParticleBuffer.prototype.uploadStatic=function(i,o,a){for(var h=0;h<this.staticProperties.length;h++){var c=this.staticProperties[h];c.uploadFunction(i,o,a,c.type===Le.p.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,c.offset)}this.staticBuffer._updateID++},ParticleBuffer.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},ParticleBuffer}(),We=function(i){function ParticleRenderer(o){var a=i.call(this,o)||this;return a.shader=null,a.properties=null,a.tempMatrix=new j.d,a.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:a.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:a.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:a.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:a.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Le.p.UNSIGNED_BYTE,uploadFunction:a.uploadTint,offset:0}],a.shader=de.C.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),a.state=de.E.for2d(),a}return particles_es_extends(ParticleRenderer,i),ParticleRenderer.prototype.render=function(i){var o=i.children,a=i._maxSize,h=i._batchSize,c=this.renderer,l=o.length;if(0!==l){l>a&&!i.autoResize&&(l=a);var m=i._buffers;m||(m=i._buffers=this.generateBuffers(i));var g=o[0]._texture.baseTexture;this.state.blendMode=Object(R.correctBlendMode)(i.blendMode,g.alphaMode),c.state.set(this.state);var _=c.gl,x=i.worldTransform.copyTo(this.tempMatrix);x.prepend(c.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=x.toArray(!0),this.shader.uniforms.uColor=Object(R.premultiplyRgba)(i.tintRgb,i.worldAlpha,this.shader.uniforms.uColor,g.alphaMode),this.shader.uniforms.uSampler=g,this.renderer.shader.bind(this.shader);for(var S=!1,k=0,j=0;k<l;k+=h,j+=1){var X=l-k;X>h&&(X=h),j>=m.length&&m.push(this._generateOneMoreBuffer(i));var Y=m[j];Y.uploadDynamic(o,k,X);var q=i._bufferUpdateIDs[j]||0;(S=S||Y._updateID<q)&&(Y._updateID=i._updateID,Y.uploadStatic(o,k,X)),c.geometry.bind(Y.geometry),_.drawElements(_.TRIANGLES,6*X,_.UNSIGNED_SHORT,0)}}},ParticleRenderer.prototype.generateBuffers=function(i){for(var o=[],a=i._maxSize,h=i._batchSize,c=i._properties,l=0;l<a;l+=h)o.push(new je(this.properties,c,h));return o},ParticleRenderer.prototype._generateOneMoreBuffer=function(i){var o=i._batchSize,a=i._properties;return new je(this.properties,a,o)},ParticleRenderer.prototype.uploadVertices=function(i,o,a,h,c,l){for(var m=0,g=0,_=0,x=0,S=0;S<a;++S){var R=i[o+S],k=R._texture,j=R.scale.x,X=R.scale.y,Y=k.trim,q=k.orig;Y?(m=(g=Y.x-R.anchor.x*q.width)+Y.width,_=(x=Y.y-R.anchor.y*q.height)+Y.height):(m=q.width*(1-R.anchor.x),g=q.width*-R.anchor.x,_=q.height*(1-R.anchor.y),x=q.height*-R.anchor.y),h[l]=g*j,h[l+1]=x*X,h[l+c]=m*j,h[l+c+1]=x*X,h[l+2*c]=m*j,h[l+2*c+1]=_*X,h[l+3*c]=g*j,h[l+3*c+1]=_*X,l+=4*c}},ParticleRenderer.prototype.uploadPosition=function(i,o,a,h,c,l){for(var m=0;m<a;m++){var g=i[o+m].position;h[l]=g.x,h[l+1]=g.y,h[l+c]=g.x,h[l+c+1]=g.y,h[l+2*c]=g.x,h[l+2*c+1]=g.y,h[l+3*c]=g.x,h[l+3*c+1]=g.y,l+=4*c}},ParticleRenderer.prototype.uploadRotation=function(i,o,a,h,c,l){for(var m=0;m<a;m++){var g=i[o+m].rotation;h[l]=g,h[l+c]=g,h[l+2*c]=g,h[l+3*c]=g,l+=4*c}},ParticleRenderer.prototype.uploadUvs=function(i,o,a,h,c,l){for(var m=0;m<a;++m){var g=i[o+m]._texture._uvs;g?(h[l]=g.x0,h[l+1]=g.y0,h[l+c]=g.x1,h[l+c+1]=g.y1,h[l+2*c]=g.x2,h[l+2*c+1]=g.y2,h[l+3*c]=g.x3,h[l+3*c+1]=g.y3,l+=4*c):(h[l]=0,h[l+1]=0,h[l+c]=0,h[l+c+1]=0,h[l+2*c]=0,h[l+2*c+1]=0,h[l+3*c]=0,h[l+3*c+1]=0,l+=4*c)}},ParticleRenderer.prototype.uploadTint=function(i,o,a,h,c,l){for(var m=0;m<a;++m){var g=i[o+m],_=g._texture.baseTexture.alphaMode>0,x=g.alpha,S=x<1&&_?Object(R.premultiplyTint)(g._tintRGB,x):g._tintRGB+(255*x<<24);h[l]=S,h[l+c]=S,h[l+2*c]=S,h[l+3*c]=S,l+=4*c}},ParticleRenderer.prototype.destroy=function(){i.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},ParticleRenderer}(de.v);!function(i){i.MITER="miter",i.BEVEL="bevel",i.ROUND="round"}(Ne||(Ne={})),function(i){i.BUTT="butt",i.ROUND="round",i.SQUARE="square"}(Ge||(Ge={}));var Xe={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function _segmentsCount(i,o){if(void 0===o&&(o=20),!this.adaptive||!i||isNaN(i))return o;var a=Math.ceil(i/this.maxLength);return a<this.minSegments?a=this.minSegments:a>this.maxSegments&&(a=this.maxSegments),a}},He=function(){function FillStyle(){this.color=16777215,this.alpha=1,this.texture=de.G.WHITE,this.matrix=null,this.visible=!1,this.reset()}return FillStyle.prototype.clone=function(){var i=new FillStyle;return i.color=this.color,i.alpha=this.alpha,i.texture=this.texture,i.matrix=this.matrix,i.visible=this.visible,i},FillStyle.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=de.G.WHITE,this.matrix=null,this.visible=!1},FillStyle.prototype.destroy=function(){this.texture=null,this.matrix=null},FillStyle}(),Ve=function graphics_es_extendStatics(i,o){return(Ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)};function graphics_es_extends(i,o){function __(){this.constructor=i}Ve(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}var Ye={build:function build(i){i.points=i.shape.points.slice()},triangulate:function triangulate(i,o){var a=i.points,h=i.holes,c=o.points,l=o.indices;if(a.length>=6){for(var m=[],g=0;g<h.length;g++){var _=h[g];m.push(a.length/2),a=a.concat(_.points)}var x=Object(R.earcut)(a,m,2);if(!x)return;var S=c.length/2;for(g=0;g<x.length;g+=3)l.push(x[g]+S),l.push(x[g+1]+S),l.push(x[g+2]+S);for(g=0;g<a.length;g++)c.push(a[g])}}},qe={build:function build(i){var o,a,h=i.shape,c=i.points,l=h.x,m=h.y;if(c.length=0,i.type===j.l.CIRC)o=h.radius,a=h.radius;else{var g=i.shape;o=g.width,a=g.height}if(0!==o&&0!==a){var _=Math.floor(30*Math.sqrt(h.radius))||Math.floor(15*Math.sqrt(o+a));_/=2.3;for(var x=2*Math.PI/_,S=0;S<_-.5;S++)c.push(l+Math.sin(-x*S)*o,m+Math.cos(-x*S)*a);c.push(c[0],c[1])}},triangulate:function triangulate(i,o){var a=i.points,h=o.points,c=o.indices,l=h.length/2,m=l,g=i.shape,_=i.matrix,x=g.x,S=g.y;h.push(i.matrix?_.a*x+_.c*S+_.tx:x,i.matrix?_.b*x+_.d*S+_.ty:S);for(var R=0;R<a.length;R+=2)h.push(a[R],a[R+1]),c.push(l++,m,l)}},Ke={build:function build(i){var o=i.shape,a=o.x,h=o.y,c=o.width,l=o.height,m=i.points;m.length=0,m.push(a,h,a+c,h,a+c,h+l,a,h+l)},triangulate:function triangulate(i,o){var a=i.points,h=o.points,c=h.length/2;h.push(a[0],a[1],a[2],a[3],a[6],a[7],a[4],a[5]),o.indices.push(c,c+1,c+2,c+1,c+2,c+3)}};function getPt(i,o,a){return i+(o-i)*a}function quadraticBezierCurve(i,o,a,h,c,l,m){void 0===m&&(m=[]);for(var g=m,_=0,x=0,S=0,R=0,k=0,j=0,X=0,Y=0;X<=20;++X)_=getPt(i,a,Y=X/20),x=getPt(o,h,Y),S=getPt(a,c,Y),R=getPt(h,l,Y),k=getPt(_,S,Y),j=getPt(x,R,Y),g.push(k,j);return g}var Ze={build:function build(i){var o=i.shape,a=i.points,h=o.x,c=o.y,l=o.width,m=o.height,g=Math.max(0,Math.min(o.radius,Math.min(l,m)/2));a.length=0,g?(quadraticBezierCurve(h,c+g,h,c,h+g,c,a),quadraticBezierCurve(h+l-g,c,h+l,c,h+l,c+g,a),quadraticBezierCurve(h+l,c+m-g,h+l,c+m,h+l-g,c+m,a),quadraticBezierCurve(h+g,c+m,h,c+m,h,c+m-g,a)):a.push(h,c,h+l,c,h+l,c+m,h,c+m)},triangulate:function triangulate(i,o){for(var a=i.points,h=o.points,c=o.indices,l=h.length/2,m=Object(R.earcut)(a,null,2),g=0,_=m.length;g<_;g+=3)c.push(m[g]+l),c.push(m[g+1]+l),c.push(m[g+2]+l);for(g=0,_=a.length;g<_;g++)h.push(a[g],a[++g])}};function square(i,o,a,h,c,l,m,g){var _,x;m?(_=h,x=-a):(_=-h,x=a);var S=i-a*c+_,R=o-h*c+x,k=i+a*l+_,j=o+h*l+x;return g.push(S,R),g.push(k,j),2}function round(i,o,a,h,c,l,m,g){var _=a-i,x=h-o,S=Math.atan2(_,x),R=Math.atan2(c-i,l-o);g&&S<R?S+=2*Math.PI:!g&&S>R&&(R+=2*Math.PI);var k=S,j=R-S,X=Math.abs(j),Y=Math.sqrt(_*_+x*x),q=1+(15*X*Math.sqrt(Y)/Math.PI>>0),Z=j/q;if(k+=Z,g){m.push(i,o),m.push(a,h);for(var $=1,ee=k;$<q;$++,ee+=Z)m.push(i,o),m.push(i+Math.sin(ee)*Y,o+Math.cos(ee)*Y);m.push(i,o),m.push(c,l)}else{for(m.push(a,h),m.push(i,o),$=1,ee=k;$<q;$++,ee+=Z)m.push(i+Math.sin(ee)*Y,o+Math.cos(ee)*Y),m.push(i,o);m.push(c,l),m.push(i,o)}return 2*q}function buildLine(i,o){i.lineStyle.native?function buildNativeLine(i,o){var a=0,h=i.shape,c=i.points||h.points,l=h.type!==j.l.POLY||h.closeStroke;if(0!==c.length){var m=o.points,g=o.indices,_=c.length/2,x=m.length/2,S=x;for(m.push(c[0],c[1]),a=1;a<_;a++)m.push(c[2*a],c[2*a+1]),g.push(S,S+1),S++;l&&g.push(S,x)}}(i,o):function buildNonNativeLine(i,o){var a=i.shape,h=i.points||a.points.slice(),c=o.closePointEps;if(0!==h.length){var l=i.lineStyle,m=new j.g(h[0],h[1]),g=new j.g(h[h.length-2],h[h.length-1]),_=a.type!==j.l.POLY||a.closeStroke,x=Math.abs(m.x-g.x)<c&&Math.abs(m.y-g.y)<c;if(_){h=h.slice(),x&&(h.pop(),h.pop(),g.set(h[h.length-2],h[h.length-1]));var S=.5*(m.x+g.x),R=.5*(g.y+m.y);h.unshift(S,R),h.push(S,R)}var k=o.points,X=h.length/2,Y=h.length,q=k.length/2,Z=l.width/2,$=Z*Z,ee=l.miterLimit*l.miterLimit,te=h[0],re=h[1],ie=h[2],ne=h[3],oe=0,ae=0,se=-(re-ne),ue=te-ie,he=0,ce=0,de=Math.sqrt(se*se+ue*ue);se/=de,ue/=de,se*=Z,ue*=Z;var pe=l.alignment,fe=2*(1-pe),me=2*pe;_||(l.cap===Ge.ROUND?Y+=round(te-se*(fe-me)*.5,re-ue*(fe-me)*.5,te-se*fe,re-ue*fe,te+se*me,re+ue*me,k,!0)+2:l.cap===Ge.SQUARE&&(Y+=square(te,re,se,ue,fe,me,!0,k))),k.push(te-se*fe,re-ue*fe),k.push(te+se*me,re+ue*me);for(var ye=1;ye<X-1;++ye){te=h[2*(ye-1)],re=h[2*(ye-1)+1],ie=h[2*ye],ne=h[2*ye+1],oe=h[2*(ye+1)],ae=h[2*(ye+1)+1],se=-(re-ne),ue=te-ie,se/=de=Math.sqrt(se*se+ue*ue),ue/=de,se*=Z,ue*=Z,he=-(ne-ae),ce=ie-oe,he/=de=Math.sqrt(he*he+ce*ce),ce/=de,he*=Z,ce*=Z;var _e=ie-te,ve=re-ne,xe=ie-oe,Se=ae-ne,be=ve*xe-Se*_e,we=be<0;if(Math.abs(be)<.1)k.push(ie-se*fe,ne-ue*fe),k.push(ie+se*me,ne+ue*me);else{var Te=(-se+te)*(-ue+ne)-(-se+ie)*(-ue+re),Ce=(-he+oe)*(-ce+ne)-(-he+ie)*(-ce+ae),Pe=(_e*Ce-xe*Te)/be,Oe=(Se*Te-ve*Ce)/be,Ae=(Pe-ie)*(Pe-ie)+(Oe-ne)*(Oe-ne),Re=ie+(Pe-ie)*fe,Ie=ne+(Oe-ne)*fe,ke=ie-(Pe-ie)*me,Fe=ne-(Oe-ne)*me,ze=te-se*fe,De=re-ue*fe,Le=oe-he*fe,Be=ae-ce*fe,Ue=te+se*me,je=re+ue*me,We=oe+he*me,He=ae+ce*me,Ve=ae-re,Ye=-(oe-te),qe=Ve*(ie-ze)+Ye*(ne-De);if(we){var Ke=Ve*(Re-ze)+Ye*(Ie-De);Math.abs(qe-Ke)>.1&&Math.sign(qe)!==Math.sign(Ke)&&(Re=.5*(ze+Le),Ie=.5*(De+Be))}else{var Ze=Ve*(ke-ze)+Ye*(Fe-De);Math.abs(qe-Ze)>.1&&Math.sign(qe)!==Math.sign(Ze)&&(ke=.5*(Ue+We),Fe=.5*(je+He))}l.join===Ne.BEVEL||Ae/$>ee?(we?(k.push(Re,Ie),k.push(ie+se*me,ne+ue*me),k.push(Re,Ie),k.push(ie+he*me,ne+ce*me)):(k.push(ie-se*fe,ne-ue*fe),k.push(ke,Fe),k.push(ie-he*fe,ne-ce*fe),k.push(ke,Fe)),Y+=2):l.join===Ne.ROUND?we?(k.push(Re,Ie),k.push(ie+se*me,ne+ue*me),Y+=round(ie,ne,ie+se*me,ne+ue*me,ie+he*me,ne+ce*me,k,!0)+4,k.push(Re,Ie),k.push(ie+he*me,ne+ce*me)):(k.push(ie-se*fe,ne-ue*fe),k.push(ke,Fe),Y+=round(ie,ne,ie-se*fe,ne-ue*fe,ie-he*fe,ne-ce*fe,k,!1)+4,k.push(ie-he*fe,ne-ce*fe),k.push(ke,Fe)):(k.push(Re,Ie),k.push(ke,Fe))}}te=h[2*(X-2)],re=h[2*(X-2)+1],ie=h[2*(X-1)],se=-(re-(ne=h[2*(X-1)+1])),ue=te-ie,se/=de=Math.sqrt(se*se+ue*ue),ue/=de,se*=Z,ue*=Z,k.push(ie-se*fe,ne-ue*fe),k.push(ie+se*me,ne+ue*me),_||(l.cap===Ge.ROUND?Y+=round(ie-se*(fe-me)*.5,ne-ue*(fe-me)*.5,ie-se*fe,ne-ue*fe,ie+se*me,ne+ue*me,k,!1)+2:l.cap===Ge.SQUARE&&(Y+=square(ie,ne,se,ue,fe,me,!1,k)));var Qe=o.indices,Je=Xe.epsilon*Xe.epsilon;for(ye=q;ye<Y+q-2;++ye)te=k[2*ye],re=k[2*ye+1],ie=k[2*(ye+1)],ne=k[2*(ye+1)+1],oe=k[2*(ye+2)],ae=k[2*(ye+2)+1],Math.abs(te*(ne-ae)+ie*(ae-re)+oe*(re-ne))<Je||Qe.push(ye,ye+1,ye+2)}}(i,o)}var Qe,Je,$e=function(i){function Star(o,a,h,c,l,m){void 0===m&&(m=0),l=l||c/2;for(var g=-1*Math.PI/2+m,_=2*h,x=j.f/_,S=[],R=0;R<_;R++){var k=R%2?l:c,X=R*x+g;S.push(o+k*Math.cos(X),a+k*Math.sin(X))}return i.call(this,S)||this}return graphics_es_extends(Star,i),Star}(j.h),et=function(){function ArcUtils(){}return ArcUtils.curveTo=function(i,o,a,h,c,l){var m=l[l.length-2],g=l[l.length-1]-o,_=m-i,x=h-o,S=a-i,R=Math.abs(g*S-_*x);if(R<1e-8||0===c)return l[l.length-2]===i&&l[l.length-1]===o||l.push(i,o),null;var k=g*g+_*_,j=x*x+S*S,X=g*x+_*S,Y=c*Math.sqrt(k)/R,q=c*Math.sqrt(j)/R,Z=Y*X/k,$=q*X/j,ee=Y*S+q*_,te=Y*x+q*g,re=_*(q+Z),ie=g*(q+Z),ne=S*(Y+$),oe=x*(Y+$);return{cx:ee+i,cy:te+o,radius:c,startAngle:Math.atan2(ie-te,re-ee),endAngle:Math.atan2(oe-te,ne-ee),anticlockwise:_*x>S*g}},ArcUtils.arc=function(i,o,a,h,c,l,m,g,_){for(var x=m-l,S=Xe._segmentsCount(Math.abs(x)*c,40*Math.ceil(Math.abs(x)/j.f)),R=x/(2*S),k=2*R,X=Math.cos(R),Y=Math.sin(R),q=S-1,Z=q%1/q,$=0;$<=q;++$){var ee=R+l+k*($+Z*$),te=Math.cos(ee),re=-Math.sin(ee);_.push((X*te+Y*re)*c+a,(X*-re+Y*te)*c+h)}},ArcUtils}(),tt=function(){function BezierUtils(){}return BezierUtils.curveLength=function(i,o,a,h,c,l,m,g){for(var _=0,x=0,S=0,R=0,k=0,j=0,X=0,Y=0,q=0,Z=0,$=0,ee=i,te=o,re=1;re<=10;++re)Z=ee-(Y=(X=(j=(k=1-(x=re/10))*k)*k)*i+3*j*x*a+3*k*(S=x*x)*c+(R=S*x)*m),$=te-(q=X*o+3*j*x*h+3*k*S*l+R*g),ee=Y,te=q,_+=Math.sqrt(Z*Z+$*$);return _},BezierUtils.curveTo=function(i,o,a,h,c,l,m){var g=m[m.length-2],_=m[m.length-1];m.length-=2;var x=Xe._segmentsCount(BezierUtils.curveLength(g,_,i,o,a,h,c,l)),S=0,R=0,k=0,j=0,X=0;m.push(g,_);for(var Y=1,q=0;Y<=x;++Y)k=(R=(S=1-(q=Y/x))*S)*S,X=(j=q*q)*q,m.push(k*g+3*R*q*i+3*S*j*a+X*c,k*_+3*R*q*o+3*S*j*h+X*l)},BezierUtils}(),rt=function(){function QuadraticUtils(){}return QuadraticUtils.curveLength=function(i,o,a,h,c,l){var m=i-2*a+c,g=o-2*h+l,_=2*a-2*i,x=2*h-2*o,S=4*(m*m+g*g),R=4*(m*_+g*x),k=_*_+x*x,j=2*Math.sqrt(S+R+k),X=Math.sqrt(S),Y=2*S*X,q=2*Math.sqrt(k),Z=R/X;return(Y*j+X*R*(j-q)+(4*k*S-R*R)*Math.log((2*X+Z+j)/(Z+q)))/(4*Y)},QuadraticUtils.curveTo=function(i,o,a,h,c){for(var l=c[c.length-2],m=c[c.length-1],g=Xe._segmentsCount(QuadraticUtils.curveLength(l,m,i,o,a,h)),_=0,x=0,S=1;S<=g;++S){var R=S/g;_=l+(i-l)*R,x=m+(o-m)*R,c.push(_+(i+(a-i)*R-_)*R,x+(o+(h-o)*R-x)*R)}},QuadraticUtils}(),it=function(){function BatchPart(){this.reset()}return BatchPart.prototype.begin=function(i,o,a){this.reset(),this.style=i,this.start=o,this.attribStart=a},BatchPart.prototype.end=function(i,o){this.attribSize=o-this.attribStart,this.size=i-this.start},BatchPart.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},BatchPart}(),nt=((Qe={})[j.l.POLY]=Ye,Qe[j.l.CIRC]=qe,Qe[j.l.ELIP]=qe,Qe[j.l.RECT]=Ke,Qe[j.l.RREC]=Ze,Qe),ot=[],at=[],st={buildPoly:Ye,buildCircle:qe,buildRectangle:Ke,buildRoundedRectangle:Ze,FILL_COMMANDS:nt,BATCH_POOL:ot,DRAW_CALL_POOL:at,buildLine:buildLine,Star:$e,ArcUtils:et,BezierUtils:tt,QuadraticUtils:rt,BatchPart:it},ut=function(){function GraphicsData(i,o,a,h){void 0===o&&(o=null),void 0===a&&(a=null),void 0===h&&(h=null),this.shape=i,this.lineStyle=a,this.fillStyle=o,this.matrix=h,this.type=i.type,this.points=[],this.holes=[]}return GraphicsData.prototype.clone=function(){return new GraphicsData(this.shape,this.fillStyle,this.lineStyle,this.matrix)},GraphicsData.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},GraphicsData}(),ht=new j.g,ct=new X,lt=function(i){function GraphicsGeometry(){var o=i.call(this)||this;return o.uvsFloat32=null,o.indicesUint16=null,o.points=[],o.colors=[],o.uvs=[],o.indices=[],o.textureIds=[],o.graphicsData=[],o.dirty=0,o.batchDirty=-1,o.cacheDirty=-1,o.clearDirty=0,o.drawCalls=[],o.batches=[],o.shapeIndex=0,o._bounds=new X,o.boundsDirty=-1,o.boundsPadding=0,o.batchable=!1,o.indicesUint16=null,o.uvsFloat32=null,o.closePointEps=1e-4,o}return graphics_es_extends(GraphicsGeometry,i),Object.defineProperty(GraphicsGeometry.prototype,"bounds",{get:function get(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),GraphicsGeometry.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var i=0;i<this.drawCalls.length;i++)this.drawCalls[i].texArray.clear(),at.push(this.drawCalls[i]);for(this.drawCalls.length=0,i=0;i<this.batches.length;i++){var o=this.batches[i];o.reset(),ot.push(o)}this.batches.length=0},GraphicsGeometry.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},GraphicsGeometry.prototype.drawShape=function(i,o,a,h){void 0===o&&(o=null),void 0===a&&(a=null),void 0===h&&(h=null);var c=new ut(i,o,a,h);return this.graphicsData.push(c),this.dirty++,this},GraphicsGeometry.prototype.drawHole=function(i,o){if(void 0===o&&(o=null),!this.graphicsData.length)return null;var a=new ut(i,null,null,o),h=this.graphicsData[this.graphicsData.length-1];return a.lineStyle=h.lineStyle,h.holes.push(a),this.dirty++,this},GraphicsGeometry.prototype.destroy=function(){i.prototype.destroy.call(this);for(var o=0;o<this.graphicsData.length;++o)this.graphicsData[o].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},GraphicsGeometry.prototype.containsPoint=function(i){for(var o=this.graphicsData,a=0;a<o.length;++a){var h=o[a];if(h.fillStyle.visible&&h.shape&&(h.matrix?h.matrix.applyInverse(i,ht):ht.copyFrom(i),h.shape.contains(ht.x,ht.y))){var c=!1;if(h.holes)for(var l=0;l<h.holes.length;l++)if(h.holes[l].shape.contains(ht.x,ht.y)){c=!0;break}if(!c)return!0}}return!1},GraphicsGeometry.prototype.updateBatches=function(i){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var o=this.uvs,a=this.graphicsData,h=null,c=null;this.batches.length>0&&(c=(h=this.batches[this.batches.length-1]).style);for(var l=this.shapeIndex;l<a.length;l++){this.shapeIndex++;var m=a[l],g=m.fillStyle,_=m.lineStyle;nt[m.type].build(m),m.matrix&&this.transformPoints(m.points,m.matrix);for(var x=0;x<2;x++){var S=0===x?g:_;if(S.visible){var R=S.texture.baseTexture,k=this.indices.length,j=this.points.length/2;R.wrapMode=Le.q.REPEAT,0===x?this.processFill(m):this.processLine(m);var X=this.points.length/2-j;0!==X&&(h&&!this._compareStyles(c,S)&&(h.end(k,j),h=null),h||((h=ot.pop()||new it).begin(S,k,j),this.batches.push(h),c=S),this.addUvs(this.points,o,S.texture,j,X,S.matrix))}}}var Y=this.indices.length,q=this.points.length/2;if(h&&h.end(Y,q),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var Z=q>65535&&i;this.indicesUint16=Z?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},GraphicsGeometry.prototype._compareStyles=function(i,o){return!(!i||!o)&&i.texture.baseTexture===o.texture.baseTexture&&i.color+i.alpha===o.color+o.alpha&&!!i.native==!!o.native},GraphicsGeometry.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var i=0,o=this.graphicsData.length;i<o;i++){var a=this.graphicsData[i],h=a.fillStyle,c=a.lineStyle;if(h&&!h.texture.baseTexture.valid)return!1;if(c&&!c.texture.baseTexture.valid)return!1}return!0},GraphicsGeometry.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var i=this.batches,o=0,a=i.length;o<a;o++)for(var h=i[o],c=0;c<h.size;c++){var l=h.start+c;this.indicesUint16[l]=this.indicesUint16[l]-h.attribStart}},GraphicsGeometry.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var i=this.batches,o=0;o<i.length;o++)if(i[o].style.native)return!1;return this.points.length<2*GraphicsGeometry.BATCHABLE_SIZE},GraphicsGeometry.prototype.buildDrawCalls=function(){for(var i=++de.e._globalBatch,o=0;o<this.drawCalls.length;o++)this.drawCalls[o].texArray.clear(),at.push(this.drawCalls[o]);this.drawCalls.length=0;var a=this.colors,h=this.textureIds,c=at.pop();c||((c=new de.f).texArray=new de.k),c.texArray.count=0,c.start=0,c.size=0,c.type=Le.e.TRIANGLES;var l=0,m=null,g=0,_=!1,x=Le.e.TRIANGLES,S=0;for(this.drawCalls.push(c),o=0;o<this.batches.length;o++){var R=this.batches[o],k=R.style,j=k.texture.baseTexture;_!==!!k.native&&(x=(_=!!k.native)?Le.e.LINES:Le.e.TRIANGLES,m=null,l=8,i++),m!==j&&(m=j,j._batchEnabled!==i&&(8===l&&(i++,l=0,c.size>0&&((c=at.pop())||((c=new de.f).texArray=new de.k),this.drawCalls.push(c)),c.start=S,c.size=0,c.texArray.count=0,c.type=x),j.touched=1,j._batchEnabled=i,j._batchLocation=l,j.wrapMode=10497,c.texArray.elements[c.texArray.count++]=j,l++)),c.size+=R.size,S+=R.size,g=j._batchLocation,this.addColors(a,k.color,k.alpha,R.attribSize),this.addTextureIds(h,g,R.attribSize)}de.e._globalBatch=i,this.packAttributes()},GraphicsGeometry.prototype.packAttributes=function(){for(var i=this.points,o=this.uvs,a=this.colors,h=this.textureIds,c=new ArrayBuffer(3*i.length*4),l=new Float32Array(c),m=new Uint32Array(c),g=0,_=0;_<i.length/2;_++)l[g++]=i[2*_],l[g++]=i[2*_+1],l[g++]=o[2*_],l[g++]=o[2*_+1],m[g++]=a[_],l[g++]=h[_];this._buffer.update(c),this._indexBuffer.update(this.indicesUint16)},GraphicsGeometry.prototype.processFill=function(i){i.holes.length?(this.processHoles(i.holes),Ye.triangulate(i,this)):nt[i.type].triangulate(i,this)},GraphicsGeometry.prototype.processLine=function(i){buildLine(i,this);for(var o=0;o<i.holes.length;o++)buildLine(i.holes[o],this)},GraphicsGeometry.prototype.processHoles=function(i){for(var o=0;o<i.length;o++){var a=i[o];nt[a.type].build(a),a.matrix&&this.transformPoints(a.points,a.matrix)}},GraphicsGeometry.prototype.calculateBounds=function(){var i=this._bounds,o=ct,a=j.d.IDENTITY;this._bounds.clear(),o.clear();for(var h=0;h<this.graphicsData.length;h++){var c=this.graphicsData[h],l=c.shape,m=c.type,g=c.lineStyle,_=c.matrix||j.d.IDENTITY,x=0;if(g&&g.visible){var S=g.alignment;x=g.width,m===j.l.POLY?x*=.5+Math.abs(.5-S):x*=Math.max(0,S)}if(a!==_&&(o.isEmpty()||(i.addBoundsMatrix(o,a),o.clear()),a=_),m===j.l.RECT||m===j.l.RREC){var R=l;o.addFramePad(R.x,R.y,R.x+R.width,R.y+R.height,x,x)}else if(m===j.l.CIRC){var k=l;o.addFramePad(k.x,k.y,k.x,k.y,k.radius+x,k.radius+x)}else if(m===j.l.ELIP){var X=l;o.addFramePad(X.x,X.y,X.x,X.y,X.width+x,X.height+x)}else{var Y=l;i.addVerticesMatrix(a,Y.points,0,Y.points.length,x,x)}}o.isEmpty()||i.addBoundsMatrix(o,a),i.pad(this.boundsPadding,this.boundsPadding)},GraphicsGeometry.prototype.transformPoints=function(i,o){for(var a=0;a<i.length/2;a++){var h=i[2*a],c=i[2*a+1];i[2*a]=o.a*h+o.c*c+o.tx,i[2*a+1]=o.b*h+o.d*c+o.ty}},GraphicsGeometry.prototype.addColors=function(i,o,a,h){for(var c=(o>>16)+(65280&o)+((255&o)<<16),l=Object(R.premultiplyTint)(c,a);h-- >0;)i.push(l)},GraphicsGeometry.prototype.addTextureIds=function(i,o,a){for(;a-- >0;)i.push(o)},GraphicsGeometry.prototype.addUvs=function(i,o,a,h,c,l){void 0===l&&(l=null);for(var m=0,g=o.length,_=a.frame;m<c;){var x=i[2*(h+m)],S=i[2*(h+m)+1];if(l){var R=l.a*x+l.c*S+l.tx;S=l.b*x+l.d*S+l.ty,x=R}m++,o.push(x/_.width,S/_.height)}var k=a.baseTexture;(_.width<k.width||_.height<k.height)&&this.adjustUvs(o,a,g,c)},GraphicsGeometry.prototype.adjustUvs=function(i,o,a,h){for(var c=o.baseTexture,l=1e-6,m=a+2*h,g=o.frame,_=g.width/c.width,x=g.height/c.height,S=g.x/g.width,R=g.y/g.height,k=Math.floor(i[a]+l),j=Math.floor(i[a+1]+l),X=a+2;X<m;X+=2)k=Math.min(k,Math.floor(i[X]+l)),j=Math.min(j,Math.floor(i[X+1]+l));for(S-=k,R-=j,X=a;X<m;X+=2)i[X]=(i[X]+S)*_,i[X+1]=(i[X+1]+R)*x},GraphicsGeometry.BATCHABLE_SIZE=100,GraphicsGeometry}(de.g),dt=function(i){function LineStyle(){var o=null!==i&&i.apply(this,arguments)||this;return o.width=0,o.alignment=.5,o.native=!1,o.cap=Ge.BUTT,o.join=Ne.MITER,o.miterLimit=10,o}return graphics_es_extends(LineStyle,i),LineStyle.prototype.clone=function(){var i=new LineStyle;return i.color=this.color,i.alpha=this.alpha,i.texture=this.texture,i.matrix=this.matrix,i.visible=this.visible,i.width=this.width,i.alignment=this.alignment,i.native=this.native,i.cap=this.cap,i.join=this.join,i.miterLimit=this.miterLimit,i},LineStyle.prototype.reset=function(){i.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},LineStyle}(He),pt=new Float32Array(3),ft={},mt=function(i){function Graphics(o){void 0===o&&(o=null);var a=i.call(this)||this;return a._geometry=o||new lt,a._geometry.refCount++,a.shader=null,a.state=de.E.for2d(),a._fillStyle=new He,a._lineStyle=new dt,a._matrix=null,a._holeMode=!1,a.currentPath=null,a.batches=[],a.batchTint=-1,a.batchDirty=-1,a.vertexData=null,a.pluginName="batch",a._transformID=-1,a.tint=16777215,a.blendMode=Le.b.NORMAL,a}return graphics_es_extends(Graphics,i),Object.defineProperty(Graphics.prototype,"geometry",{get:function get(){return this._geometry},enumerable:!1,configurable:!0}),Graphics.prototype.clone=function(){return this.finishPoly(),new Graphics(this._geometry)},Object.defineProperty(Graphics.prototype,"blendMode",{get:function get(){return this.state.blendMode},set:function set(i){this.state.blendMode=i},enumerable:!1,configurable:!0}),Object.defineProperty(Graphics.prototype,"tint",{get:function get(){return this._tint},set:function set(i){this._tint=i},enumerable:!1,configurable:!0}),Object.defineProperty(Graphics.prototype,"fill",{get:function get(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(Graphics.prototype,"line",{get:function get(){return this._lineStyle},enumerable:!1,configurable:!0}),Graphics.prototype.lineStyle=function(i){if(void 0===i&&(i=null),"number"==typeof i){var o=arguments;i={width:o[0]||0,color:o[1]||0,alpha:void 0!==o[2]?o[2]:1,alignment:void 0!==o[3]?o[3]:.5,native:!!o[4]}}return this.lineTextureStyle(i)},Graphics.prototype.lineTextureStyle=function(i){if("number"==typeof i){Object(R.deprecation)("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var o=arguments,a=o[0],h=o[1],c=o[2],l=o[3],m=o[4],g=o[5],_=o[6];i={width:a,texture:h,color:c,alpha:l,matrix:m,alignment:g,native:_},Object.keys(i).forEach((function(o){return void 0===i[o]&&delete i[o]}))}i=Object.assign({width:0,texture:de.G.WHITE,color:i&&i.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Ge.BUTT,join:Ne.MITER,miterLimit:10},i),this.currentPath&&this.startPoly();var x=i.width>0&&i.alpha>0;return x?(i.matrix&&(i.matrix=i.matrix.clone(),i.matrix.invert()),Object.assign(this._lineStyle,{visible:x},i)):this._lineStyle.reset(),this},Graphics.prototype.startPoly=function(){if(this.currentPath){var i=this.currentPath.points,o=this.currentPath.points.length;o>2&&(this.drawShape(this.currentPath),this.currentPath=new j.h,this.currentPath.closeStroke=!1,this.currentPath.points.push(i[o-2],i[o-1]))}else this.currentPath=new j.h,this.currentPath.closeStroke=!1},Graphics.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},Graphics.prototype.moveTo=function(i,o){return this.startPoly(),this.currentPath.points[0]=i,this.currentPath.points[1]=o,this},Graphics.prototype.lineTo=function(i,o){this.currentPath||this.moveTo(0,0);var a=this.currentPath.points,h=a[a.length-2],c=a[a.length-1];return h===i&&c===o||a.push(i,o),this},Graphics.prototype._initCurve=function(i,o){void 0===i&&(i=0),void 0===o&&(o=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[i,o]):this.moveTo(i,o)},Graphics.prototype.quadraticCurveTo=function(i,o,a,h){this._initCurve();var c=this.currentPath.points;return 0===c.length&&this.moveTo(0,0),rt.curveTo(i,o,a,h,c),this},Graphics.prototype.bezierCurveTo=function(i,o,a,h,c,l){return this._initCurve(),tt.curveTo(i,o,a,h,c,l,this.currentPath.points),this},Graphics.prototype.arcTo=function(i,o,a,h,c){this._initCurve(i,o);var l=this.currentPath.points,m=et.curveTo(i,o,a,h,c,l);if(m){var g=m.cx,_=m.cy,x=m.radius,S=m.startAngle,R=m.endAngle,k=m.anticlockwise;this.arc(g,_,x,S,R,k)}return this},Graphics.prototype.arc=function(i,o,a,h,c,l){if(void 0===l&&(l=!1),h===c)return this;if(!l&&c<=h?c+=j.f:l&&h<=c&&(h+=j.f),0==c-h)return this;var m=i+Math.cos(h)*a,g=o+Math.sin(h)*a,_=this._geometry.closePointEps,x=this.currentPath?this.currentPath.points:null;if(x){var S=Math.abs(x[x.length-2]-m),R=Math.abs(x[x.length-1]-g);S<_&&R<_||x.push(m,g)}else this.moveTo(m,g),x=this.currentPath.points;return et.arc(m,g,i,o,a,h,c,l,x),this},Graphics.prototype.beginFill=function(i,o){return void 0===i&&(i=0),void 0===o&&(o=1),this.beginTextureFill({texture:de.G.WHITE,color:i,alpha:o})},Graphics.prototype.beginTextureFill=function(i){if(i instanceof de.G){Object(R.deprecation)("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var o=arguments,a=o[0],h=o[1],c=o[2],l=o[3];i={texture:a,color:h,alpha:c,matrix:l},Object.keys(i).forEach((function(o){return void 0===i[o]&&delete i[o]}))}i=Object.assign({texture:de.G.WHITE,color:16777215,alpha:1,matrix:null},i),this.currentPath&&this.startPoly();var m=i.alpha>0;return m?(i.matrix&&(i.matrix=i.matrix.clone(),i.matrix.invert()),Object.assign(this._fillStyle,{visible:m},i)):this._fillStyle.reset(),this},Graphics.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},Graphics.prototype.drawRect=function(i,o,a,h){return this.drawShape(new j.j(i,o,a,h))},Graphics.prototype.drawRoundedRect=function(i,o,a,h,c){return this.drawShape(new j.k(i,o,a,h,c))},Graphics.prototype.drawCircle=function(i,o,a){return this.drawShape(new j.a(i,o,a))},Graphics.prototype.drawEllipse=function(i,o,a,h){return this.drawShape(new j.c(i,o,a,h))},Graphics.prototype.drawPolygon=function(){for(var i,o=arguments,a=[],h=0;h<arguments.length;h++)a[h]=o[h];var c=!0,l=a[0];l.points?(c=l.closeStroke,i=l.points):i=Array.isArray(a[0])?a[0]:a;var m=new j.h(i);return m.closeStroke=c,this.drawShape(m),this},Graphics.prototype.drawShape=function(i){return this._holeMode?this._geometry.drawHole(i,this._matrix):this._geometry.drawShape(i,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},Graphics.prototype.drawStar=function(i,o,a,h,c,l){return void 0===l&&(l=0),this.drawPolygon(new $e(i,o,a,h,c,l))},Graphics.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},Graphics.prototype.isFastRect=function(){var i=this._geometry.graphicsData;return 1===i.length&&i[0].shape.type===j.l.RECT&&!(i[0].lineStyle.visible&&i[0].lineStyle.width)},Graphics.prototype._render=function(i){this.finishPoly();var o=this._geometry,a=i.context.supports.uint32Indices;o.updateBatches(a),o.batchable?(this.batchDirty!==o.batchDirty&&this._populateBatches(),this._renderBatched(i)):(i.batch.flush(),this._renderDirect(i))},Graphics.prototype._populateBatches=function(){var i=this._geometry,o=this.blendMode,a=i.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=i.batchDirty,this.batches.length=a,this.vertexData=new Float32Array(i.points);for(var h=0;h<a;h++){var c=i.batches[h],l=c.style.color,m=new Float32Array(this.vertexData.buffer,4*c.attribStart*2,2*c.attribSize),g=new Float32Array(i.uvsFloat32.buffer,4*c.attribStart*2,2*c.attribSize),_={vertexData:m,blendMode:o,indices:new Uint16Array(i.indicesUint16.buffer,2*c.start,c.size),uvs:g,_batchRGB:Object(R.hex2rgb)(l),_tintRGB:l,_texture:c.style.texture,alpha:c.style.alpha,worldAlpha:1};this.batches[h]=_}},Graphics.prototype._renderBatched=function(i){if(this.batches.length){i.batch.setObjectRenderer(i.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var o=0,a=this.batches.length;o<a;o++){var h=this.batches[o];h.worldAlpha=this.worldAlpha*h.alpha,i.plugins[this.pluginName].render(h)}}},Graphics.prototype._renderDirect=function(i){var o=this._resolveDirectShader(i),a=this._geometry,h=this.tint,c=this.worldAlpha,l=o.uniforms,m=a.drawCalls;l.translationMatrix=this.transform.worldTransform,l.tint[0]=(h>>16&255)/255*c,l.tint[1]=(h>>8&255)/255*c,l.tint[2]=(255&h)/255*c,l.tint[3]=c,i.shader.bind(o),i.geometry.bind(a,o),i.state.set(this.state);for(var g=0,_=m.length;g<_;g++)this._renderDrawCallDirect(i,a.drawCalls[g])},Graphics.prototype._renderDrawCallDirect=function(i,o){for(var a=o.texArray,h=o.type,c=o.size,l=o.start,m=a.count,g=0;g<m;g++)i.texture.bind(a.elements[g],g);i.geometry.draw(h,c,l)},Graphics.prototype._resolveDirectShader=function(i){var o=this.shader,a=this.pluginName;if(!o){if(!ft[a]){for(var h=new Int32Array(16),c=0;c<16;c++)h[c]=c;var l={tint:new Float32Array([1,1,1,1]),translationMatrix:new j.d,default:de.J.from({uSamplers:h},!0)},m=i.plugins[a]._shader.program;ft[a]=new de.C(m,l)}o=ft[a]}return o},Graphics.prototype._calculateBounds=function(){this.finishPoly();var i=this._geometry;if(i.graphicsData.length){var o=i.bounds,a=o.minX,h=o.minY,c=o.maxX,l=o.maxY;this._bounds.addFrame(this.transform,a,h,c,l)}},Graphics.prototype.containsPoint=function(i){return this.worldTransform.applyInverse(i,Graphics._TEMP_POINT),this._geometry.containsPoint(Graphics._TEMP_POINT)},Graphics.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var i=Object(R.hex2rgb)(this.tint,pt),o=0;o<this.batches.length;o++){var a=this.batches[o],h=a._batchRGB,c=(i[0]*h[0]*255<<16)+(i[1]*h[1]*255<<8)+(0|i[2]*h[2]*255);a._tintRGB=(c>>16)+(65280&c)+((255&c)<<16)}}},Graphics.prototype.calculateVertices=function(){var i=this.transform._worldID;if(this._transformID!==i){this._transformID=i;for(var o=this.transform.worldTransform,a=o.a,h=o.b,c=o.c,l=o.d,m=o.tx,g=o.ty,_=this._geometry.points,x=this.vertexData,S=0,R=0;R<_.length;R+=2){var k=_[R],j=_[R+1];x[S++]=a*k+c*j+m,x[S++]=l*j+h*k+g}}},Graphics.prototype.closePath=function(){var i=this.currentPath;return i&&(i.closeStroke=!0),this},Graphics.prototype.setMatrix=function(i){return this._matrix=i,this},Graphics.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},Graphics.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},Graphics.prototype.destroy=function(o){i.prototype.destroy.call(this,o),this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,i.prototype.destroy.call(this,o)},Graphics._TEMP_POINT=new j.g,Graphics}($),gt=function sprite_es_extendStatics(i,o){return(gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)},yt=new j.g,_t=new Uint16Array([0,1,2,0,2,3]),vt=function(i){function Sprite(o){var a=i.call(this)||this;return a._anchor=new j.e(a._onAnchorUpdate,a,o?o.defaultAnchor.x:0,o?o.defaultAnchor.y:0),a._texture=null,a._width=0,a._height=0,a._tint=null,a._tintRGB=null,a.tint=16777215,a.blendMode=Le.b.NORMAL,a._cachedTint=16777215,a.uvs=null,a.texture=o||de.G.EMPTY,a.vertexData=new Float32Array(8),a.vertexTrimmedData=null,a._transformID=-1,a._textureID=-1,a._transformTrimmedID=-1,a._textureTrimmedID=-1,a.indices=_t,a.pluginName="batch",a.isSprite=!0,a._roundPixels=k.b.ROUND_PIXELS,a}return function sprite_es_extends(i,o){function __(){this.constructor=i}gt(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}(Sprite,i),Sprite.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Object(R.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Object(R.sign)(this.scale.y)*this._height/this._texture.orig.height)},Sprite.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},Sprite.prototype.calculateVertices=function(){var i=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==i._updateID){this._textureID!==i._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=i._updateID;var o=this.transform.worldTransform,a=o.a,h=o.b,c=o.c,l=o.d,m=o.tx,g=o.ty,_=this.vertexData,x=i.trim,S=i.orig,R=this._anchor,j=0,X=0,Y=0,q=0;if(x?(j=(X=x.x-R._x*S.width)+x.width,Y=(q=x.y-R._y*S.height)+x.height):(j=(X=-R._x*S.width)+S.width,Y=(q=-R._y*S.height)+S.height),_[0]=a*X+c*q+m,_[1]=l*q+h*X+g,_[2]=a*j+c*q+m,_[3]=l*q+h*j+g,_[4]=a*j+c*Y+m,_[5]=l*Y+h*j+g,_[6]=a*X+c*Y+m,_[7]=l*Y+h*X+g,this._roundPixels)for(var Z=k.b.RESOLUTION,$=0;$<_.length;++$)_[$]=Math.round((_[$]*Z|0)/Z)}},Sprite.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var i=this._texture,o=this.vertexTrimmedData,a=i.orig,h=this._anchor,c=this.transform.worldTransform,l=c.a,m=c.b,g=c.c,_=c.d,x=c.tx,S=c.ty,R=-h._x*a.width,k=R+a.width,j=-h._y*a.height,X=j+a.height;o[0]=l*R+g*j+x,o[1]=_*j+m*R+S,o[2]=l*k+g*j+x,o[3]=_*j+m*k+S,o[4]=l*k+g*X+x,o[5]=_*X+m*k+S,o[6]=l*R+g*X+x,o[7]=_*X+m*R+S},Sprite.prototype._render=function(i){this.calculateVertices(),i.batch.setObjectRenderer(i.plugins[this.pluginName]),i.plugins[this.pluginName].render(this)},Sprite.prototype._calculateBounds=function(){var i=this._texture.trim,o=this._texture.orig;!i||i.width===o.width&&i.height===o.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},Sprite.prototype.getLocalBounds=function(o){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),o||(this._localBoundsRect||(this._localBoundsRect=new j.j),o=this._localBoundsRect),this._bounds.getRectangle(o)):i.prototype.getLocalBounds.call(this,o)},Sprite.prototype.containsPoint=function(i){this.worldTransform.applyInverse(i,yt);var o=this._texture.orig.width,a=this._texture.orig.height,h=-o*this.anchor.x,c=0;return yt.x>=h&&yt.x<h+o&&(c=-a*this.anchor.y,yt.y>=c&&yt.y<c+a)},Sprite.prototype.destroy=function(o){if(i.prototype.destroy.call(this,o),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof o?o:o&&o.texture){var a="boolean"==typeof o?o:o&&o.baseTexture;this._texture.destroy(!!a)}this._texture=null},Sprite.from=function(i,o){return new Sprite(i instanceof de.G?i:de.G.from(i,o))},Object.defineProperty(Sprite.prototype,"roundPixels",{get:function get(){return this._roundPixels},set:function set(i){this._roundPixels!==i&&(this._transformID=-1),this._roundPixels=i},enumerable:!1,configurable:!0}),Object.defineProperty(Sprite.prototype,"width",{get:function get(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function set(i){var o=Object(R.sign)(this.scale.x)||1;this.scale.x=o*i/this._texture.orig.width,this._width=i},enumerable:!1,configurable:!0}),Object.defineProperty(Sprite.prototype,"height",{get:function get(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function set(i){var o=Object(R.sign)(this.scale.y)||1;this.scale.y=o*i/this._texture.orig.height,this._height=i},enumerable:!1,configurable:!0}),Object.defineProperty(Sprite.prototype,"anchor",{get:function get(){return this._anchor},set:function set(i){this._anchor.copyFrom(i)},enumerable:!1,configurable:!0}),Object.defineProperty(Sprite.prototype,"tint",{get:function get(){return this._tint},set:function set(i){this._tint=i,this._tintRGB=(i>>16)+(65280&i)+((255&i)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(Sprite.prototype,"texture",{get:function get(){return this._texture},set:function set(i){this._texture!==i&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=i||de.G.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,i&&(i.baseTexture.valid?this._onTextureUpdate():i.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),Sprite}($),xt=function text_es_extendStatics(i,o){return(xt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)};!function(i){i[i.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",i[i.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(Je||(Je={}));var St={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Je.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},bt=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],wt=function(){function TextStyle(i){this.styleID=0,this.reset(),deepCopyProperties(this,i,i)}return TextStyle.prototype.clone=function(){var i={};return deepCopyProperties(i,this,St),new TextStyle(i)},TextStyle.prototype.reset=function(){deepCopyProperties(this,St,St)},Object.defineProperty(TextStyle.prototype,"align",{get:function get(){return this._align},set:function set(i){this._align!==i&&(this._align=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"breakWords",{get:function get(){return this._breakWords},set:function set(i){this._breakWords!==i&&(this._breakWords=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadow",{get:function get(){return this._dropShadow},set:function set(i){this._dropShadow!==i&&(this._dropShadow=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadowAlpha",{get:function get(){return this._dropShadowAlpha},set:function set(i){this._dropShadowAlpha!==i&&(this._dropShadowAlpha=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadowAngle",{get:function get(){return this._dropShadowAngle},set:function set(i){this._dropShadowAngle!==i&&(this._dropShadowAngle=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadowBlur",{get:function get(){return this._dropShadowBlur},set:function set(i){this._dropShadowBlur!==i&&(this._dropShadowBlur=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadowColor",{get:function get(){return this._dropShadowColor},set:function set(i){var o=getColor(i);this._dropShadowColor!==o&&(this._dropShadowColor=o,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadowDistance",{get:function get(){return this._dropShadowDistance},set:function set(i){this._dropShadowDistance!==i&&(this._dropShadowDistance=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fill",{get:function get(){return this._fill},set:function set(i){var o=getColor(i);this._fill!==o&&(this._fill=o,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fillGradientType",{get:function get(){return this._fillGradientType},set:function set(i){this._fillGradientType!==i&&(this._fillGradientType=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fillGradientStops",{get:function get(){return this._fillGradientStops},set:function set(i){(function areArraysEqual(i,o){if(!Array.isArray(i)||!Array.isArray(o))return!1;if(i.length!==o.length)return!1;for(var a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._fillGradientStops,i)||(this._fillGradientStops=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fontFamily",{get:function get(){return this._fontFamily},set:function set(i){this.fontFamily!==i&&(this._fontFamily=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fontSize",{get:function get(){return this._fontSize},set:function set(i){this._fontSize!==i&&(this._fontSize=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fontStyle",{get:function get(){return this._fontStyle},set:function set(i){this._fontStyle!==i&&(this._fontStyle=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fontVariant",{get:function get(){return this._fontVariant},set:function set(i){this._fontVariant!==i&&(this._fontVariant=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fontWeight",{get:function get(){return this._fontWeight},set:function set(i){this._fontWeight!==i&&(this._fontWeight=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"letterSpacing",{get:function get(){return this._letterSpacing},set:function set(i){this._letterSpacing!==i&&(this._letterSpacing=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"lineHeight",{get:function get(){return this._lineHeight},set:function set(i){this._lineHeight!==i&&(this._lineHeight=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"leading",{get:function get(){return this._leading},set:function set(i){this._leading!==i&&(this._leading=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"lineJoin",{get:function get(){return this._lineJoin},set:function set(i){this._lineJoin!==i&&(this._lineJoin=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"miterLimit",{get:function get(){return this._miterLimit},set:function set(i){this._miterLimit!==i&&(this._miterLimit=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"padding",{get:function get(){return this._padding},set:function set(i){this._padding!==i&&(this._padding=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"stroke",{get:function get(){return this._stroke},set:function set(i){var o=getColor(i);this._stroke!==o&&(this._stroke=o,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"strokeThickness",{get:function get(){return this._strokeThickness},set:function set(i){this._strokeThickness!==i&&(this._strokeThickness=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"textBaseline",{get:function get(){return this._textBaseline},set:function set(i){this._textBaseline!==i&&(this._textBaseline=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"trim",{get:function get(){return this._trim},set:function set(i){this._trim!==i&&(this._trim=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"whiteSpace",{get:function get(){return this._whiteSpace},set:function set(i){this._whiteSpace!==i&&(this._whiteSpace=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"wordWrap",{get:function get(){return this._wordWrap},set:function set(i){this._wordWrap!==i&&(this._wordWrap=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"wordWrapWidth",{get:function get(){return this._wordWrapWidth},set:function set(i){this._wordWrapWidth!==i&&(this._wordWrapWidth=i,this.styleID++)},enumerable:!1,configurable:!0}),TextStyle.prototype.toFontString=function(){var i="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,o=this.fontFamily;Array.isArray(this.fontFamily)||(o=this.fontFamily.split(","));for(var a=o.length-1;a>=0;a--){var h=o[a].trim();!/([\"\'])[^\'\"]+\1/.test(h)&&bt.indexOf(h)<0&&(h='"'+h+'"'),o[a]=h}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+i+" "+o.join(",")},TextStyle}();function getSingleColor(i){return"number"==typeof i?Object(R.hex2string)(i):("string"==typeof i&&0===i.indexOf("0x")&&(i=i.replace("0x","#")),i)}function getColor(i){if(Array.isArray(i)){for(var o=0;o<i.length;++o)i[o]=getSingleColor(i[o]);return i}return getSingleColor(i)}function deepCopyProperties(i,o,a){for(var h in a)Array.isArray(o[h])?i[h]=o[h].slice():i[h]=o[h]}var Tt=function(){function TextMetrics(i,o,a,h,c,l,m,g,_){this.text=i,this.style=o,this.width=a,this.height=h,this.lines=c,this.lineWidths=l,this.lineHeight=m,this.maxLineWidth=g,this.fontProperties=_}return TextMetrics.measureText=function(i,o,a,h){void 0===h&&(h=TextMetrics._canvas),a=null==a?o.wordWrap:a;var c=o.toFontString(),l=TextMetrics.measureFont(c);0===l.fontSize&&(l.fontSize=o.fontSize,l.ascent=o.fontSize);var m=h.getContext("2d");m.font=c;for(var g=(a?TextMetrics.wordWrap(i,o,h):i).split(/(?:\r\n|\r|\n)/),_=new Array(g.length),x=0,S=0;S<g.length;S++){var R=m.measureText(g[S]).width+(g[S].length-1)*o.letterSpacing;_[S]=R,x=Math.max(x,R)}var k=x+o.strokeThickness;o.dropShadow&&(k+=o.dropShadowDistance);var j=o.lineHeight||l.fontSize+o.strokeThickness,X=Math.max(j,l.fontSize+o.strokeThickness)+(g.length-1)*(j+o.leading);return o.dropShadow&&(X+=o.dropShadowDistance),new TextMetrics(i,o,k,X,g,_,j+o.leading,x,l)},TextMetrics.wordWrap=function(i,o,a){void 0===a&&(a=TextMetrics._canvas);for(var h=a.getContext("2d"),c=0,l="",m="",g={},_=o.letterSpacing,x=o.whiteSpace,S=TextMetrics.collapseSpaces(x),R=TextMetrics.collapseNewlines(x),k=!S,j=o.wordWrapWidth+_,X=TextMetrics.tokenize(i),Y=0;Y<X.length;Y++){var q=X[Y];if(TextMetrics.isNewline(q)){if(!R){m+=TextMetrics.addLine(l),k=!S,l="",c=0;continue}q=" "}if(S){var Z=TextMetrics.isBreakingSpace(q),$=TextMetrics.isBreakingSpace(l[l.length-1]);if(Z&&$)continue}var ee=TextMetrics.getFromCache(q,_,g,h);if(ee>j)if(""!==l&&(m+=TextMetrics.addLine(l),l="",c=0),TextMetrics.canBreakWords(q,o.breakWords))for(var te=TextMetrics.wordWrapSplit(q),re=0;re<te.length;re++){for(var ie=te[re],ne=1;te[re+ne];){var oe=te[re+ne],ae=ie[ie.length-1];if(TextMetrics.canBreakChars(ae,oe,q,re,o.breakWords))break;ie+=oe,ne++}re+=ie.length-1;var se=TextMetrics.getFromCache(ie,_,g,h);se+c>j&&(m+=TextMetrics.addLine(l),k=!1,l="",c=0),l+=ie,c+=se}else{l.length>0&&(m+=TextMetrics.addLine(l),l="",c=0);var ue=Y===X.length-1;m+=TextMetrics.addLine(q,!ue),k=!1,l="",c=0}else ee+c>j&&(k=!1,m+=TextMetrics.addLine(l),l="",c=0),(l.length>0||!TextMetrics.isBreakingSpace(q)||k)&&(l+=q,c+=ee)}return m+TextMetrics.addLine(l,!1)},TextMetrics.addLine=function(i,o){return void 0===o&&(o=!0),i=TextMetrics.trimRight(i),o?i+"\n":i},TextMetrics.getFromCache=function(i,o,a,h){var c=a[i];if(void 0===c){var l=i.length*o;c=h.measureText(i).width+l,a[i]=c}return c},TextMetrics.collapseSpaces=function(i){return"normal"===i||"pre-line"===i},TextMetrics.collapseNewlines=function(i){return"normal"===i},TextMetrics.trimRight=function(i){if("string"!=typeof i)return"";for(var o=i.length-1;o>=0;o--){var a=i[o];if(!TextMetrics.isBreakingSpace(a))break;i=i.slice(0,-1)}return i},TextMetrics.isNewline=function(i){return"string"==typeof i&&TextMetrics._newlines.indexOf(i.charCodeAt(0))>=0},TextMetrics.isBreakingSpace=function(i){return"string"==typeof i&&TextMetrics._breakingSpaces.indexOf(i.charCodeAt(0))>=0},TextMetrics.tokenize=function(i){var o=[],a="";if("string"!=typeof i)return o;for(var h=0;h<i.length;h++){var c=i[h];TextMetrics.isBreakingSpace(c)||TextMetrics.isNewline(c)?(""!==a&&(o.push(a),a=""),o.push(c)):a+=c}return""!==a&&o.push(a),o},TextMetrics.canBreakWords=function(i,o){return o},TextMetrics.canBreakChars=function(i,o,a,h,c){return!0},TextMetrics.wordWrapSplit=function(i){return i.split("")},TextMetrics.measureFont=function(i){if(TextMetrics._fonts[i])return TextMetrics._fonts[i];var o={ascent:0,descent:0,fontSize:0},a=TextMetrics._canvas,h=TextMetrics._context;h.font=i;var c=TextMetrics.METRICS_STRING+TextMetrics.BASELINE_SYMBOL,l=Math.ceil(h.measureText(c).width),m=Math.ceil(h.measureText(TextMetrics.BASELINE_SYMBOL).width),g=2*m;m=m*TextMetrics.BASELINE_MULTIPLIER|0,a.width=l,a.height=g,h.fillStyle="#f00",h.fillRect(0,0,l,g),h.font=i,h.textBaseline="alphabetic",h.fillStyle="#000",h.fillText(c,0,m);var _=h.getImageData(0,0,l,g).data,x=_.length,S=4*l,R=0,k=0,j=!1;for(R=0;R<m;++R){for(var X=0;X<S;X+=4)if(255!==_[k+X]){j=!0;break}if(j)break;k+=S}for(o.ascent=m-R,k=x-S,j=!1,R=g;R>m;--R){for(X=0;X<S;X+=4)if(255!==_[k+X]){j=!0;break}if(j)break;k-=S}return o.descent=R-m,o.fontSize=o.ascent+o.descent,TextMetrics._fonts[i]=o,o},TextMetrics.clearMetrics=function(i){void 0===i&&(i=""),i?delete TextMetrics._fonts[i]:TextMetrics._fonts={}},TextMetrics}(),Et=function(){try{var i=new OffscreenCanvas(0,0),o=i.getContext("2d");return o&&o.measureText?i:document.createElement("canvas")}catch(i){return document.createElement("canvas")}}();Et.width=Et.height=10,Tt._canvas=Et,Tt._context=Et.getContext("2d"),Tt._fonts={},Tt.METRICS_STRING="|ÉqÅ",Tt.BASELINE_SYMBOL="M",Tt.BASELINE_MULTIPLIER=1.4,Tt._newlines=[10,13],Tt._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Ct={texture:!0,children:!1,baseTexture:!0},Pt=function(i){function Text(o,a,h){var c=this,l=!1;h||(h=document.createElement("canvas"),l=!0),h.width=3,h.height=3;var m=de.G.from(h);return m.orig=new j.j,m.trim=new j.j,(c=i.call(this,m)||this)._ownCanvas=l,c.canvas=h,c.context=c.canvas.getContext("2d"),c._resolution=k.b.RESOLUTION,c._autoResolution=!0,c._text=null,c._style=null,c._styleListener=null,c._font="",c.text=o,c.style=a,c.localStyleID=-1,c}return function text_es_extends(i,o){function __(){this.constructor=i}xt(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}(Text,i),Text.prototype.updateText=function(i){var o=this._style;if(this.localStyleID!==o.styleID&&(this.dirty=!0,this.localStyleID=o.styleID),this.dirty||!i){this._font=this._style.toFontString();var a,h,c=this.context,l=Tt.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),m=l.width,g=l.height,_=l.lines,x=l.lineHeight,S=l.lineWidths,k=l.maxLineWidth,j=l.fontProperties;this.canvas.width=Math.ceil((Math.max(1,m)+2*o.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,g)+2*o.padding)*this._resolution),c.scale(this._resolution,this._resolution),c.clearRect(0,0,this.canvas.width,this.canvas.height),c.font=this._font,c.lineWidth=o.strokeThickness,c.textBaseline=o.textBaseline,c.lineJoin=o.lineJoin,c.miterLimit=o.miterLimit;for(var X=o.dropShadow?2:1,Y=0;Y<X;++Y){var q=o.dropShadow&&0===Y,Z=q?2*g:0,$=Z*this.resolution;if(q){c.fillStyle="black",c.strokeStyle="black";var ee=o.dropShadowColor,te=Object(R.hex2rgb)("number"==typeof ee?ee:Object(R.string2hex)(ee));c.shadowColor="rgba("+255*te[0]+","+255*te[1]+","+255*te[2]+","+o.dropShadowAlpha+")",c.shadowBlur=o.dropShadowBlur,c.shadowOffsetX=Math.cos(o.dropShadowAngle)*o.dropShadowDistance,c.shadowOffsetY=Math.sin(o.dropShadowAngle)*o.dropShadowDistance+$}else c.fillStyle=this._generateFillStyle(o,_,l),c.strokeStyle=o.stroke,c.shadowColor="0",c.shadowBlur=0,c.shadowOffsetX=0,c.shadowOffsetY=0;for(var re=0;re<_.length;re++)a=o.strokeThickness/2,h=o.strokeThickness/2+re*x+j.ascent,"right"===o.align?a+=k-S[re]:"center"===o.align&&(a+=(k-S[re])/2),o.stroke&&o.strokeThickness&&this.drawLetterSpacing(_[re],a+o.padding,h+o.padding-Z,!0),o.fill&&this.drawLetterSpacing(_[re],a+o.padding,h+o.padding-Z)}this.updateTexture()}},Text.prototype.drawLetterSpacing=function(i,o,a,h){void 0===h&&(h=!1);var c=this._style.letterSpacing;if(0!==c)for(var l=o,m=Array.from?Array.from(i):i.split(""),g=this.context.measureText(i).width,_=0,x=0;x<m.length;++x){var S=m[x];h?this.context.strokeText(S,l,a):this.context.fillText(S,l,a),l+=g-(_=this.context.measureText(i.substring(x+1)).width)+c,g=_}else h?this.context.strokeText(i,o,a):this.context.fillText(i,o,a)},Text.prototype.updateTexture=function(){var i=this.canvas;if(this._style.trim){var o=Object(R.trimCanvas)(i);o.data&&(i.width=o.width,i.height=o.height,this.context.putImageData(o.data,0,0))}var a=this._texture,h=this._style,c=h.trim?0:h.padding,l=a.baseTexture;a.trim.width=a._frame.width=Math.ceil(i.width/this._resolution),a.trim.height=a._frame.height=Math.ceil(i.height/this._resolution),a.trim.x=-c,a.trim.y=-c,a.orig.width=a._frame.width-2*c,a.orig.height=a._frame.height-2*c,this._onTextureUpdate(),l.setRealSize(i.width,i.height,this._resolution),this.dirty=!1},Text.prototype._render=function(o){this._autoResolution&&this._resolution!==o.resolution&&(this._resolution=o.resolution,this.dirty=!0),this.updateText(!0),i.prototype._render.call(this,o)},Text.prototype.getLocalBounds=function(o){return this.updateText(!0),i.prototype.getLocalBounds.call(this,o)},Text.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},Text.prototype._generateFillStyle=function(i,o,a){var h,c=i.fill;if(!Array.isArray(c))return c;if(1===c.length)return c[0];var l=i.dropShadow?i.dropShadowDistance:0,m=i.padding||0,g=Math.ceil(this.canvas.width/this._resolution)-l-2*m,_=Math.ceil(this.canvas.height/this._resolution)-l-2*m,x=c.slice(),S=i.fillGradientStops.slice();if(!S.length)for(var R=x.length+1,k=1;k<R;++k)S.push(k/R);if(x.unshift(c[0]),S.unshift(0),x.push(c[c.length-1]),S.push(1),i.fillGradientType===Je.LINEAR_VERTICAL){h=this.context.createLinearGradient(g/2,m,g/2,_+m);var j=0,X=(a.fontProperties.fontSize+i.strokeThickness)/_;for(k=0;k<o.length;k++)for(var Y=a.lineHeight*k,q=0;q<x.length;q++){var Z=Y/_+("number"==typeof S[q]?S[q]:q/x.length)*X,$=Math.max(j,Z);$=Math.min($,1),h.addColorStop($,x[q]),j=$}}else{h=this.context.createLinearGradient(m,_/2,g+m,_/2);var ee=x.length+1,te=1;for(k=0;k<x.length;k++){var re;re="number"==typeof S[k]?S[k]:te/ee,h.addColorStop(re,x[k]),te++}}return h},Text.prototype.destroy=function(o){"boolean"==typeof o&&(o={children:o}),o=Object.assign({},Ct,o),i.prototype.destroy.call(this,o),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(Text.prototype,"width",{get:function get(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function set(i){this.updateText(!0);var o=Object(R.sign)(this.scale.x)||1;this.scale.x=o*i/this._texture.orig.width,this._width=i},enumerable:!1,configurable:!0}),Object.defineProperty(Text.prototype,"height",{get:function get(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function set(i){this.updateText(!0);var o=Object(R.sign)(this.scale.y)||1;this.scale.y=o*i/this._texture.orig.height,this._height=i},enumerable:!1,configurable:!0}),Object.defineProperty(Text.prototype,"style",{get:function get(){return this._style},set:function set(i){i=i||{},this._style=i instanceof wt?i:new wt(i),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(Text.prototype,"text",{get:function get(){return this._text},set:function set(i){i=String(null==i?"":i),this._text!==i&&(this._text=i,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(Text.prototype,"resolution",{get:function get(){return this._resolution},set:function set(i){this._autoResolution=!1,this._resolution!==i&&(this._resolution=i,this.dirty=!0)},enumerable:!1,configurable:!0}),Text}(vt);k.b.UPLOADS_PER_FRAME=4;var Ot=function prepare_es_extendStatics(i,o){return(Ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)},At=function(){function CountLimiter(i){this.maxItemsPerFrame=i,this.itemsLeft=0}return CountLimiter.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},CountLimiter.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},CountLimiter}();function findMultipleBaseTextures(i,o){var a=!1;if(i&&i._textures&&i._textures.length)for(var h=0;h<i._textures.length;h++)if(i._textures[h]instanceof de.G){var c=i._textures[h].baseTexture;-1===o.indexOf(c)&&(o.push(c),a=!0)}return a}function findBaseTexture(i,o){if(i.baseTexture instanceof de.e){var a=i.baseTexture;return-1===o.indexOf(a)&&o.push(a),!0}return!1}function findTexture(i,o){if(i._texture&&i._texture instanceof de.G){var a=i._texture.baseTexture;return-1===o.indexOf(a)&&o.push(a),!0}return!1}function drawText(i,o){return o instanceof Pt&&(o.updateText(!0),!0)}function calculateTextStyle(i,o){if(o instanceof wt){var a=o.toFontString();return Tt.measureFont(a),!0}return!1}function findText(i,o){if(i instanceof Pt){-1===o.indexOf(i.style)&&o.push(i.style),-1===o.indexOf(i)&&o.push(i);var a=i._texture.baseTexture;return-1===o.indexOf(a)&&o.push(a),!0}return!1}function findTextStyle(i,o){return i instanceof wt&&(-1===o.indexOf(i)&&o.push(i),!0)}var It=function(){function BasePrepare(i){var o=this;this.limiter=new At(k.b.UPLOADS_PER_FRAME),this.renderer=i,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){o.queue&&o.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}return BasePrepare.prototype.upload=function(i,o){"function"==typeof i&&(o=i,i=null),i&&this.add(i),this.queue.length?(o&&this.completes.push(o),this.ticking||(this.ticking=!0,re.a.system.addOnce(this.tick,this,re.c.UTILITY))):o&&o()},BasePrepare.prototype.tick=function(){setTimeout(this.delayedTick,0)},BasePrepare.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var i=this.queue[0],o=!1;if(i&&!i._destroyed)for(var a=0,h=this.uploadHooks.length;a<h;a++)if(this.uploadHooks[a](this.uploadHookHelper,i)){this.queue.shift(),o=!0;break}o||this.queue.shift()}if(this.queue.length)re.a.system.addOnce(this.tick,this,re.c.UTILITY);else{this.ticking=!1;var c=this.completes.slice(0);for(this.completes.length=0,a=0,h=c.length;a<h;a++)c[a]()}},BasePrepare.prototype.registerFindHook=function(i){return i&&this.addHooks.push(i),this},BasePrepare.prototype.registerUploadHook=function(i){return i&&this.uploadHooks.push(i),this},BasePrepare.prototype.add=function(i){for(var o=0,a=this.addHooks.length;o<a&&!this.addHooks[o](i,this.queue);o++);if(i instanceof $)for(o=i.children.length-1;o>=0;o--)this.add(i.children[o]);return this},BasePrepare.prototype.destroy=function(){this.ticking&&re.a.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},BasePrepare}();function uploadBaseTextures(i,o){return o instanceof de.e&&(o._glTextures[i.CONTEXT_UID]||i.texture.bind(o),!0)}function uploadGraphics(i,o){if(!(o instanceof mt))return!1;var a=o.geometry;o.finishPoly(),a.updateBatches();for(var h=a.batches,c=0;c<h.length;c++){var l=h[c].style.texture;l&&uploadBaseTextures(i,l.baseTexture)}return a.batchable||i.geometry.bind(a,o._resolveDirectShader(i)),!0}function findGraphics(i,o){return i instanceof mt&&(o.push(i),!0)}var Mt=function(i){function Prepare(o){var a=i.call(this,o)||this;return a.uploadHookHelper=a.renderer,a.registerFindHook(findGraphics),a.registerUploadHook(uploadBaseTextures),a.registerUploadHook(uploadGraphics),a}return function prepare_es_extends(i,o){function __(){this.constructor=i}Ot(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}(Prepare,i),Prepare}(It),kt=function(){function TimeLimiter(i){this.maxMilliseconds=i,this.frameStart=0}return TimeLimiter.prototype.beginFrame=function(){this.frameStart=Date.now()},TimeLimiter.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},TimeLimiter}(),zt=function(){function Spritesheet(i,o,a){void 0===a&&(a=null),this._texture=i instanceof de.G?i:null,this.baseTexture=i instanceof de.e?i:this._texture.baseTexture,this.textures={},this.animations={},this.data=o;var h=this.baseTexture.resource;this.resolution=this._updateResolution(a||(h?h.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return Spritesheet.prototype._updateResolution=function(i){void 0===i&&(i=null);var o=this.data.meta.scale,a=Object(R.getResolutionOfUrl)(i,null);return null===a&&(a=void 0!==o?parseFloat(o):1),1!==a&&this.baseTexture.setResolution(a),a},Spritesheet.prototype.parse=function(i){this._batchIndex=0,this._callback=i,this._frameKeys.length<=Spritesheet.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},Spritesheet.prototype._processFrames=function(i){for(var o=i,a=Spritesheet.BATCH_SIZE;o-i<a&&o<this._frameKeys.length;){var h=this._frameKeys[o],c=this._frames[h],l=c.frame;if(l){var m,g=null,_=!1!==c.trimmed&&c.sourceSize?c.sourceSize:c.frame,x=new j.j(0,0,Math.floor(_.w)/this.resolution,Math.floor(_.h)/this.resolution);m=c.rotated?new j.j(Math.floor(l.x)/this.resolution,Math.floor(l.y)/this.resolution,Math.floor(l.h)/this.resolution,Math.floor(l.w)/this.resolution):new j.j(Math.floor(l.x)/this.resolution,Math.floor(l.y)/this.resolution,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution),!1!==c.trimmed&&c.spriteSourceSize&&(g=new j.j(Math.floor(c.spriteSourceSize.x)/this.resolution,Math.floor(c.spriteSourceSize.y)/this.resolution,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution)),this.textures[h]=new de.G(this.baseTexture,m,x,g,c.rotated?2:0,c.anchor),de.G.addToCache(this.textures[h],h)}o++}},Spritesheet.prototype._processAnimations=function(){var i=this.data.animations||{};for(var o in i){this.animations[o]=[];for(var a=0;a<i[o].length;a++){var h=i[o][a];this.animations[o].push(this.textures[h])}}},Spritesheet.prototype._parseComplete=function(){var i=this._callback;this._callback=null,this._batchIndex=0,i.call(this,this.textures)},Spritesheet.prototype._nextBatch=function(){var i=this;this._processFrames(this._batchIndex*Spritesheet.BATCH_SIZE),this._batchIndex++,setTimeout((function(){i._batchIndex*Spritesheet.BATCH_SIZE<i._frameKeys.length?i._nextBatch():(i._processAnimations(),i._parseComplete())}),0)},Spritesheet.prototype.destroy=function(i){var o;for(var a in void 0===i&&(i=!1),this.textures)this.textures[a].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,i&&(null===(o=this._texture)||void 0===o||o.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},Spritesheet.BATCH_SIZE=1e3,Spritesheet}(),Dt=function(){function SpritesheetLoader(){}return SpritesheetLoader.use=function(i,o){var a=i.name+"_image";if(i.data&&i.type===Ie.TYPE.JSON&&i.data.frames&&!this.resources[a]){var h={crossOrigin:i.crossOrigin,metadata:i.metadata.imageMetadata,parentResource:i},c=SpritesheetLoader.getResourcePath(i,this.baseUrl);this.add(a,c,h,(function onImageLoad(a){if(a.error)o(a.error);else{var h=new zt(a.texture,i.data,i.url);h.parse((function(){i.spritesheet=h,i.textures=h.textures,o()}))}}))}else o()},SpritesheetLoader.getResourcePath=function(i,o){return i.isDataUrl?i.data.meta.image:R.url.resolve(i.url.replace(o,""),i.data.meta.image)},SpritesheetLoader}(),Lt=function sprite_tiling_es_extendStatics(i,o){return(Lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)};function sprite_tiling_es_extends(i,o){function __(){this.constructor=i}Lt(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}var Bt=new j.g,Nt=function(i){function TilingSprite(o,a,h){void 0===a&&(a=100),void 0===h&&(h=100);var c=i.call(this,o)||this;return c.tileTransform=new j.m,c._width=a,c._height=h,c.uvMatrix=o.uvMatrix||new de.H(o),c.pluginName="tilingSprite",c.uvRespectAnchor=!1,c}return sprite_tiling_es_extends(TilingSprite,i),Object.defineProperty(TilingSprite.prototype,"clampMargin",{get:function get(){return this.uvMatrix.clampMargin},set:function set(i){this.uvMatrix.clampMargin=i,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(TilingSprite.prototype,"tileScale",{get:function get(){return this.tileTransform.scale},set:function set(i){this.tileTransform.scale.copyFrom(i)},enumerable:!1,configurable:!0}),Object.defineProperty(TilingSprite.prototype,"tilePosition",{get:function get(){return this.tileTransform.position},set:function set(i){this.tileTransform.position.copyFrom(i)},enumerable:!1,configurable:!0}),TilingSprite.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},TilingSprite.prototype._render=function(i){var o=this._texture;o&&o.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),i.batch.setObjectRenderer(i.plugins[this.pluginName]),i.plugins[this.pluginName].render(this))},TilingSprite.prototype._calculateBounds=function(){var i=this._width*-this._anchor._x,o=this._height*-this._anchor._y,a=this._width*(1-this._anchor._x),h=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,i,o,a,h)},TilingSprite.prototype.getLocalBounds=function(o){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),o||(this._localBoundsRect||(this._localBoundsRect=new j.j),o=this._localBoundsRect),this._bounds.getRectangle(o)):i.prototype.getLocalBounds.call(this,o)},TilingSprite.prototype.containsPoint=function(i){this.worldTransform.applyInverse(i,Bt);var o=this._width,a=this._height,h=-o*this.anchor._x;if(Bt.x>=h&&Bt.x<h+o){var c=-a*this.anchor._y;if(Bt.y>=c&&Bt.y<c+a)return!0}return!1},TilingSprite.prototype.destroy=function(o){i.prototype.destroy.call(this,o),this.tileTransform=null,this.uvMatrix=null},TilingSprite.from=function(i,o){return"number"==typeof o&&(Object(R.deprecation)("5.3.0","TilingSprite.from use options instead of width and height args"),o={width:o,height:arguments[2]}),new TilingSprite(de.G.from(i,o),o.width,o.height)},Object.defineProperty(TilingSprite.prototype,"width",{get:function get(){return this._width},set:function set(i){this._width=i},enumerable:!1,configurable:!0}),Object.defineProperty(TilingSprite.prototype,"height",{get:function get(){return this._height},set:function set(i){this._height=i},enumerable:!1,configurable:!0}),TilingSprite}(vt),Gt="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",Ut=new j.d,jt=function(i){function TilingSpriteRenderer(o){var a=i.call(this,o)||this,h={globals:a.renderer.globalUniforms};return a.shader=de.C.from(Gt,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord - floor(vTextureCoord - uClampOffset);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",h),a.simpleShader=de.C.from(Gt,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",h),a.quad=new de.y,a.state=de.E.for2d(),a}return sprite_tiling_es_extends(TilingSpriteRenderer,i),TilingSpriteRenderer.prototype.render=function(i){var o=this.renderer,a=this.quad,h=a.vertices;h[0]=h[6]=i._width*-i.anchor.x,h[1]=h[3]=i._height*-i.anchor.y,h[2]=h[4]=i._width*(1-i.anchor.x),h[5]=h[7]=i._height*(1-i.anchor.y),i.uvRespectAnchor&&((h=a.uvs)[0]=h[6]=-i.anchor.x,h[1]=h[3]=-i.anchor.y,h[2]=h[4]=1-i.anchor.x,h[5]=h[7]=1-i.anchor.y),a.invalidate();var c=i._texture,l=c.baseTexture,m=i.tileTransform.localTransform,g=i.uvMatrix,_=l.isPowerOfTwo&&c.frame.width===l.width&&c.frame.height===l.height;_&&(l._glTextures[o.CONTEXT_UID]?_=l.wrapMode!==Le.q.CLAMP:l.wrapMode===Le.q.CLAMP&&(l.wrapMode=Le.q.REPEAT));var x=_?this.simpleShader:this.shader,S=c.width,k=c.height,j=i._width,X=i._height;Ut.set(m.a*S/j,m.b*S/X,m.c*k/j,m.d*k/X,m.tx/j,m.ty/X),Ut.invert(),_?Ut.prepend(g.mapCoord):(x.uniforms.uMapCoord=g.mapCoord.toArray(!0),x.uniforms.uClampFrame=g.uClampFrame,x.uniforms.uClampOffset=g.uClampOffset),x.uniforms.uTransform=Ut.toArray(!0),x.uniforms.uColor=Object(R.premultiplyTintToRgba)(i.tint,i.worldAlpha,x.uniforms.uColor,l.alphaMode),x.uniforms.translationMatrix=i.transform.worldTransform.toArray(!0),x.uniforms.uSampler=c,o.shader.bind(x),o.geometry.bind(a),this.state.blendMode=Object(R.correctBlendMode)(i.blendMode,l.alphaMode),o.state.set(this.state),o.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},TilingSpriteRenderer}(de.v),Wt=function mesh_es_extendStatics(i,o){return(Wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)};function mesh_es_extends(i,o){function __(){this.constructor=i}Wt(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}var Xt=function(){function MeshBatchUvs(i,o){this.uvBuffer=i,this.uvMatrix=o,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return MeshBatchUvs.prototype.update=function(i){if(i||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var o=this.uvBuffer.data;this.data&&this.data.length===o.length||(this.data=new Float32Array(o.length)),this.uvMatrix.multiplyUvs(o,this.data),this._updateID++}},MeshBatchUvs}(),Ht=new j.g,Vt=new j.h,Yt=function(i){function Mesh(o,a,h,c){void 0===c&&(c=Le.e.TRIANGLES);var l=i.call(this)||this;return l.geometry=o,o.refCount++,l.shader=a,l.state=h||de.E.for2d(),l.drawMode=c,l.start=0,l.size=0,l.uvs=null,l.indices=null,l.vertexData=new Float32Array(1),l.vertexDirty=0,l._transformID=-1,l.tint=16777215,l.blendMode=Le.b.NORMAL,l._roundPixels=k.b.ROUND_PIXELS,l.batchUvs=null,l}return mesh_es_extends(Mesh,i),Object.defineProperty(Mesh.prototype,"uvBuffer",{get:function get(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"verticesBuffer",{get:function get(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"material",{get:function get(){return this.shader},set:function set(i){this.shader=i},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"blendMode",{get:function get(){return this.state.blendMode},set:function set(i){this.state.blendMode=i},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"roundPixels",{get:function get(){return this._roundPixels},set:function set(i){this._roundPixels!==i&&(this._transformID=-1),this._roundPixels=i},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"tint",{get:function get(){return this.shader.tint},set:function set(i){this.shader.tint=i},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"texture",{get:function get(){return this.shader.texture},set:function set(i){this.shader.texture=i},enumerable:!1,configurable:!0}),Mesh.prototype._render=function(i){var o=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Le.e.TRIANGLES&&o.length<2*Mesh.BATCHABLE_SIZE?this._renderToBatch(i):this._renderDefault(i)},Mesh.prototype._renderDefault=function(i){var o=this.shader;o.alpha=this.worldAlpha,o.update&&o.update(),i.batch.flush(),o.program.uniformData.translationMatrix&&(o.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),i.shader.bind(o),i.state.set(this.state),i.geometry.bind(this.geometry,o),i.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},Mesh.prototype._renderToBatch=function(i){var o=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=o.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var a=this.material.pluginName;i.batch.setObjectRenderer(i.plugins[a]),i.plugins[a].render(this)},Mesh.prototype.calculateVertices=function(){var i=this.geometry,o=i.buffers[0].data;if(i.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==o.length&&(this.vertexData=new Float32Array(o.length));for(var a=this.transform.worldTransform,h=a.a,c=a.b,l=a.c,m=a.d,g=a.tx,_=a.ty,x=this.vertexData,S=0;S<x.length/2;S++){var R=o[2*S],j=o[2*S+1];x[2*S]=h*R+l*j+g,x[2*S+1]=c*R+m*j+_}if(this._roundPixels){var X=k.b.RESOLUTION;for(S=0;S<x.length;++S)x[S]=Math.round((x[S]*X|0)/X)}this.vertexDirty=i.vertexDirtyId}},Mesh.prototype.calculateUvs=function(){var i=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=i.data:(this.batchUvs||(this.batchUvs=new Xt(i,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},Mesh.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},Mesh.prototype.containsPoint=function(i){if(!this.getBounds().contains(i.x,i.y))return!1;this.worldTransform.applyInverse(i,Ht);for(var o=this.geometry.getBuffer("aVertexPosition").data,a=Vt.points,h=this.geometry.getIndex().data,c=h.length,l=4===this.drawMode?3:1,m=0;m+2<c;m+=l){var g=2*h[m],_=2*h[m+1],x=2*h[m+2];if(a[0]=o[g],a[1]=o[g+1],a[2]=o[_],a[3]=o[_+1],a[4]=o[x],a[5]=o[x+1],Vt.contains(Ht.x,Ht.y))return!0}return!1},Mesh.prototype.destroy=function(o){i.prototype.destroy.call(this,o),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},Mesh.BATCHABLE_SIZE=100,Mesh}($),qt=function(i){function MeshMaterial(o,a){var h=this,c={uSampler:o,alpha:1,uTextureMatrix:j.d.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(a=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},a)).uniforms&&Object.assign(c,a.uniforms),(h=i.call(this,a.program||de.w.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),c)||this)._colorDirty=!1,h.uvMatrix=new de.H(o),h.batchable=void 0===a.program,h.pluginName=a.pluginName,h.tint=a.tint,h.alpha=a.alpha,h}return mesh_es_extends(MeshMaterial,i),Object.defineProperty(MeshMaterial.prototype,"texture",{get:function get(){return this.uniforms.uSampler},set:function set(i){this.uniforms.uSampler!==i&&(this.uniforms.uSampler=i,this.uvMatrix.texture=i)},enumerable:!1,configurable:!0}),Object.defineProperty(MeshMaterial.prototype,"alpha",{get:function get(){return this._alpha},set:function set(i){i!==this._alpha&&(this._alpha=i,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(MeshMaterial.prototype,"tint",{get:function get(){return this._tint},set:function set(i){i!==this._tint&&(this._tint=i,this._tintRGB=(i>>16)+(65280&i)+((255&i)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),MeshMaterial.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var i=this.texture.baseTexture;Object(R.premultiplyTintToRgba)(this._tint,this._alpha,this.uniforms.uColor,i.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},MeshMaterial}(de.C),Kt=function(i){function MeshGeometry(o,a,h){var c=i.call(this)||this,l=new de.l(o),m=new de.l(a,!0),g=new de.l(h,!0,!0);return c.addAttribute("aVertexPosition",l,2,!1,Le.p.FLOAT).addAttribute("aTextureCoord",m,2,!1,Le.p.FLOAT).addIndex(g),c._updateId=-1,c}return mesh_es_extends(MeshGeometry,i),Object.defineProperty(MeshGeometry.prototype,"vertexDirtyId",{get:function get(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),MeshGeometry}(de.s),Zt=function text_bitmap_es_extendStatics(i,o){return(Zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)},Qt=function Me(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]},Jt=[function(){function TextFormat(){}return TextFormat.test=function(i){return"string"==typeof i&&0===i.indexOf("info face=")},TextFormat.parse=function(i){var o=i.match(/^[a-z]+\s+.+$/gm),a={info:[],common:[],page:[],char:[],chars:[],kerning:[]};for(var h in o){var c=o[h].match(/^[a-z]+/gm)[0],l=o[h].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),m={};for(var g in l){var _=l[g].split("="),x=_[0],S=_[1].replace(/"/gm,""),R=parseFloat(S),k=isNaN(R)?S:R;m[x]=k}a[c].push(m)}var j=new Qt;return a.info.forEach((function(i){return j.info.push({face:i.face,size:parseInt(i.size,10)})})),a.common.forEach((function(i){return j.common.push({lineHeight:parseInt(i.lineHeight,10)})})),a.page.forEach((function(i){return j.page.push({id:parseInt(i.id,10),file:i.file})})),a.char.forEach((function(i){return j.char.push({id:parseInt(i.id,10),page:parseInt(i.page,10),x:parseInt(i.x,10),y:parseInt(i.y,10),width:parseInt(i.width,10),height:parseInt(i.height,10),xoffset:parseInt(i.xoffset,10),yoffset:parseInt(i.yoffset,10),xadvance:parseInt(i.xadvance,10)})})),a.kerning.forEach((function(i){return j.kerning.push({first:parseInt(i.first,10),second:parseInt(i.second,10),amount:parseInt(i.amount,10)})})),j},TextFormat}(),function(){function XMLFormat(){}return XMLFormat.test=function(i){return i instanceof XMLDocument&&i.getElementsByTagName("page").length&&null!==i.getElementsByTagName("info")[0].getAttribute("face")},XMLFormat.parse=function(i){for(var o=new Qt,a=i.getElementsByTagName("info"),h=i.getElementsByTagName("common"),c=i.getElementsByTagName("page"),l=i.getElementsByTagName("char"),m=i.getElementsByTagName("kerning"),g=0;g<a.length;g++)o.info.push({face:a[g].getAttribute("face"),size:parseInt(a[g].getAttribute("size"),10)});for(g=0;g<h.length;g++)o.common.push({lineHeight:parseInt(h[g].getAttribute("lineHeight"),10)});for(g=0;g<c.length;g++)o.page.push({id:parseInt(c[g].getAttribute("id"),10)||0,file:c[g].getAttribute("file")});for(g=0;g<l.length;g++){var _=l[g];o.char.push({id:parseInt(_.getAttribute("id"),10),page:parseInt(_.getAttribute("page"),10)||0,x:parseInt(_.getAttribute("x"),10),y:parseInt(_.getAttribute("y"),10),width:parseInt(_.getAttribute("width"),10),height:parseInt(_.getAttribute("height"),10),xoffset:parseInt(_.getAttribute("xoffset"),10),yoffset:parseInt(_.getAttribute("yoffset"),10),xadvance:parseInt(_.getAttribute("xadvance"),10)})}for(g=0;g<m.length;g++)o.kerning.push({first:parseInt(m[g].getAttribute("first"),10),second:parseInt(m[g].getAttribute("second"),10),amount:parseInt(m[g].getAttribute("amount"),10)});return o},XMLFormat}()];function autoDetectFormat(i){for(var o=0;o<Jt.length;o++)if(Jt[o].test(i))return Jt[o];return null}function generateFillStyle(i,o,a,h,c,l){var m,g=a.fill;if(!Array.isArray(g))return g;if(1===g.length)return g[0];var _=a.dropShadow?a.dropShadowDistance:0,x=a.padding||0,S=Math.ceil(i.width/h)-_-2*x,R=Math.ceil(i.height/h)-_-2*x,k=g.slice(),j=a.fillGradientStops.slice();if(!j.length)for(var X=k.length+1,Y=1;Y<X;++Y)j.push(Y/X);if(k.unshift(g[0]),j.unshift(0),k.push(g[g.length-1]),j.push(1),a.fillGradientType===Je.LINEAR_VERTICAL){m=o.createLinearGradient(S/2,x,S/2,R+x);var q=0,Z=(l.fontProperties.fontSize+a.strokeThickness)/R;for(Y=0;Y<c.length;Y++)for(var $=l.lineHeight*Y,ee=0;ee<k.length;ee++){var te=$/R+("number"==typeof j[ee]?j[ee]:ee/k.length)*Z,re=Math.max(q,te);re=Math.min(re,1),m.addColorStop(re,k[ee]),q=re}}else{m=o.createLinearGradient(x,R/2,S+x,R/2);var ie=k.length+1,ne=1;for(Y=0;Y<k.length;Y++){var oe;oe="number"==typeof j[Y]?j[Y]:ne/ie,m.addColorStop(oe,k[Y]),ne++}}return m}function drawGlyph(i,o,a,h,c,l,m){var g=a.text,_=a.fontProperties;o.translate(h,c),o.scale(l,l);var x=m.strokeThickness/2,S=-m.strokeThickness/2;o.font=m.toFontString(),o.lineWidth=m.strokeThickness,o.textBaseline=m.textBaseline,o.lineJoin=m.lineJoin,o.miterLimit=m.miterLimit,o.fillStyle=generateFillStyle(i,o,m,l,[g],a),o.strokeStyle=m.stroke,o.font=m.toFontString(),o.lineWidth=m.strokeThickness,o.textBaseline=m.textBaseline,o.lineJoin=m.lineJoin,o.miterLimit=m.miterLimit,o.fillStyle=generateFillStyle(i,o,m,l,[g],a),o.strokeStyle=m.stroke;var k=m.dropShadowColor,j=Object(R.hex2rgb)("number"==typeof k?k:Object(R.string2hex)(k));m.dropShadow?(o.shadowColor="rgba("+255*j[0]+","+255*j[1]+","+255*j[2]+","+m.dropShadowAlpha+")",o.shadowBlur=m.dropShadowBlur,o.shadowOffsetX=Math.cos(m.dropShadowAngle)*m.dropShadowDistance,o.shadowOffsetY=Math.sin(m.dropShadowAngle)*m.dropShadowDistance):(o.shadowColor="0",o.shadowBlur=0,o.shadowOffsetX=0,o.shadowOffsetY=0),m.stroke&&m.strokeThickness&&o.strokeText(g,x,S+a.lineHeight-_.descent),m.fill&&o.fillText(g,x,S+a.lineHeight-_.descent),o.setTransform(),o.fillStyle="rgba(0, 0, 0, 0)"}var $t=function(){function BitmapFont(i,o){var a=i.info[0],h=i.common[0],c=i.page[0],l=Object(R.getResolutionOfUrl)(c.file),m={};for(var g in this.font=a.face,this.size=a.size,this.lineHeight=h.lineHeight/l,this.chars={},this.pageTextures=m,i.page){var _=i.page[g],x=_.id,S=_.file;m[x]=o instanceof Array?o[g]:o[S]}for(var g in i.char){var k=i.char[g],X=(x=k.id,k.page),Y=i.char[g],q=Y.x,Z=Y.y,$=Y.width,ee=Y.height,te=Y.xoffset,re=Y.yoffset,ie=Y.xadvance;q/=l,Z/=l,$/=l,ee/=l,te/=l,re/=l,ie/=l;var ne=new j.j(q+m[X].frame.x/l,Z+m[X].frame.y/l,$,ee);this.chars[x]={xOffset:te,yOffset:re,xAdvance:ie,kerning:{},texture:new de.G(m[X].baseTexture,ne),page:X}}for(var g in i.kerning){var oe=i.kerning[g],ae=oe.first,se=oe.second,ue=oe.amount;ae/=l,se/=l,ue/=l,this.chars[se]&&(this.chars[se].kerning[ae]=ue)}}return BitmapFont.prototype.destroy=function(){for(var i in this.chars)this.chars[i].texture.destroy(),this.chars[i].texture=null;for(var i in this.pageTextures)this.pageTextures[i].destroy(!0),this.pageTextures[i]=null;this.chars=null,this.pageTextures=null},BitmapFont.install=function(i,o){var a;if(i instanceof Qt)a=i;else{var h=autoDetectFormat(i);if(!h)throw new Error("Unrecognized data format for font.");a=h.parse(i)}o instanceof de.G&&(o=[o]);var c=new BitmapFont(a,o);return BitmapFont.available[c.font]=c,c},BitmapFont.uninstall=function(i){var o=BitmapFont.available[i];if(!o)throw new Error("No font found named '"+i+"'");o.destroy(),delete BitmapFont.available[i]},BitmapFont.from=function(i,o,a){if(!i)throw new Error("[BitmapFont] Property `name` is required.");var h=Object.assign({},BitmapFont.defaultOptions,a),c=h.chars,l=h.padding,m=h.resolution,g=h.textureWidth,_=h.textureHeight,x=function resolveCharacters(i){"string"==typeof i&&(i=[i]);for(var o=[],a=0,h=i.length;a<h;a++){var c=i[a];if(Array.isArray(c)){if(2!==c.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+c.length+".");var l=c[0].charCodeAt(0),m=c[1].charCodeAt(0);if(m<l)throw new Error("[BitmapFont]: Invalid character range.");for(var g=l,_=m;g<=_;g++)o.push(String.fromCharCode(g))}else o.push.apply(o,c.split(""))}if(0===o.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return o}(c),S=o instanceof wt?o:new wt(o),R=g,k=new Qt;k.info[0]={face:S.fontFamily,size:S.fontSize},k.common[0]={lineHeight:S.fontSize};for(var j,X,Y,q=0,Z=0,$=0,ee=[],te=0;te<x.length;te++){j||((j=document.createElement("canvas")).width=g,j.height=_,X=j.getContext("2d"),Y=new de.e(j,{resolution:m}),ee.push(new de.G(Y)),k.page.push({id:ee.length-1,file:""}));var re=Tt.measureText(x[te],S,!1,j),ie=re.width,ne=Math.ceil(re.height),oe=Math.ceil(("italic"===S.fontStyle?2:1)*ie);if(Z>=_-ne*m){if(0===Z)throw new Error("[BitmapFont] textureHeight "+_+"px is too small for "+S.fontSize+"px fonts");j=null,X=null,Y=null,Z=0,q=0,$=0}else if($=Math.max(ne+re.fontProperties.descent,$),oe*m+q>=R)--te,Z+=$*m,Z=Math.ceil(Z),q=0,$=0;else{drawGlyph(j,X,re,q,Z,m,S);var ae=re.text.charCodeAt(0);k.char[ae]={id:ae,page:ee.length-1,x:q/m,y:Z/m,width:oe,height:ne,xoffset:0,yoffset:0,xadvance:Math.ceil(ie-(S.dropShadow?S.dropShadowDistance:0)-(S.stroke?S.strokeThickness:0))},q+=(oe+2*l)*m,q=Math.ceil(q)}}var se=new BitmapFont(k,ee);return void 0!==BitmapFont.available[i]&&BitmapFont.uninstall(i),BitmapFont.available[i]=se,se},BitmapFont.ALPHA=[["a","z"],["A","Z"]," "],BitmapFont.NUMERIC=[["0","9"]],BitmapFont.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],BitmapFont.ASCII=[[" ","~"]],BitmapFont.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:BitmapFont.ALPHANUMERIC},BitmapFont.available={},BitmapFont}(),er=[],tr=[],rr=function(i){function BitmapText(o,a){void 0===a&&(a={});var h=i.call(this)||this;h._tint=16777215,a.font&&(Object(R.deprecation)("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),h._upgradeStyle(a));var c=Object.assign({},BitmapText.styleDefaults,a),l=c.align,m=c.tint,g=c.maxWidth,_=c.letterSpacing,x=c.fontName,S=c.fontSize;if(!$t.available[x])throw new Error('Missing BitmapFont "'+x+'"');return h._activePagesMeshData=[],h._textWidth=0,h._textHeight=0,h._align=l,h._tint=m,h._fontName=x,h._fontSize=S||$t.available[x].size,h._text=o,h._maxWidth=g,h._maxLineHeight=0,h._letterSpacing=_,h._anchor=new j.e((function(){h.dirty=!0}),h,0,0),h.roundPixels=k.b.ROUND_PIXELS,h.dirty=!0,h}return function text_bitmap_es_extends(i,o){function __(){this.constructor=i}Zt(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}(BitmapText,i),BitmapText.prototype.updateText=function(){for(var i,o=$t.available[this._fontName],a=this._fontSize/o.size,h=new j.g,c=[],l=[],m=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",g=m.length,_=this._maxWidth*o.size/this._fontSize,x=null,S=0,k=0,X=0,Y=-1,q=0,Z=0,$=0,ee=0;ee<g;ee++){var te=m.charCodeAt(ee),re=m.charAt(ee);if(/(?:\s)/.test(re)&&(Y=ee,q=S),"\r"!==re&&"\n"!==re){var ie=o.chars[te];if(ie){x&&ie.kerning[x]&&(h.x+=ie.kerning[x]);var ne=tr.pop()||{texture:de.G.EMPTY,line:0,charCode:0,position:new j.g};ne.texture=ie.texture,ne.line=X,ne.charCode=te,ne.position.x=h.x+ie.xOffset+this._letterSpacing/2,ne.position.y=h.y+ie.yOffset,c.push(ne),h.x+=ie.xAdvance+this._letterSpacing,S=h.x,$=Math.max($,ie.yOffset+ie.texture.height),x=te,-1!==Y&&_>0&&h.x>_&&(++Z,Object(R.removeItems)(c,1+Y-Z,1+ee-Y),ee=Y,Y=-1,l.push(q),k=Math.max(k,q),X++,h.x=0,h.y+=o.lineHeight,x=null)}}else l.push(S),k=Math.max(k,S),++X,++Z,h.x=0,h.y+=o.lineHeight,x=null}var oe=m.charAt(m.length-1);"\r"!==oe&&"\n"!==oe&&(/(?:\s)/.test(oe)&&(S=q),l.push(S),k=Math.max(k,S));var ae=[];for(ee=0;ee<=X;ee++){var se=0;"right"===this._align?se=k-l[ee]:"center"===this._align&&(se=(k-l[ee])/2),ae.push(se)}var ue=c.length,he={},ce=[],pe=this._activePagesMeshData;for(ee=0;ee<pe.length;ee++)er.push(pe[ee]);for(ee=0;ee<ue;ee++){var fe=(ve=c[ee].texture).baseTexture.uid;if(!he[fe]){if(!(Pe=er.pop())){var me=new Kt,ye=new qt(de.G.EMPTY);Pe={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new Yt(me,ye),vertices:null,uvs:null,indices:null}}Pe.index=0,Pe.indexCount=0,Pe.vertexCount=0,Pe.uvsCount=0,Pe.total=0,Pe.mesh.texture=new de.G(ve.baseTexture),Pe.mesh.tint=this._tint,ce.push(Pe),he[fe]=Pe}he[fe].total++}for(ee=0;ee<pe.length;ee++)-1===ce.indexOf(pe[ee])&&this.removeChild(pe[ee].mesh);for(ee=0;ee<ce.length;ee++)ce[ee].mesh.parent!==this&&this.addChild(ce[ee].mesh);for(var ee in this._activePagesMeshData=ce,he){var _e=(Pe=he[ee]).total;(null===(i=Pe.indices)||void 0===i?void 0:i.length)>6*_e&&!(Pe.vertices.length<2*Yt.BATCHABLE_SIZE)||(Pe.vertices=new Float32Array(8*_e),Pe.uvs=new Float32Array(8*_e),Pe.indices=new Uint16Array(6*_e)),Pe.mesh.size=6*_e}for(ee=0;ee<ue;ee++){var ve,xe=((re=c[ee]).position.x+ae[re.line])*a,Se=re.position.y*a,be=he[(ve=re.texture).baseTexture.uid],we=ve.frame,Te=ve._uvs,Ce=be.index++;be.indices[6*Ce+0]=0+4*Ce,be.indices[6*Ce+1]=1+4*Ce,be.indices[6*Ce+2]=2+4*Ce,be.indices[6*Ce+3]=0+4*Ce,be.indices[6*Ce+4]=2+4*Ce,be.indices[6*Ce+5]=3+4*Ce,be.vertices[8*Ce+0]=xe,be.vertices[8*Ce+1]=Se,be.vertices[8*Ce+2]=xe+we.width*a,be.vertices[8*Ce+3]=Se,be.vertices[8*Ce+4]=xe+we.width*a,be.vertices[8*Ce+5]=Se+we.height*a,be.vertices[8*Ce+6]=xe,be.vertices[8*Ce+7]=Se+we.height*a,be.uvs[8*Ce+0]=Te.x0,be.uvs[8*Ce+1]=Te.y0,be.uvs[8*Ce+2]=Te.x1,be.uvs[8*Ce+3]=Te.y1,be.uvs[8*Ce+4]=Te.x2,be.uvs[8*Ce+5]=Te.y2,be.uvs[8*Ce+6]=Te.x3,be.uvs[8*Ce+7]=Te.y3}for(var ee in this._textWidth=k*a,this._textHeight=(h.y+o.lineHeight)*a,he){var Pe=he[ee];if(0!==this.anchor.x||0!==this.anchor.y)for(var Oe=0,Ae=this._textWidth*this.anchor.x,Re=this._textHeight*this.anchor.y,Ie=0;Ie<Pe.total;Ie++)Pe.vertices[Oe++]-=Ae,Pe.vertices[Oe++]-=Re,Pe.vertices[Oe++]-=Ae,Pe.vertices[Oe++]-=Re,Pe.vertices[Oe++]-=Ae,Pe.vertices[Oe++]-=Re,Pe.vertices[Oe++]-=Ae,Pe.vertices[Oe++]-=Re;this._maxLineHeight=$*a;var ke=Pe.mesh.geometry.getBuffer("aVertexPosition"),Fe=Pe.mesh.geometry.getBuffer("aTextureCoord"),ze=Pe.mesh.geometry.getIndex();ke.data=Pe.vertices,Fe.data=Pe.uvs,ze.data=Pe.indices,ke.update(),Fe.update(),ze.update()}for(ee=0;ee<c.length;ee++)tr.push(c[ee])},BitmapText.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},BitmapText.prototype.getLocalBounds=function(){return this.validate(),i.prototype.getLocalBounds.call(this)},BitmapText.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(BitmapText.prototype,"tint",{get:function get(){return this._tint},set:function set(i){if(this._tint!==i){this._tint=i;for(var o=0;o<this._activePagesMeshData.length;o++)this._activePagesMeshData[o].mesh.tint=i}},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"align",{get:function get(){return this._align},set:function set(i){this._align!==i&&(this._align=i,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"fontName",{get:function get(){return this._fontName},set:function set(i){if(!$t.available[i])throw new Error('Missing BitmapFont "'+i+'"');this._fontName!==i&&(this._fontName=i,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"fontSize",{get:function get(){return this._fontSize},set:function set(i){this._fontSize!==i&&(this._fontSize=i,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"anchor",{get:function get(){return this._anchor},set:function set(i){"number"==typeof i?this._anchor.set(i):this._anchor.copyFrom(i)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"text",{get:function get(){return this._text},set:function set(i){i=String(null==i?"":i),this._text!==i&&(this._text=i,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"maxWidth",{get:function get(){return this._maxWidth},set:function set(i){this._maxWidth!==i&&(this._maxWidth=i,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"maxLineHeight",{get:function get(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"textWidth",{get:function get(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"letterSpacing",{get:function get(){return this._letterSpacing},set:function set(i){this._letterSpacing!==i&&(this._letterSpacing=i,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"textHeight",{get:function get(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),BitmapText.prototype._upgradeStyle=function(i){if("string"==typeof i.font){var o=i.font.split(" ");i.fontName=1===o.length?o[0]:o.slice(1).join(" "),o.length>=2&&(i.fontSize=parseInt(o[0],10))}else i.fontName=i.font.name,i.fontSize="number"==typeof i.font.size?i.font.size:parseInt(i.font.size,10)},BitmapText.registerFont=function(i,o){return Object(R.deprecation)("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),$t.install(i,o)},Object.defineProperty(BitmapText,"fonts",{get:function get(){return Object(R.deprecation)("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),$t.available},enumerable:!1,configurable:!0}),BitmapText.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},BitmapText}($),ir=function(){function BitmapFontLoader(){}return BitmapFontLoader.add=function(){Ie.setExtensionXhrType("fnt",Ie.XHR_RESPONSE_TYPE.DOCUMENT)},BitmapFontLoader.use=function(i,o){var a=autoDetectFormat(i.data);if(a)for(var h=BitmapFontLoader.getBaseUrl(this,i),c=a.parse(i.data),l={},m=function completed(a){l[a.metadata.pageFile]=a.texture,Object.keys(l).length===c.page.length&&(i.bitmapFont=$t.install(c,l),o())},g=0;g<c.page.length;++g){var _=c.page[g].file,x=h+_,S=!1;for(var R in this.resources){var k=this.resources[R];if(k.url===x){k.metadata.pageFile=_,k.texture?m(k):k.onAfterMiddleware.add(m),S=!0;break}}if(!S){var j={crossOrigin:i.crossOrigin,loadType:Ie.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:_},i.metadata.imageMetadata),parentResource:i};this.add(x,j,m)}}else o()},BitmapFontLoader.getBaseUrl=function(i,o){var a=o.isDataUrl?"":BitmapFontLoader.dirname(o.url);return o.isDataUrl&&("."===a&&(a=""),i.baseUrl&&a&&"/"===i.baseUrl.charAt(i.baseUrl.length-1)&&(a+="/")),(a=a.replace(i.baseUrl,""))&&"/"!==a.charAt(a.length-1)&&(a+="/"),a},BitmapFontLoader.dirname=function(i){var o=i.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return o===i?".":""===o?"/":o},BitmapFontLoader}(),nr=function filter_alpha_es_extendStatics(i,o){return(nr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)},or=function(i){function AlphaFilter(o){void 0===o&&(o=1);var a=i.call(this,de.O,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return a.alpha=o,a}return function filter_alpha_es_extends(i,o){function __(){this.constructor=i}nr(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}(AlphaFilter,i),Object.defineProperty(AlphaFilter.prototype,"alpha",{get:function get(){return this.uniforms.uAlpha},set:function set(i){this.uniforms.uAlpha=i},enumerable:!1,configurable:!0}),AlphaFilter}(de.m),ar=function filter_blur_es_extendStatics(i,o){return(ar=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)};function filter_blur_es_extends(i,o){function __(){this.constructor=i}ar(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}var sr,ur,hr,cr,lr,pr,fr,mr,gr,yr,_r,vr,xr,Sr,br,wr,Tr,Er={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Cr=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(i){i[i.WEBGL_LEGACY=0]="WEBGL_LEGACY",i[i.WEBGL=1]="WEBGL",i[i.WEBGL2=2]="WEBGL2"}(sr||(sr={})),function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.WEBGL=1]="WEBGL",i[i.CANVAS=2]="CANVAS"}(ur||(ur={})),function(i){i[i.COLOR=16384]="COLOR",i[i.DEPTH=256]="DEPTH",i[i.STENCIL=1024]="STENCIL"}(hr||(hr={})),function(i){i[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR"}(cr||(cr={})),function(i){i[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(lr||(lr={})),function(i){i[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(pr||(pr={})),function(i){i[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(fr||(fr={})),function(i){i[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.FLOAT=5126]="FLOAT",i[i.HALF_FLOAT=36193]="HALF_FLOAT"}(mr||(mr={})),function(i){i[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR"}(gr||(gr={})),function(i){i[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(yr||(yr={})),function(i){i[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON"}(_r||(_r={})),function(i){i[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(vr||(vr={})),function(i){i[i.NO=0]="NO",i[i.YES=1]="YES",i[i.AUTO=2]="AUTO",i[i.BLEND=0]="BLEND",i[i.CLEAR=1]="CLEAR",i[i.BLIT=2]="BLIT"}(xr||(xr={})),function(i){i[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL"}(Sr||(Sr={})),function(i){i.LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp"}(br||(br={})),function(i){i[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE"}(wr||(wr={})),function(i){i[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH"}(Tr||(Tr={}));var Pr=function(i){function BlurFilterPass(o,a,h,c,l){void 0===a&&(a=8),void 0===h&&(h=4),void 0===c&&(c=k.b.RESOLUTION),void 0===l&&(l=5);var m=this,g=function generateBlurVertSource(i,o){var a,h=Math.ceil(i/2),c="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",l="";a=o?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var m=0;m<i;m++){var g=a.replace("%index%",m.toString());l+=g=g.replace("%sampleIndex%",m-(h-1)+".0"),l+="\n"}return(c=c.replace("%blur%",l)).replace("%size%",i.toString())}(l,o),_=function generateBlurFragSource(i){for(var o,a=Er[i],h=a.length,c=Cr,l="",m=0;m<i;m++){var g="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",m.toString());o=m,m>=h&&(o=i-m-1),l+=g=g.replace("%value%",a[o].toString()),l+="\n"}return(c=c.replace("%blur%",l)).replace("%size%",i.toString())}(l);return(m=i.call(this,g,_)||this).horizontal=o,m.resolution=c,m._quality=0,m.quality=h,m.blur=a,m}return filter_blur_es_extends(BlurFilterPass,i),BlurFilterPass.prototype.apply=function(i,o,a,h){if(a?this.horizontal?this.uniforms.strength=1/a.width*(a.width/o.width):this.uniforms.strength=1/a.height*(a.height/o.height):this.horizontal?this.uniforms.strength=1/i.renderer.width*(i.renderer.width/o.width):this.uniforms.strength=1/i.renderer.height*(i.renderer.height/o.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)i.applyFilter(this,o,a,h);else{var c=i.getFilterTexture(),l=i.renderer,m=o,g=c;this.state.blend=!1,i.applyFilter(this,m,g,xr.CLEAR);for(var _=1;_<this.passes-1;_++){i.bindAndClear(m,xr.BLIT),this.uniforms.uSampler=g;var x=g;g=m,m=x,l.shader.bind(this),l.geometry.draw(5)}this.state.blend=!0,i.applyFilter(this,g,a,h),i.returnFilterTexture(c)}},Object.defineProperty(BlurFilterPass.prototype,"blur",{get:function get(){return this.strength},set:function set(i){this.padding=1+2*Math.abs(i),this.strength=i},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilterPass.prototype,"quality",{get:function get(){return this._quality},set:function set(i){this._quality=i,this.passes=i},enumerable:!1,configurable:!0}),BlurFilterPass}(de.m),Or=function(i){function BlurFilter(o,a,h,c){void 0===o&&(o=8),void 0===a&&(a=4),void 0===h&&(h=k.b.RESOLUTION),void 0===c&&(c=5);var l=i.call(this)||this;return l.blurXFilter=new Pr(!0,o,a,h,c),l.blurYFilter=new Pr(!1,o,a,h,c),l.resolution=h,l.quality=a,l.blur=o,l.repeatEdgePixels=!1,l}return filter_blur_es_extends(BlurFilter,i),BlurFilter.prototype.apply=function(i,o,a,h){var c=Math.abs(this.blurXFilter.strength),l=Math.abs(this.blurYFilter.strength);if(c&&l){var m=i.getFilterTexture();this.blurXFilter.apply(i,o,m,xr.CLEAR),this.blurYFilter.apply(i,m,a,h),i.returnFilterTexture(m)}else l?this.blurYFilter.apply(i,o,a,h):this.blurXFilter.apply(i,o,a,h)},BlurFilter.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(BlurFilter.prototype,"blur",{get:function get(){return this.blurXFilter.blur},set:function set(i){this.blurXFilter.blur=this.blurYFilter.blur=i,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilter.prototype,"quality",{get:function get(){return this.blurXFilter.quality},set:function set(i){this.blurXFilter.quality=this.blurYFilter.quality=i},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilter.prototype,"blurX",{get:function get(){return this.blurXFilter.blur},set:function set(i){this.blurXFilter.blur=i,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilter.prototype,"blurY",{get:function get(){return this.blurYFilter.blur},set:function set(i){this.blurYFilter.blur=i,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilter.prototype,"blendMode",{get:function get(){return this.blurYFilter.blendMode},set:function set(i){this.blurYFilter.blendMode=i},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilter.prototype,"repeatEdgePixels",{get:function get(){return this._repeatEdgePixels},set:function set(i){this._repeatEdgePixels=i,this.updatePadding()},enumerable:!1,configurable:!0}),BlurFilter}(de.m),Ar=function filter_color_matrix_es_extendStatics(i,o){return(Ar=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)},Rr=function(i){function ColorMatrixFilter(){var o=this,a={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(o=i.call(this,de.N,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",a)||this).alpha=1,o}return function filter_color_matrix_es_extends(i,o){function __(){this.constructor=i}Ar(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}(ColorMatrixFilter,i),ColorMatrixFilter.prototype._loadMatrix=function(i,o){void 0===o&&(o=!1);var a=i;o&&(this._multiply(a,this.uniforms.m,i),a=this._colorMatrix(a)),this.uniforms.m=a},ColorMatrixFilter.prototype._multiply=function(i,o,a){return i[0]=o[0]*a[0]+o[1]*a[5]+o[2]*a[10]+o[3]*a[15],i[1]=o[0]*a[1]+o[1]*a[6]+o[2]*a[11]+o[3]*a[16],i[2]=o[0]*a[2]+o[1]*a[7]+o[2]*a[12]+o[3]*a[17],i[3]=o[0]*a[3]+o[1]*a[8]+o[2]*a[13]+o[3]*a[18],i[4]=o[0]*a[4]+o[1]*a[9]+o[2]*a[14]+o[3]*a[19]+o[4],i[5]=o[5]*a[0]+o[6]*a[5]+o[7]*a[10]+o[8]*a[15],i[6]=o[5]*a[1]+o[6]*a[6]+o[7]*a[11]+o[8]*a[16],i[7]=o[5]*a[2]+o[6]*a[7]+o[7]*a[12]+o[8]*a[17],i[8]=o[5]*a[3]+o[6]*a[8]+o[7]*a[13]+o[8]*a[18],i[9]=o[5]*a[4]+o[6]*a[9]+o[7]*a[14]+o[8]*a[19]+o[9],i[10]=o[10]*a[0]+o[11]*a[5]+o[12]*a[10]+o[13]*a[15],i[11]=o[10]*a[1]+o[11]*a[6]+o[12]*a[11]+o[13]*a[16],i[12]=o[10]*a[2]+o[11]*a[7]+o[12]*a[12]+o[13]*a[17],i[13]=o[10]*a[3]+o[11]*a[8]+o[12]*a[13]+o[13]*a[18],i[14]=o[10]*a[4]+o[11]*a[9]+o[12]*a[14]+o[13]*a[19]+o[14],i[15]=o[15]*a[0]+o[16]*a[5]+o[17]*a[10]+o[18]*a[15],i[16]=o[15]*a[1]+o[16]*a[6]+o[17]*a[11]+o[18]*a[16],i[17]=o[15]*a[2]+o[16]*a[7]+o[17]*a[12]+o[18]*a[17],i[18]=o[15]*a[3]+o[16]*a[8]+o[17]*a[13]+o[18]*a[18],i[19]=o[15]*a[4]+o[16]*a[9]+o[17]*a[14]+o[18]*a[19]+o[19],i},ColorMatrixFilter.prototype._colorMatrix=function(i){var o=new Float32Array(i);return o[4]/=255,o[9]/=255,o[14]/=255,o[19]/=255,o},ColorMatrixFilter.prototype.brightness=function(i,o){var a=[i,0,0,0,0,0,i,0,0,0,0,0,i,0,0,0,0,0,1,0];this._loadMatrix(a,o)},ColorMatrixFilter.prototype.greyscale=function(i,o){var a=[i,i,i,0,0,i,i,i,0,0,i,i,i,0,0,0,0,0,1,0];this._loadMatrix(a,o)},ColorMatrixFilter.prototype.blackAndWhite=function(i){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],i)},ColorMatrixFilter.prototype.hue=function(i,o){i=(i||0)/180*Math.PI;var a=Math.cos(i),h=Math.sin(i),c=1/3,l=(0,Math.sqrt)(c),m=[a+(1-a)*c,c*(1-a)-l*h,c*(1-a)+l*h,0,0,c*(1-a)+l*h,a+c*(1-a),c*(1-a)-l*h,0,0,c*(1-a)-l*h,c*(1-a)+l*h,a+c*(1-a),0,0,0,0,0,1,0];this._loadMatrix(m,o)},ColorMatrixFilter.prototype.contrast=function(i,o){var a=(i||0)+1,h=-.5*(a-1),c=[a,0,0,0,h,0,a,0,0,h,0,0,a,0,h,0,0,0,1,0];this._loadMatrix(c,o)},ColorMatrixFilter.prototype.saturate=function(i,o){void 0===i&&(i=0);var a=2*i/3+1,h=-.5*(a-1),c=[a,h,h,0,0,h,a,h,0,0,h,h,a,0,0,0,0,0,1,0];this._loadMatrix(c,o)},ColorMatrixFilter.prototype.desaturate=function(){this.saturate(-1)},ColorMatrixFilter.prototype.negative=function(i){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],i)},ColorMatrixFilter.prototype.sepia=function(i){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],i)},ColorMatrixFilter.prototype.technicolor=function(i){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],i)},ColorMatrixFilter.prototype.polaroid=function(i){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],i)},ColorMatrixFilter.prototype.toBGR=function(i){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],i)},ColorMatrixFilter.prototype.kodachrome=function(i){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],i)},ColorMatrixFilter.prototype.browni=function(i){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],i)},ColorMatrixFilter.prototype.vintage=function(i){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],i)},ColorMatrixFilter.prototype.colorTone=function(i,o,a,h,c){var l=((a=a||16770432)>>16&255)/255,m=(a>>8&255)/255,g=(255&a)/255,_=((h=h||3375104)>>16&255)/255,x=(h>>8&255)/255,S=(255&h)/255,R=[.3,.59,.11,0,0,l,m,g,i=i||.2,0,_,x,S,o=o||.15,0,l-_,m-x,g-S,0,0];this._loadMatrix(R,c)},ColorMatrixFilter.prototype.night=function(i,o){var a=[-2*(i=i||.1),-i,0,0,0,-i,0,i,0,0,0,i,2*i,0,0,0,0,0,1,0];this._loadMatrix(a,o)},ColorMatrixFilter.prototype.predator=function(i,o){var a=[11.224130630493164*i,-4.794486999511719*i,-2.8746118545532227*i,0*i,.40342438220977783*i,-3.6330697536468506*i,9.193157196044922*i,-2.951810836791992*i,0*i,-1.316135048866272*i,-3.2184197902679443*i,-4.2375030517578125*i,7.476448059082031*i,0*i,.8044459223747253*i,0,0,0,1,0];this._loadMatrix(a,o)},ColorMatrixFilter.prototype.lsd=function(i){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],i)},ColorMatrixFilter.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(ColorMatrixFilter.prototype,"matrix",{get:function get(){return this.uniforms.m},set:function set(i){this.uniforms.m=i},enumerable:!1,configurable:!0}),Object.defineProperty(ColorMatrixFilter.prototype,"alpha",{get:function get(){return this.uniforms.uAlpha},set:function set(i){this.uniforms.uAlpha=i},enumerable:!1,configurable:!0}),ColorMatrixFilter}(de.m);Rr.prototype.grayscale=Rr.prototype.greyscale;var Ir=function filter_displacement_es_extendStatics(i,o){return(Ir=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)},Mr=function(i){function DisplacementFilter(o,a){var h=this,c=new j.d;return o.renderable=!1,(h=i.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:o._texture,filterMatrix:c,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=o,h.maskMatrix=c,null==a&&(a=20),h.scale=new j.g(a,a),h}return function filter_displacement_es_extends(i,o){function __(){this.constructor=i}Ir(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}(DisplacementFilter,i),DisplacementFilter.prototype.apply=function(i,o,a,h){this.uniforms.filterMatrix=i.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var c=this.maskSprite.worldTransform,l=Math.sqrt(c.a*c.a+c.b*c.b),m=Math.sqrt(c.c*c.c+c.d*c.d);0!==l&&0!==m&&(this.uniforms.rotation[0]=c.a/l,this.uniforms.rotation[1]=c.b/l,this.uniforms.rotation[2]=c.c/m,this.uniforms.rotation[3]=c.d/m),i.applyFilter(this,o,a,h)},Object.defineProperty(DisplacementFilter.prototype,"map",{get:function get(){return this.uniforms.mapSampler},set:function set(i){this.uniforms.mapSampler=i},enumerable:!1,configurable:!0}),DisplacementFilter}(de.m),kr=function filter_fxaa_es_extendStatics(i,o){return(kr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)},Fr=function(i){function FXAAFilter(){return i.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function filter_fxaa_es_extends(i,o){function __(){this.constructor=i}kr(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}(FXAAFilter,i),FXAAFilter}(de.m),zr=function filter_noise_es_extendStatics(i,o){return(zr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)},Dr=function(i){function NoiseFilter(o,a){void 0===o&&(o=.5),void 0===a&&(a=Math.random());var h=i.call(this,de.N,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return h.noise=o,h.seed=a,h}return function filter_noise_es_extends(i,o){function __(){this.constructor=i}zr(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}(NoiseFilter,i),Object.defineProperty(NoiseFilter.prototype,"noise",{get:function get(){return this.uniforms.uNoise},set:function set(i){this.uniforms.uNoise=i},enumerable:!1,configurable:!0}),Object.defineProperty(NoiseFilter.prototype,"seed",{get:function get(){return this.uniforms.uSeed},set:function set(i){this.uniforms.uSeed=i},enumerable:!1,configurable:!0}),NoiseFilter}(de.m),Lr=new j.d;q.prototype._cacheAsBitmap=!1,q.prototype._cacheData=null;var Br=function dr(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(q.prototype,{cacheAsBitmap:{get:function get(){return this._cacheAsBitmap},set:function set(i){var o;this._cacheAsBitmap!==i&&(this._cacheAsBitmap=i,i?(this._cacheData||(this._cacheData=new Br),(o=this._cacheData).originalRender=this.render,o.originalRenderCanvas=this.renderCanvas,o.originalUpdateTransform=this.updateTransform,o.originalCalculateBounds=this.calculateBounds,o.originalGetLocalBounds=this.getLocalBounds,o.originalDestroy=this.destroy,o.originalContainsPoint=this.containsPoint,o.originalMask=this._mask,o.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((o=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=o.originalRender,this.renderCanvas=o.originalRenderCanvas,this.calculateBounds=o.originalCalculateBounds,this.getLocalBounds=o.originalGetLocalBounds,this.destroy=o.originalDestroy,this.updateTransform=o.originalUpdateTransform,this.containsPoint=o.originalContainsPoint,this._mask=o.originalMask,this.filterArea=o.originalFilterArea))}}}),q.prototype._renderCached=function _renderCached(i){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(i),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(i))},q.prototype._initCachedDisplayObject=function _initCachedDisplayObject(i){if(!this._cacheData||!this._cacheData.sprite){var o=this.alpha;this.alpha=1,i.batch.flush();var a=this.getLocalBounds(null,!0).clone();if(this.filters){var h=this.filters[0].padding;a.pad(h)}a.ceil(k.b.RESOLUTION);var c=i.renderTexture.current,l=i.renderTexture.sourceFrame.clone(),m=i.projection.transform,g=de.z.create({width:a.width,height:a.height}),_="cacheAsBitmap_"+Object(R.uid)();this._cacheData.textureCacheId=_,de.e.addToCache(g.baseTexture,_),de.G.addToCache(g,_);var x=Lr;x.tx=-a.x,x.ty=-a.y,this.transform.worldTransform.identity(),this.render=this._cacheData.originalRender,i.render(this,g,!0,x,!0),i.projection.transform=m,i.renderTexture.bind(c,l),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var S=new vt(g);S.transform.worldTransform=this.transform.worldTransform,S.anchor.x=-a.x/a.width,S.anchor.y=-a.y/a.height,S.alpha=o,S._bounds=this._bounds,this._cacheData.sprite=S,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=S.containsPoint.bind(S)}},q.prototype._renderCachedCanvas=function _renderCachedCanvas(i){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(i),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(i))},q.prototype._initCachedDisplayObjectCanvas=function _initCachedDisplayObjectCanvas(i){if(!this._cacheData||!this._cacheData.sprite){var o=this.getLocalBounds(null,!0),a=this.alpha;this.alpha=1;var h=i.context,c=i._projTransform;o.ceil(k.b.RESOLUTION);var l=de.z.create({width:o.width,height:o.height}),m="cacheAsBitmap_"+Object(R.uid)();this._cacheData.textureCacheId=m,de.e.addToCache(l.baseTexture,m),de.G.addToCache(l,m);var g=Lr;this.transform.localTransform.copyTo(g),g.invert(),g.tx-=o.x,g.ty-=o.y,this.renderCanvas=this._cacheData.originalRenderCanvas,i.render(this,l,!0,g,!1),i.context=h,i._projTransform=c,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var _=new vt(l);_.transform.worldTransform=this.transform.worldTransform,_.anchor.x=-o.x/o.width,_.anchor.y=-o.y/o.height,_.alpha=a,_._bounds=this._bounds,this._cacheData.sprite=_,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=i._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=_.containsPoint.bind(_)}},q.prototype._calculateCachedBounds=function _calculateCachedBounds(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},q.prototype._getCachedLocalBounds=function _getCachedLocalBounds(){return this._cacheData.sprite.getLocalBounds(null)},q.prototype._destroyCachedDisplayObject=function _destroyCachedDisplayObject(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,de.e.removeFromCache(this._cacheData.textureCacheId),de.G.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},q.prototype._cacheAsBitmapDestroy=function _cacheAsBitmapDestroy(i){this.cacheAsBitmap=!1,this.destroy(i)},q.prototype.name=null,$.prototype.getChildByName=function getChildByName(i,o){for(var a=0,h=this.children.length;a<h;a++)if(this.children[a].name===i)return this.children[a];if(o)for(a=0,h=this.children.length;a<h;a++)if(this.children[a].getChildByName){var c=this.children[a].getChildByName(i,!0);if(c)return c}return null},q.prototype.getGlobalPosition=function getGlobalPosition(i,o){return void 0===i&&(i=new j.g),void 0===o&&(o=!1),this.parent?this.parent.toGlobal(this.position,i,o):(i.x=this.position.x,i.y=this.position.y),i};var Nr=function mesh_extras_es_extendStatics(i,o){return(Nr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)};function mesh_extras_es_extends(i,o){function __(){this.constructor=i}Nr(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}var Gr=function(i){function PlaneGeometry(o,a,h,c){void 0===o&&(o=100),void 0===a&&(a=100),void 0===h&&(h=10),void 0===c&&(c=10);var l=i.call(this)||this;return l.segWidth=h,l.segHeight=c,l.width=o,l.height=a,l.build(),l}return mesh_extras_es_extends(PlaneGeometry,i),PlaneGeometry.prototype.build=function(){for(var i=this.segWidth*this.segHeight,o=[],a=[],h=[],c=this.segWidth-1,l=this.segHeight-1,m=this.width/c,g=this.height/l,_=0;_<i;_++){var x=_%this.segWidth,S=_/this.segWidth|0;o.push(x*m,S*g),a.push(x/c,S/l)}var R=c*l;for(_=0;_<R;_++){var k=_%c,j=_/c|0,X=j*this.segWidth+k,Y=j*this.segWidth+k+1,q=(j+1)*this.segWidth+k,Z=(j+1)*this.segWidth+k+1;h.push(X,Y,q,Y,Z,q)}this.buffers[0].data=new Float32Array(o),this.buffers[1].data=new Float32Array(a),this.indexBuffer.data=new Uint16Array(h),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},PlaneGeometry}(Kt),Ur=function(i){function RopeGeometry(o,a,h){void 0===o&&(o=200),void 0===h&&(h=0);var c=i.call(this,new Float32Array(4*a.length),new Float32Array(4*a.length),new Uint16Array(6*(a.length-1)))||this;return c.points=a,c._width=o,c.textureScale=h,c.build(),c}return mesh_extras_es_extends(RopeGeometry,i),Object.defineProperty(RopeGeometry.prototype,"width",{get:function get(){return this._width},enumerable:!1,configurable:!0}),RopeGeometry.prototype.build=function(){var i=this.points;if(i){var o=this.getBuffer("aVertexPosition"),a=this.getBuffer("aTextureCoord"),h=this.getIndex();if(!(i.length<1)){o.data.length/4!==i.length&&(o.data=new Float32Array(4*i.length),a.data=new Float32Array(4*i.length),h.data=new Uint16Array(6*(i.length-1)));var c=a.data,l=h.data;c[0]=0,c[1]=0,c[2]=0,c[3]=1;for(var m=0,g=i[0],_=this._width*this.textureScale,x=i.length,S=0;S<x;S++){var R=4*S;if(this.textureScale>0){var k=g.x-i[S].x,j=g.y-i[S].y,X=Math.sqrt(k*k+j*j);g=i[S],m+=X/_}else m=S/(x-1);c[R]=m,c[R+1]=0,c[R+2]=m,c[R+3]=1}var Y=0;for(S=0;S<x-1;S++)R=2*S,l[Y++]=R,l[Y++]=R+1,l[Y++]=R+2,l[Y++]=R+2,l[Y++]=R+1,l[Y++]=R+3;a.update(),h.update(),this.updateVertices()}}},RopeGeometry.prototype.updateVertices=function(){var i=this.points;if(!(i.length<1)){for(var o,a=i[0],h=0,c=0,l=this.buffers[0].data,m=i.length,g=0;g<m;g++){var _=i[g],x=4*g;c=-((o=g<i.length-1?i[g+1]:_).x-a.x),h=o.y-a.y;var S=Math.sqrt(h*h+c*c),R=this.textureScale>0?this.textureScale*this._width/2:this._width/2;h/=S,c/=S,h*=R,c*=R,l[x]=_.x+h,l[x+1]=_.y+c,l[x+2]=_.x-h,l[x+3]=_.y-c,a=_}this.buffers[0].update()}},RopeGeometry.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},RopeGeometry}(Kt),jr=function(i){function SimpleRope(o,a,h){void 0===h&&(h=0);var c=this,l=new Ur(o.height,a,h),m=new qt(o);return h>0&&(o.baseTexture.wrapMode=Le.q.REPEAT),(c=i.call(this,l,m)||this).autoUpdate=!0,c}return mesh_extras_es_extends(SimpleRope,i),SimpleRope.prototype._render=function(o){var a=this.geometry;(this.autoUpdate||a._width!==this.shader.texture.height)&&(a._width=this.shader.texture.height,a.update()),i.prototype._render.call(this,o)},SimpleRope}(Yt),Wr=function(i){function SimplePlane(o,a,h){var c=this,l=new Gr(o.width,o.height,a,h),m=new qt(de.G.WHITE);return(c=i.call(this,l,m)||this).texture=o,c}return mesh_extras_es_extends(SimplePlane,i),SimplePlane.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var i=this.geometry;i.width=this.shader.texture.width,i.height=this.shader.texture.height,i.build()},Object.defineProperty(SimplePlane.prototype,"texture",{get:function get(){return this.shader.texture},set:function set(i){this.shader.texture!==i&&(this.shader.texture=i,this._textureID=-1,i.baseTexture.valid?this.textureUpdated():i.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),SimplePlane.prototype._render=function(o){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),i.prototype._render.call(this,o)},SimplePlane}(Yt),Xr=function(i){function SimpleMesh(o,a,h,c,l){void 0===o&&(o=de.G.EMPTY);var m=this,g=new Kt(a,h,c);g.getBuffer("aVertexPosition").static=!1;var _=new qt(o);return(m=i.call(this,g,_,null,l)||this).autoUpdate=!0,m}return mesh_extras_es_extends(SimpleMesh,i),Object.defineProperty(SimpleMesh.prototype,"vertices",{get:function get(){return this.geometry.getBuffer("aVertexPosition").data},set:function set(i){this.geometry.getBuffer("aVertexPosition").data=i},enumerable:!1,configurable:!0}),SimpleMesh.prototype._render=function(o){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),i.prototype._render.call(this,o)},SimpleMesh}(Yt),Hr=function(i){function NineSlicePlane(o,a,h,c,l){void 0===a&&(a=10),void 0===h&&(h=10),void 0===c&&(c=10),void 0===l&&(l=10);var m=i.call(this,de.G.WHITE,4,4)||this;return m._origWidth=o.orig.width,m._origHeight=o.orig.height,m._width=m._origWidth,m._height=m._origHeight,m._leftWidth=a,m._rightWidth=c,m._topHeight=h,m._bottomHeight=l,m.texture=o,m}return mesh_extras_es_extends(NineSlicePlane,i),NineSlicePlane.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(NineSlicePlane.prototype,"vertices",{get:function get(){return this.geometry.getBuffer("aVertexPosition").data},set:function set(i){this.geometry.getBuffer("aVertexPosition").data=i},enumerable:!1,configurable:!0}),NineSlicePlane.prototype.updateHorizontalVertices=function(){var i=this.vertices,o=this._getMinScale();i[9]=i[11]=i[13]=i[15]=this._topHeight*o,i[17]=i[19]=i[21]=i[23]=this._height-this._bottomHeight*o,i[25]=i[27]=i[29]=i[31]=this._height},NineSlicePlane.prototype.updateVerticalVertices=function(){var i=this.vertices,o=this._getMinScale();i[2]=i[10]=i[18]=i[26]=this._leftWidth*o,i[4]=i[12]=i[20]=i[28]=this._width-this._rightWidth*o,i[6]=i[14]=i[22]=i[30]=this._width},NineSlicePlane.prototype._getMinScale=function(){var i=this._leftWidth+this._rightWidth,o=this._width>i?1:this._width/i,a=this._topHeight+this._bottomHeight,h=this._height>a?1:this._height/a;return Math.min(o,h)},Object.defineProperty(NineSlicePlane.prototype,"width",{get:function get(){return this._width},set:function set(i){this._width=i,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(NineSlicePlane.prototype,"height",{get:function get(){return this._height},set:function set(i){this._height=i,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(NineSlicePlane.prototype,"leftWidth",{get:function get(){return this._leftWidth},set:function set(i){this._leftWidth=i,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(NineSlicePlane.prototype,"rightWidth",{get:function get(){return this._rightWidth},set:function set(i){this._rightWidth=i,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(NineSlicePlane.prototype,"topHeight",{get:function get(){return this._topHeight},set:function set(i){this._topHeight=i,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(NineSlicePlane.prototype,"bottomHeight",{get:function get(){return this._bottomHeight},set:function set(i){this._bottomHeight=i,this._refresh()},enumerable:!1,configurable:!0}),NineSlicePlane.prototype._refresh=function(){var i=this.texture,o=this.geometry.buffers[1].data;this._origWidth=i.orig.width,this._origHeight=i.orig.height;var a=1/this._origWidth,h=1/this._origHeight;o[0]=o[8]=o[16]=o[24]=0,o[1]=o[3]=o[5]=o[7]=0,o[6]=o[14]=o[22]=o[30]=1,o[25]=o[27]=o[29]=o[31]=1,o[2]=o[10]=o[18]=o[26]=a*this._leftWidth,o[4]=o[12]=o[20]=o[28]=1-a*this._rightWidth,o[9]=o[11]=o[13]=o[15]=h*this._topHeight,o[17]=o[19]=o[21]=o[23]=1-h*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},NineSlicePlane}(Wr),Vr=a(10),Yr=function sprite_animated_es_extendStatics(i,o){return(Yr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)},qr=function(i){function AnimatedSprite(o,a){void 0===a&&(a=!0);var h=i.call(this,o[0]instanceof de.G?o[0]:o[0].texture)||this;return h._textures=null,h._durations=null,h._autoUpdate=a,h._isConnectedToTicker=!1,h.animationSpeed=1,h.loop=!0,h.updateAnchor=!1,h.onComplete=null,h.onFrameChange=null,h.onLoop=null,h._currentTime=0,h._playing=!1,h._previousFrame=null,h.textures=o,h}return function sprite_animated_es_extends(i,o){function __(){this.constructor=i}Yr(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}(AnimatedSprite,i),AnimatedSprite.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(re.a.shared.remove(this.update,this),this._isConnectedToTicker=!1))},AnimatedSprite.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(re.a.shared.add(this.update,this,re.c.HIGH),this._isConnectedToTicker=!0))},AnimatedSprite.prototype.gotoAndStop=function(i){this.stop();var o=this.currentFrame;this._currentTime=i,o!==this.currentFrame&&this.updateTexture()},AnimatedSprite.prototype.gotoAndPlay=function(i){var o=this.currentFrame;this._currentTime=i,o!==this.currentFrame&&this.updateTexture(),this.play()},AnimatedSprite.prototype.update=function(i){var o=this.animationSpeed*i,a=this.currentFrame;if(null!==this._durations){var h=this._currentTime%1*this._durations[this.currentFrame];for(h+=o/60*1e3;h<0;)this._currentTime--,h+=this._durations[this.currentFrame];var c=Math.sign(this.animationSpeed*i);for(this._currentTime=Math.floor(this._currentTime);h>=this._durations[this.currentFrame];)h-=this._durations[this.currentFrame]*c,this._currentTime+=c;this._currentTime+=h/this._durations[this.currentFrame]}else this._currentTime+=o;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):a!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<a||this.animationSpeed<0&&this.currentFrame>a)&&this.onLoop(),this.updateTexture())},AnimatedSprite.prototype.updateTexture=function(){var i=this.currentFrame;this._previousFrame!==i&&(this._previousFrame=i,this._texture=this._textures[i],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},AnimatedSprite.prototype.destroy=function(o){this.stop(),i.prototype.destroy.call(this,o),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},AnimatedSprite.fromFrames=function(i){for(var o=[],a=0;a<i.length;++a)o.push(de.G.from(i[a]));return new AnimatedSprite(o)},AnimatedSprite.fromImages=function(i){for(var o=[],a=0;a<i.length;++a)o.push(de.G.from(i[a]));return new AnimatedSprite(o)},Object.defineProperty(AnimatedSprite.prototype,"totalFrames",{get:function get(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(AnimatedSprite.prototype,"textures",{get:function get(){return this._textures},set:function set(i){if(i[0]instanceof de.G)this._textures=i,this._durations=null;else{this._textures=[],this._durations=[];for(var o=0;o<i.length;o++)this._textures.push(i[o].texture),this._durations.push(i[o].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(AnimatedSprite.prototype,"currentFrame",{get:function get(){var i=Math.floor(this._currentTime)%this._textures.length;return i<0&&(i+=this._textures.length),i},enumerable:!1,configurable:!0}),Object.defineProperty(AnimatedSprite.prototype,"playing",{get:function get(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(AnimatedSprite.prototype,"autoUpdate",{get:function get(){return this._autoUpdate},set:function set(i){i!==this._autoUpdate&&(this._autoUpdate=i,!this._autoUpdate&&this._isConnectedToTicker?(re.a.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(re.a.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),AnimatedSprite}(vt),Kr=function pixi_es_extendStatics(i,o){return(Kr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)};function pixi_es_extends(i,o){function __(){this.constructor=i}Kr(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}var Zr="5.0.0";function useDeprecated(){var i=this;Object.defineProperties(i,{SVG_SIZE:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),i.SVGResource.SVG_SIZE}},TransformStatic:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),i.Transform}},TransformBase:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.TransformBase class has been removed, use PIXI.Transform"),i.Transform}},TRANSFORM_MODE:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),i.Renderer}},CanvasRenderTarget:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),i.utils.CanvasRenderTarget}},loader:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.loader instance has moved to PIXI.Loader.shared"),i.Loader.shared}},FilterManager:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),i.systems.FilterSystem}},CanvasTinter:{get:function get(){return Object(R.deprecation)("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),i.canvasUtils}},GroupD8:{get:function get(){return Object(R.deprecation)("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),i.groupD8}}}),i.accessibility={},Object.defineProperties(i.accessibility,{AccessibilityManager:{get:function get(){return Object(R.deprecation)("5.3.0","PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager"),i.AccessibilityManager}}}),i.interaction={},Object.defineProperties(i.interaction,{InteractionManager:{get:function get(){return Object(R.deprecation)("5.3.0","PIXI.accessibility.InteractionManager moved to PIXI.InteractionManager"),i.InteractionManager}},InteractionData:{get:function get(){return Object(R.deprecation)("5.3.0","PIXI.accessibility.InteractionData moved to PIXI.InteractionData"),i.InteractionData}},InteractionEvent:{get:function get(){return Object(R.deprecation)("5.3.0","PIXI.accessibility.InteractionEvent moved to PIXI.InteractionEvent"),i.InteractionEvent}}}),i.prepare={},Object.defineProperties(i.prepare,{BasePrepare:{get:function get(){return Object(R.deprecation)("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),i.BasePrepare}},Prepare:{get:function get(){return Object(R.deprecation)("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),i.Prepare}},CanvasPrepare:{get:function get(){return Object(R.deprecation)("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),i.CanvasPrepare}}}),i.extract={},Object.defineProperties(i.extract,{Extract:{get:function get(){return Object(R.deprecation)("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),i.Extract}},CanvasExtract:{get:function get(){return Object(R.deprecation)("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),i.CanvasExtract}}}),i.extras={},Object.defineProperties(i.extras,{TilingSprite:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),i.TilingSprite}},TilingSpriteRenderer:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),i.TilingSpriteRenderer}},AnimatedSprite:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),i.AnimatedSprite}},BitmapText:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),i.BitmapText}}}),i.TilingSprite.fromFrame=function fromFrame(o,a,h){return Object(R.deprecation)("5.3.0","TilingSprite.fromFrame is deprecated, use TilingSprite.from"),i.TilingSprite.from(o,{width:a,height:h})},i.TilingSprite.fromImage=function fromImage(o,a,h,c){return void 0===c&&(c={}),Object(R.deprecation)("5.3.0","TilingSprite.fromImage is deprecated, use TilingSprite.from"),c&&"object"!=_typeof2(c)&&(c={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),c.width=a,c.height=h,i.TilingSprite.from(o,c)},Object.defineProperties(i.utils,{getSvgSize:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),i.resources.SVGResource.getSize}}}),i.mesh={},Object.defineProperties(i.mesh,{Mesh:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),i.SimpleMesh}},NineSlicePlane:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),i.NineSlicePlane}},Plane:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),i.SimplePlane}},Rope:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),i.SimpleRope}},RawMesh:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),i.Mesh}},CanvasMeshRenderer:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),i.CanvasMeshRenderer}},MeshRenderer:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),i.MeshRenderer}}}),i.particles={},Object.defineProperties(i.particles,{ParticleContainer:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),i.ParticleContainer}},ParticleRenderer:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),i.ParticleRenderer}}}),i.ticker={},Object.defineProperties(i.ticker,{Ticker:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),i.Ticker}},shared:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),i.Ticker.shared}}}),i.loaders={},Object.defineProperties(i.loaders,{Loader:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.loaders.Loader class has moved to PIXI.Loader"),i.Loader}},Resource:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),i.LoaderResource}},bitmapFontParser:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),i.BitmapFontLoader.use}},parseBitmapFontData:{get:function get(){Object(R.deprecation)(Zr,"PIXI.loaders.parseBitmapFontData function has removed")}},spritesheetParser:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),i.SpritesheetLoader.use}},getResourcePath:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),i.SpritesheetLoader.getResourcePath}}}),i.Loader.addPixiMiddleware=function addPixiMiddleware(o){return Object(R.deprecation)(Zr,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),i.loaders.Loader.registerPlugin({use:o()})};var o=function eventToSignal(i){return"on"+i.charAt(0).toUpperCase()+i.slice(1)};Object.assign(i.Loader.prototype,{on:function on(i){var a=o(i);Object(R.deprecation)(Zr,"PIXI.Loader#on is completely deprecated, use PIXI.Loader#"+a+".add")},once:function once(i){var a=o(i);Object(R.deprecation)(Zr,"PIXI.Loader#once is completely deprecated, use PIXI.Loader#"+a+".once")},off:function off(i){var a=o(i);Object(R.deprecation)(Zr,"PIXI.Loader#off is completely deprecated, use PIXI.Loader#"+a+".detach")}}),Object.defineProperty(i.extract,"WebGLExtract",{get:function get(){return Object(R.deprecation)(Zr,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),i.Extract}}),Object.defineProperty(i.prepare,"WebGLPrepare",{get:function get(){return Object(R.deprecation)(Zr,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),i.Prepare}}),i.Container.prototype._renderWebGL=function _renderWebGL(i){Object(R.deprecation)(Zr,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(i)},i.Container.prototype.renderWebGL=function renderWebGL(i){Object(R.deprecation)(Zr,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(i)},i.DisplayObject.prototype.renderWebGL=function renderWebGL(i){Object(R.deprecation)(Zr,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(i)},i.Container.prototype.renderAdvancedWebGL=function renderAdvancedWebGL(i){Object(R.deprecation)(Zr,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(i)},Object.defineProperties(i.settings,{TRANSFORM_MODE:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function set(){Object(R.deprecation)(Zr,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var a=i.BaseTexture;a.prototype.loadSource=function loadSource(o){Object(R.deprecation)(Zr,"PIXI.BaseTexture.loadSource method has been deprecated");var a=i.resources.autoDetectResource(o);a.internal=!0,this.setResource(a),this.update()};var h=!1;Object.defineProperties(a.prototype,{hasLoaded:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function get(){var i;return Object(R.deprecation)(Zr,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),null===(i=this.resource)||void 0===i?void 0:i.url},set:function set(i){Object(R.deprecation)(Zr,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=i)}},source:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource.source},set:function set(i){Object(R.deprecation)(Zr,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=i)}},premultiplyAlpha:{get:function get(){return Object(R.deprecation)("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function set(i){Object(R.deprecation)("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(i)}},_id:{get:function get(){return h||(Object(R.deprecation)("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),h=!0),this._batchLocation},set:function set(i){this._batchLocation=i}}}),a.fromImage=function fromImage(i,o,h,c){Object(R.deprecation)(Zr,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");var l={scale:c,crossorigin:o};return a.from(i,{scaleMode:h,resourceOptions:l})},a.fromCanvas=function fromCanvas(i,o){return Object(R.deprecation)(Zr,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),a.from(i,{scaleMode:o})},a.fromSVG=function fromSVG(i,o,h,c){Object(R.deprecation)(Zr,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");var l={scale:c,crossorigin:o};return a.from(i,{scaleMode:h,resourceOptions:l})},Object.defineProperties(i.resources.ImageResource.prototype,{premultiplyAlpha:{get:function get(){return Object(R.deprecation)("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function set(i){Object(R.deprecation)("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(i)}}}),i.Point.prototype.copy=function copy(i){return Object(R.deprecation)(Zr,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(i)},i.ObservablePoint.prototype.copy=function copy(i){return Object(R.deprecation)(Zr,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(i)},i.Rectangle.prototype.copy=function copy(i){return Object(R.deprecation)(Zr,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(i)},i.Matrix.prototype.copy=function copy(i){return Object(R.deprecation)(Zr,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(i)},i.systems.StateSystem.prototype.setState=function setState(i){return Object(R.deprecation)("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(i)},Object.assign(i.systems.FilterSystem.prototype,{getRenderTarget:function getRenderTarget(i,o){return Object(R.deprecation)(Zr,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(null,o)},returnRenderTarget:function returnRenderTarget(i){Object(R.deprecation)(Zr,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(i)},calculateScreenSpaceMatrix:function calculateScreenSpaceMatrix(i){Object(R.deprecation)(Zr,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var o=i.identity(),a=this.activeState,h=a.sourceFrame,c=a.destinationFrame;return o.translate(h.x/c.width,h.y/c.height),o.scale(c.width,c.height),o},calculateNormalizedScreenSpaceMatrix:function calculateNormalizedScreenSpaceMatrix(i){Object(R.deprecation)(Zr,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var o=this.activeState,a=o.sourceFrame,h=o.destinationFrame,c=i.identity();c.translate(a.x/h.width,a.y/h.height);var l=h.width/a.width,m=h.height/a.height;return c.scale(l,m),c}}),Object.defineProperties(i.RenderTexture.prototype,{sourceFrame:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function get(){return Object(R.deprecation)(Zr,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var c=function(i){function BlurXFilter(o,a,h,c){return Object(R.deprecation)(Zr,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),i.call(this,!0,o,a,h,c)||this}return pixi_es_extends(BlurXFilter,i),BlurXFilter}(i.filters.BlurFilterPass),l=function(i){function BlurYFilter(o,a,h,c){return Object(R.deprecation)(Zr,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),i.call(this,!1,o,a,h,c)||this}return pixi_es_extends(BlurYFilter,i),BlurYFilter}(i.filters.BlurFilterPass);Object.assign(i.filters,{BlurXFilter:c,BlurYFilter:l});var m=i.Sprite,g=i.Texture,_=i.Graphics;function spriteFrom(i,o,a,h){return Object(R.deprecation)(Zr,"PIXI.Sprite."+i+" method is deprecated, use PIXI.Sprite.from"),m.from(o,{resourceOptions:{scale:h,crossorigin:a}})}function textureFrom(i,o,a,h){return Object(R.deprecation)(Zr,"PIXI.Texture."+i+" method is deprecated, use PIXI.Texture.from"),g.from(o,{resourceOptions:{scale:h,crossorigin:a}})}_.prototype.generateCanvasTexture||(_.prototype.generateCanvasTexture=function generateCanvasTexture(){Object(R.deprecation)(Zr,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(_.prototype,"graphicsData",{get:function get(){return Object(R.deprecation)(Zr,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}}),m.fromImage=spriteFrom.bind(null,"fromImage"),m.fromSVG=spriteFrom.bind(null,"fromSVG"),m.fromCanvas=spriteFrom.bind(null,"fromCanvas"),m.fromVideo=spriteFrom.bind(null,"fromVideo"),m.fromFrame=spriteFrom.bind(null,"fromFrame"),g.fromImage=textureFrom.bind(null,"fromImage"),g.fromSVG=textureFrom.bind(null,"fromSVG"),g.fromCanvas=textureFrom.bind(null,"fromCanvas"),g.fromVideo=textureFrom.bind(null,"fromVideo"),g.fromFrame=textureFrom.bind(null,"fromFrame"),Object.defineProperty(i.AbstractRenderer.prototype,"autoResize",{get:function get(){return Object(R.deprecation)(Zr,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function set(i){Object(R.deprecation)(Zr,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=i}}),Object.defineProperty(i.Renderer.prototype,"textureManager",{get:function get(){return Object(R.deprecation)(Zr,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),i.utils.mixins={mixin:function mixin(){Object(R.deprecation)(Zr,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function delayMixin(){Object(R.deprecation)(Zr,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function performMixins(){Object(R.deprecation)(Zr,"PIXI.utils.mixins.performMixins function is no longer available")}},Object.defineProperty(i.BitmapText.prototype,"font",{get:function get(){return Object(R.deprecation)("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),{name:this._fontName,size:this._fontSize,tint:this._tint,align:this._align}},set:function set(o){if(Object(R.deprecation)("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),o){var a={font:o};this._upgradeStyle(a),a.fontSize=a.fontSize||i.BitmapFont.available[a.fontName].size,this._fontName=a.fontName,this._fontSize=a.fontSize,this.dirty=!0}}})}de.B.registerPlugin("accessibility",te),de.B.registerPlugin("extract",ye),de.B.registerPlugin("interaction",ce),de.B.registerPlugin("particle",We),de.B.registerPlugin("prepare",Mt),de.B.registerPlugin("batch",de.i),de.B.registerPlugin("tilingSprite",jt),ze.registerPlugin(ir),ze.registerPlugin(Dt),pe.registerPlugin(re.b),pe.registerPlugin(De);var Qr="5.3.0",Jr={AlphaFilter:or,BlurFilter:Or,BlurFilterPass:Pr,ColorMatrixFilter:Rr,DisplacementFilter:Mr,FXAAFilter:Fr,NoiseFilter:Dr}},function(i,o,a){a.d(o,"a",(function(){return c})),a.d(o,"b",(function(){return l}));var h=a(24),c=Object(h.a)(window.navigator),l={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function maxRecommendedTextures(i){var o,a=!0;(c.tablet||c.phone)&&(c.apple.device&&(o=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(o[1],10)<11&&(a=!1),c.android.device&&(o=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(o[1],10)<7&&(a=!1));return a?i:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:c.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:function canUploadSameBuffer(){return!c.apple.device}(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1}},function(i,o,a){function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}a.d(o,"a",(function(){return h}));var h=function(){function InnerShare(){!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,InnerShare)}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(InnerShare,null,[{key:"setRatio",value:function setRatio(i){this.ratio=i}},{key:"getRatio",value:function getRatio(){return this.ratio}},{key:"set",value:function set(i,o){this[i]=o}},{key:"get",value:function get(i){return this[i]}}]),InnerShare}()},function(i,o,a){a.d(o,"c",(function(){return h})),a.d(o,"a",(function(){return c})),a.d(o,"e",(function(){return m})),a.d(o,"d",(function(){return l})),a.d(o,"b",(function(){return g}));var h={FIXED:0,FREE:1},c={DEFAULT:0,FIT:1,FILL:2},l={LINEAR:0,NEAREST:1},m={STATIC:0,DYNAMIC:1},g={SLOW:0,FAST:1},_={RenderType:h,CoordinateMode:c,SpriteType:m,ScaleMode:l,LoaderMode:g};o.f=_},function(i,o,a){a.d(o,"a",(function(){return m}));var h=a(40);function _arrayLikeToArray(i,o){(null==o||o>i.length)&&(o=i.length);for(var a=0,h=new Array(o);a<o;a++)h[a]=i[a];return h}function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var c=Math.PI/180,l=180/Math.PI,m=function(){function Utility(){!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Utility)}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(Utility,null,[{key:"randomRange",value:function randomRange(i,o){return i+Math.random()*(o-i)}},{key:"randomIntRange",value:function randomIntRange(i,o){return Math.round(this.randomRange(i,o))}},{key:"toRadians",value:function toRadians(i){return i*c}},{key:"toDegrees",value:function toDegrees(i){return i*l}},{key:"getUniqueId",value:function getUniqueId(){return"_"+Math.random().toString(36).substr(2,9)}},{key:"decodeUTF8",value:function decodeUTF8(i){for(var o=0,a="";o<i.length;){var h=i[o++];if(h>127)if(h>191&&h<224){if(o>=i.length)throw new Error("UTF-8 decode: incomplete 2-byte sequence");h=(31&h)<<6|63&i[o++]}else if(h>223&&h<240){if(o+1>=i.length)throw new Error("UTF-8 decode: incomplete 3-byte sequence");h=(15&h)<<12|(63&i[o++])<<6|63&i[o++]}else{if(!(h>239&&h<248))throw new Error("UTF-8 decode: unknown multibyte start 0x"+h.toString(16)+" at index "+(o-1));if(o+2>=i.length)throw new Error("UTF-8 decode: incomplete 4-byte sequence");h=(7&h)<<18|(63&i[o++])<<12|(63&i[o++])<<6|63&i[o++]}if(h<=65535)a+=String.fromCharCode(h);else{if(!(h<=1114111))throw new Error("UTF-8 decode: code point 0x"+h.toString(16)+" exceeds UTF-16 reach");h-=65536,a+=String.fromCharCode(h>>10|55296),a+=String.fromCharCode(1023&h|56320)}}return a}},{key:"leadingZeros",value:function leadingZeros(i,o){var a="";if((i=i.toString()).length<o)for(var h=0;h<o-i.length;h++)a+="0";return a+i}},{key:"sayHello",value:function sayHello(){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var i,o=["\n %c %c %c ▣ webgameJS ".concat(h.version," ▣  %c  %c  http://webgamejs.zip-lab.co.kr/  %c\n"),"background: #0084FF; padding:5px 0;","background: #0084FF; padding:5px 0;","color: #5084FF; background: #030307; padding:5px 0;","background: #0084FF; padding:5px 0;","background: #bbcdff; padding:5px 0;","background: #0084FF; padding:5px 0;"];(i=window.console).log.apply(i,o)}else window.console&&window.console.log("webgameJS ".concat(h.version," - http://webgamejs.zip-lab.co.kr/"))}},{key:"setVisibilityEvent",value:function setVisibilityEvent(i){var o=function _slicedToArray(i,o){return function _arrayWithHoles(i){if(Array.isArray(i))return i}(i)||function _iterableToArrayLimit(i,o){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(i)){var a=[],h=!0,c=!1,l=void 0;try{for(var m,g=i[Symbol.iterator]();!(h=(m=g.next()).done)&&(a.push(m.value),!o||a.length!==o);h=!0);}catch(i){c=!0,l=i}finally{try{h||null==g.return||g.return()}finally{if(c)throw l}}return a}}(i,o)||function _unsupportedIterableToArray(i,o){if(i){if("string"==typeof i)return _arrayLikeToArray(i,o);var a=Object.prototype.toString.call(i).slice(8,-1);return"Object"===a&&i.constructor&&(a=i.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(i,o):void 0}}(i,o)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object.entries({hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"}).find((function(i){return i[0]in document})),2),a=o[0],h=o[1];!i.isIOS&&document.addEventListener(h,this.callVisibilityEvent.bind(this,i,a)),i.isAndroid&&document.addEventListener("resume",this.callVisibilityEvent.bind(this,i,a),!1)}},{key:"callVisibilityEvent",value:function callVisibilityEvent(i,o){document[o]?(i._systemPause=!0,i.Sound._setSystemMute(!0)):(i._systemPause=!1,i.Sound._setSystemMute(!1))}},{key:"arrayBufferToString",value:function arrayBufferToString(i,o,a){var h=new Blob([i],{type:"text/plain"}),c=new FileReader;c.onload=function(i){a(i.target.result)},c.readAsText(h,o)}}]),Utility}()},function(i,o,a){a.d(o,"a",(function(){return m})),a.d(o,"b",(function(){return g})),a.d(o,"c",(function(){return h}));var h,c=a(5);c.b.TARGET_FPMS=.06,function(i){i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY"}(h||(h={}));var l=function(){function TickerListener(i,o,a,h){void 0===o&&(o=null),void 0===a&&(a=0),void 0===h&&(h=!1),this.fn=i,this.context=o,this.priority=a,this.once=h,this.next=null,this.previous=null,this._destroyed=!1}return TickerListener.prototype.match=function(i,o){return void 0===o&&(o=null),this.fn===i&&this.context===o},TickerListener.prototype.emit=function(i){this.fn&&(this.context?this.fn.call(this.context,i):this.fn(i));var o=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),o},TickerListener.prototype.connect=function(i){this.previous=i,i.next&&(i.next.previous=this),this.next=i.next,i.next=this},TickerListener.prototype.destroy=function(i){void 0===i&&(i=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var o=this.next;return this.next=i?null:o,this.previous=null,o},TickerListener}(),m=function(){function Ticker(){var i=this;this._head=new l(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/c.b.TARGET_FPMS,this.elapsedMS=1/c.b.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(o){i._requestId=null,i.started&&(i.update(o),i.started&&null===i._requestId&&i._head.next&&(i._requestId=requestAnimationFrame(i._tick)))}}return Ticker.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},Ticker.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},Ticker.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},Ticker.prototype.add=function(i,o,a){return void 0===a&&(a=h.NORMAL),this._addListener(new l(i,o,a))},Ticker.prototype.addOnce=function(i,o,a){return void 0===a&&(a=h.NORMAL),this._addListener(new l(i,o,a,!0))},Ticker.prototype._addListener=function(i){var o=this._head.next,a=this._head;if(o){for(;o;){if(i.priority>o.priority){i.connect(a);break}a=o,o=o.next}i.previous||i.connect(a)}else i.connect(a);return this._startIfPossible(),this},Ticker.prototype.remove=function(i,o){for(var a=this._head.next;a;)a=a.match(i,o)?a.destroy():a.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(Ticker.prototype,"count",{get:function get(){if(!this._head)return 0;for(var i=0,o=this._head;o=o.next;)i++;return i},enumerable:!1,configurable:!0}),Ticker.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},Ticker.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},Ticker.prototype.destroy=function(){if(!this._protected){this.stop();for(var i=this._head.next;i;)i=i.destroy(!0);this._head.destroy(),this._head=null}},Ticker.prototype.update=function(i){var o;if(void 0===i&&(i=performance.now()),i>this.lastTime){if((o=this.elapsedMS=i-this.lastTime)>this._maxElapsedMS&&(o=this._maxElapsedMS),o*=this.speed,this._minElapsedMS){var a=i-this._lastFrame|0;if(a<this._minElapsedMS)return;this._lastFrame=i-a%this._minElapsedMS}this.deltaMS=o,this.deltaTime=this.deltaMS*c.b.TARGET_FPMS;for(var h=this._head,l=h.next;l;)l=l.emit(this.deltaTime);h.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=i},Object.defineProperty(Ticker.prototype,"FPS",{get:function get(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(Ticker.prototype,"minFPS",{get:function get(){return 1e3/this._maxElapsedMS},set:function set(i){var o=Math.min(this.maxFPS,i),a=Math.min(Math.max(0,o)/1e3,c.b.TARGET_FPMS);this._maxElapsedMS=1/a},enumerable:!1,configurable:!0}),Object.defineProperty(Ticker.prototype,"maxFPS",{get:function get(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function set(i){if(0===i)this._minElapsedMS=0;else{var o=Math.max(this.minFPS,i);this._minElapsedMS=1/(o/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(Ticker,"shared",{get:function get(){if(!Ticker._shared){var i=Ticker._shared=new Ticker;i.autoStart=!0,i._protected=!0}return Ticker._shared},enumerable:!1,configurable:!0}),Object.defineProperty(Ticker,"system",{get:function get(){if(!Ticker._system){var i=Ticker._system=new Ticker;i.autoStart=!0,i._protected=!0}return Ticker._system},enumerable:!1,configurable:!0}),Ticker}(),g=function(){function TickerPlugin(){}return TickerPlugin.init=function(i){var o=this;i=Object.assign({autoStart:!0,sharedTicker:!1},i),Object.defineProperty(this,"ticker",{set:function set(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,h.LOW)},get:function get(){return this._ticker}}),this.stop=function(){o._ticker.stop()},this.start=function(){o._ticker.start()},this._ticker=null,this.ticker=i.sharedTicker?m.shared:new m,i.autoStart&&this.start()},TickerPlugin.destroy=function(){if(this._ticker){var i=this._ticker;this.ticker=null,i.destroy()}},TickerPlugin}()},function(i,o,a){a.d(o,"a",(function(){return h}));var h=function(){function Runner(i){this.items=[],this._name=i,this._aliasCount=0}return Runner.prototype.emit=function(i,o,a,h,c,l,m,g){if(arguments.length>8)throw new Error("max arguments reached");var _=this,x=_.name,S=_.items;this._aliasCount++;for(var R=0,k=S.length;R<k;R++)S[R][x](i,o,a,h,c,l,m,g);return S===this.items&&this._aliasCount--,this},Runner.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},Runner.prototype.add=function(i){return i[this._name]&&(this.ensureNonAliasedItems(),this.remove(i),this.items.push(i)),this},Runner.prototype.remove=function(i){var o=this.items.indexOf(i);return-1!==o&&(this.ensureNonAliasedItems(),this.items.splice(o,1)),this},Runner.prototype.contains=function(i){return-1!==this.items.indexOf(i)},Runner.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},Runner.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(Runner.prototype,"empty",{get:function get(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(Runner.prototype,"name",{get:function get(){return this._name},enumerable:!1,configurable:!0}),Runner}();Object.defineProperties(h.prototype,{dispatch:{value:h.prototype.emit},run:{value:h.prototype.emit}})},function(i,o,a){var h=a(74),c=a(76);function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}o.parse=urlParse,o.resolve=function urlResolve(i,o){return urlParse(i,!1,!0).resolve(o)},o.resolveObject=function urlResolveObject(i,o){return i?urlParse(i,!1,!0).resolveObject(o):o},o.format=function urlFormat(i){return c.isString(i)&&(i=urlParse(i)),i instanceof Url?i.format():Url.prototype.format.call(i)},o.Url=Url;var l=/^([a-z0-9.+-]+:)/i,m=/:[0-9]*$/,g=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,_=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),x=["'"].concat(_),S=["%","/","?",";","#"].concat(x),R=["/","?","#"],k=/^[+a-z0-9A-Z_-]{0,63}$/,j=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,X={javascript:!0,"javascript:":!0},Y={javascript:!0,"javascript:":!0},q={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Z=a(77);function urlParse(i,o,a){if(i&&c.isObject(i)&&i instanceof Url)return i;var h=new Url;return h.parse(i,o,a),h}Url.prototype.parse=function(i,o,a){if(!c.isString(i))throw new TypeError("Parameter 'url' must be a string, not "+_typeof2(i));var m=i.indexOf("?"),_=-1!==m&&m<i.indexOf("#")?"?":"#",$=i.split(_);$[0]=$[0].replace(/\\/g,"/");var ee=i=$.join(_);if(ee=ee.trim(),!a&&1===i.split("#").length){var te=g.exec(ee);if(te)return this.path=ee,this.href=ee,this.pathname=te[1],te[2]?(this.search=te[2],this.query=o?Z.parse(this.search.substr(1)):this.search.substr(1)):o&&(this.search="",this.query={}),this}var re=l.exec(ee);if(re){var ie=(re=re[0]).toLowerCase();this.protocol=ie,ee=ee.substr(re.length)}if(a||re||ee.match(/^\/\/[^@\/]+@[^@\/]+/)){var ne="//"===ee.substr(0,2);!ne||re&&Y[re]||(ee=ee.substr(2),this.slashes=!0)}if(!Y[re]&&(ne||re&&!q[re])){for(var oe,ae,se=-1,ue=0;ue<R.length;ue++)-1!==(he=ee.indexOf(R[ue]))&&(-1===se||he<se)&&(se=he);for(-1!==(ae=-1===se?ee.lastIndexOf("@"):ee.lastIndexOf("@",se))&&(oe=ee.slice(0,ae),ee=ee.slice(ae+1),this.auth=decodeURIComponent(oe)),se=-1,ue=0;ue<S.length;ue++){var he;-1!==(he=ee.indexOf(S[ue]))&&(-1===se||he<se)&&(se=he)}-1===se&&(se=ee.length),this.host=ee.slice(0,se),ee=ee.slice(se),this.parseHost(),this.hostname=this.hostname||"";var ce="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!ce)for(var de=this.hostname.split(/\./),pe=(ue=0,de.length);ue<pe;ue++){var fe=de[ue];if(fe&&!fe.match(k)){for(var me="",ye=0,_e=fe.length;ye<_e;ye++)fe.charCodeAt(ye)>127?me+="x":me+=fe[ye];if(!me.match(k)){var ve=de.slice(0,ue),xe=de.slice(ue+1),Se=fe.match(j);Se&&(ve.push(Se[1]),xe.unshift(Se[2])),xe.length&&(ee="/"+xe.join(".")+ee),this.hostname=ve.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),ce||(this.hostname=h.toASCII(this.hostname));var be=this.port?":"+this.port:"",we=this.hostname||"";this.host=we+be,this.href+=this.host,ce&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==ee[0]&&(ee="/"+ee))}if(!X[ie])for(ue=0,pe=x.length;ue<pe;ue++){var Te=x[ue];if(-1!==ee.indexOf(Te)){var Ce=encodeURIComponent(Te);Ce===Te&&(Ce=escape(Te)),ee=ee.split(Te).join(Ce)}}var Pe=ee.indexOf("#");-1!==Pe&&(this.hash=ee.substr(Pe),ee=ee.slice(0,Pe));var Oe=ee.indexOf("?");if(-1!==Oe?(this.search=ee.substr(Oe),this.query=ee.substr(Oe+1),o&&(this.query=Z.parse(this.query)),ee=ee.slice(0,Oe)):o&&(this.search="",this.query={}),ee&&(this.pathname=ee),q[ie]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){be=this.pathname||"";var Ae=this.search||"";this.path=be+Ae}return this.href=this.format(),this},Url.prototype.format=function(){var i=this.auth||"";i&&(i=(i=encodeURIComponent(i)).replace(/%3A/i,":"),i+="@");var o=this.protocol||"",a=this.pathname||"",h=this.hash||"",l=!1,m="";this.host?l=i+this.host:this.hostname&&(l=i+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(l+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(m=Z.stringify(this.query));var g=this.search||m&&"?"+m||"";return o&&":"!==o.substr(-1)&&(o+=":"),this.slashes||(!o||q[o])&&!1!==l?(l="//"+(l||""),a&&"/"!==a.charAt(0)&&(a="/"+a)):l||(l=""),h&&"#"!==h.charAt(0)&&(h="#"+h),g&&"?"!==g.charAt(0)&&(g="?"+g),o+l+(a=a.replace(/[?#]/g,(function(i){return encodeURIComponent(i)})))+(g=g.replace("#","%23"))+h},Url.prototype.resolve=function(i){return this.resolveObject(urlParse(i,!1,!0)).format()},Url.prototype.resolveObject=function(i){if(c.isString(i)){var o=new Url;o.parse(i,!1,!0),i=o}for(var a=new Url,h=Object.keys(this),l=0;l<h.length;l++){var m=h[l];a[m]=this[m]}if(a.hash=i.hash,""===i.href)return a.href=a.format(),a;if(i.slashes&&!i.protocol){for(var g=Object.keys(i),_=0;_<g.length;_++){var x=g[_];"protocol"!==x&&(a[x]=i[x])}return q[a.protocol]&&a.hostname&&!a.pathname&&(a.path=a.pathname="/"),a.href=a.format(),a}if(i.protocol&&i.protocol!==a.protocol){if(!q[i.protocol]){for(var S=Object.keys(i),R=0;R<S.length;R++){var k=S[R];a[k]=i[k]}return a.href=a.format(),a}if(a.protocol=i.protocol,i.host||Y[i.protocol])a.pathname=i.pathname;else{for(var j=(i.pathname||"").split("/");j.length&&!(i.host=j.shift()););i.host||(i.host=""),i.hostname||(i.hostname=""),""!==j[0]&&j.unshift(""),j.length<2&&j.unshift(""),a.pathname=j.join("/")}if(a.search=i.search,a.query=i.query,a.host=i.host||"",a.auth=i.auth,a.hostname=i.hostname||i.host,a.port=i.port,a.pathname||a.search){var X=a.pathname||"",Z=a.search||"";a.path=X+Z}return a.slashes=a.slashes||i.slashes,a.href=a.format(),a}var $=a.pathname&&"/"===a.pathname.charAt(0),ee=i.host||i.pathname&&"/"===i.pathname.charAt(0),te=ee||$||a.host&&i.pathname,re=te,ie=a.pathname&&a.pathname.split("/")||[],ne=(j=i.pathname&&i.pathname.split("/")||[],a.protocol&&!q[a.protocol]);if(ne&&(a.hostname="",a.port=null,a.host&&(""===ie[0]?ie[0]=a.host:ie.unshift(a.host)),a.host="",i.protocol&&(i.hostname=null,i.port=null,i.host&&(""===j[0]?j[0]=i.host:j.unshift(i.host)),i.host=null),te=te&&(""===j[0]||""===ie[0])),ee)a.host=i.host||""===i.host?i.host:a.host,a.hostname=i.hostname||""===i.hostname?i.hostname:a.hostname,a.search=i.search,a.query=i.query,ie=j;else if(j.length)ie||(ie=[]),ie.pop(),ie=ie.concat(j),a.search=i.search,a.query=i.query;else if(!c.isNullOrUndefined(i.search))return ne&&(a.hostname=a.host=ie.shift(),(he=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@"))&&(a.auth=he.shift(),a.host=a.hostname=he.shift())),a.search=i.search,a.query=i.query,c.isNull(a.pathname)&&c.isNull(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.href=a.format(),a;if(!ie.length)return a.pathname=null,a.search?a.path="/"+a.search:a.path=null,a.href=a.format(),a;for(var oe=ie.slice(-1)[0],ae=(a.host||i.host||ie.length>1)&&("."===oe||".."===oe)||""===oe,se=0,ue=ie.length;ue>=0;ue--)"."===(oe=ie[ue])?ie.splice(ue,1):".."===oe?(ie.splice(ue,1),se++):se&&(ie.splice(ue,1),se--);if(!te&&!re)for(;se--;se)ie.unshift("..");!te||""===ie[0]||ie[0]&&"/"===ie[0].charAt(0)||ie.unshift(""),ae&&"/"!==ie.join("/").substr(-1)&&ie.push("");var he,ce=""===ie[0]||ie[0]&&"/"===ie[0].charAt(0);return ne&&(a.hostname=a.host=ce?"":ie.length?ie.shift():"",(he=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@"))&&(a.auth=he.shift(),a.host=a.hostname=he.shift())),(te=te||a.host&&ie.length)&&!ce&&ie.unshift(""),ie.length?a.pathname=ie.join("/"):(a.pathname=null,a.path=null),c.isNull(a.pathname)&&c.isNull(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.auth=i.auth||a.auth,a.slashes=a.slashes||i.slashes,a.href=a.format(),a},Url.prototype.parseHost=function(){var i=this.host,o=m.exec(i);o&&(":"!==(o=o[0])&&(this.port=o.substr(1)),i=i.substr(0,i.length-o.length)),i&&(this.hostname=i)}},function(i,o,a){a.d(o,"a",(function(){return _}));var h=a(6);function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var c=function(){function RatioPoint(i,o){var a=this;!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,RatioPoint),this._x=i,this._y=o,this.outter={},Object.defineProperty(this.outter,"x",{get:function get(){return a._x},set:function set(i){return a._x=i}}),Object.defineProperty(this.outter,"y",{get:function get(){return a._y},set:function set(i){return a._y=i}}),this.inner=this._calculate()}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(RatioPoint,[{key:"_calculate",value:function _calculate(){var i=h.a.get("ratio");return{x:this.outter.x*i,y:this.outter.y*i}}},{key:"setOnChangeX",value:function setOnChangeX(i){this._onChangeX=i}},{key:"setOnChangeY",value:function setOnChangeY(i){this._onChangeY=i}},{key:"x",set:function set(i){this.outter.x=i,this.inner=this._calculate(),this._onChangeX&&this._onChangeX(i)},get:function get(){return this.outter.x}},{key:"y",set:function set(i){this.outter.y=i,this.inner=this._calculate(),this._onChangeY&&this._onChangeY(i)},get:function get(){return this.outter.y}},{key:"_x_no_callback",set:function set(i){this.outter.x=i,this.inner=this._calculate()}},{key:"_y_no_callback",set:function set(i){this.outter.y=i,this.inner=this._calculate()}}]),RatioPoint}(),l=a(7),m=a(8);function ownKeys(i,o){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(i);o&&(h=h.filter((function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable}))),a.push.apply(a,h)}return a}function _defineProperty(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}function DisplayObject_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var g=0,_=function(){function DisplayObject(i,o){var a=this;!function DisplayObject_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,DisplayObject),this._pixiObject=i,i._WGObject=this;var m={x:0,y:0,scale:{x:1,y:1},isRoot:!1,inCamera:!0,zOrder:0,rotation:0,pivot:{x:0,y:0},mask:null,alpha:1,visible:!0,tint:16777215,width:o._isGraphics?0:this._pixiObject.width,height:o._isGraphics?0:this._pixiObject.height,anchor:{x:.5,y:.5},mode:l.a.DEFAULT},_=Object.assign({},m,o),x=h.a.get("screen");this._lastEvent=[],this._mode=_.mode,this._inCamera=_.inCamera,this._updateIndex=g++,this._position=new c(_.x,_.y);var S=_.scale?_.scale.constructor===Number?{x:_.scale,y:_.scale}:{x:_.scale.x||1,y:_.scale.y||1}:{x:1,y:1};this._scale=new c(S.x,S.y),this._zOrder=_.zOrder,this.rotation=_.rotation,this.pivot.set(_.pivot.x,_.pivot.y),this.mask=_.mask,this.alpha=_.alpha,this.visible=_.visible,this.tint=_.tint;var R=function scaleChange(i,o){var h=x.ratio,c=x.widthRatio,m=x.heightRatio,g="x"===i?c:m;a._scale["_".concat(i,"_no_callback")]=o,a._pixiObject.scale[i]=a._isRoot?a._scale.inner[i]:a._scale[i],!a._isRoot&&a._parent&&a._parent._mode===l.a.FILL?a._pixiObject.scale[i]=a._scale[i]*g/h:a._isCamera&&(a._pixiObject.scale[i]=a._scale.inner[i]*a._cameraZoom[i])};if(this._scale.setOnChangeX((function(i){return R("x",i)})),this._scale.setOnChangeY((function(i){return R("y",i)})),this.anchor&&this.anchor.set(_.anchor.x,_.anchor.y),this._inCamera&&this._mode!==l.a.DEFAULT&&(this._inCamera=!1),_.parent){var k=h.a.get("manager"),j=h.a.get("stage");if(_.parent.constructor===String){var X=k._containers[_.parent];X&&X.addChild(this)}else _.parent===j?j.addRootChild(this):_.parent.addChild(this)}i.texture&&(this._collisionBox={width:this.width,height:this.height}),this._calculate()}return function DisplayObject_createClass(i,o,a){o&&DisplayObject_defineProperties(i.prototype,o),a&&DisplayObject_defineProperties(i,a)}(DisplayObject,[{key:"_setX",value:function _setX(i){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=h.a.get("screen"),c=a.ratio,m=a.options,g=a.gameSize,_=a.clientSize,x=a.widthRatio;if(a.heightRatio,o?this._position.x=i:this._position._x_no_callback=i,this._pixiObject.position.x=this._isRoot?this._position.inner.x:this._position.x,this._isRoot&&this._mode!==l.a.DEFAULT){var S=(_.width-g.width*c)/2,R=i*x;this._pixiObject.position.x=R-S}else if(!this._isRoot&&this._parent&&this._parent._mode!==l.a.DEFAULT)this._pixiObject.position.x=this._position.x*x/c;else if(this._isCamera){var k=m.renderStyle===l.c.FIXED?g.width/2*c:_.width/2;this._pixiObject.position.x=this._position.inner.x*this._cameraZoom.x+k-this._cameraPosition.inner.x*this._cameraZoom.x}}},{key:"_setY",value:function _setY(i){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=h.a.get("screen"),c=a.ratio,m=a.options,g=a.gameSize,_=a.clientSize,x=(a.widthRatio,a.heightRatio);if(o?this._position.y=i:this._position._y_no_callback=i,this._pixiObject.position.y=this._isRoot?this._position.inner.y:this._position.y,this._isRoot&&this._mode!==l.a.DEFAULT){var S=(_.height-g.height*c)/2,R=i*x;this._pixiObject.position.y=R-S}else this._parent&&this._parent._mode!==l.a.DEFAULT&&(this._pixiObject.position.y=this._position.y*x/c);if(this._isCamera){var k=m.renderStyle===l.c.FIXED?g.height/2*c:_.height/2;this._pixiObject.position.y=this._position.inner.y*this._cameraZoom.y+k-this._cameraPosition.inner.y*this._cameraZoom.y}}},{key:"setPosition",value:function setPosition(i,o){this.x=i,this.y=o}},{key:"getGlobalPosition",value:function getGlobalPosition(){if(this._isRoot)return this.position;var i=this._parent.getGlobalPosition(),o=this._parent.scale;return{x:i.x+this.position.x*o.x,y:i.y+this.position.y*o.y}}},{key:"on",value:function on(i,o){var a=h.a.get("screen");this._pixiObject.interactive=!0;var c=function _event(i){var h=i.data.global;i.calc={x:(h.x-(a.clientSize.width-a.gameSize.width*a.ratio)/2)/a.ratio,y:(h.y-(a.clientSize.height-a.gameSize.height*a.ratio)/2)/a.ratio},o(i)};if(i.constructor===String)this._pixiObject.on(i,c);else if(i.constructor===Array)for(var l=0;l<i.length;l++)this.on(i[l],c);var g=m.a.getUniqueId();return this._lastEvent.push({eventName:i,fn:c,id:g}),g}},{key:"off",value:function off(i,o){if(o){var a=this._lastEvent.findIndex((function(i){return o===i.id}));this._pixiObject.off(i,this._lastEvent[a].fn),this._lastEvent.splice(a,1)}else{this._pixiObject.off(i);for(var h=this._lastEvent.length-1;h>=0;h--)i===this._lastEvent[h].eventName&&this._lastEvent.splice(h,1)}0===this._lastEvent.length&&(this._pixiObject.interactive=!1)}},{key:"offLast",value:function offLast(){if(this._lastEvent.length){var i=this._lastEvent.pop(),o=i.eventName,a=i.fn;this._pixiObject.off(o,a),0===this._lastEvent.length&&(this._pixiObject.interactive=!1)}}},{key:"removeAllListener",value:function removeAllListener(i){this._pixiObject.removeAllListener(i),this._lastEvent=[],this._pixiObject.interactive=!1}},{key:"_cubismSize",value:function _cubismSize(i){var o=this.scale.x*i/this.width,a=this.scale.y*height/this.height;this.scale={x:100*o,y:100*a}}},{key:"_cubismSizeY",value:function _cubismSizeY(i){var o=this.scale.y*i/this.height;this.scale={x:this.scale.x,y:100*o}}},{key:"_cubismSizeX",value:function _cubismSizeX(i){var o=this.scale.x*i/this.width;this.scale={x:100*o,y:this.scale.y}}},{key:"_addCamera",value:function _addCamera(){this._isCamera=!0;var i=h.a.get("camera");this._cameraPosition=new c(i.position.x,i.position.y),this._cameraZoom=new c(1,1)}},{key:"_cameraUpdate",value:function _cameraUpdate(i,o,a){this._cameraPosition.x=i,this._cameraPosition.y=o,this._cameraZoom.x=this._cameraZoom.y=a,this._setX(this.x,!1),this._setY(this.y,!1),this.scale=this.scale}},{key:"_calculate",value:function _calculate(){if(this.x=this.x,this.y=this.y,this.scale={x:this._scale.x,y:this._scale.y},this._mode!==l.a.DEFAULT)for(var i=0;i<this._pixiObject.children.length;i++)this._pixiObject.children[i]._WGObject._calculate()}},{key:"AABB",value:function AABB(i){var o=this.getCollisionBox(),a=i.getCollisionBox();return!(o.right<a.left||o.bottom<a.top||o.left>a.right||o.top>a.bottom)}},{key:"getCollisionBox",value:function getCollisionBox(){if(this._pixiObject.texture)return{width:this._collisionBox.width*this.scale.x,height:this._collisionBox.height*this.scale.y,left:this.x-this._collisionBox.width*this.scale.x/2,right:this.x+this._collisionBox.width*this.scale.x/2,top:this.y-this._collisionBox.height*this.scale.y/2,bottom:this.y+this._collisionBox.height*this.scale.y/2};for(var i={},o=0;o<this._pixiObject.children.length;o++){var a=this._pixiObject.children[o]._WGObject.getCollisionBox(),h=a.left,c=a.right,l=a.top,m=a.bottom;0===o?(i.left=h,i.right=c,i.top=l,i.bottom=m):(i.left=Math.min(i.left,h),i.right=Math.max(i.right,c),i.top=Math.min(i.top,l),i.bottom=Math.max(i.bottom,m))}return function _objectSpread(i){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?ownKeys(Object(a),!0).forEach((function(o){_defineProperty(i,o,a[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(a,o))}))}return i}({width:i.right-i.left,height:i.bottom-i.top},i)}},{key:"setCollisionBox",value:function setCollisionBox(i,o){this._pixiObject.texture&&(this._collisionBox={width:i/this.scale.x,height:o/this.scale.y})}},{key:"destroy",value:function destroy(){this._parent&&(this._parent.removeChild(this),this._pixiObject.destroy(),"Cubism"===this.constructor.name&&h.a.get("manager").deleteCubism(this))}},{key:"x",set:function set(i){this._setX(i)},get:function get(){return this._position.x}},{key:"y",set:function set(i){this._setY(i)},get:function get(){return this._position.y}},{key:"position",get:function get(){return this._position}},{key:"scale",set:function set(i){i.constructor===Number?(this._scale.x=i,this._scale.y=i):(this._scale.x=i.x,this._scale.y=i.y)},get:function get(){return this._scale}},{key:"width",get:function get(){var i=h.a.get("screen"),o=1,a=1;return!this._isRoot&&this._rootParent&&this._rootParent.get()._mode===l.a.FILL&&(o=i.widthRatio,a=i.ratio),this._isRoot?this._pixiObject.width/i.ratio:this._pixiObject.width/o*a},set:function set(i){if(this._pixiObject.tileScale)this._pixiObject.width=i;else{var o=(0!==this.width?this.scale.x:1)*(i/(0!==this.width?this.width:this.texture.width));this.scale={x:o,y:this.scale.y}}}},{key:"height",get:function get(){var i=h.a.get("screen"),o=1,a=1;return!this._isRoot&&this._rootParent&&this._rootParent.get()._mode===l.a.FILL&&(o=i.heightRatio,a=i.ratio),this._isRoot?this._pixiObject.height/i.ratio:this._pixiObject.height/o*a},set:function set(i){if(this._pixiObject.tileScale)this._pixiObject.height=i;else{var o=(0!==this.height?this.scale.y:1)*i/(0!==this.height?this.height:this.texture.height);this.scale={x:this.scale.x,y:o}}}},{key:"rotation",get:function get(){return this._pixiObject.rotation},set:function set(i){this._pixiObject.rotation=i}},{key:"radian",get:function get(){return this._pixiObject.rotation},set:function set(i){this._pixiObject.rotation=i}},{key:"degree",get:function get(){return m.a.toDegrees(this._pixiObject.rotation)},set:function set(i){this._pixiObject.rotation=m.a.toRadians(i)}},{key:"tint",get:function get(){return this._pixiObject.tint},set:function set(i){this._pixiObject.tint=i}},{key:"visible",get:function get(){return this._pixiObject.visible},set:function set(i){this._pixiObject.visible=i}},{key:"alpha",get:function get(){return this._pixiObject.alpha},set:function set(i){this._pixiObject.alpha=i}},{key:"mask",get:function get(){return this._pixiObject._WGObject},set:function set(i){this._pixiObject.mask=i?i._pixiObject:null}},{key:"anchor",get:function get(){return this._pixiObject.anchor}},{key:"pivot",get:function get(){return this._pixiObject.pivot}},{key:"zOrder",set:function set(i){this._zOrder=i,this._parent&&h.a.get("stage")._addDirty(this._parent)},get:function get(){return this._zOrder}},{key:"hitArea",set:function set(i){this._pixiObject.hitArea=i},get:function get(){return this._pixiObject.hitArea}},{key:"filters",set:function set(i){this._pixiObject.filters=i},get:function get(){return this._pixiObject.filters}},{key:"isDestroy",get:function get(){return this._pixiObject._destroyed}}]),DisplayObject}()},function(i,o,a){a.d(o,"a",(function(){return _}));var h=a(4),c=a(12),l=a(31),m=a(6),g=a(8);function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function _typeof(i){return _typeof2(i)}:function _typeof(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":_typeof2(i)})(i)}function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}function _get(i,o,a){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(i,o,a){var h=function _superPropBase(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&null!==(i=_getPrototypeOf(i)););return i}(i,o);if(h){var c=Object.getOwnPropertyDescriptor(h,o);return c.get?c.get.call(a):c.value}})(i,o,a||i)}function _possibleConstructorReturn(i,o){return!o||"object"!==_typeof(o)&&"function"!=typeof o?_assertThisInitialized(i):o}function _assertThisInitialized(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(i){return!1}}function _getPrototypeOf(i){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(i){return i.__proto__||Object.getPrototypeOf(i)})(i)}function _setPrototypeOf(i,o){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(i,o){return i.__proto__=o,i})(i,o)}a(22);var _=function(i){!function _inherits(i,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&_setPrototypeOf(i,o)}(Container,i);var o=function _createSuper(i){return function(){var o,a=_getPrototypeOf(i);if(_isNativeReflectConstruct()){var h=_getPrototypeOf(this).constructor;o=Reflect.construct(a,arguments,h)}else o=a.apply(this,arguments);return _possibleConstructorReturn(this,o)}}(Container);function Container(i){var a;!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Container);var c=Object.assign({},{isInputContainer:!1},i),l=new h.Container;return(a=o.call(this,l,c))._pixiObject=l,a.id=g.a.getUniqueId(),c.name&&(a.name=c.name),m.a.get("manager").addContainer(_assertThisInitialized(a)),a._children={},a._containerTint=16777215,a._isInputContainer=c.isInputContainer,a}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(Container,[{key:"addChild",value:function addChild(i){i._rootParent=this._rootParent?this._rootParent:new l.a(this),i._parent=this,i._parentMode=i._rootParent.get()._mode,16777215!==this._containerTint&&16777215===i.tint&&(i.tint=this._containerTint),this._pixiObject.addChild(i._pixiObject),this._calculate(),i.zOrder=i.zOrder,void 0===i._id&&(i._id=g.a.getUniqueId()),this._children[i._id]=i}},{key:"removeChild",value:function removeChild(i){i._rootParent=null,i._parent=null,i._parentMode=null,delete this._children[i._id],this._pixiObject.removeChild(i._pixiObject),this._calculate(),i.zOrder=i.zOrder}},{key:"_dirty",value:function _dirty(){m.a.get("stage").addDirty(this)}},{key:"destroy",value:function destroy(){var i=m.a.get("manager"),o=m.a.get("stage");i.deleteContainer(this),this._isRoot&&o._WGChild.splice(this._rootIndex,1);for(var a=Object.values(this._children);this.children.length;)a[0]._isInputContainer&&a[0]._inputObject.destroy(),a[0].destroy(),a.shift();_get(_getPrototypeOf(Container.prototype),"destroy",this).call(this)}},{key:"children",get:function get(){return Object.values(this._children)}},{key:"tint",set:function set(i){this._containerTint=i;for(var o=0;o<this._pixiObject.children.length;o++)this._pixiObject.children[o]._WGObject.tint=i},get:function get(){return this._containerTint}}]),Container}(c.a)},function(i,o,a){Object.defineProperty(o,"__esModule",{value:!0});var h=function(){function defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,o,a){return o&&defineProperties(i.prototype,o),a&&defineProperties(i,a),i}}();function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}var c=function(){function MiniSignalBinding(i,o,a){void 0===o&&(o=!1),_classCallCheck(this,MiniSignalBinding),this._fn=i,this._once=o,this._thisArg=a,this._next=this._prev=this._owner=null}return h(MiniSignalBinding,[{key:"detach",value:function detach(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),MiniSignalBinding}();function _addMiniSignalBinding(i,o){return i._head?(i._tail._next=o,o._prev=i._tail,i._tail=o):(i._head=o,i._tail=o),o._owner=i,o}var l=function(){function MiniSignal(){_classCallCheck(this,MiniSignal),this._head=this._tail=void 0}return h(MiniSignal,[{key:"handlers",value:function handlers(){var i=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],o=this._head;if(i)return!!o;for(var a=[];o;)a.push(o),o=o._next;return a}},{key:"has",value:function has(i){if(!(i instanceof c))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return i._owner===this}},{key:"dispatch",value:function dispatch(){var i=this._head;if(!i)return!1;for(;i;)i._once&&this.detach(i),i._fn.apply(i._thisArg,arguments),i=i._next;return!0}},{key:"add",value:function add(i){var o=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof i)throw new Error("MiniSignal#add(): First arg must be a Function.");return _addMiniSignalBinding(this,new c(i,!1,o))}},{key:"once",value:function once(i){var o=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof i)throw new Error("MiniSignal#once(): First arg must be a Function.");return _addMiniSignalBinding(this,new c(i,!0,o))}},{key:"detach",value:function detach(i){if(!(i instanceof c))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return i._owner!==this||(i._prev&&(i._prev._next=i._next),i._next&&(i._next._prev=i._prev),i===this._head?(this._head=i._next,null===i._next&&(this._tail=null)):i===this._tail&&(this._tail=i._prev,this._tail._next=null),i._owner=null),this}},{key:"detachAll",value:function detachAll(){var i=this._head;if(!i)return this;for(this._head=this._tail=null;i;)i._owner=null,i=i._next;return this}}]),MiniSignal}();l.MiniSignalBinding=c,o.default=l,i.exports=o.default},function(i,o,a){var h={linear:function linear(i){return i},easeInSine:function easeInSine(i){return 1-Math.cos(i*Math.PI/2)},easeInCubic:function easeInCubic(i){return i*i*i},easeInQuint:function easeInQuint(i){return i*i*i*i*i},easeInCirc:function easeInCirc(i){return 1-Math.sqrt(1-Math.pow(i,2))},easeInElastic:function easeInElastic(i){return 0===i?0:1===i?1:1-Math.pow(2,10*i-10)*Math.sin((10*i-10.75)*(2*Math.PI/3))},easeOutSine:function easeOutSine(i){return Math.sin(i*Math.PI/2)},easeOutCubic:function easeOutCubic(i){return 1-Math.pow(1-i,3)},easeOutQuint:function easeOutQuint(i){return 1-Math.pow(1-i,5)},easeOutCirc:function easeOutCirc(i){return Math.sqrt(1-Math.pow(i-1,2))},easeOutElastic:function easeOutElastic(i){return 0===i?0:1===i?1:Math.pow(2,-10*i)*Math.sin((10*i-.75)*(2*Math.PI/3))+1},easeInOutSine:function easeInOutSine(i){return-(Math.cos(Math.PI*i)-1)/2},easeInOutCubic:function easeInOutCubic(i){return i<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1},easeInOutQuint:function easeInOutQuint(i){return i<.5?16*i*i*i*i*i:1+16*--i*i*i*i*i},easeInOutCirc:function easeInOutCirc(i){return i<.5?(1-Math.sqrt(1-Math.pow(2*i,2)))/2:(Math.sqrt(1-Math.pow(-2*i+2,2))+1)/2},easeInOutElastic:function easeInOutElastic(i){return 0===i?0:1===i?1:i<.5?-Math.pow(2,20*i-10)*Math.sin((20*i-11.125)*(2*Math.PI/4.5))/2:Math.pow(2,-20*i+10)*Math.sin((20*i-11.125)*(2*Math.PI/4.5))/2+1},easeInQuad:function easeInQuad(i){return i*i},easeInQuart:function easeInQuart(i){return i*i*i*i},easeInExpo:function easeInExpo(i){return 0===i?0:Math.pow(2,10*i-10)},easeInBack:function easeInBack(i){return 2.70158*i*i*i-1.70158*i*i},easeInBounce:function easeInBounce(i){return 1-easeOutBounce(1-i)},easeOutQuad:function easeOutQuad(i){return i*(2-i)},easeOutQuart:function easeOutQuart(i){return 1- --i*i*i*i},easeOutExpo:function easeOutExpo(i){return 1===i?1:1-Math.pow(2,-10*i)},easeOutBack:function easeOutBack(i){return 1+2.70158*Math.pow(i-1,3)+1.70158*Math.pow(i-1,2)},easeOutBounce:function easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutQuad:function easeInOutQuad(i){return i<.5?2*i*i:(4-2*i)*i-1},easeInOutQuart:function easeInOutQuart(i){return i<.5?8*i*i*i*i:1-8*--i*i*i*i},easeInOutExpo:function easeInOutExpo(i){return 0===i?0:1===i?1:i<.5?Math.pow(2,20*i-10)/2:(2-Math.pow(2,-20*i+10))/2},easeInOutBack:function easeInOutBack(i){return i<.5?Math.pow(2*i,2)*(7.189819*i-2.5949095)/2:(Math.pow(2*i-2,2)*(3.5949095*(2*i-2)+2.5949095)+2)/2},easeInOutBounce:function easeInOutBounce(i){return i<.5?(1-easeOutBounce(1-2*i))/2:(1+easeOutBounce(2*i-1))/2}};o.a=h},function(i,o,a){i.exports=function bindInternal3(i,o){return function(a,h,c){return i.call(o,a,h,c)}}},function(i,o,a){a.d(o,"a",(function(){return h}));var h=function Point(i,o){!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Point),this.x=i,this.y=o}},function(i,o,a){a.r(o),function(i){var h=a(4);a.d(o,"Geometry",(function(){return h.Geometry})),a.d(o,"Shader",(function(){return h.Shader})),a(80);var c=a(56),l=a(57),m=a(58),g=a(25);a.d(o,"Sprite",(function(){return g.a}));var _=a(26);a.d(o,"Text",(function(){return _.a}));var x=a(13);a.d(o,"Container",(function(){return x.a}));var S=a(61),R=a(15);a.d(o,"Easing",(function(){return R.a}));var k=a(7);a.d(o,"Types",(function(){return k.f}));var j=a(17);a.d(o,"Point",(function(){return j.a}));var X=a(33);a.d(o,"Polygon",(function(){return X.a}));var Y=a(62),q=a(63),Z=a(23);a.d(o,"Graphics",(function(){return Z.a}));var $=a(19);a.d(o,"Action",(function(){return $.a}));var ee=a(34);a.d(o,"Input",(function(){return ee.a}));var te=a(35);a.d(o,"Timer",(function(){return te.a}));var re=a(38);a.d(o,"Particle",(function(){return re.a}));var ie=a(69),ne=a(27);a.d(o,"Filters",(function(){return ne.a}));var oe=a(8),ae=a(64),se=a.n(ae),ue=a(65),he=a(36);a.d(o,"Mesh",(function(){return he.a}));var ce=a(66),de=a(37);a.d(o,"BitmapText",(function(){return de.a}));var pe=a(70),fe=a(67),me=a.n(fe),ye=a(68),_e={width:800,height:800,renderStyle:k.f.RenderType.FIXED,outsideVisible:!0,debug:!1,guideLine:!0,scene:[],resource:[],resourceProgressCallback:function resourceProgressCallback(){},resourceDepth:0,reloadOnLoadFail:!0,admob:{interstitial:null,rewardedAd:null,bannerAd:null},facebook:{interstitial:null,rewardedAd:null,bannerAd:null},unity:{id:null},productList:[],stats:!1,backgroundColor:0,loaderMode:{pc:k.f.LoaderMode.FAST,mobile:k.f.LoaderMode.SLOW},_autoVisibleDisable:!1},ve=new q.a,xe={init:function init(o){if(o.stats){var a=new se.a;a.showPanel(0),document.body.appendChild(a.dom),xe.stats=a}if(!["complete","loaded","interactive"].includes(document.readyState))return document.addEventListener("DOMContentLoaded",(function(){return xe.init(o)})),void console.warn("[webgameJS] WebgameJS must be run after DOMContentLoaded. so we added the event automatically.");oe.a.sayHello();var g=me()(_e,o);xe.pause=!1,xe._systemPause=!1,g.loaderMode=xe.isMobile?g.loaderMode.mobile:g.loaderMode.pc,xe.ErrorLog=new ue.a(xe,g),xe.Native=new ie.a(xe,g),xe.Screen=new c.a(xe,g),xe.Sound=new l.a(xe,g),xe.Camera=new S.a(xe),oe.a.setVisibilityEvent(xe),h.Ticker.shared.stop(),h.Ticker.system.stop(),xe.Ticker=new h.Ticker,xe.Ticker.add(xe._loop,h.UPDATE_PRIORITY.HIGH),xe.getTexture=function(o){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.f.ScaleMode.LINEAR,c=null;if(a===k.f.ScaleMode.NEAREST){if(!h.utils.TextureCache[o+"_NEAREST"]){var l=xe.resource[o].clone(),m=new i.BaseTexture(l.baseTexture.resource);m.scaleMode=0,h.Texture.addToCache(l,o+"_NEAREST")}c=h.utils.TextureCache[o+"_NEAREST"]}else c=xe.resource[o];return c},xe.Loader=new m.a(xe,g,(function(){xe.Screen.panel=new ye.a(xe.Screen),xe.Scene=new Y.a(xe,g),xe.lastUpdate=Date.now(),xe.Ticker.start(),xe.isMobile&&!g._autoVisibleDisable&&xe.Native.showWG()}))},_loop:function _loop(i){var o=Date.now();if(!xe.pause&&!xe._systemPause){var a=o-xe.lastUpdate;xe.stats&&xe.stats.begin(),ve._update(a,i),xe.Scene._update(a),xe.Camera._update(a),xe.Screen.renderer.render(xe.Stage),xe.stats&&xe.stats.end()}xe.lastUpdate=o},Container:x.a,Sprite:g.a,Text:_.a,Easing:R.a,Types:k.f,Graphics:Z.a,Input:ee.a,Action:$.a,Timer:te.a,Particle:re.a,Point:j.a,Polygon:X.a,Filters:ne.a,Geometry:h.Geometry,Shader:h.Shader,Mesh:he.a,Button:ce.a,BitmapText:de.a,Scroll:pe.a};xe.isAndroid=/Android/i.test(navigator.userAgent),xe.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||/Macintosh/.test(navigator.userAgent)&&"ontouchend"in document,xe.isMobile=xe.isAndroid||xe.isIOS||function mobileCheck(){var i,o=!1;return i=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|android|avantgo|bada|ipad|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(i.substr(0,4)))&&(o=!0),o}(),o.default=xe}.call(this,a(4))},function(i,o,a){a.d(o,"a",(function(){return l}));var h=a(6),c=a(15);function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var l=function(){function Action(i,o){!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Action);var a={value:null,to:null,onComplete:null,duration:1e3,delay:0,easing:c.a.linear,tracking:null,loop:0},l=Object.assign({},a,o);if(null===l.value||null===l.tracking&&null===l.to)console.warn("action 에 필요한 값이 누락되었습니다");else{if(this._startTime=Date.now(),this._WGObject=i,this.duration=l.duration,this.delay=l.delay,this.value=l.value,this.to=l.to,this.easing=l.easing,this.onComplete=l.onComplete,this.onClose=l.onClose,this.tracking=l.tracking,this.loop=l.loop,this.target=null,this.running=!0,this.done=!1,this._children=[],this.value.includes(".")){this._startValue=i;for(var m=this.value.split("."),g=0;g<m.length;g++){var _=m[g];this._startValue=this._startValue[_],g<m.length-1&&(this.target=this._startValue)}this.value=m.pop()}else{if("scale"===this.value)return o.value="scale.x",this._children.push(new Action(i,o)),o.value="scale.y",delete o.onComplete,delete o.onClose,void this._children.push(new Action(i,o));this._startValue=i[this.value],this.target=this._WGObject}"scale"===this.value&&this._startValue.x===this._startValue.y&&(this._startValue=this._startValue.x),this._gap=this.to-this._startValue;var x=h.a.get("manager");this._id=x.addAction(this)}}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(Action,[{key:"_update",value:function _update(){var i=h.a.get("manager");if(this._WGObject.isDestroy)i.deleteAction(this);else if(this.running){var o=Date.now();if(!(o-this._startTime<this.delay)){var a=(o-this._startTime-this.delay)/this.duration;if(a>=1&&(a=1),a=this.easing(a),this._progress=a,this.tracking&&(this._gap=this.tracking[this.value]-this._startValue),this.target[this.value].constructor===Number?this.target[this.value]=this._startValue+this._gap*a:this.target[this.value].constructor===Boolean&&1===a&&(this.target[this.value]=this.to),1===a)if(this.loop){this.loop-=1,this._startTime=Date.now()+this.delay;var c=this._startValue;this._startValue=this.to,this.to=c,this._gap=this.to-this._startValue}else this.done=!0,this.onComplete&&this.onComplete(),this.onClose&&this.onClose(this._progress),i.deleteAction(this)}}}},{key:"stop",value:function stop(){var i=h.a.get("manager");if(this._children.length)for(var o=0;o<this._children.length;o++)this._children[o].stop();else this.onClose&&this.onClose(this._progress);i.deleteAction(this)}},{key:"pause",value:function pause(){this.running=!1,this._pauseTime=Date.now()}},{key:"resume",value:function resume(){if(!this.running){var i=Date.now()-this._pauseTime;this.running=!0,this._startTime+=i}}}]),Action}()},function(i,o,a){var h=Object.prototype.hasOwnProperty,c="~";function Events(){}function EE(i,o,a){this.fn=i,this.context=o,this.once=a||!1}function addListener(i,o,a,h,l){if("function"!=typeof a)throw new TypeError("The listener must be a function");var m=new EE(a,h||i,l),g=c?c+o:o;return i._events[g]?i._events[g].fn?i._events[g]=[i._events[g],m]:i._events[g].push(m):(i._events[g]=m,i._eventsCount++),i}function clearEvent(i,o){0==--i._eventsCount?i._events=new Events:delete i._events[o]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(c=!1)),EventEmitter.prototype.eventNames=function eventNames(){var i,o,a=[];if(0===this._eventsCount)return a;for(o in i=this._events)h.call(i,o)&&a.push(c?o.slice(1):o);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(i)):a},EventEmitter.prototype.listeners=function listeners(i){var o=c?c+i:i,a=this._events[o];if(!a)return[];if(a.fn)return[a.fn];for(var h=0,l=a.length,m=new Array(l);h<l;h++)m[h]=a[h].fn;return m},EventEmitter.prototype.listenerCount=function listenerCount(i){var o=c?c+i:i,a=this._events[o];return a?a.fn?1:a.length:0},EventEmitter.prototype.emit=function emit(i,o,a,h,l,m){var g=c?c+i:i;if(!this._events[g])return!1;var _,x,S=this._events[g],R=arguments.length;if(S.fn){switch(S.once&&this.removeListener(i,S.fn,void 0,!0),R){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,o),!0;case 3:return S.fn.call(S.context,o,a),!0;case 4:return S.fn.call(S.context,o,a,h),!0;case 5:return S.fn.call(S.context,o,a,h,l),!0;case 6:return S.fn.call(S.context,o,a,h,l,m),!0}for(x=1,_=new Array(R-1);x<R;x++)_[x-1]=arguments[x];S.fn.apply(S.context,_)}else{var k,j=S.length;for(x=0;x<j;x++)switch(S[x].once&&this.removeListener(i,S[x].fn,void 0,!0),R){case 1:S[x].fn.call(S[x].context);break;case 2:S[x].fn.call(S[x].context,o);break;case 3:S[x].fn.call(S[x].context,o,a);break;case 4:S[x].fn.call(S[x].context,o,a,h);break;default:if(!_)for(k=1,_=new Array(R-1);k<R;k++)_[k-1]=arguments[k];S[x].fn.apply(S[x].context,_)}}return!0},EventEmitter.prototype.on=function on(i,o,a){return addListener(this,i,o,a,!1)},EventEmitter.prototype.once=function once(i,o,a){return addListener(this,i,o,a,!0)},EventEmitter.prototype.removeListener=function removeListener(i,o,a,h){var l=c?c+i:i;if(!this._events[l])return this;if(!o)return clearEvent(this,l),this;var m=this._events[l];if(m.fn)m.fn!==o||h&&!m.once||a&&m.context!==a||clearEvent(this,l);else{for(var g=0,_=[],x=m.length;g<x;g++)(m[g].fn!==o||h&&!m[g].once||a&&m[g].context!==a)&&_.push(m[g]);_.length?this._events[l]=1===_.length?_[0]:_:clearEvent(this,l)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(i){var o;return i?(o=c?c+i:i,this._events[o]&&clearEvent(this,o)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=c,EventEmitter.EventEmitter=EventEmitter,i.exports=EventEmitter},function(i,o,a){function earcut(i,o,a){a=a||2;var h,c,l,m,g,_,x,S=o&&o.length,R=S?o[0]*a:i.length,k=linkedList(i,0,R,a,!0),j=[];if(!k||k.next===k.prev)return j;if(S&&(k=function eliminateHoles(i,o,a,h){var c,l,m,g=[];for(c=0,l=o.length;c<l;c++)(m=linkedList(i,o[c]*h,c<l-1?o[c+1]*h:i.length,h,!1))===m.next&&(m.steiner=!0),g.push(getLeftmost(m));for(g.sort(compareX),c=0;c<g.length;c++)eliminateHole(g[c],a),a=filterPoints(a,a.next);return a}(i,o,k,a)),i.length>80*a){h=l=i[0],c=m=i[1];for(var X=a;X<R;X+=a)(g=i[X])<h&&(h=g),(_=i[X+1])<c&&(c=_),g>l&&(l=g),_>m&&(m=_);x=0!==(x=Math.max(l-h,m-c))?1/x:0}return earcutLinked(k,j,a,h,c,x),j}function linkedList(i,o,a,h,c){var l,m;if(c===signedArea(i,o,a,h)>0)for(l=o;l<a;l+=h)m=insertNode(l,i[l],i[l+1],m);else for(l=a-h;l>=o;l-=h)m=insertNode(l,i[l],i[l+1],m);return m&&equals(m,m.next)&&(removeNode(m),m=m.next),m}function filterPoints(i,o){if(!i)return i;o||(o=i);var a,h=i;do{if(a=!1,h.steiner||!equals(h,h.next)&&0!==area(h.prev,h,h.next))h=h.next;else{if(removeNode(h),(h=o=h.prev)===h.next)break;a=!0}}while(a||h!==o);return o}function earcutLinked(i,o,a,h,c,l,m){if(i){!m&&l&&function indexCurve(i,o,a,h){var c=i;do{null===c.z&&(c.z=zOrder(c.x,c.y,o,a,h)),c.prevZ=c.prev,c.nextZ=c.next,c=c.next}while(c!==i);c.prevZ.nextZ=null,c.prevZ=null,function sortLinked(i){var o,a,h,c,l,m,g,_,x=1;do{for(a=i,i=null,l=null,m=0;a;){for(m++,h=a,g=0,o=0;o<x&&(g++,h=h.nextZ);o++);for(_=x;g>0||_>0&&h;)0!==g&&(0===_||!h||a.z<=h.z)?(c=a,a=a.nextZ,g--):(c=h,h=h.nextZ,_--),l?l.nextZ=c:i=c,c.prevZ=l,l=c;a=h}l.nextZ=null,x*=2}while(m>1)}(c)}(i,h,c,l);for(var g,_,x=i;i.prev!==i.next;)if(g=i.prev,_=i.next,l?isEarHashed(i,h,c,l):isEar(i))o.push(g.i/a),o.push(i.i/a),o.push(_.i/a),removeNode(i),i=_.next,x=_.next;else if((i=_)===x){m?1===m?earcutLinked(i=cureLocalIntersections(filterPoints(i),o,a),o,a,h,c,l,2):2===m&&splitEarcut(i,o,a,h,c,l):earcutLinked(filterPoints(i),o,a,h,c,l,1);break}}}function isEar(i){var o=i.prev,a=i,h=i.next;if(area(o,a,h)>=0)return!1;for(var c=i.next.next;c!==i.prev;){if(pointInTriangle(o.x,o.y,a.x,a.y,h.x,h.y,c.x,c.y)&&area(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function isEarHashed(i,o,a,h){var c=i.prev,l=i,m=i.next;if(area(c,l,m)>=0)return!1;for(var g=c.x<l.x?c.x<m.x?c.x:m.x:l.x<m.x?l.x:m.x,_=c.y<l.y?c.y<m.y?c.y:m.y:l.y<m.y?l.y:m.y,x=c.x>l.x?c.x>m.x?c.x:m.x:l.x>m.x?l.x:m.x,S=c.y>l.y?c.y>m.y?c.y:m.y:l.y>m.y?l.y:m.y,R=zOrder(g,_,o,a,h),k=zOrder(x,S,o,a,h),j=i.prevZ,X=i.nextZ;j&&j.z>=R&&X&&X.z<=k;){if(j!==i.prev&&j!==i.next&&pointInTriangle(c.x,c.y,l.x,l.y,m.x,m.y,j.x,j.y)&&area(j.prev,j,j.next)>=0)return!1;if(j=j.prevZ,X!==i.prev&&X!==i.next&&pointInTriangle(c.x,c.y,l.x,l.y,m.x,m.y,X.x,X.y)&&area(X.prev,X,X.next)>=0)return!1;X=X.nextZ}for(;j&&j.z>=R;){if(j!==i.prev&&j!==i.next&&pointInTriangle(c.x,c.y,l.x,l.y,m.x,m.y,j.x,j.y)&&area(j.prev,j,j.next)>=0)return!1;j=j.prevZ}for(;X&&X.z<=k;){if(X!==i.prev&&X!==i.next&&pointInTriangle(c.x,c.y,l.x,l.y,m.x,m.y,X.x,X.y)&&area(X.prev,X,X.next)>=0)return!1;X=X.nextZ}return!0}function cureLocalIntersections(i,o,a){var h=i;do{var c=h.prev,l=h.next.next;!equals(c,l)&&intersects(c,h,h.next,l)&&locallyInside(c,l)&&locallyInside(l,c)&&(o.push(c.i/a),o.push(h.i/a),o.push(l.i/a),removeNode(h),removeNode(h.next),h=i=l),h=h.next}while(h!==i);return filterPoints(h)}function splitEarcut(i,o,a,h,c,l){var m=i;do{for(var g=m.next.next;g!==m.prev;){if(m.i!==g.i&&isValidDiagonal(m,g)){var _=splitPolygon(m,g);return m=filterPoints(m,m.next),_=filterPoints(_,_.next),earcutLinked(m,o,a,h,c,l),void earcutLinked(_,o,a,h,c,l)}g=g.next}m=m.next}while(m!==i)}function compareX(i,o){return i.x-o.x}function eliminateHole(i,o){if(o=function findHoleBridge(i,o){var a,h=o,c=i.x,l=i.y,m=-1/0;do{if(l<=h.y&&l>=h.next.y&&h.next.y!==h.y){var g=h.x+(l-h.y)*(h.next.x-h.x)/(h.next.y-h.y);if(g<=c&&g>m){if(m=g,g===c){if(l===h.y)return h;if(l===h.next.y)return h.next}a=h.x<h.next.x?h:h.next}}h=h.next}while(h!==o);if(!a)return null;if(c===m)return a;var _,x=a,S=a.x,R=a.y,k=1/0;h=a;do{c>=h.x&&h.x>=S&&c!==h.x&&pointInTriangle(l<R?c:m,l,S,R,l<R?m:c,l,h.x,h.y)&&(_=Math.abs(l-h.y)/(c-h.x),locallyInside(h,i)&&(_<k||_===k&&(h.x>a.x||h.x===a.x&&sectorContainsSector(a,h)))&&(a=h,k=_)),h=h.next}while(h!==x);return a}(i,o)){var a=splitPolygon(o,i);filterPoints(o,o.next),filterPoints(a,a.next)}}function sectorContainsSector(i,o){return area(i.prev,i,o.prev)<0&&area(o.next,i,i.next)<0}function zOrder(i,o,a,h,c){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-a)*c)|i<<8))|i<<4))|i<<2))|i<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=32767*(o-h)*c)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function getLeftmost(i){var o=i,a=i;do{(o.x<a.x||o.x===a.x&&o.y<a.y)&&(a=o),o=o.next}while(o!==i);return a}function pointInTriangle(i,o,a,h,c,l,m,g){return(c-m)*(o-g)-(i-m)*(l-g)>=0&&(i-m)*(h-g)-(a-m)*(o-g)>=0&&(a-m)*(l-g)-(c-m)*(h-g)>=0}function isValidDiagonal(i,o){return i.next.i!==o.i&&i.prev.i!==o.i&&!function intersectsPolygon(i,o){var a=i;do{if(a.i!==i.i&&a.next.i!==i.i&&a.i!==o.i&&a.next.i!==o.i&&intersects(a,a.next,i,o))return!0;a=a.next}while(a!==i);return!1}(i,o)&&(locallyInside(i,o)&&locallyInside(o,i)&&function middleInside(i,o){var a=i,h=!1,c=(i.x+o.x)/2,l=(i.y+o.y)/2;do{a.y>l!=a.next.y>l&&a.next.y!==a.y&&c<(a.next.x-a.x)*(l-a.y)/(a.next.y-a.y)+a.x&&(h=!h),a=a.next}while(a!==i);return h}(i,o)&&(area(i.prev,i,o.prev)||area(i,o.prev,o))||equals(i,o)&&area(i.prev,i,i.next)>0&&area(o.prev,o,o.next)>0)}function area(i,o,a){return(o.y-i.y)*(a.x-o.x)-(o.x-i.x)*(a.y-o.y)}function equals(i,o){return i.x===o.x&&i.y===o.y}function intersects(i,o,a,h){var c=sign(area(i,o,a)),l=sign(area(i,o,h)),m=sign(area(a,h,i)),g=sign(area(a,h,o));return c!==l&&m!==g||!(0!==c||!onSegment(i,a,o))||!(0!==l||!onSegment(i,h,o))||!(0!==m||!onSegment(a,i,h))||!(0!==g||!onSegment(a,o,h))}function onSegment(i,o,a){return o.x<=Math.max(i.x,a.x)&&o.x>=Math.min(i.x,a.x)&&o.y<=Math.max(i.y,a.y)&&o.y>=Math.min(i.y,a.y)}function sign(i){return i>0?1:i<0?-1:0}function locallyInside(i,o){return area(i.prev,i,i.next)<0?area(i,o,i.next)>=0&&area(i,i.prev,o)>=0:area(i,o,i.prev)<0||area(i,i.next,o)<0}function splitPolygon(i,o){var a=new Node(i.i,i.x,i.y),h=new Node(o.i,o.x,o.y),c=i.next,l=o.prev;return i.next=o,o.prev=i,a.next=c,c.prev=a,h.next=a,a.prev=h,l.next=h,h.prev=l,h}function insertNode(i,o,a,h){var c=new Node(i,o,a);return h?(c.next=h.next,c.prev=h,h.next.prev=c,h.next=c):(c.prev=c,c.next=c),c}function removeNode(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Node(i,o,a){this.i=i,this.x=o,this.y=a,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(i,o,a,h){for(var c=0,l=o,m=a-h;l<a;l+=h)c+=(i[m]-i[l])*(i[l+1]+i[m+1]),m=l;return c}i.exports=earcut,i.exports.default=earcut,earcut.deviation=function(i,o,a,h){var c=o&&o.length,l=c?o[0]*a:i.length,m=Math.abs(signedArea(i,0,l,a));if(c)for(var g=0,_=o.length;g<_;g++){var x=o[g]*a,S=g<_-1?o[g+1]*a:i.length;m-=Math.abs(signedArea(i,x,S,a))}var R=0;for(g=0;g<h.length;g+=3){var k=h[g]*a,j=h[g+1]*a,X=h[g+2]*a;R+=Math.abs((i[k]-i[X])*(i[j+1]-i[k+1])-(i[k]-i[j])*(i[X+1]-i[k+1]))}return 0===m&&0===R?0:Math.abs((R-m)/m)},earcut.flatten=function(i){for(var o=i[0][0].length,a={vertices:[],holes:[],dimensions:o},h=0,c=0;c<i.length;c++){for(var l=0;l<i[c].length;l++)for(var m=0;m<o;m++)a.vertices.push(i[c][l][m]);c>0&&(h+=i[c-1].length,a.holes.push(h))}return a}},function(i,o,a){function Fast(i){if(!(this instanceof Fast))return new Fast(i);this.value=i||[]}i.exports=Fast,Fast.array=a(83),Fast.function=Fast.fn=a(91),Fast.object=a(97),Fast.string=a(101),Fast.apply=Fast.function.apply,Fast.bind=Fast.function.bind,Fast.partial=Fast.function.partial,Fast.partialConstructor=Fast.function.partialConstructor,Fast.try=Fast.attempt=Fast.function.try,Fast.assign=Fast.object.assign,Fast.cloneObject=Fast.object.clone,Fast.keys=Fast.object.keys,Fast.values=Fast.object.values,Fast.clone=a(103),Fast.map=a(104),Fast.filter=a(105),Fast.forEach=a(106),Fast.reduce=a(107),Fast.reduceRight=a(108),Fast.cloneArray=Fast.array.clone,Fast.concat=Fast.array.concat,Fast.some=Fast.array.some,Fast.every=Fast.array.every,Fast.indexOf=Fast.array.indexOf,Fast.lastIndexOf=Fast.array.lastIndexOf,Fast.pluck=Fast.array.pluck,Fast.fill=Fast.array.fill,Fast.intern=Fast.string.intern,Fast.prototype.concat=function Fast$concat(){var i,o,a,h,c=this.value.length,l=new Array(c);for(i=0;i<c;i++)l[i]=this.value[i];for(c=arguments.length,i=0;i<c;i++)if(o=arguments[i],Array.isArray(o))for(a=o.length,h=0;h<a;h++)l.push(o[h]);else l.push(o);return new Fast(l)},Fast.prototype.map=function Fast$map(i,o){return new Fast(Fast.map(this.value,i,o))},Fast.prototype.filter=function Fast$filter(i,o){return new Fast(Fast.filter(this.value,i,o))},Fast.prototype.reduce=function Fast$reduce(i,o,a){return Fast.reduce(this.value,i,o,a)},Fast.prototype.reduceRight=function Fast$reduceRight(i,o,a){return Fast.reduceRight(this.value,i,o,a)},Fast.prototype.forEach=function Fast$forEach(i,o){return Fast.forEach(this.value,i,o),this},Fast.prototype.some=function Fast$some(i,o){return Fast.some(this.value,i,o)},Fast.prototype.every=function Fast$every(i,o){return Fast.some(this.value,i,o)},Fast.prototype.indexOf=function Fast$indexOf(i,o){return Fast.indexOf(this.value,i,o)},Fast.prototype.lastIndexOf=function Fast$lastIndexOf(i,o){return Fast.lastIndexOf(this.value,i,o)},Fast.prototype.reverse=function Fast$reverse(){return new Fast(this.value.reverse())},Fast.prototype.valueOf=function Fast$valueOf(){return this.value},Fast.prototype.toJSON=function Fast$toJSON(){return this.value},Object.defineProperty(Fast.prototype,"length",{get:function get(){return this.value.length}})},function(i,o,a){a.d(o,"a",(function(){return l}));var h=a(4),c=a(12);function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function _typeof(i){return _typeof2(i)}:function _typeof(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":_typeof2(i)})(i)}function _possibleConstructorReturn(i,o){return!o||"object"!==_typeof(o)&&"function"!=typeof o?_assertThisInitialized(i):o}function _assertThisInitialized(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(i){return!1}}function _getPrototypeOf(i){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(i){return i.__proto__||Object.getPrototypeOf(i)})(i)}function _setPrototypeOf(i,o){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(i,o){return i.__proto__=o,i})(i,o)}a(22);var l=function(i){!function _inherits(i,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&_setPrototypeOf(i,o)}(Graphics,i);var o=function _createSuper(i){return function(){var o,a=_getPrototypeOf(i);if(_isNativeReflectConstruct()){var h=_getPrototypeOf(this).constructor;o=Reflect.construct(a,arguments,h)}else o=a.apply(this,arguments);return _possibleConstructorReturn(this,o)}}(Graphics);function Graphics(i){var a;!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Graphics);var c=Object.assign({},{},i),l=new h.Graphics;(a=o.call(this,l,c))._pixiObject=l;for(var m=["beginFill","endFill","lineStyle","moveTo","lineTo","drawRect","drawRoundedRect","drawCircle","drawEllipse","arc","arcTo","bezierCurveTo","quadraticCurveTo","clear","drawPolygon","closePath"],g=0;g<m.length;g++){var _=m[g];Object.defineProperty(_assertThisInitialized(a),_,{value:a._pixiObject[_].bind(a._pixiObject)})}return a}return Graphics}(c.a)},function(i,o,a){a.d(o,"a",(function(){return isMobile}));var h=/iPhone/i,c=/iPod/i,l=/iPad/i,m=/\biOS-universal(?:.+)Mac\b/i,g=/\bAndroid(?:.+)Mobile\b/i,_=/Android/i,x=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,S=/Silk/i,R=/Windows Phone/i,k=/\bWindows(?:.+)ARM\b/i,j=/BlackBerry/i,X=/BB10/i,Y=/Opera Mini/i,q=/\b(CriOS|Chrome)(?:.+)Mobile/i,Z=/Mobile(?:.+)Firefox\b/i,$=function isAppleTabletOnIos13(i){return void 0!==i&&"MacIntel"===i.platform&&"number"==typeof i.maxTouchPoints&&i.maxTouchPoints>1&&"undefined"==typeof MSStream};function isMobile(i){var o={userAgent:"",platform:"",maxTouchPoints:0};i||"undefined"==typeof navigator?"string"==typeof i?o.userAgent=i:i&&i.userAgent&&(o={userAgent:i.userAgent,platform:i.platform,maxTouchPoints:i.maxTouchPoints||0}):o={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var a=o.userAgent,ee=a.split("[FBAN");void 0!==ee[1]&&(a=ee[0]),void 0!==(ee=a.split("Twitter"))[1]&&(a=ee[0]);var te=function createMatch(i){return function(o){return o.test(i)}}(a),re={apple:{phone:te(h)&&!te(R),ipod:te(c),tablet:!te(h)&&(te(l)||$(o))&&!te(R),universal:te(m),device:(te(h)||te(c)||te(l)||te(m)||$(o))&&!te(R)},amazon:{phone:te(x),tablet:!te(x)&&te(S),device:te(x)||te(S)},android:{phone:!te(R)&&te(x)||!te(R)&&te(g),tablet:!te(R)&&!te(x)&&!te(g)&&(te(S)||te(_)),device:!te(R)&&(te(x)||te(S)||te(g)||te(_))||te(/\bokhttp\b/i)},windows:{phone:te(R),tablet:te(k),device:te(R)||te(k)},other:{blackberry:te(j),blackberry10:te(X),opera:te(Y),firefox:te(Z),chrome:te(q),device:te(j)||te(X)||te(Y)||te(Z)||te(q)},any:!1,phone:!1,tablet:!1};return re.any=re.apple.device||re.android.device||re.windows.device||re.other.device,re.phone=re.apple.phone||re.android.phone||re.windows.phone,re.tablet=re.apple.tablet||re.android.tablet||re.windows.tablet,re}},function(i,o,a){(function(i){a.d(o,"a",(function(){return g}));var h=a(4),c=a(12),l=a(6),m=a(7);function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function _typeof(i){return _typeof2(i)}:function _typeof(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":_typeof2(i)})(i)}function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}function _get(i,o,a){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(i,o,a){var h=function _superPropBase(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&null!==(i=_getPrototypeOf(i)););return i}(i,o);if(h){var c=Object.getOwnPropertyDescriptor(h,o);return c.get?c.get.call(a):c.value}})(i,o,a||i)}function _possibleConstructorReturn(i,o){return!o||"object"!==_typeof(o)&&"function"!=typeof o?_assertThisInitialized(i):o}function _assertThisInitialized(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(i){return!1}}function _getPrototypeOf(i){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(i){return i.__proto__||Object.getPrototypeOf(i)})(i)}function _setPrototypeOf(i,o){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(i,o){return i.__proto__=o,i})(i,o)}a(22);var g=function(o){!function _inherits(i,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&_setPrototypeOf(i,o)}(Sprite,o);var a=function _createSuper(i){return function(){var o,a=_getPrototypeOf(i);if(_isNativeReflectConstruct()){var h=_getPrototypeOf(this).constructor;o=Reflect.construct(a,arguments,h)}else o=a.apply(this,arguments);return _possibleConstructorReturn(this,o)}}(Sprite);function Sprite(o,c){var g;!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Sprite);var _=Object.assign({},{},c),x=l.a.get("resource");if(o&&void 0===x[o])return console.warn("".concat(o," resource가 없습니다")),_possibleConstructorReturn(g);var S=o&&"json"===o.split(".").pop()?m.e.DYNAMIC:m.e.STATIC,R=null;if(_.scaleMode===m.d.NEAREST&&S===m.e.STATIC){if(!x[o+"_NEAREST"]){x[o+"_NEAREST"]=x[o].clone();var k=new i.BaseTexture(x[o].baseTexture.resource);x[o+"_NEAREST"].baseTexture=k,k.scaleMode=0}R=x[o+"_NEAREST"]}else R=x[o];var j;if(j=_.isTiling?new h.TilingSprite(R,_.width,_.height):new h.Sprite(S===m.e.STATIC?R:null),(g=a.call(this,j,_))._pixiObject=j,g._type=S,_.isTiling&&Object.defineProperties(_assertThisInitialized(g),{tileX:{get:function get(){return g._pixiObject.tilePosition.x},set:function set(i){return g._pixiObject.tilePosition.x=i}},tileY:{get:function get(){return g._pixiObject.tilePosition.y},set:function set(i){return g._pixiObject.tilePosition.y=i}}}),g._type===m.e.STATIC)Object.defineProperty(_assertThisInitialized(g),"texture",{get:function get(){return g._pixiObject.texture},set:function set(i){g._pixiObject.texture=x[i]}});else if(g._type===m.e.DYNAMIC){var X=Object.assign({},{speed:1e3,loop:!0,onComplete:null,deleteOnComplete:!0},_);g._deleteOnComplete=X.deleteOnComplete,g._stoppedByComplete=!1,g._onFrameFunctions={},Object.defineProperties(_assertThisInitialized(g),{frameLength:{get:function get(){return g._frames.length}},currentFrame:{get:function get(){return g._currentFrame},set:function set(i){g._currentFrame=i,g._pixiObject.texture=g._frames[g._currentFrame],g._onFrameFunctions[i]&&g._onFrameFunctions[i]()},enumerable:!0},speed:{get:function get(){return g._speed},set:function set(i){g._speed=i,g._perFrameTime=i/g._frames.length},enumerable:!0},textureName:{get:function get(){return g._textureName}},texture:{get:function get(){return g._pixiObject.texture},set:function set(o){g._textureName=o;var a=x[o];g._texture=a,g._frames=[];for(var c=Object.keys(a.frames),l=0;l<c.length;l++){var S=c[l];if(_.scaleMode===m.d.NEAREST){if(!h.utils.TextureCache[S+"_NEAREST"]){var R=h.utils.TextureCache[S].clone(),k=new i.BaseTexture(R.baseTexture.resource);R.baseTexture=k,k.scaleMode=0,h.Texture.addToCache(R,S+"_NEAREST")}g._frames.push(h.utils.TextureCache[S+"_NEAREST"])}else g._frames.push(h.utils.TextureCache[S])}g.currentFrame=0}},setOnceTexture:{value:function value(i){g._defaultTexture=g.textureName,g.texture=i},enumerable:!0},addOnFrame:{value:function value(i,o){return g._onFrameFunctions[i]=o},enumerable:!0},addOnComplete:{value:function value(i){return g._onFrameFunctions[-1]=i},enumerable:!0},removeOnFrame:{value:function value(i){i?delete g._onFrameFunctions[i]:g._onFrameFunctions=[]},enumerable:!0},replay:{value:function value(){g.currentFrame=0,g._lastUpdateTime=Date.now(),g._stoppedByComplete=!1},enumerable:!0}}),g.stop=!1,g.texture=o,g._lastUpdateTime=Date.now(),g.currentFrame=0,g.loop=X.loop,g.speed=_.speed?_.speed:g._texture.data&&g._texture.data.speed?R.data.speed:X.speed,X.onComplete&&g.addOnComplete(X.onComplete);var Y=l.a.get("manager");g._animationId=Y.addAnimationSprite(_assertThisInitialized(g))}return g}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(Sprite,[{key:"destroy",value:function destroy(){this._type===m.e.DYNAMIC&&l.a.get("manager").deleteAnimationSprite(this),_get(_getPrototypeOf(Sprite.prototype),"destroy",this).call(this)}}],[{key:"split",value:function split(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=l.a.get("resource");console.log(c[i]);for(var m=c[i],g=m.orig,_=g.width,x=g.height,S=_/o,R=x/a,k=[],j=0;j<a;j++)for(var X=0;X<o;X++){var Y=i+"_split_"+(j*a+X),q=X*S,Z=j*R;h.Texture.addToCache(new h.Texture(m.baseTexture,new h.Rectangle(q,Z,S,R),new h.Rectangle(0,0,S,R),!1,!1),Y),k.push(Y),c[Y]=h.utils.TextureCache[Y]}return k}}]),Sprite}(c.a)}).call(this,a(4))},function(i,o,a){(function(i){a.d(o,"a",(function(){return m}));var h=a(4),c=a(12),l=a(32);function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function _typeof(i){return _typeof2(i)}:function _typeof(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":_typeof2(i)})(i)}function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}function _possibleConstructorReturn(i,o){return!o||"object"!==_typeof(o)&&"function"!=typeof o?_assertThisInitialized(i):o}function _assertThisInitialized(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(i){return!1}}function _getPrototypeOf(i){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(i){return i.__proto__||Object.getPrototypeOf(i)})(i)}function _setPrototypeOf(i,o){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(i,o){return i.__proto__=o,i})(i,o)}a(22);var m=function(o){!function _inherits(i,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&_setPrototypeOf(i,o)}(Text,o);var a=function _createSuper(i){return function(){var o,a=_getPrototypeOf(i);if(_isNativeReflectConstruct()){var h=_getPrototypeOf(this).constructor;o=Reflect.construct(a,arguments,h)}else o=a.apply(this,arguments);return _possibleConstructorReturn(this,o)}}(Text);function Text(){var o,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",m=arguments.length>1?arguments[1]:void 0;_classCallCheck(this,Text);var g,_={fontFamily:Text.getDefaultFont()},x=Object.assign({},_,m),S=null!==l.a.tagReg.exec(c.toString().replace(/\n/g,""))||void 0!==x.multiStyle&&x.multiStyle.constructor===Object;if(S){x.multiStyle=x.multiStyle||{},Object.values(x.multiStyle).forEach((function(i){"scale"in i&&i.scale.constructor===Number&&(i.scale={x:i.scale,y:i.scale}),"anchor"in i&&i.anchor.constructor===Number&&(i.anchor={x:i.anchor,y:i.anchor})})),x.multiStyle.default=x.multiStyle.default||{},x.multiStyle.global=x.multiStyle.global||{};var R=new i.TextStyle;for(var k in x)l.a.GLOBAL_STYLES.includes(k)?x.multiStyle.global[k]=x[k]:k in R&&(x.multiStyle.default[k]=x[k]);g=l.a.newMS(c,x.multiStyle,x.x,x.y),o=a.call(this,g,x),Object.defineProperties(_assertThisInitialized(o),{labeledList:{value:g.labeledList,enumerable:!0}})}else g=new h.Text(c,x),o=a.call(this,g,x);o._pixiObject=g;for(var j=Object.keys(new h.TextStyle),X=Object.keys(o._pixiObject.style),Y=function _loop(i){var a=X[i];if(!j.includes(a))return{v:_possibleConstructorReturn(o)};var h=a.replace("_","");Object.defineProperty(_assertThisInitialized(o),h,{set:function set(i){return o._pixiObject.style[h]=i},get:function get(){return o._pixiObject.style[h]}})},q=0;q<X.length;q++){var Z=Y(q);if("object"===_typeof(Z))return Z.v}return o.fontFamily=x.fontFamily,_possibleConstructorReturn(o)}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(Text,[{key:"text",set:function set(i){this._pixiObject.text=i},get:function get(){return this._pixiObject.text}}],[{key:"setDefaultFont",value:function setDefaultFont(i){this._defaultFont=i}},{key:"getDefaultFont",value:function getDefaultFont(){return this._defaultFont||"Arial"}}]),Text}(c.a)}).call(this,a(4))},function(i,o,a){var h=a(1),c=function(i){function AdjustmentFilter(o){i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float gamma;\nuniform float contrast;\nuniform float saturation;\nuniform float brightness;\nuniform float red;\nuniform float green;\nuniform float blue;\nuniform float alpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (c.a > 0.0) {\n        c.rgb /= c.a;\n\n        vec3 rgb = pow(c.rgb, vec3(1. / gamma));\n        rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, saturation), contrast);\n        rgb.r *= red;\n        rgb.g *= green;\n        rgb.b *= blue;\n        c.rgb = rgb * brightness;\n\n        c.rgb *= c.a;\n    }\n\n    gl_FragColor = c * alpha;\n}\n"),Object.assign(this,{gamma:1,saturation:1,contrast:1,brightness:1,red:1,green:1,blue:1,alpha:1},o)}return i&&(AdjustmentFilter.__proto__=i),AdjustmentFilter.prototype=Object.create(i&&i.prototype),AdjustmentFilter.prototype.constructor=AdjustmentFilter,AdjustmentFilter.prototype.apply=function apply(i,o,a,h){this.uniforms.gamma=Math.max(this.gamma,1e-4),this.uniforms.saturation=this.saturation,this.uniforms.contrast=this.contrast,this.uniforms.brightness=this.brightness,this.uniforms.red=this.red,this.uniforms.green=this.green,this.uniforms.blue=this.blue,this.uniforms.alpha=this.alpha,i.applyFilter(this,o,a,h)},AdjustmentFilter}(h.m),l=a(3),m=function(i){function KawaseBlurFilter(o,a,h){void 0===o&&(o=4),void 0===a&&(a=3),void 0===h&&(h=!1),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",h?"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}\n":"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}"),this.uniforms.uOffset=new Float32Array(2),this._pixelSize=new l.g,this.pixelSize=1,this._clamp=h,this._kernels=null,Array.isArray(o)?this.kernels=o:(this._blur=o,this.quality=a)}i&&(KawaseBlurFilter.__proto__=i),KawaseBlurFilter.prototype=Object.create(i&&i.prototype),KawaseBlurFilter.prototype.constructor=KawaseBlurFilter;var o={kernels:{configurable:!0},clamp:{configurable:!0},pixelSize:{configurable:!0},quality:{configurable:!0},blur:{configurable:!0}};return KawaseBlurFilter.prototype.apply=function apply(i,o,a,h){var c,l=this.pixelSize.x/o._frame.width,m=this.pixelSize.y/o._frame.height;if(1===this._quality||0===this._blur)c=this._kernels[0]+.5,this.uniforms.uOffset[0]=c*l,this.uniforms.uOffset[1]=c*m,i.applyFilter(this,o,a,h);else{for(var g,_=i.getFilterTexture(),x=o,S=_,R=this._quality-1,k=0;k<R;k++)c=this._kernels[k]+.5,this.uniforms.uOffset[0]=c*l,this.uniforms.uOffset[1]=c*m,i.applyFilter(this,x,S,1),g=x,x=S,S=g;c=this._kernels[R]+.5,this.uniforms.uOffset[0]=c*l,this.uniforms.uOffset[1]=c*m,i.applyFilter(this,x,a,h),i.returnFilterTexture(_)}},KawaseBlurFilter.prototype._generateKernels=function _generateKernels(){var i=this._blur,o=this._quality,a=[i];if(i>0)for(var h=i,c=i/o,l=1;l<o;l++)h-=c,a.push(h);this._kernels=a},o.kernels.get=function(){return this._kernels},o.kernels.set=function(i){Array.isArray(i)&&i.length>0?(this._kernels=i,this._quality=i.length,this._blur=Math.max.apply(Math,i)):(this._kernels=[0],this._quality=1)},o.clamp.get=function(){return this._clamp},o.pixelSize.set=function(i){"number"==typeof i?(this._pixelSize.x=i,this._pixelSize.y=i):Array.isArray(i)?(this._pixelSize.x=i[0],this._pixelSize.y=i[1]):i instanceof l.g?(this._pixelSize.x=i.x,this._pixelSize.y=i.y):(this._pixelSize.x=1,this._pixelSize.y=1)},o.pixelSize.get=function(){return this._pixelSize},o.quality.get=function(){return this._quality},o.quality.set=function(i){this._quality=Math.max(1,Math.round(i)),this._generateKernels()},o.blur.get=function(){return this._blur},o.blur.set=function(i){this._blur=i,this._generateKernels()},Object.defineProperties(KawaseBlurFilter.prototype,o),KawaseBlurFilter}(h.m),g=a(5),_="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",x=function(i){function ExtractBrightnessFilter(o){void 0===o&&(o=.5),i.call(this,_,"\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform float threshold;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    // A simple & fast algorithm for getting brightness.\n    // It's inaccuracy , but good enought for this feature.\n    float _max = max(max(color.r, color.g), color.b);\n    float _min = min(min(color.r, color.g), color.b);\n    float brightness = (_max + _min) * 0.5;\n\n    if(brightness > threshold) {\n        gl_FragColor = color;\n    } else {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n}\n"),this.threshold=o}i&&(ExtractBrightnessFilter.__proto__=i),ExtractBrightnessFilter.prototype=Object.create(i&&i.prototype),ExtractBrightnessFilter.prototype.constructor=ExtractBrightnessFilter;var o={threshold:{configurable:!0}};return o.threshold.get=function(){return this.uniforms.threshold},o.threshold.set=function(i){this.uniforms.threshold=i},Object.defineProperties(ExtractBrightnessFilter.prototype,o),ExtractBrightnessFilter}(h.m),S=function(i){function AdvancedBloomFilter(o){i.call(this,_,"uniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D bloomTexture;\nuniform float bloomScale;\nuniform float brightness;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    color.rgb *= brightness;\n    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);\n    bloomColor.rgb *= bloomScale;\n    gl_FragColor = color + bloomColor;\n}\n"),"number"==typeof o&&(o={threshold:o}),o=Object.assign({threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:g.b.RESOLUTION},o),this.bloomScale=o.bloomScale,this.brightness=o.brightness;var a=o.kernels,h=o.blur,c=o.quality,l=o.pixelSize,S=o.resolution;this._extractFilter=new x(o.threshold),this._extractFilter.resolution=S,this._blurFilter=a?new m(a):new m(h,c),this.pixelSize=l,this.resolution=S}i&&(AdvancedBloomFilter.__proto__=i),AdvancedBloomFilter.prototype=Object.create(i&&i.prototype),AdvancedBloomFilter.prototype.constructor=AdvancedBloomFilter;var o={resolution:{configurable:!0},threshold:{configurable:!0},kernels:{configurable:!0},blur:{configurable:!0},quality:{configurable:!0},pixelSize:{configurable:!0}};return AdvancedBloomFilter.prototype.apply=function apply(i,o,a,h,c){var l=i.getFilterTexture();this._extractFilter.apply(i,o,l,1,c);var m=i.getFilterTexture();this._blurFilter.apply(i,l,m,1,c),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=m,i.applyFilter(this,o,a,h),i.returnFilterTexture(m),i.returnFilterTexture(l)},o.resolution.get=function(){return this._resolution},o.resolution.set=function(i){this._resolution=i,this._extractFilter&&(this._extractFilter.resolution=i),this._blurFilter&&(this._blurFilter.resolution=i)},o.threshold.get=function(){return this._extractFilter.threshold},o.threshold.set=function(i){this._extractFilter.threshold=i},o.kernels.get=function(){return this._blurFilter.kernels},o.kernels.set=function(i){this._blurFilter.kernels=i},o.blur.get=function(){return this._blurFilter.blur},o.blur.set=function(i){this._blurFilter.blur=i},o.quality.get=function(){return this._blurFilter.quality},o.quality.set=function(i){this._blurFilter.quality=i},o.pixelSize.get=function(){return this._blurFilter.pixelSize},o.pixelSize.set=function(i){this._blurFilter.pixelSize=i},Object.defineProperties(AdvancedBloomFilter.prototype,o),AdvancedBloomFilter}(h.m),R=function(i){function AsciiFilter(o){void 0===o&&(o=8),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 pixelate(vec2 coord, vec2 size)\n{\n    return floor( coord / size ) * size;\n}\n\nvec2 getMod(vec2 coord, vec2 size)\n{\n    return mod( coord , size) / size;\n}\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n\n    if (clamp(p.x, 0.0, 4.0) == p.x)\n    {\n        if (clamp(p.y, 0.0, 4.0) == p.y)\n        {\n            if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n        }\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 coord = mapCoord(vTextureCoord);\n\n    // get the rounded color..\n    vec2 pixCoord = pixelate(coord, vec2(pixelSize));\n    pixCoord = unmapCoord(pixCoord);\n\n    vec4 color = texture2D(uSampler, pixCoord);\n\n    // determine the character to use\n    float gray = (color.r + color.g + color.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    // get the mod..\n    vec2 modd = getMod(coord, vec2(pixelSize));\n\n    gl_FragColor = color * character( n, vec2(-1.0) + modd * 2.0);\n\n}\n"),this.size=o}i&&(AsciiFilter.__proto__=i),AsciiFilter.prototype=Object.create(i&&i.prototype),AsciiFilter.prototype.constructor=AsciiFilter;var o={size:{configurable:!0}};return o.size.get=function(){return this.uniforms.pixelSize},o.size.set=function(i){this.uniforms.pixelSize=i},Object.defineProperties(AsciiFilter.prototype,o),AsciiFilter}(h.m),k=a(0),j=function(i){function BevelFilter(o){void 0===o&&(o={}),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform float transformX;\nuniform float transformY;\nuniform vec3 lightColor;\nuniform float lightAlpha;\nuniform vec3 shadowColor;\nuniform float shadowAlpha;\n\nvoid main(void) {\n    vec2 transform = vec2(1.0 / filterArea) * vec2(transformX, transformY);\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float light = texture2D(uSampler, vTextureCoord - transform).a;\n    float shadow = texture2D(uSampler, vTextureCoord + transform).a;\n\n    color.rgb = mix(color.rgb, lightColor, clamp((color.a - light) * lightAlpha, 0.0, 1.0));\n    color.rgb = mix(color.rgb, shadowColor, clamp((color.a - shadow) * shadowAlpha, 0.0, 1.0));\n    gl_FragColor = vec4(color.rgb * color.a, color.a);\n}\n"),this.uniforms.lightColor=new Float32Array(3),this.uniforms.shadowColor=new Float32Array(3),o=Object.assign({rotation:45,thickness:2,lightColor:16777215,lightAlpha:.7,shadowColor:0,shadowAlpha:.7},o),this.rotation=o.rotation,this.thickness=o.thickness,this.lightColor=o.lightColor,this.lightAlpha=o.lightAlpha,this.shadowColor=o.shadowColor,this.shadowAlpha=o.shadowAlpha}i&&(BevelFilter.__proto__=i),BevelFilter.prototype=Object.create(i&&i.prototype),BevelFilter.prototype.constructor=BevelFilter;var o={rotation:{configurable:!0},thickness:{configurable:!0},lightColor:{configurable:!0},lightAlpha:{configurable:!0},shadowColor:{configurable:!0},shadowAlpha:{configurable:!0}};return BevelFilter.prototype._updateTransform=function _updateTransform(){this.uniforms.transformX=this._thickness*Math.cos(this._angle),this.uniforms.transformY=this._thickness*Math.sin(this._angle)},o.rotation.get=function(){return this._angle/l.b},o.rotation.set=function(i){this._angle=i*l.b,this._updateTransform()},o.thickness.get=function(){return this._thickness},o.thickness.set=function(i){this._thickness=i,this._updateTransform()},o.lightColor.get=function(){return Object(k.rgb2hex)(this.uniforms.lightColor)},o.lightColor.set=function(i){Object(k.hex2rgb)(i,this.uniforms.lightColor)},o.lightAlpha.get=function(){return this.uniforms.lightAlpha},o.lightAlpha.set=function(i){this.uniforms.lightAlpha=i},o.shadowColor.get=function(){return Object(k.rgb2hex)(this.uniforms.shadowColor)},o.shadowColor.set=function(i){Object(k.hex2rgb)(i,this.uniforms.shadowColor)},o.shadowAlpha.get=function(){return this.uniforms.shadowAlpha},o.shadowAlpha.set=function(i){this.uniforms.shadowAlpha=i},Object.defineProperties(BevelFilter.prototype,o),BevelFilter}(h.m),X=function(){function Runner(i){this.items=[],this._name=i,this._aliasCount=0}return Runner.prototype.emit=function(i,o,a,h,c,l,m,g){if(arguments.length>8)throw new Error("max arguments reached");var _=this,x=_.name,S=_.items;this._aliasCount++;for(var R=0,k=S.length;R<k;R++)S[R][x](i,o,a,h,c,l,m,g);return S===this.items&&this._aliasCount--,this},Runner.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},Runner.prototype.add=function(i){return i[this._name]&&(this.ensureNonAliasedItems(),this.remove(i),this.items.push(i)),this},Runner.prototype.remove=function(i){var o=this.items.indexOf(i);return-1!==o&&(this.ensureNonAliasedItems(),this.items.splice(o,1)),this},Runner.prototype.contains=function(i){return-1!==this.items.indexOf(i)},Runner.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},Runner.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(Runner.prototype,"empty",{get:function get(){return 0===this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(Runner.prototype,"name",{get:function get(){return this._name},enumerable:!0,configurable:!0}),Runner}();Object.defineProperties(X.prototype,{dispatch:{value:X.prototype.emit},run:{value:X.prototype.emit}});var Y,q,Z,$,ee,te,re,ie,ne,oe,ae,se,ue,he,ce=a(24),de=Object(ce.a)(window.navigator),pe={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function maxRecommendedTextures(i){var o=!0;if(de.tablet||de.phone){if(o=!1,de.apple.device){var a=navigator.userAgent.match(/OS (\d+)_(\d+)?/);a&&parseInt(a[1],10)>=11&&(o=!0)}if(de.android.device){var h=navigator.userAgent.match(/Android\s([0-9.]*)/);h&&parseInt(h[1],10)>=7&&(o=!0)}}return o?i:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:de.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:function canUploadSameBuffer(){return!de.apple.device}(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},fe=a(20),me=a.n(fe),ye=(a(21),a(11));!function(i){i[i.WEBGL_LEGACY=0]="WEBGL_LEGACY",i[i.WEBGL=1]="WEBGL",i[i.WEBGL2=2]="WEBGL2"}(Y||(Y={})),function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.WEBGL=1]="WEBGL",i[i.CANVAS=2]="CANVAS"}(q||(q={})),function(i){i[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR"}(Z||(Z={})),function(i){i[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN"}($||($={})),function(i){i[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(ee||(ee={})),function(i){i[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(te||(te={})),function(i){i[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.FLOAT=5126]="FLOAT",i[i.HALF_FLOAT=36193]="HALF_FLOAT"}(re||(re={})),function(i){i[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR"}(ie||(ie={})),function(i){i[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(ne||(ne={})),function(i){i[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON"}(oe||(oe={})),function(i){i[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(ae||(ae={})),function(i){i[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL"}(se||(se={})),function(i){i.LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp"}(ue||(ue={})),function(i){i[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE"}(he||(he={})),pe.RETINA_PREFIX=/@([0-9\.]+)x/,pe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var _e=function mapPremultipliedBlendModes(){for(var i=[],o=[],a=0;a<32;a++)i[a]=a,o[a]=a;i[Z.NORMAL_NPM]=Z.NORMAL,i[Z.ADD_NPM]=Z.ADD,i[Z.SCREEN_NPM]=Z.SCREEN,o[Z.NORMAL]=Z.NORMAL_NPM,o[Z.ADD]=Z.ADD_NPM,o[Z.SCREEN]=Z.SCREEN_NPM;var h=[];return h.push(o),h.push(i),h}();function nextPow2(i){return i+=0===i?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,1+(i|=i>>>16)}function isPow2(i){return!(i&i-1||!i)}function log2(i){var o=(i>65535?1:0)<<4,a=((i>>>=o)>255?1:0)<<3;return o|=a,o|=a=((i>>>=a)>15?1:0)<<2,(o|=a=((i>>>=a)>3?1:0)<<1)|(i>>>=a)>>1}function removeItems(i,o,a){var h,c=i.length;if(!(o>=c||0===a)){var l=c-(a=o+a>c?c-o:a);for(h=o;h<l;++h)i[h]=i[h+a];i.length=l}}Float32Array,Uint32Array,Int32Array,Uint8Array;var ve=0;function uid(){return++ve}var xe,Se,be={},we=Object.create(null),Te=Object.create(null);function getResolutionOfUrl(i,o){var a=pe.RETINA_PREFIX.exec(i);return a?parseFloat(a[1]):void 0!==o?o:1}!function(){function CanvasRenderTarget(i,o,a){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=a||pe.RESOLUTION,this.resize(i,o)}CanvasRenderTarget.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},CanvasRenderTarget.prototype.resize=function(i,o){this.canvas.width=i*this.resolution,this.canvas.height=o*this.resolution},CanvasRenderTarget.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(CanvasRenderTarget.prototype,"width",{get:function get(){return this.canvas.width},set:function set(i){this.canvas.width=i},enumerable:!0,configurable:!0}),Object.defineProperty(CanvasRenderTarget.prototype,"height",{get:function get(){return this.canvas.height},set:function set(i){this.canvas.height=i},enumerable:!0,configurable:!0})}(),pe.TARGET_FPMS=.06,function(i){i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY"}(Se||(Se={}));var Ce,Pe=function(){function TickerListener(i,o,a,h){void 0===o&&(o=null),void 0===a&&(a=0),void 0===h&&(h=!1),this.fn=i,this.context=o,this.priority=a,this.once=h,this.next=null,this.previous=null,this._destroyed=!1}return TickerListener.prototype.match=function(i,o){return void 0===o&&(o=null),this.fn===i&&this.context===o},TickerListener.prototype.emit=function(i){this.fn&&(this.context?this.fn.call(this.context,i):this.fn(i));var o=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),o},TickerListener.prototype.connect=function(i){this.previous=i,i.next&&(i.next.previous=this),this.next=i.next,i.next=this},TickerListener.prototype.destroy=function(i){void 0===i&&(i=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var o=this.next;return this.next=i?null:o,this.previous=null,o},TickerListener}(),Oe=function(){function Ticker(){var i=this;this._head=new Pe(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/pe.TARGET_FPMS,this.elapsedMS=1/pe.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(o){i._requestId=null,i.started&&(i.update(o),i.started&&null===i._requestId&&i._head.next&&(i._requestId=requestAnimationFrame(i._tick)))}}return Ticker.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},Ticker.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},Ticker.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},Ticker.prototype.add=function(i,o,a){return void 0===a&&(a=Se.NORMAL),this._addListener(new Pe(i,o,a))},Ticker.prototype.addOnce=function(i,o,a){return void 0===a&&(a=Se.NORMAL),this._addListener(new Pe(i,o,a,!0))},Ticker.prototype._addListener=function(i){var o=this._head.next,a=this._head;if(o){for(;o;){if(i.priority>o.priority){i.connect(a);break}a=o,o=o.next}i.previous||i.connect(a)}else i.connect(a);return this._startIfPossible(),this},Ticker.prototype.remove=function(i,o){for(var a=this._head.next;a;)a=a.match(i,o)?a.destroy():a.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(Ticker.prototype,"count",{get:function get(){if(!this._head)return 0;for(var i=0,o=this._head;o=o.next;)i++;return i},enumerable:!0,configurable:!0}),Ticker.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},Ticker.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},Ticker.prototype.destroy=function(){if(!this._protected){this.stop();for(var i=this._head.next;i;)i=i.destroy(!0);this._head.destroy(),this._head=null}},Ticker.prototype.update=function(i){var o;if(void 0===i&&(i=performance.now()),i>this.lastTime){if((o=this.elapsedMS=i-this.lastTime)>this._maxElapsedMS&&(o=this._maxElapsedMS),o*=this.speed,this._minElapsedMS){var a=i-this._lastFrame|0;if(a<this._minElapsedMS)return;this._lastFrame=i-a%this._minElapsedMS}this.deltaMS=o,this.deltaTime=this.deltaMS*pe.TARGET_FPMS;for(var h=this._head,c=h.next;c;)c=c.emit(this.deltaTime);h.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=i},Object.defineProperty(Ticker.prototype,"FPS",{get:function get(){return 1e3/this.elapsedMS},enumerable:!0,configurable:!0}),Object.defineProperty(Ticker.prototype,"minFPS",{get:function get(){return 1e3/this._maxElapsedMS},set:function set(i){var o=Math.min(this.maxFPS,i),a=Math.min(Math.max(0,o)/1e3,pe.TARGET_FPMS);this._maxElapsedMS=1/a},enumerable:!0,configurable:!0}),Object.defineProperty(Ticker.prototype,"maxFPS",{get:function get(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function set(i){if(0===i)this._minElapsedMS=0;else{var o=Math.max(this.minFPS,i);this._minElapsedMS=1/(o/1e3)}},enumerable:!0,configurable:!0}),Object.defineProperty(Ticker,"shared",{get:function get(){if(!Ticker._shared){var i=Ticker._shared=new Ticker;i.autoStart=!0,i._protected=!0}return Ticker._shared},enumerable:!0,configurable:!0}),Object.defineProperty(Ticker,"system",{get:function get(){if(!Ticker._system){var i=Ticker._system=new Ticker;i.autoStart=!0,i._protected=!0}return Ticker._system},enumerable:!0,configurable:!0}),Ticker}(),Ae=(function(){function TickerPlugin(){}TickerPlugin.init=function(i){var o=this;i=Object.assign({autoStart:!0,sharedTicker:!1},i),Object.defineProperty(this,"ticker",{set:function set(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,Se.LOW)},get:function get(){return this._ticker}}),this.stop=function(){o._ticker.stop()},this.start=function(){o._ticker.start()},this._ticker=null,this.ticker=i.sharedTicker?Oe.shared:new Oe,i.autoStart&&this.start()},TickerPlugin.destroy=function(){if(this._ticker){var i=this._ticker;this.ticker=null,i.destroy()}}}(),function(){function Point(i,o){void 0===i&&(i=0),void 0===o&&(o=0),this.x=i,this.y=o}return Point.prototype.clone=function(){return new Point(this.x,this.y)},Point.prototype.copyFrom=function(i){return this.set(i.x,i.y),this},Point.prototype.copyTo=function(i){return i.set(this.x,this.y),i},Point.prototype.equals=function(i){return i.x===this.x&&i.y===this.y},Point.prototype.set=function(i,o){return void 0===i&&(i=0),void 0===o&&(o=i),this.x=i,this.y=o,this},Point}()),Re=function(){function ObservablePoint(i,o,a,h){void 0===a&&(a=0),void 0===h&&(h=0),this._x=a,this._y=h,this.cb=i,this.scope=o}return ObservablePoint.prototype.clone=function(i,o){return void 0===i&&(i=this.cb),void 0===o&&(o=this.scope),new ObservablePoint(i,o,this._x,this._y)},ObservablePoint.prototype.set=function(i,o){return void 0===i&&(i=0),void 0===o&&(o=i),this._x===i&&this._y===o||(this._x=i,this._y=o,this.cb.call(this.scope)),this},ObservablePoint.prototype.copyFrom=function(i){return this._x===i.x&&this._y===i.y||(this._x=i.x,this._y=i.y,this.cb.call(this.scope)),this},ObservablePoint.prototype.copyTo=function(i){return i.set(this._x,this._y),i},ObservablePoint.prototype.equals=function(i){return i.x===this._x&&i.y===this._y},Object.defineProperty(ObservablePoint.prototype,"x",{get:function get(){return this._x},set:function set(i){this._x!==i&&(this._x=i,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),Object.defineProperty(ObservablePoint.prototype,"y",{get:function get(){return this._y},set:function set(i){this._y!==i&&(this._y=i,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),ObservablePoint}(),Ie=2*Math.PI,ke=180/Math.PI,Fe=Math.PI/180;!function(i){i[i.POLY=0]="POLY",i[i.RECT=1]="RECT",i[i.CIRC=2]="CIRC",i[i.ELIP=3]="ELIP",i[i.RREC=4]="RREC"}(Ce||(Ce={}));var ze=function(){function Matrix(i,o,a,h,c,l){void 0===i&&(i=1),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=1),void 0===c&&(c=0),void 0===l&&(l=0),this.array=null,this.a=i,this.b=o,this.c=a,this.d=h,this.tx=c,this.ty=l}return Matrix.prototype.fromArray=function(i){this.a=i[0],this.b=i[1],this.c=i[3],this.d=i[4],this.tx=i[2],this.ty=i[5]},Matrix.prototype.set=function(i,o,a,h,c,l){return this.a=i,this.b=o,this.c=a,this.d=h,this.tx=c,this.ty=l,this},Matrix.prototype.toArray=function(i,o){this.array||(this.array=new Float32Array(9));var a=o||this.array;return i?(a[0]=this.a,a[1]=this.b,a[2]=0,a[3]=this.c,a[4]=this.d,a[5]=0,a[6]=this.tx,a[7]=this.ty,a[8]=1):(a[0]=this.a,a[1]=this.c,a[2]=this.tx,a[3]=this.b,a[4]=this.d,a[5]=this.ty,a[6]=0,a[7]=0,a[8]=1),a},Matrix.prototype.apply=function(i,o){o=o||new Ae;var a=i.x,h=i.y;return o.x=this.a*a+this.c*h+this.tx,o.y=this.b*a+this.d*h+this.ty,o},Matrix.prototype.applyInverse=function(i,o){o=o||new Ae;var a=1/(this.a*this.d+this.c*-this.b),h=i.x,c=i.y;return o.x=this.d*a*h+-this.c*a*c+(this.ty*this.c-this.tx*this.d)*a,o.y=this.a*a*c+-this.b*a*h+(-this.ty*this.a+this.tx*this.b)*a,o},Matrix.prototype.translate=function(i,o){return this.tx+=i,this.ty+=o,this},Matrix.prototype.scale=function(i,o){return this.a*=i,this.d*=o,this.c*=i,this.b*=o,this.tx*=i,this.ty*=o,this},Matrix.prototype.rotate=function(i){var o=Math.cos(i),a=Math.sin(i),h=this.a,c=this.c,l=this.tx;return this.a=h*o-this.b*a,this.b=h*a+this.b*o,this.c=c*o-this.d*a,this.d=c*a+this.d*o,this.tx=l*o-this.ty*a,this.ty=l*a+this.ty*o,this},Matrix.prototype.append=function(i){var o=this.a,a=this.b,h=this.c,c=this.d;return this.a=i.a*o+i.b*h,this.b=i.a*a+i.b*c,this.c=i.c*o+i.d*h,this.d=i.c*a+i.d*c,this.tx=i.tx*o+i.ty*h+this.tx,this.ty=i.tx*a+i.ty*c+this.ty,this},Matrix.prototype.setTransform=function(i,o,a,h,c,l,m,g,_){return this.a=Math.cos(m+_)*c,this.b=Math.sin(m+_)*c,this.c=-Math.sin(m-g)*l,this.d=Math.cos(m-g)*l,this.tx=i-(a*this.a+h*this.c),this.ty=o-(a*this.b+h*this.d),this},Matrix.prototype.prepend=function(i){var o=this.tx;if(1!==i.a||0!==i.b||0!==i.c||1!==i.d){var a=this.a,h=this.c;this.a=a*i.a+this.b*i.c,this.b=a*i.b+this.b*i.d,this.c=h*i.a+this.d*i.c,this.d=h*i.b+this.d*i.d}return this.tx=o*i.a+this.ty*i.c+i.tx,this.ty=o*i.b+this.ty*i.d+i.ty,this},Matrix.prototype.decompose=function(i){var o=this.a,a=this.b,h=this.c,c=this.d,l=-Math.atan2(-h,c),m=Math.atan2(a,o),g=Math.abs(l+m);return g<1e-5||Math.abs(Ie-g)<1e-5?(i.rotation=m,i.skew.x=i.skew.y=0):(i.rotation=0,i.skew.x=l,i.skew.y=m),i.scale.x=Math.sqrt(o*o+a*a),i.scale.y=Math.sqrt(h*h+c*c),i.position.x=this.tx,i.position.y=this.ty,i},Matrix.prototype.invert=function(){var i=this.a,o=this.b,a=this.c,h=this.d,c=this.tx,l=i*h-o*a;return this.a=h/l,this.b=-o/l,this.c=-a/l,this.d=i/l,this.tx=(a*this.ty-h*c)/l,this.ty=-(i*this.ty-o*c)/l,this},Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Matrix.prototype.clone=function(){var i=new Matrix;return i.a=this.a,i.b=this.b,i.c=this.c,i.d=this.d,i.tx=this.tx,i.ty=this.ty,i},Matrix.prototype.copyTo=function(i){return i.a=this.a,i.b=this.b,i.c=this.c,i.d=this.d,i.tx=this.tx,i.ty=this.ty,i},Matrix.prototype.copyFrom=function(i){return this.a=i.a,this.b=i.b,this.c=i.c,this.d=i.d,this.tx=i.tx,this.ty=i.ty,this},Object.defineProperty(Matrix,"IDENTITY",{get:function get(){return new Matrix},enumerable:!0,configurable:!0}),Object.defineProperty(Matrix,"TEMP_MATRIX",{get:function get(){return new Matrix},enumerable:!0,configurable:!0}),Matrix}(),De=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Le=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Be=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ne=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Ge=[],Ue=[],je=Math.sign;!function init(){for(var i=0;i<16;i++){var o=[];Ge.push(o);for(var a=0;a<16;a++)for(var h=je(De[i]*De[a]+Be[i]*Le[a]),c=je(Le[i]*De[a]+Ne[i]*Le[a]),l=je(De[i]*Be[a]+Be[i]*Ne[a]),m=je(Le[i]*Be[a]+Ne[i]*Ne[a]),g=0;g<16;g++)if(De[g]===h&&Le[g]===c&&Be[g]===l&&Ne[g]===m){o.push(g);break}}for(i=0;i<16;i++){var _=new ze;_.set(De[i],Le[i],Be[i],Ne[i],0,0),Ue.push(_)}}();var We={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function uX(i){return De[i]},uY:function uY(i){return Le[i]},vX:function vX(i){return Be[i]},vY:function vY(i){return Ne[i]},inv:function inv(i){return 8&i?15&i:7&-i},add:function add(i,o){return Ge[i][o]},sub:function sub(i,o){return Ge[i][We.inv(o)]},rotate180:function rotate180(i){return 4^i},isVertical:function isVertical(i){return 2==(3&i)},byDirection:function byDirection(i,o){return 2*Math.abs(i)<=Math.abs(o)?o>=0?We.S:We.N:2*Math.abs(o)<=Math.abs(i)?i>0?We.E:We.W:o>0?i>0?We.SE:We.SW:i>0?We.NE:We.NW},matrixAppendRotationInv:function matrixAppendRotationInv(i,o,a,h){void 0===a&&(a=0),void 0===h&&(h=0);var c=Ue[We.inv(o)];c.tx=a,c.ty=h,i.append(c)}},Xe=function(){function Transform(){this.worldTransform=new ze,this.localTransform=new ze,this.position=new Re(this.onChange,this,0,0),this.scale=new Re(this.onChange,this,1,1),this.pivot=new Re(this.onChange,this,0,0),this.skew=new Re(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return Transform.prototype.onChange=function(){this._localID++},Transform.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},Transform.prototype.updateLocalTransform=function(){var i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1)},Transform.prototype.updateTransform=function(i){var o=this.localTransform;if(this._localID!==this._currentLocalID&&(o.a=this._cx*this.scale.x,o.b=this._sx*this.scale.x,o.c=this._cy*this.scale.y,o.d=this._sy*this.scale.y,o.tx=this.position.x-(this.pivot.x*o.a+this.pivot.y*o.c),o.ty=this.position.y-(this.pivot.x*o.b+this.pivot.y*o.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==i._worldID){var a=i.worldTransform,h=this.worldTransform;h.a=o.a*a.a+o.b*a.c,h.b=o.a*a.b+o.b*a.d,h.c=o.c*a.a+o.d*a.c,h.d=o.c*a.b+o.d*a.d,h.tx=o.tx*a.a+o.ty*a.c+a.tx,h.ty=o.tx*a.b+o.ty*a.d+a.ty,this._parentID=i._worldID,this._worldID++}},Transform.prototype.setFromMatrix=function(i){i.decompose(this),this._localID++},Object.defineProperty(Transform.prototype,"rotation",{get:function get(){return this._rotation},set:function set(i){this._rotation!==i&&(this._rotation=i,this.updateSkew())},enumerable:!0,configurable:!0}),Transform.IDENTITY=new Transform,Transform}(),He=function(){function Rectangle(i,o,a,h){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.x=Number(i),this.y=Number(o),this.width=Number(a),this.height=Number(h),this.type=Ce.RECT}return Object.defineProperty(Rectangle.prototype,"left",{get:function get(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(Rectangle.prototype,"right",{get:function get(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(Rectangle.prototype,"top",{get:function get(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(Rectangle.prototype,"bottom",{get:function get(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(Rectangle,"EMPTY",{get:function get(){return new Rectangle(0,0,0,0)},enumerable:!0,configurable:!0}),Rectangle.prototype.clone=function(){return new Rectangle(this.x,this.y,this.width,this.height)},Rectangle.prototype.copyFrom=function(i){return this.x=i.x,this.y=i.y,this.width=i.width,this.height=i.height,this},Rectangle.prototype.copyTo=function(i){return i.x=this.x,i.y=this.y,i.width=this.width,i.height=this.height,i},Rectangle.prototype.contains=function(i,o){return!(this.width<=0||this.height<=0)&&i>=this.x&&i<this.x+this.width&&o>=this.y&&o<this.y+this.height},Rectangle.prototype.pad=function(i,o){return void 0===i&&(i=0),void 0===o&&(o=i),this.x-=i,this.y-=o,this.width+=2*i,this.height+=2*o,this},Rectangle.prototype.fit=function(i){var o=Math.max(this.x,i.x),a=Math.min(this.x+this.width,i.x+i.width),h=Math.max(this.y,i.y),c=Math.min(this.y+this.height,i.y+i.height);return this.x=o,this.width=Math.max(a-o,0),this.y=h,this.height=Math.max(c-h,0),this},Rectangle.prototype.ceil=function(i,o){void 0===i&&(i=1),void 0===o&&(o=.001);var a=Math.ceil((this.x+this.width-o)*i)/i,h=Math.ceil((this.y+this.height-o)*i)/i;return this.x=Math.floor((this.x+o)*i)/i,this.y=Math.floor((this.y+o)*i)/i,this.width=a-this.x,this.height=h-this.y,this},Rectangle.prototype.enlarge=function(i){var o=Math.min(this.x,i.x),a=Math.max(this.x+this.width,i.x+i.width),h=Math.min(this.y,i.y),c=Math.max(this.y+this.height,i.y+i.height);return this.x=o,this.width=a-o,this.y=h,this.height=c-h,this},Rectangle}();(function(){function Circle(i,o,a){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),this.x=i,this.y=o,this.radius=a,this.type=Ce.CIRC}Circle.prototype.clone=function(){return new Circle(this.x,this.y,this.radius)},Circle.prototype.contains=function(i,o){if(this.radius<=0)return!1;var a=this.radius*this.radius,h=this.x-i,c=this.y-o;return(h*=h)+(c*=c)<=a},Circle.prototype.getBounds=function(){return new He(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}})(),function(){function Ellipse(i,o,a,h){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.x=i,this.y=o,this.width=a,this.height=h,this.type=Ce.ELIP}Ellipse.prototype.clone=function(){return new Ellipse(this.x,this.y,this.width,this.height)},Ellipse.prototype.contains=function(i,o){if(this.width<=0||this.height<=0)return!1;var a=(i-this.x)/this.width,h=(o-this.y)/this.height;return(a*=a)+(h*=h)<=1},Ellipse.prototype.getBounds=function(){return new He(this.x-this.width,this.y-this.height,this.width,this.height)}}(),function(){function Polygon(){for(var i=arguments,o=[],a=0;a<arguments.length;a++)o[a]=i[a];if(Array.isArray(o[0])&&(o=o[0]),o[0]instanceof Ae){for(var h=[],c=0,l=(o=o).length;c<l;c++)h.push(o[c].x,o[c].y);o=h}this.points=o,this.type=Ce.POLY,this.closeStroke=!0}Polygon.prototype.clone=function(){var i=new Polygon(this.points.slice());return i.closeStroke=this.closeStroke,i},Polygon.prototype.contains=function(i,o){for(var a=!1,h=this.points.length/2,c=0,l=h-1;c<h;l=c++){var m=this.points[2*c],g=this.points[2*c+1],_=this.points[2*l],x=this.points[2*l+1];g>o!=x>o&&i<(o-g)/(x-g)*(_-m)+m&&(a=!a)}return a}}(),function(){function RoundedRectangle(i,o,a,h,c){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===c&&(c=20),this.x=i,this.y=o,this.width=a,this.height=h,this.radius=c,this.type=Ce.RREC}RoundedRectangle.prototype.clone=function(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},RoundedRectangle.prototype.contains=function(i,o){if(this.width<=0||this.height<=0)return!1;if(i>=this.x&&i<=this.x+this.width&&o>=this.y&&o<=this.y+this.height){if(o>=this.y+this.radius&&o<=this.y+this.height-this.radius||i>=this.x+this.radius&&i<=this.x+this.width-this.radius)return!0;var a=i-(this.x+this.radius),h=o-(this.y+this.radius),c=this.radius*this.radius;if(a*a+h*h<=c)return!0;if((a=i-(this.x+this.width-this.radius))*a+h*h<=c)return!0;if(a*a+(h=o-(this.y+this.height-this.radius))*h<=c)return!0;if((a=i-(this.x+this.radius))*a+h*h<=c)return!0}return!1}}(),pe.SORTABLE_CHILDREN=!1;var Ve=function Bounds(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null};Ve.prototype.isEmpty=function isEmpty(){return this.minX>this.maxX||this.minY>this.maxY},Ve.prototype.clear=function clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},Ve.prototype.getRectangle=function getRectangle(i){return this.minX>this.maxX||this.minY>this.maxY?He.EMPTY:((i=i||new He(0,0,1,1)).x=this.minX,i.y=this.minY,i.width=this.maxX-this.minX,i.height=this.maxY-this.minY,i)},Ve.prototype.addPoint=function addPoint(i){this.minX=Math.min(this.minX,i.x),this.maxX=Math.max(this.maxX,i.x),this.minY=Math.min(this.minY,i.y),this.maxY=Math.max(this.maxY,i.y)},Ve.prototype.addQuad=function addQuad(i){var o=this.minX,a=this.minY,h=this.maxX,c=this.maxY,l=i[0],m=i[1];o=l<o?l:o,a=m<a?m:a,h=l>h?l:h,c=m>c?m:c,o=(l=i[2])<o?l:o,a=(m=i[3])<a?m:a,h=l>h?l:h,c=m>c?m:c,o=(l=i[4])<o?l:o,a=(m=i[5])<a?m:a,h=l>h?l:h,c=m>c?m:c,o=(l=i[6])<o?l:o,a=(m=i[7])<a?m:a,h=l>h?l:h,c=m>c?m:c,this.minX=o,this.minY=a,this.maxX=h,this.maxY=c},Ve.prototype.addFrame=function addFrame(i,o,a,h,c){this.addFrameMatrix(i.worldTransform,o,a,h,c)},Ve.prototype.addFrameMatrix=function addFrameMatrix(i,o,a,h,c){var l=i.a,m=i.b,g=i.c,_=i.d,x=i.tx,S=i.ty,R=this.minX,k=this.minY,j=this.maxX,X=this.maxY,Y=l*o+g*a+x,q=m*o+_*a+S;R=Y<R?Y:R,k=q<k?q:k,j=Y>j?Y:j,X=q>X?q:X,R=(Y=l*h+g*a+x)<R?Y:R,k=(q=m*h+_*a+S)<k?q:k,j=Y>j?Y:j,X=q>X?q:X,R=(Y=l*o+g*c+x)<R?Y:R,k=(q=m*o+_*c+S)<k?q:k,j=Y>j?Y:j,X=q>X?q:X,R=(Y=l*h+g*c+x)<R?Y:R,k=(q=m*h+_*c+S)<k?q:k,j=Y>j?Y:j,X=q>X?q:X,this.minX=R,this.minY=k,this.maxX=j,this.maxY=X},Ve.prototype.addVertexData=function addVertexData(i,o,a){for(var h=this.minX,c=this.minY,l=this.maxX,m=this.maxY,g=o;g<a;g+=2){var _=i[g],x=i[g+1];h=_<h?_:h,c=x<c?x:c,l=_>l?_:l,m=x>m?x:m}this.minX=h,this.minY=c,this.maxX=l,this.maxY=m},Ve.prototype.addVertices=function addVertices(i,o,a,h){this.addVerticesMatrix(i.worldTransform,o,a,h)},Ve.prototype.addVerticesMatrix=function addVerticesMatrix(i,o,a,h,c,l){var m=i.a,g=i.b,_=i.c,x=i.d,S=i.tx,R=i.ty;c=c||0,l=l||0;for(var k=this.minX,j=this.minY,X=this.maxX,Y=this.maxY,q=a;q<h;q+=2){var Z=o[q],$=o[q+1],ee=m*Z+_*$+S,te=x*$+g*Z+R;k=Math.min(k,ee-c),X=Math.max(X,ee+c),j=Math.min(j,te-l),Y=Math.max(Y,te+l)}this.minX=k,this.minY=j,this.maxX=X,this.maxY=Y},Ve.prototype.addBounds=function addBounds(i){var o=this.minX,a=this.minY,h=this.maxX,c=this.maxY;this.minX=i.minX<o?i.minX:o,this.minY=i.minY<a?i.minY:a,this.maxX=i.maxX>h?i.maxX:h,this.maxY=i.maxY>c?i.maxY:c},Ve.prototype.addBoundsMask=function addBoundsMask(i,o){var a=i.minX>o.minX?i.minX:o.minX,h=i.minY>o.minY?i.minY:o.minY,c=i.maxX<o.maxX?i.maxX:o.maxX,l=i.maxY<o.maxY?i.maxY:o.maxY;if(a<=c&&h<=l){var m=this.minX,g=this.minY,_=this.maxX,x=this.maxY;this.minX=a<m?a:m,this.minY=h<g?h:g,this.maxX=c>_?c:_,this.maxY=l>x?l:x}},Ve.prototype.addBoundsMatrix=function addBoundsMatrix(i,o){this.addFrameMatrix(o,i.minX,i.minY,i.maxX,i.maxY)},Ve.prototype.addBoundsArea=function addBoundsArea(i,o){var a=i.minX>o.x?i.minX:o.x,h=i.minY>o.y?i.minY:o.y,c=i.maxX<o.x+o.width?i.maxX:o.x+o.width,l=i.maxY<o.y+o.height?i.maxY:o.y+o.height;if(a<=c&&h<=l){var m=this.minX,g=this.minY,_=this.maxX,x=this.maxY;this.minX=a<m?a:m,this.minY=h<g?h:g,this.maxX=c>_?c:_,this.maxY=l>x?l:x}},Ve.prototype.pad=function pad(i,o){i=i||0,o=o||(0!==o?i:0),this.isEmpty()||(this.minX-=i,this.maxX+=i,this.minY-=o,this.maxY+=o)},Ve.prototype.addFramePad=function addFramePad(i,o,a,h,c,l){i-=c,o-=l,a+=c,h+=l,this.minX=this.minX<i?this.minX:i,this.maxX=this.maxX>a?this.maxX:a,this.minY=this.minY<o?this.minY:o,this.maxY=this.maxY>h?this.maxY:h};var Ye=function(i){function DisplayObject(){i.call(this),this.tempDisplayObjectParent=null,this.transform=new Xe,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Ve,this._boundsID=0,this._lastBoundsID=-1,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}i&&(DisplayObject.__proto__=i),DisplayObject.prototype=Object.create(i&&i.prototype),DisplayObject.prototype.constructor=DisplayObject;var o={_tempDisplayObjectParent:{configurable:!0},x:{configurable:!0},y:{configurable:!0},worldTransform:{configurable:!0},localTransform:{configurable:!0},position:{configurable:!0},scale:{configurable:!0},pivot:{configurable:!0},skew:{configurable:!0},rotation:{configurable:!0},angle:{configurable:!0},zIndex:{configurable:!0},worldVisible:{configurable:!0},mask:{configurable:!0}};return DisplayObject.mixin=function mixin(i){for(var o=Object.keys(i),a=0;a<o.length;++a){var h=o[a];Object.defineProperty(DisplayObject.prototype,h,Object.getOwnPropertyDescriptor(i,h))}},o._tempDisplayObjectParent.get=function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new DisplayObject),this.tempDisplayObjectParent},DisplayObject.prototype.updateTransform=function updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},DisplayObject.prototype.calculateBounds=function calculateBounds(){},DisplayObject.prototype._recursivePostUpdateTransform=function _recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},DisplayObject.prototype.getBounds=function getBounds(i,o){return i||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&(this.calculateBounds(),this._lastBoundsID=this._boundsID),o||(this._boundsRect||(this._boundsRect=new He),o=this._boundsRect),this._bounds.getRectangle(o)},DisplayObject.prototype.getLocalBounds=function getLocalBounds(i){var o=this.transform,a=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,i||(this._localBoundsRect||(this._localBoundsRect=new He),i=this._localBoundsRect);var h=this.getBounds(!1,i);return this.parent=a,this.transform=o,h},DisplayObject.prototype.toGlobal=function toGlobal(i,o,a){return void 0===a&&(a=!1),a||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(i,o)},DisplayObject.prototype.toLocal=function toLocal(i,o,a,h){return o&&(i=o.toGlobal(i,a,h)),h||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(i,a)},DisplayObject.prototype.render=function render(i){},DisplayObject.prototype.setParent=function setParent(i){if(!i||!i.addChild)throw new Error("setParent: Argument must be a Container");return i.addChild(this),i},DisplayObject.prototype.setTransform=function setTransform(i,o,a,h,c,l,m,g,_){return void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=1),void 0===h&&(h=1),void 0===c&&(c=0),void 0===l&&(l=0),void 0===m&&(m=0),void 0===g&&(g=0),void 0===_&&(_=0),this.position.x=i,this.position.y=o,this.scale.x=a||1,this.scale.y=h||1,this.rotation=c,this.skew.x=l,this.skew.y=m,this.pivot.x=g,this.pivot.y=_,this},DisplayObject.prototype.destroy=function destroy(){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},o.x.get=function(){return this.position.x},o.x.set=function(i){this.transform.position.x=i},o.y.get=function(){return this.position.y},o.y.set=function(i){this.transform.position.y=i},o.worldTransform.get=function(){return this.transform.worldTransform},o.localTransform.get=function(){return this.transform.localTransform},o.position.get=function(){return this.transform.position},o.position.set=function(i){this.transform.position.copyFrom(i)},o.scale.get=function(){return this.transform.scale},o.scale.set=function(i){this.transform.scale.copyFrom(i)},o.pivot.get=function(){return this.transform.pivot},o.pivot.set=function(i){this.transform.pivot.copyFrom(i)},o.skew.get=function(){return this.transform.skew},o.skew.set=function(i){this.transform.skew.copyFrom(i)},o.rotation.get=function(){return this.transform.rotation},o.rotation.set=function(i){this.transform.rotation=i},o.angle.get=function(){return this.transform.rotation*ke},o.angle.set=function(i){this.transform.rotation=i*Fe},o.zIndex.get=function(){return this._zIndex},o.zIndex.set=function(i){this._zIndex=i,this.parent&&(this.parent.sortDirty=!0)},o.worldVisible.get=function(){var i=this;do{if(!i.visible)return!1;i=i.parent}while(i);return!0},o.mask.get=function(){return this._mask},o.mask.set=function(i){if(this._mask){var o=this._mask.maskObject||this._mask;o.renderable=!0,o.isMask=!1}if(this._mask=i,this._mask){var a=this._mask.maskObject||this._mask;a.renderable=!1,a.isMask=!0}},Object.defineProperties(DisplayObject.prototype,o),DisplayObject}(me.a);function sortChildren(i,o){return i.zIndex===o.zIndex?i._lastSortedIndex-o._lastSortedIndex:i.zIndex-o.zIndex}Ye.prototype.displayObjectUpdateTransform=Ye.prototype.updateTransform;var qe=function(i){function Container(){i.call(this),this.children=[],this.sortableChildren=pe.SORTABLE_CHILDREN,this.sortDirty=!1}i&&(Container.__proto__=i),Container.prototype=Object.create(i&&i.prototype),Container.prototype.constructor=Container;var o={width:{configurable:!0},height:{configurable:!0}};return Container.prototype.onChildrenChange=function onChildrenChange(){},Container.prototype.addChild=function addChild(i){var o=arguments,a=arguments.length;if(a>1)for(var h=0;h<a;h++)this.addChild(o[h]);else i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this);return i},Container.prototype.addChildAt=function addChildAt(i,o){if(o<0||o>this.children.length)throw new Error(i+"addChildAt: The index "+o+" supplied is out of bounds "+this.children.length);return i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.splice(o,0,i),this._boundsID++,this.onChildrenChange(o),i.emit("added",this),this.emit("childAdded",i,this,o),i},Container.prototype.swapChildren=function swapChildren(i,o){if(i!==o){var a=this.getChildIndex(i),h=this.getChildIndex(o);this.children[a]=o,this.children[h]=i,this.onChildrenChange(a<h?a:h)}},Container.prototype.getChildIndex=function getChildIndex(i){var o=this.children.indexOf(i);if(-1===o)throw new Error("The supplied DisplayObject must be a child of the caller");return o},Container.prototype.setChildIndex=function setChildIndex(i,o){if(o<0||o>=this.children.length)throw new Error("The index "+o+" supplied is out of bounds "+this.children.length);var a=this.getChildIndex(i);removeItems(this.children,a,1),this.children.splice(o,0,i),this.onChildrenChange(o)},Container.prototype.getChildAt=function getChildAt(i){if(i<0||i>=this.children.length)throw new Error("getChildAt: Index ("+i+") does not exist.");return this.children[i]},Container.prototype.removeChild=function removeChild(i){var o=arguments,a=arguments.length;if(a>1)for(var h=0;h<a;h++)this.removeChild(o[h]);else{var c=this.children.indexOf(i);if(-1===c)return null;i.parent=null,i.transform._parentID=-1,removeItems(this.children,c,1),this._boundsID++,this.onChildrenChange(c),i.emit("removed",this),this.emit("childRemoved",i,this,c)}return i},Container.prototype.removeChildAt=function removeChildAt(i){var o=this.getChildAt(i);return o.parent=null,o.transform._parentID=-1,removeItems(this.children,i,1),this._boundsID++,this.onChildrenChange(i),o.emit("removed",this),this.emit("childRemoved",o,this,i),o},Container.prototype.removeChildren=function removeChildren(i,o){void 0===i&&(i=0);var a,h=i,c="number"==typeof o?o:this.children.length,l=c-h;if(l>0&&l<=c){a=this.children.splice(h,l);for(var m=0;m<a.length;++m)a[m].parent=null,a[m].transform&&(a[m].transform._parentID=-1);this._boundsID++,this.onChildrenChange(i);for(var g=0;g<a.length;++g)a[g].emit("removed",this),this.emit("childRemoved",a[g],this,g);return a}if(0===l&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},Container.prototype.sortChildren=function sortChildren$1(){for(var i=!1,o=0,a=this.children.length;o<a;++o){var h=this.children[o];h._lastSortedIndex=o,i||0===h.zIndex||(i=!0)}i&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1},Container.prototype.updateTransform=function updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var i=0,o=this.children.length;i<o;++i){var a=this.children[i];a.visible&&a.updateTransform()}},Container.prototype.calculateBounds=function calculateBounds(){this._bounds.clear(),this._calculateBounds();for(var i=0;i<this.children.length;i++){var o=this.children[i];if(o.visible&&o.renderable)if(o.calculateBounds(),o._mask){var a=o._mask.maskObject||o._mask;a.calculateBounds(),this._bounds.addBoundsMask(o._bounds,a._bounds)}else o.filterArea?this._bounds.addBoundsArea(o._bounds,o.filterArea):this._bounds.addBounds(o._bounds)}this._lastBoundsID=this._boundsID},Container.prototype._calculateBounds=function _calculateBounds(){},Container.prototype.render=function render(i){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(i);else{this._render(i);for(var o=0,a=this.children.length;o<a;++o)this.children[o].render(i)}},Container.prototype.renderAdvanced=function renderAdvanced(i){i.batch.flush();var o=this.filters,a=this._mask;if(o){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var h=0;h<o.length;h++)o[h].enabled&&this._enabledFilters.push(o[h]);this._enabledFilters.length&&i.filter.push(this,this._enabledFilters)}a&&i.mask.push(this,this._mask),this._render(i);for(var c=0,l=this.children.length;c<l;c++)this.children[c].render(i);i.batch.flush(),a&&i.mask.pop(this,this._mask),o&&this._enabledFilters&&this._enabledFilters.length&&i.filter.pop()},Container.prototype._render=function _render(i){},Container.prototype.destroy=function destroy(o){i.prototype.destroy.call(this),this.sortDirty=!1;var a="boolean"==typeof o?o:o&&o.children,h=this.removeChildren(0,this.children.length);if(a)for(var c=0;c<h.length;++c)h[c].destroy(o)},o.width.get=function(){return this.scale.x*this.getLocalBounds().width},o.width.set=function(i){var o=this.getLocalBounds().width;this.scale.x=0!==o?i/o:1,this._width=i},o.height.get=function(){return this.scale.y*this.getLocalBounds().height},o.height.set=function(i){var o=this.getLocalBounds().height;this.scale.y=0!==o?i/o:1,this._height=i},Object.defineProperties(Container.prototype,o),Container}(Ye);qe.prototype.containerUpdateTransform=qe.prototype.updateTransform;var Ke=function Resource(i,o){void 0===i&&(i=0),void 0===o&&(o=0),this._width=i,this._height=o,this.destroyed=!1,this.internal=!1,this.onResize=new X("setRealSize",2),this.onUpdate=new X("update"),this.onError=new X("onError",1)},Ze={valid:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};Ke.prototype.bind=function bind(i){this.onResize.add(i),this.onUpdate.add(i),this.onError.add(i),(this._width||this._height)&&this.onResize.run(this._width,this._height)},Ke.prototype.unbind=function unbind(i){this.onResize.remove(i),this.onUpdate.remove(i),this.onError.remove(i)},Ke.prototype.resize=function resize(i,o){i===this._width&&o===this._height||(this._width=i,this._height=o,this.onResize.run(i,o))},Ze.valid.get=function(){return!!this._width&&!!this._height},Ke.prototype.update=function update(){this.destroyed||this.onUpdate.run()},Ke.prototype.load=function load(){return Promise.resolve()},Ze.width.get=function(){return this._width},Ze.height.get=function(){return this._height},Ke.prototype.upload=function upload(i,o,a){return!1},Ke.prototype.style=function style(i,o,a){return!1},Ke.prototype.dispose=function dispose(){},Ke.prototype.destroy=function destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Object.defineProperties(Ke.prototype,Ze);var Qe=function(i){function BaseImageResource(o){var a=o.naturalWidth||o.videoWidth||o.width,h=o.naturalHeight||o.videoHeight||o.height;i.call(this,a,h),this.source=o,this.noSubImage=!1}return i&&(BaseImageResource.__proto__=i),BaseImageResource.prototype=Object.create(i&&i.prototype),BaseImageResource.prototype.constructor=BaseImageResource,BaseImageResource.crossOrigin=function crossOrigin(i,o,a){void 0===a&&0!==o.indexOf("data:")?i.crossOrigin=function determineCrossOrigin(i,o){if(void 0===o&&(o=window.location),0===i.indexOf("data:"))return"";o=o||window.location,xe||(xe=document.createElement("a")),xe.href=i;var a=Object(ye.parse)(xe.href),h=!a.port&&""===o.port||a.port===o.port;return a.hostname===o.hostname&&h&&a.protocol===o.protocol?"":"anonymous"}(o):!1!==a&&(i.crossOrigin="string"==typeof a?a:"anonymous")},BaseImageResource.prototype.upload=function upload(i,o,a,h){var c=i.gl,l=o.realWidth,m=o.realHeight;return h=h||this.source,c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.alphaMode===ae.UNPACK),this.noSubImage||o.target!==c.TEXTURE_2D||a.width!==l||a.height!==m?(a.width=l,a.height=m,c.texImage2D(o.target,0,o.format,o.format,o.type,h)):c.texSubImage2D(c.TEXTURE_2D,0,0,0,o.format,o.type,h),!0},BaseImageResource.prototype.update=function update(){if(!this.destroyed){var o=this.source.naturalWidth||this.source.videoWidth||this.source.width,a=this.source.naturalHeight||this.source.videoHeight||this.source.height;this.resize(o,a),i.prototype.update.call(this)}},BaseImageResource.prototype.dispose=function dispose(){this.source=null},BaseImageResource}(Ke),Je=function(i){function ImageResource(o,a){if(a=a||{},!(o instanceof HTMLImageElement)){var h=new Image;i.crossOrigin(h,o,a.crossorigin),h.src=o,o=h}i.call(this,o),!o.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=o.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(void 0!==a.createBitmap?a.createBitmap:pe.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,this.alphaMode="number"==typeof a.alphaMode?a.alphaMode:null,void 0!==a.premultiplyAlpha&&(this.premultiplyAlpha=a.premultiplyAlpha),this.bitmap=null,this._load=null,!1!==a.autoLoad&&this.load()}return i&&(ImageResource.__proto__=i),ImageResource.prototype=Object.create(i&&i.prototype),ImageResource.prototype.constructor=ImageResource,ImageResource.prototype.load=function load(i){var o=this;return this._load||(void 0!==i&&(this.createBitmap=i),this._load=new Promise((function(i,a){o.url=o.source.src;var h=o.source,c=function completed(){o.destroyed||(h.onload=null,h.onerror=null,o.resize(h.width,h.height),o._load=null,o.createBitmap?i(o.process()):i(o))};h.complete&&h.src?c():(h.onload=c,h.onerror=function(i){a(i),o.onError.emit(i)})}))),this._load},ImageResource.prototype.process=function process(){var i=this;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(this.source,0,0,this.source.width,this.source.height,{premultiplyAlpha:this.premultiplyAlpha===ae.UNPACK?"premultiply":"none"}).then((function(o){return i.destroyed?Promise.reject():(i.bitmap=o,i.update(),i._process=null,Promise.resolve(i))})),this._process):Promise.resolve(this)},ImageResource.prototype.upload=function upload(o,a,h){if("number"==typeof this.alphaMode&&(a.alphaMode=this.alphaMode),!this.createBitmap)return i.prototype.upload.call(this,o,a,h);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(i.prototype.upload.call(this,o,a,h,this.bitmap),!this.preserveBitmap){var c=!0;for(var l in a._glTextures){var m=a._glTextures[l];if(m!==h&&m.dirtyId!==a.dirtyId){c=!1;break}}c&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},ImageResource.prototype.dispose=function dispose(){this.source.onload=null,this.source.onerror=null,i.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},ImageResource}(Qe),$e=[];function autoDetectResource(i,o){if(!i)return null;var a="";if("string"==typeof i){var h=/\.(\w{3,4})(?:$|\?|#)/i.exec(i);h&&(a=h[1].toLowerCase())}for(var c=$e.length-1;c>=0;--c){var l=$e[c];if(l.test&&l.test(i,a))return new l(i,o)}return new Je(i,o)}var et=function(i){function BufferResource(o,a){var h=a||{},c=h.width,l=h.height;if(!c||!l)throw new Error("BufferResource width or height invalid");i.call(this,c,l),this.data=o}return i&&(BufferResource.__proto__=i),BufferResource.prototype=Object.create(i&&i.prototype),BufferResource.prototype.constructor=BufferResource,BufferResource.prototype.upload=function upload(i,o,a){var h=i.gl;return h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.alphaMode===ae.UNPACK),a.width===o.width&&a.height===o.height?h.texSubImage2D(o.target,0,0,0,o.width,o.height,o.format,o.type,this.data):(a.width=o.width,a.height=o.height,h.texImage2D(o.target,0,a.internalFormat,o.width,o.height,0,o.format,a.type,this.data)),!0},BufferResource.prototype.dispose=function dispose(){this.data=null},BufferResource.test=function test(i){return i instanceof Float32Array||i instanceof Uint8Array||i instanceof Uint32Array},BufferResource}(Ke),tt={scaleMode:ie.NEAREST,format:ee.RGBA,alphaMode:ae.NPM},rt=function(i){function BaseTexture(o,a){void 0===o&&(o=null),void 0===a&&(a=null),i.call(this);var h=(a=a||{}).alphaMode,c=a.mipmap,l=a.anisotropicLevel,m=a.scaleMode,g=a.width,_=a.height,x=a.wrapMode,S=a.format,R=a.type,k=a.target,j=a.resolution,X=a.resourceOptions;!o||o instanceof Ke||((o=autoDetectResource(o,X)).internal=!0),this.width=g||0,this.height=_||0,this.resolution=j||pe.RESOLUTION,this.mipmap=void 0!==c?c:pe.MIPMAP_TEXTURES,this.anisotropicLevel=void 0!==l?l:pe.ANISOTROPIC_LEVEL,this.wrapMode=x||pe.WRAP_MODE,this.scaleMode=void 0!==m?m:pe.SCALE_MODE,this.format=S||ee.RGBA,this.type=R||re.UNSIGNED_BYTE,this.target=k||te.TEXTURE_2D,this.alphaMode=void 0!==h?h:ae.UNPACK,void 0!==a.premultiplyAlpha&&(this.premultiplyAlpha=a.premultiplyAlpha),this.uid=uid(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=g>0&&_>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.setResource(o)}i&&(BaseTexture.__proto__=i),BaseTexture.prototype=Object.create(i&&i.prototype),BaseTexture.prototype.constructor=BaseTexture;var o={realWidth:{configurable:!0},realHeight:{configurable:!0}};return o.realWidth.get=function(){return Math.ceil(this.width*this.resolution-1e-4)},o.realHeight.get=function(){return Math.ceil(this.height*this.resolution-1e-4)},BaseTexture.prototype.setStyle=function setStyle(i,o){var a;return void 0!==i&&i!==this.scaleMode&&(this.scaleMode=i,a=!0),void 0!==o&&o!==this.mipmap&&(this.mipmap=o,a=!0),a&&this.dirtyStyleId++,this},BaseTexture.prototype.setSize=function setSize(i,o,a){return this.resolution=a||this.resolution,this.width=i,this.height=o,this._refreshPOT(),this.update(),this},BaseTexture.prototype.setRealSize=function setRealSize(i,o,a){return this.resolution=a||this.resolution,this.width=i/this.resolution,this.height=o/this.resolution,this._refreshPOT(),this.update(),this},BaseTexture.prototype._refreshPOT=function _refreshPOT(){this.isPowerOfTwo=isPow2(this.realWidth)&&isPow2(this.realHeight)},BaseTexture.prototype.setResolution=function setResolution(i){var o=this.resolution;return o===i||(this.resolution=i,this.valid&&(this.width=this.width*o/i,this.height=this.height*o/i,this.emit("update",this)),this._refreshPOT()),this},BaseTexture.prototype.setResource=function setResource(i){if(this.resource===i)return this;if(this.resource)throw new Error("Resource can be set only once");return i.bind(this),this.resource=i,this},BaseTexture.prototype.update=function update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},BaseTexture.prototype.onError=function onError(i){this.emit("error",this,i)},BaseTexture.prototype.destroy=function destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Te[this.cacheId],delete we[this.cacheId],this.cacheId=null),this.dispose(),BaseTexture.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},BaseTexture.prototype.dispose=function dispose(){this.emit("dispose",this)},BaseTexture.from=function from(i,o,a){void 0===a&&(a=pe.STRICT_TEXTURE_CACHE);var h="string"==typeof i,c=null;h?c=i:(i._pixiId||(i._pixiId="pixiid_"+uid()),c=i._pixiId);var l=Te[c];if(h&&a&&!l)throw new Error('The cacheId "'+c+'" does not exist in BaseTextureCache.');return l||((l=new BaseTexture(i,o)).cacheId=c,BaseTexture.addToCache(l,c)),l},BaseTexture.fromBuffer=function fromBuffer(i,o,a,h){i=i||new Float32Array(o*a*4);var c=new et(i,{width:o,height:a}),l=i instanceof Float32Array?re.FLOAT:re.UNSIGNED_BYTE;return new BaseTexture(c,Object.assign(tt,h||{width:o,height:a,type:l}))},BaseTexture.addToCache=function addToCache(i,o){o&&(-1===i.textureCacheIds.indexOf(o)&&i.textureCacheIds.push(o),Te[o]&&console.warn("BaseTexture added to the cache with an id ["+o+"] that already had an entry"),Te[o]=i)},BaseTexture.removeFromCache=function removeFromCache(i){if("string"==typeof i){var o=Te[i];if(o){var a=o.textureCacheIds.indexOf(i);return a>-1&&o.textureCacheIds.splice(a,1),delete Te[i],o}}else if(i&&i.textureCacheIds){for(var h=0;h<i.textureCacheIds.length;++h)delete Te[i.textureCacheIds[h]];return i.textureCacheIds.length=0,i}return null},Object.defineProperties(BaseTexture.prototype,o),BaseTexture}(me.a);rt._globalBatch=0;var it=function(i){function ArrayResource(o,a){var h;a=a||{};var c=o;Array.isArray(o)&&(h=o,c=o.length),i.call(this,a.width,a.height),this.items=[],this.itemDirtyIds=[];for(var l=0;l<c;l++){var m=new rt;this.items.push(m),this.itemDirtyIds.push(-1)}if(this.length=c,this._load=null,h)for(var g=0;g<c;g++)this.addResourceAt(autoDetectResource(h[g],a),g)}return i&&(ArrayResource.__proto__=i),ArrayResource.prototype=Object.create(i&&i.prototype),ArrayResource.prototype.constructor=ArrayResource,ArrayResource.prototype.dispose=function dispose(){for(var i=0,o=this.length;i<o;i++)this.items[i].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},ArrayResource.prototype.addResourceAt=function addResourceAt(i,o){if(!this.items[o])throw new Error("Index "+o+" is out of bounds");return i.valid&&!this.valid&&this.resize(i.width,i.height),this.items[o].setResource(i),this},ArrayResource.prototype.bind=function bind(o){i.prototype.bind.call(this,o),o.target=te.TEXTURE_2D_ARRAY;for(var a=0;a<this.length;a++)this.items[a].on("update",o.update,o)},ArrayResource.prototype.unbind=function unbind(o){i.prototype.unbind.call(this,o);for(var a=0;a<this.length;a++)this.items[a].off("update",o.update,o)},ArrayResource.prototype.load=function load(){var i=this;if(this._load)return this._load;var o=this.items.map((function(i){return i.resource})),a=o.map((function(i){return i.load()}));return this._load=Promise.all(a).then((function(){var a=o[0],h=a.width,c=a.height;return i.resize(h,c),Promise.resolve(i)})),this._load},ArrayResource.prototype.upload=function upload(i,o,a){var h=this.length,c=this.itemDirtyIds,l=this.items,m=i.gl;a.dirtyId<0&&m.texImage3D(m.TEXTURE_2D_ARRAY,0,o.format,this._width,this._height,h,0,o.format,o.type,null);for(var g=0;g<h;g++){var _=l[g];c[g]<_.dirtyId&&(c[g]=_.dirtyId,_.valid&&m.texSubImage3D(m.TEXTURE_2D_ARRAY,0,0,0,g,_.resource.width,_.resource.height,1,o.format,o.type,_.resource.source))}return!0},ArrayResource}(Ke),nt=function(i){function CanvasResource(){i.apply(this,arguments)}return i&&(CanvasResource.__proto__=i),CanvasResource.prototype=Object.create(i&&i.prototype),CanvasResource.prototype.constructor=CanvasResource,CanvasResource.test=function test(i){var o=window.OffscreenCanvas;return!!(o&&i instanceof o)||i instanceof HTMLCanvasElement},CanvasResource}(Qe),ot=function(i){function CubeResource(o,a){if(a=a||{},i.call(this,o,a),this.length!==CubeResource.SIDES)throw new Error("Invalid length. Got "+this.length+", expected 6");for(var h=0;h<CubeResource.SIDES;h++)this.items[h].target=te.TEXTURE_CUBE_MAP_POSITIVE_X+h;!1!==a.autoLoad&&this.load()}return i&&(CubeResource.__proto__=i),CubeResource.prototype=Object.create(i&&i.prototype),CubeResource.prototype.constructor=CubeResource,CubeResource.prototype.bind=function bind(o){i.prototype.bind.call(this,o),o.target=te.TEXTURE_CUBE_MAP},CubeResource.prototype.upload=function upload(i,o,a){for(var h=this.itemDirtyIds,c=0;c<CubeResource.SIDES;c++){var l=this.items[c];h[c]<l.dirtyId&&(h[c]=l.dirtyId,l.valid&&l.resource.upload(i,l,a))}return!0},CubeResource}(it);ot.SIDES=6;var at=function(i){function SVGResource(o,a){a=a||{},i.call(this,document.createElement("canvas")),this._width=0,this._height=0,this.svg=o,this.scale=a.scale||1,this._overrideWidth=a.width,this._overrideHeight=a.height,this._resolve=null,this._crossorigin=a.crossorigin,this._load=null,!1!==a.autoLoad&&this.load()}return i&&(SVGResource.__proto__=i),SVGResource.prototype=Object.create(i&&i.prototype),SVGResource.prototype.constructor=SVGResource,SVGResource.prototype.load=function load(){var i=this;return this._load||(this._load=new Promise((function(o){if(i._resolve=function(){i.resize(i.source.width,i.source.height),o(i)},/^\<svg/.test(i.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");i.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(i.svg)))}i._loadSvg()}))),this._load},SVGResource.prototype._loadSvg=function _loadSvg(){var o=this,a=new Image;i.crossOrigin(a,this.svg,this._crossorigin),a.src=this.svg,a.onerror=function(i){o._resolve&&(a.onerror=null,o.onError.run(i))},a.onload=function(){if(o._resolve){var i=a.width,h=a.height;if(!i||!h)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var c=i*o.scale,l=h*o.scale;(o._overrideWidth||o._overrideHeight)&&(c=o._overrideWidth||o._overrideHeight/h*i,l=o._overrideHeight||o._overrideWidth/i*h),c=Math.round(c),l=Math.round(l);var m=o.source;m.width=c,m.height=l,m._pixiId="canvas_"+uid(),m.getContext("2d").drawImage(a,0,0,i,h,0,0,c,l),o._resolve(),o._resolve=null}}},SVGResource.getSize=function getSize(i){var o=SVGResource.SVG_SIZE.exec(i),a={};return o&&(a[o[1]]=Math.round(parseFloat(o[3])),a[o[5]]=Math.round(parseFloat(o[7]))),a},SVGResource.prototype.dispose=function dispose(){i.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},SVGResource.test=function test(i,o){return"svg"===o||"string"==typeof i&&0===i.indexOf("data:image/svg+xml;base64")||"string"==typeof i&&0===i.indexOf("<svg")},SVGResource}(Qe);at.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var st=function(i){function VideoResource(o,a){if(a=a||{},!(o instanceof HTMLVideoElement)){var h=document.createElement("video");h.setAttribute("preload","auto"),h.setAttribute("webkit-playsinline",""),h.setAttribute("playsinline",""),"string"==typeof o&&(o=[o]),i.crossOrigin(h,o[0].src||o[0],a.crossorigin);for(var c=0;c<o.length;++c){var l=document.createElement("source"),m=o[c],g=m.src,_=m.mime,x=(g=g||o[c]).split("?").shift().toLowerCase(),S=x.substr(x.lastIndexOf(".")+1);_=_||"video/"+S,l.src=g,l.type=_,h.appendChild(l)}o=h}i.call(this,o),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=a.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==a.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==a.autoLoad&&this.load()}i&&(VideoResource.__proto__=i),VideoResource.prototype=Object.create(i&&i.prototype),VideoResource.prototype.constructor=VideoResource;var o={autoUpdate:{configurable:!0},updateFPS:{configurable:!0}};return VideoResource.prototype.update=function update(o){if(void 0===o&&(o=0),!this.destroyed){var a=Oe.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-a),(!this._updateFPS||this._msToNextUpdate<=0)&&(i.prototype.update.call(this,o),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},VideoResource.prototype.load=function load(){var i=this;if(this._load)return this._load;var o=this.source;return(o.readyState===o.HAVE_ENOUGH_DATA||o.readyState===o.HAVE_FUTURE_DATA)&&o.width&&o.height&&(o.complete=!0),o.addEventListener("play",this._onPlayStart.bind(this)),o.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(o.addEventListener("canplay",this._onCanPlay),o.addEventListener("canplaythrough",this._onCanPlay),o.addEventListener("error",this._onError,!0)),this._load=new Promise((function(a){i.valid?a(i):(i._resolve=a,o.load())})),this._load},VideoResource.prototype._onError=function _onError(){this.source.removeEventListener("error",this._onError,!0),this.onError.run(event)},VideoResource.prototype._isSourcePlaying=function _isSourcePlaying(){var i=this.source;return i.currentTime>0&&!1===i.paused&&!1===i.ended&&i.readyState>2},VideoResource.prototype._isSourceReady=function _isSourceReady(){return 3===this.source.readyState||4===this.source.readyState},VideoResource.prototype._onPlayStart=function _onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Oe.shared.add(this.update,this),this._isConnectedToTicker=!0)},VideoResource.prototype._onPlayStop=function _onPlayStop(){this._isConnectedToTicker&&(Oe.shared.remove(this.update,this),this._isConnectedToTicker=!1)},VideoResource.prototype._onCanPlay=function _onCanPlay(){var i=this.source;i.removeEventListener("canplay",this._onCanPlay),i.removeEventListener("canplaythrough",this._onCanPlay);var o=this.valid;this.resize(i.videoWidth,i.videoHeight),!o&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&i.play()},VideoResource.prototype.dispose=function dispose(){this._isConnectedToTicker&&Oe.shared.remove(this.update,this),this.source&&(this.source.removeEventListener("error",this._onError,!0),this.source.pause(),this.source.src="",this.source.load()),i.prototype.dispose.call(this)},o.autoUpdate.get=function(){return this._autoUpdate},o.autoUpdate.set=function(i){i!==this._autoUpdate&&(this._autoUpdate=i,!this._autoUpdate&&this._isConnectedToTicker?(Oe.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Oe.shared.add(this.update,this),this._isConnectedToTicker=!0))},o.updateFPS.get=function(){return this._updateFPS},o.updateFPS.set=function(i){i!==this._updateFPS&&(this._updateFPS=i)},VideoResource.test=function test(i,o){return i instanceof HTMLVideoElement||VideoResource.TYPES.indexOf(o)>-1},Object.defineProperties(VideoResource.prototype,o),VideoResource}(Qe);st.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];var ut=function(i){function ImageBitmapResource(){i.apply(this,arguments)}return i&&(ImageBitmapResource.__proto__=i),ImageBitmapResource.prototype=Object.create(i&&i.prototype),ImageBitmapResource.prototype.constructor=ImageBitmapResource,ImageBitmapResource.test=function test(i){return!!window.createImageBitmap&&i instanceof ImageBitmap},ImageBitmapResource}(Qe);$e.push(Je,ut,nt,st,at,et,ot,it);var ht=function System(i){this.renderer=i};ht.prototype.destroy=function destroy(){this.renderer=null};var ct=function(i){function DepthResource(){i.apply(this,arguments)}return i&&(DepthResource.__proto__=i),DepthResource.prototype=Object.create(i&&i.prototype),DepthResource.prototype.constructor=DepthResource,DepthResource.prototype.upload=function upload(i,o,a){var h=i.gl;return h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.alphaMode===ae.UNPACK),a.width===o.width&&a.height===o.height?h.texSubImage2D(o.target,0,0,0,o.width,o.height,o.format,o.type,this.data):(a.width=o.width,a.height=o.height,h.texImage2D(o.target,0,1===i.context.webGLVersion?h.DEPTH_COMPONENT:h.DEPTH_COMPONENT16,o.width,o.height,0,o.format,o.type,this.data)),!0},DepthResource}(et),lt=function Framebuffer(i,o){this.width=Math.ceil(i||100),this.height=Math.ceil(o||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new X("disposeFramebuffer",2)},dt={colorTexture:{configurable:!0}};dt.colorTexture.get=function(){return this.colorTextures[0]},lt.prototype.addColorTexture=function addColorTexture(i,o){return void 0===i&&(i=0),this.colorTextures[i]=o||new rt(null,{scaleMode:ie.NEAREST,resolution:1,mipmap:!1,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},lt.prototype.addDepthTexture=function addDepthTexture(i){return this.depthTexture=i||new rt(new ct(null,{width:this.width,height:this.height}),{scaleMode:ie.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:!1,format:ee.DEPTH_COMPONENT,type:re.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},lt.prototype.enableDepth=function enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},lt.prototype.enableStencil=function enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},lt.prototype.resize=function resize(i,o){if(i=Math.ceil(i),o=Math.ceil(o),i!==this.width||o!==this.height){this.width=i,this.height=o,this.dirtyId++,this.dirtySize++;for(var a=0;a<this.colorTextures.length;a++){var h=this.colorTextures[a],c=h.resolution;h.setSize(i/c,o/c)}if(this.depthTexture){var l=this.depthTexture.resolution;this.depthTexture.setSize(i/l,o/l)}}},lt.prototype.dispose=function dispose(){this.disposeRunner.run(this,!1)},Object.defineProperties(lt.prototype,dt);var pt=function(i){function BaseRenderTexture(o){if("number"==typeof o){var a=arguments[0],h=arguments[1],c=arguments[2],l=arguments[3];o={width:a,height:h,scaleMode:c,resolution:l}}i.call(this,null,o);var m=o||{},g=m.width,_=m.height;this.mipmap=!1,this.width=Math.ceil(g)||100,this.height=Math.ceil(_)||100,this.valid=!0,this._canvasRenderTarget=null,this.clearColor=[0,0,0,0],this.framebuffer=new lt(this.width*this.resolution,this.height*this.resolution).addColorTexture(0,this),this.maskStack=[],this.filterStack=[{}]}return i&&(BaseRenderTexture.__proto__=i),BaseRenderTexture.prototype=Object.create(i&&i.prototype),BaseRenderTexture.prototype.constructor=BaseRenderTexture,BaseRenderTexture.prototype.resize=function resize(i,o){i=Math.ceil(i),o=Math.ceil(o),this.framebuffer.resize(i*this.resolution,o*this.resolution)},BaseRenderTexture.prototype.dispose=function dispose(){this.framebuffer.dispose(),i.prototype.dispose.call(this)},BaseRenderTexture.prototype.destroy=function destroy(){i.prototype.destroy.call(this,!0),this.framebuffer=null},BaseRenderTexture}(rt),ft=function TextureUvs(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)};ft.prototype.set=function set(i,o,a){var h=o.width,c=o.height;if(a){var l=i.width/2/h,m=i.height/2/c,g=i.x/h+l,_=i.y/c+m;a=We.add(a,We.NW),this.x0=g+l*We.uX(a),this.y0=_+m*We.uY(a),a=We.add(a,2),this.x1=g+l*We.uX(a),this.y1=_+m*We.uY(a),a=We.add(a,2),this.x2=g+l*We.uX(a),this.y2=_+m*We.uY(a),a=We.add(a,2),this.x3=g+l*We.uX(a),this.y3=_+m*We.uY(a)}else this.x0=i.x/h,this.y0=i.y/c,this.x1=(i.x+i.width)/h,this.y1=i.y/c,this.x2=(i.x+i.width)/h,this.y2=(i.y+i.height)/c,this.x3=i.x/h,this.y3=(i.y+i.height)/c;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3};var mt=new ft,gt=function(i){function Texture(o,a,h,c,l,m){if(i.call(this),this.noFrame=!1,a||(this.noFrame=!0,a=new He(0,0,1,1)),o instanceof Texture&&(o=o.baseTexture),this.baseTexture=o,this._frame=a,this.trim=c,this.valid=!1,this.requiresUpdate=!1,this._uvs=mt,this.uvMatrix=null,this.orig=h||a,this._rotate=Number(l||0),!0===l)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=m?new Ae(m.x,m.y):new Ae(0,0),this._updateID=0,this.textureCacheIds=[],o.valid?this.noFrame?o.valid&&this.onBaseTextureUpdated(o):this.frame=a:o.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&o.on("update",this.onBaseTextureUpdated,this)}i&&(Texture.__proto__=i),Texture.prototype=Object.create(i&&i.prototype),Texture.prototype.constructor=Texture;var o={resolution:{configurable:!0},frame:{configurable:!0},rotate:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return Texture.prototype.update=function update(){this.baseTexture.resource&&this.baseTexture.resource.update()},Texture.prototype.onBaseTextureUpdated=function onBaseTextureUpdated(i){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=i.width,this._frame.height=i.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},Texture.prototype.destroy=function destroy(i){if(this.baseTexture){if(i){var o=this.baseTexture.resource;o&&we[o.url]&&Texture.removeFromCache(o.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture.removeFromCache(this),this.textureCacheIds=null},Texture.prototype.clone=function clone(){return new Texture(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},Texture.prototype.updateUvs=function updateUvs(){this._uvs===mt&&(this._uvs=new ft),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},Texture.from=function from(i,o,a){void 0===o&&(o={}),void 0===a&&(a=pe.STRICT_TEXTURE_CACHE);var h="string"==typeof i,c=null;h?c=i:(i._pixiId||(i._pixiId="pixiid_"+uid()),c=i._pixiId);var l=we[c];if(h&&a&&!l)throw new Error('The cacheId "'+c+'" does not exist in TextureCache.');return l||(o.resolution||(o.resolution=getResolutionOfUrl(i)),(l=new Texture(new rt(i,o))).baseTexture.cacheId=c,rt.addToCache(l.baseTexture,c),Texture.addToCache(l,c)),l},Texture.fromBuffer=function fromBuffer(i,o,a,h){return new Texture(rt.fromBuffer(i,o,a,h))},Texture.fromLoader=function fromLoader(i,o,a){var h=new Je(i);h.url=o;var c=new Texture(new rt(h,{scaleMode:pe.SCALE_MODE,resolution:getResolutionOfUrl(o)}));return a||(a=o),rt.addToCache(c.baseTexture,a),Texture.addToCache(c,a),a!==o&&(rt.addToCache(c.baseTexture,o),Texture.addToCache(c,o)),c},Texture.addToCache=function addToCache(i,o){o&&(-1===i.textureCacheIds.indexOf(o)&&i.textureCacheIds.push(o),we[o]&&console.warn("Texture added to the cache with an id ["+o+"] that already had an entry"),we[o]=i)},Texture.removeFromCache=function removeFromCache(i){if("string"==typeof i){var o=we[i];if(o){var a=o.textureCacheIds.indexOf(i);return a>-1&&o.textureCacheIds.splice(a,1),delete we[i],o}}else if(i&&i.textureCacheIds){for(var h=0;h<i.textureCacheIds.length;++h)we[i.textureCacheIds[h]]===i&&delete we[i.textureCacheIds[h]];return i.textureCacheIds.length=0,i}return null},o.resolution.get=function(){return this.baseTexture.resolution},o.frame.get=function(){return this._frame},o.frame.set=function(i){this._frame=i,this.noFrame=!1;var o=i.x,a=i.y,h=i.width,c=i.height,l=o+h>this.baseTexture.width,m=a+c>this.baseTexture.height;if(l||m){var g=l&&m?"and":"or",_="X: "+o+" + "+h+" = "+(o+h)+" > "+this.baseTexture.width,x="Y: "+a+" + "+c+" = "+(a+c)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+_+" "+g+" "+x)}this.valid=h&&c&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=i),this.valid&&this.updateUvs()},o.rotate.get=function(){return this._rotate},o.rotate.set=function(i){this._rotate=i,this.valid&&this.updateUvs()},o.width.get=function(){return this.orig.width},o.height.get=function(){return this.orig.height},Object.defineProperties(Texture.prototype,o),Texture}(me.a);function removeAllHandlers(i){i.destroy=function _emptyDestroy(){},i.on=function _emptyOn(){},i.once=function _emptyOnce(){},i.emit=function _emptyEmit(){}}gt.EMPTY=new gt(new rt),removeAllHandlers(gt.EMPTY),removeAllHandlers(gt.EMPTY.baseTexture),gt.WHITE=function createWhiteTexture(){var i=document.createElement("canvas");i.width=16,i.height=16;var o=i.getContext("2d");return o.fillStyle="white",o.fillRect(0,0,16,16),new gt(new rt(new nt(i)))}(),removeAllHandlers(gt.WHITE),removeAllHandlers(gt.WHITE.baseTexture);var yt=function(i){function RenderTexture(o,a){var h=null;if(!(o instanceof pt)){var c=arguments[1],l=arguments[2],m=arguments[3],g=arguments[4];console.warn("Please use RenderTexture.create("+c+", "+l+") instead of the ctor directly."),h=arguments[0],a=null,o=new pt({width:c,height:l,scaleMode:m,resolution:g})}i.call(this,o,a),this.legacyRenderer=h,this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}return i&&(RenderTexture.__proto__=i),RenderTexture.prototype=Object.create(i&&i.prototype),RenderTexture.prototype.constructor=RenderTexture,RenderTexture.prototype.resize=function resize(i,o,a){void 0===a&&(a=!0),i=Math.ceil(i),o=Math.ceil(o),this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,a&&this.baseTexture.resize(i,o),this.updateUvs()},RenderTexture.prototype.setResolution=function setResolution(i){var o=this.baseTexture;o.resolution!==i&&(o.setResolution(i),this.resize(o.width,o.height,!1))},RenderTexture.create=function create(i){return"number"==typeof i&&(i={width:i,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new RenderTexture(new pt(i))},RenderTexture}(gt),_t=function RenderTexturePool(i){this.texturePool={},this.textureOptions=i||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0};_t.prototype.createTexture=function createTexture(i,o){var a=new pt(Object.assign({width:i,height:o,resolution:1},this.textureOptions));return new yt(a)},_t.prototype.getOptimalTexture=function getOptimalTexture(i,o,a){void 0===a&&(a=1);var h=_t.SCREEN_KEY;i*=a,o*=a,this.enableFullScreen&&i===this._pixelsWidth&&o===this._pixelsHeight||(h=(65535&(i=nextPow2(i)))<<16|65535&(o=nextPow2(o))),this.texturePool[h]||(this.texturePool[h]=[]);var c=this.texturePool[h].pop();return c||(c=this.createTexture(i,o)),c.filterPoolKey=h,c.setResolution(a),c},_t.prototype.getFilterTexture=function getFilterTexture(i,o){var a=this.getOptimalTexture(i.width,i.height,o||i.resolution);return a.filterFrame=i.filterFrame,a},_t.prototype.returnTexture=function returnTexture(i){var o=i.filterPoolKey;i.filterFrame=null,this.texturePool[o].push(i)},_t.prototype.returnFilterTexture=function returnFilterTexture(i){this.returnTexture(i)},_t.prototype.clear=function clear(i){if(i=!1!==i)for(var o in this.texturePool){var a=this.texturePool[o];if(a)for(var h=0;h<a.length;h++)a[h].destroy(!0)}this.texturePool={}},_t.prototype.setScreenSize=function setScreenSize(i){if(i.width!==this._pixelsWidth||i.height!==this._pixelsHeight){var o=_t.SCREEN_KEY,a=this.texturePool[o];if(this.enableFullScreen=i.width>0&&i.height>0,a)for(var h=0;h<a.length;h++)a[h].destroy(!0);this.texturePool[o]=[],this._pixelsWidth=i.width,this._pixelsHeight=i.height}},_t.SCREEN_KEY="screen";var vt=function Attribute(i,o,a,h,c,l,m){void 0===a&&(a=!1),void 0===h&&(h=5126),this.buffer=i,this.size=o,this.normalized=a,this.type=h,this.stride=c,this.start=l,this.instance=m};vt.prototype.destroy=function destroy(){this.buffer=null},vt.from=function from(i,o,a,h,c){return new vt(i,o,a,h,c)};var xt=0,St=function Buffer(i,o,a){void 0===o&&(o=!0),void 0===a&&(a=!1),this.data=i||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=a,this.static=o,this.id=xt++,this.disposeRunner=new X("disposeBuffer",2)};function core_es_getBufferType(i){if(4===i.BYTES_PER_ELEMENT)return i instanceof Float32Array?"Float32Array":i instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===i.BYTES_PER_ELEMENT){if(i instanceof Uint16Array)return"Uint16Array"}else if(1===i.BYTES_PER_ELEMENT&&i instanceof Uint8Array)return"Uint8Array";return null}St.prototype.update=function update(i){this.data=i||this.data,this._updateID++},St.prototype.dispose=function dispose(){this.disposeRunner.run(this,!1)},St.prototype.destroy=function destroy(){this.dispose(),this.data=null},St.from=function from(i){return i instanceof Array&&(i=new Float32Array(i)),new St(i)};var bt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array},wt={5126:4,5123:2,5121:1},Tt=0,Et={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Ct=function Geometry(i,o){void 0===i&&(i=[]),void 0===o&&(o={}),this.buffers=i,this.indexBuffer=null,this.attributes=o,this.glVertexArrayObjects={},this.id=Tt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new X("disposeGeometry",2),this.refCount=0};Ct.prototype.addAttribute=function addAttribute(i,o,a,h,c,l,m,g){if(void 0===h&&(h=!1),void 0===g&&(g=!1),!o)throw new Error("You must pass a buffer when creating an attribute");o.data||(o instanceof Array&&(o=new Float32Array(o)),o=new St(o));var _=i.split("|");if(_.length>1){for(var x=0;x<_.length;x++)this.addAttribute(_[x],o,a,h,c);return this}var S=this.buffers.indexOf(o);return-1===S&&(this.buffers.push(o),S=this.buffers.length-1),this.attributes[i]=new vt(S,a,h,c,l,m,g),this.instanced=this.instanced||g,this},Ct.prototype.getAttribute=function getAttribute(i){return this.attributes[i]},Ct.prototype.getBuffer=function getBuffer(i){return this.buffers[this.getAttribute(i).buffer]},Ct.prototype.addIndex=function addIndex(i){return i.data||(i instanceof Array&&(i=new Uint16Array(i)),i=new St(i)),i.index=!0,this.indexBuffer=i,-1===this.buffers.indexOf(i)&&this.buffers.push(i),this},Ct.prototype.getIndex=function getIndex(){return this.indexBuffer},Ct.prototype.interleave=function interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var i,o=[],a=[],h=new St;for(i in this.attributes){var c=this.attributes[i],l=this.buffers[c.buffer];o.push(l.data),a.push(c.size*wt[c.type]/4),c.buffer=0}for(h.data=function core_es_interleaveTypedArrays(i,o){for(var a=0,h=0,c={},l=0;l<i.length;l++)h+=o[l],a+=i[l].length;for(var m=new ArrayBuffer(4*a),g=null,_=0,x=0;x<i.length;x++){var S=o[x],R=i[x],k=core_es_getBufferType(R);c[k]||(c[k]=new bt[k](m)),g=c[k];for(var j=0;j<R.length;j++)g[(j/S|0)*h+_+j%S]=R[j];_+=S}return new Float32Array(m)}(o,a),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[h],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},Ct.prototype.getSize=function getSize(){for(var i in this.attributes){var o=this.attributes[i];return this.buffers[o.buffer].data.length/(o.stride/4||o.size)}return 0},Ct.prototype.dispose=function dispose(){this.disposeRunner.run(this,!1)},Ct.prototype.destroy=function destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},Ct.prototype.clone=function clone(){for(var i=new Ct,o=0;o<this.buffers.length;o++)i.buffers[o]=new St(this.buffers[o].data.slice());for(var a in this.attributes){var h=this.attributes[a];i.attributes[a]=new vt(h.buffer,h.size,h.normalized,h.type,h.stride,h.start,h.instance)}return this.indexBuffer&&(i.indexBuffer=i.buffers[this.buffers.indexOf(this.indexBuffer)],i.indexBuffer.index=!0),i},Ct.merge=function merge(i){for(var o,a=new Ct,h=[],c=[],l=[],m=0;m<i.length;m++){o=i[m];for(var g=0;g<o.buffers.length;g++)c[g]=c[g]||0,c[g]+=o.buffers[g].data.length,l[g]=0}for(var _=0;_<o.buffers.length;_++)h[_]=new(Et[core_es_getBufferType(o.buffers[_].data)])(c[_]),a.buffers[_]=new St(h[_]);for(var x=0;x<i.length;x++){o=i[x];for(var S=0;S<o.buffers.length;S++)h[S].set(o.buffers[S].data,l[S]),l[S]+=o.buffers[S].data.length}if(a.attributes=o.attributes,o.indexBuffer){a.indexBuffer=a.buffers[o.buffers.indexOf(o.indexBuffer)],a.indexBuffer.index=!0;for(var R=0,k=0,j=0,X=0,Y=0;Y<o.buffers.length;Y++)if(o.buffers[Y]!==o.indexBuffer){X=Y;break}for(var q in o.attributes){var Z=o.attributes[q];(0|Z.buffer)===X&&(k+=Z.size*wt[Z.type]/4)}for(var $=0;$<i.length;$++){for(var ee=i[$].indexBuffer.data,te=0;te<ee.length;te++)a.indexBuffer.data[te+j]+=R;R+=o.buffers[X].data.length/k,j+=ee.length}}return a};var Pt=function(i){function Quad(){i.call(this),this.addAttribute("aVertexPosition",[0,0,1,0,1,1,0,1]).addIndex([0,1,3,2])}return i&&(Quad.__proto__=i),Quad.prototype=Object.create(i&&i.prototype),Quad.prototype.constructor=Quad,Quad}(Ct),Ot=function(i){function QuadUv(){i.call(this),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new St(this.vertices),this.uvBuffer=new St(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}return i&&(QuadUv.__proto__=i),QuadUv.prototype=Object.create(i&&i.prototype),QuadUv.prototype.constructor=QuadUv,QuadUv.prototype.map=function map(i,o){var a=0,h=0;return this.uvs[0]=a,this.uvs[1]=h,this.uvs[2]=a+o.width/i.width,this.uvs[3]=h,this.uvs[4]=a+o.width/i.width,this.uvs[5]=h+o.height/i.height,this.uvs[6]=a,this.uvs[7]=h+o.height/i.height,a=o.x,h=o.y,this.vertices[0]=a,this.vertices[1]=h,this.vertices[2]=a+o.width,this.vertices[3]=h,this.vertices[4]=a+o.width,this.vertices[5]=h+o.height,this.vertices[6]=a,this.vertices[7]=h+o.height,this.invalidate(),this},QuadUv.prototype.invalidate=function invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},QuadUv}(Ct),At=0,It=function UniformGroup(i,o){this.uniforms=i,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=At++,this.static=!!o};It.prototype.update=function update(){this.dirtyId++},It.prototype.add=function add(i,o,a){this.uniforms[i]=new It(o,a)},It.from=function from(i,o){return new It(i,o)};var Mt=function FilterState(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new He,this.destinationFrame=new He,this.filters=[]};Mt.prototype.clear=function clear(){this.target=null,this.filters=null,this.renderTexture=null};!function(i){function FilterSystem(o){i.call(this,o),this.defaultFilterStack=[{}],this.texturePool=new _t,this.texturePool.setScreenSize(o.view),this.statePool=[],this.quad=new Pt,this.quadUv=new Ot,this.tempRect=new He,this.activeState={},this.globalUniforms=new It({outputFrame:this.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}i&&(FilterSystem.__proto__=i),FilterSystem.prototype=Object.create(i&&i.prototype),FilterSystem.prototype.constructor=FilterSystem,FilterSystem.prototype.push=function push(i,o){for(var a=this.renderer,h=this.defaultFilterStack,c=this.statePool.pop()||new Mt,l=o[0].resolution,m=o[0].padding,g=o[0].autoFit,_=o[0].legacy,x=1;x<o.length;x++){var S=o[x];l=Math.min(l,S.resolution),m=this.useMaxPadding?Math.max(m,S.padding):m+S.padding,g=g||S.autoFit,_=_||S.legacy}1===h.length&&(this.defaultFilterStack[0].renderTexture=a.renderTexture.current),h.push(c),c.resolution=l,c.legacy=_,c.target=i,c.sourceFrame.copyFrom(i.filterArea||i.getBounds(!0)),c.sourceFrame.pad(m),g&&c.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),c.sourceFrame.ceil(l),c.renderTexture=this.getOptimalFilterTexture(c.sourceFrame.width,c.sourceFrame.height,l),c.filters=o,c.destinationFrame.width=c.renderTexture.width,c.destinationFrame.height=c.renderTexture.height,c.renderTexture.filterFrame=c.sourceFrame,a.renderTexture.bind(c.renderTexture,c.sourceFrame),a.renderTexture.clear()},FilterSystem.prototype.pop=function pop(){var i=this.defaultFilterStack,o=i.pop(),a=o.filters;this.activeState=o;var h=this.globalUniforms.uniforms;h.outputFrame=o.sourceFrame,h.resolution=o.resolution;var c=h.inputSize,l=h.inputPixel,m=h.inputClamp;if(c[0]=o.destinationFrame.width,c[1]=o.destinationFrame.height,c[2]=1/c[0],c[3]=1/c[1],l[0]=c[0]*o.resolution,l[1]=c[1]*o.resolution,l[2]=1/l[0],l[3]=1/l[1],m[0]=.5*l[2],m[1]=.5*l[3],m[2]=o.sourceFrame.width*c[2]-.5*l[2],m[3]=o.sourceFrame.height*c[3]-.5*l[3],o.legacy){var g=h.filterArea;g[0]=o.destinationFrame.width,g[1]=o.destinationFrame.height,g[2]=o.sourceFrame.x,g[3]=o.sourceFrame.y,h.filterClamp=h.inputClamp}this.globalUniforms.update();var _=i[i.length-1];if(1===a.length)a[0].apply(this,o.renderTexture,_.renderTexture,!1,o),this.returnFilterTexture(o.renderTexture);else{var x=o.renderTexture,S=this.getOptimalFilterTexture(x.width,x.height,o.resolution);S.filterFrame=x.filterFrame;var R=0;for(R=0;R<a.length-1;++R){a[R].apply(this,x,S,!0,o);var k=x;x=S,S=k}a[R].apply(this,x,_.renderTexture,!1,o),this.returnFilterTexture(x),this.returnFilterTexture(S)}o.clear(),this.statePool.push(o)},FilterSystem.prototype.applyFilter=function applyFilter(i,o,a,h){var c=this.renderer;c.renderTexture.bind(a,a?a.filterFrame:null),h&&c.renderTexture.clear(),i.uniforms.uSampler=o,i.uniforms.filterGlobals=this.globalUniforms,c.state.set(i.state),c.shader.bind(i),i.legacy?(this.quadUv.map(o._frame,o.filterFrame),c.geometry.bind(this.quadUv),c.geometry.draw($.TRIANGLES)):(c.geometry.bind(this.quad),c.geometry.draw($.TRIANGLE_STRIP))},FilterSystem.prototype.calculateSpriteMatrix=function calculateSpriteMatrix(i,o){var a=this.activeState,h=a.sourceFrame,c=a.destinationFrame,l=o._texture.orig,m=i.set(c.width,0,0,c.height,h.x,h.y),g=o.worldTransform.copyTo(ze.TEMP_MATRIX);return g.invert(),m.prepend(g),m.scale(1/l.width,1/l.height),m.translate(o.anchor.x,o.anchor.y),m},FilterSystem.prototype.destroy=function destroy(){this.texturePool.clear(!1)},FilterSystem.prototype.getOptimalFilterTexture=function getOptimalFilterTexture(i,o,a){return void 0===a&&(a=1),this.texturePool.getOptimalTexture(i,o,a)},FilterSystem.prototype.getFilterTexture=function getFilterTexture(i,o){if("number"==typeof i){var a=i;i=o,o=a}i=i||this.activeState.renderTexture;var h=this.texturePool.getOptimalTexture(i.width,i.height,o||i.resolution);return h.filterFrame=i.filterFrame,h},FilterSystem.prototype.returnFilterTexture=function returnFilterTexture(i){this.texturePool.returnTexture(i)},FilterSystem.prototype.emptyPool=function emptyPool(){this.texturePool.clear(!0)},FilterSystem.prototype.resize=function resize(){this.texturePool.setScreenSize(this.renderer.view)}}(ht);var kt=function ObjectRenderer(i){this.renderer=i};kt.prototype.flush=function flush(){},kt.prototype.destroy=function destroy(){this.renderer=null},kt.prototype.start=function start(){},kt.prototype.stop=function stop(){this.flush()},kt.prototype.render=function render(i){};!function(i){function BatchSystem(o){i.call(this,o),this.emptyRenderer=new kt(o),this.currentRenderer=this.emptyRenderer}i&&(BatchSystem.__proto__=i),BatchSystem.prototype=Object.create(i&&i.prototype),BatchSystem.prototype.constructor=BatchSystem,BatchSystem.prototype.setObjectRenderer=function setObjectRenderer(i){this.currentRenderer!==i&&(this.currentRenderer.stop(),this.currentRenderer=i,this.currentRenderer.start())},BatchSystem.prototype.flush=function flush(){this.setObjectRenderer(this.emptyRenderer)},BatchSystem.prototype.reset=function reset(){this.setObjectRenderer(this.emptyRenderer)},BatchSystem.prototype.copyBoundTextures=function copyBoundTextures(i,o){for(var a=this.renderer.texture.boundTextures,h=o-1;h>=0;--h)i[h]=a[h]||null,i[h]&&(i[h]._batchLocation=h)},BatchSystem.prototype.boundArray=function boundArray(i,o,a,h){for(var c=i.elements,l=i.ids,m=i.count,g=0,_=0;_<m;_++){var x=c[_],S=x._batchLocation;if(S>=0&&S<h&&o[S]===x)l[_]=S;else for(;g<h;){var R=o[g];if(!R||R._batchEnabled!==a||R._batchLocation!==g){l[_]=g,x._batchLocation=g,o[g]=x;break}g++}}}}(ht);pe.PREFER_ENV=de.any?Y.WEBGL:Y.WEBGL2,pe.STRICT_TEXTURE_CACHE=!1;var zt=0,Dt=(function(i){function ContextSystem(o){i.call(this,o),this.webGLVersion=1,this.extensions={},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),o.view.addEventListener("webglcontextlost",this.handleContextLost,!1),o.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}i&&(ContextSystem.__proto__=i),ContextSystem.prototype=Object.create(i&&i.prototype),ContextSystem.prototype.constructor=ContextSystem;var o={isLost:{configurable:!0}};o.isLost.get=function(){return!this.gl||this.gl.isContextLost()},ContextSystem.prototype.contextChange=function contextChange(i){this.gl=i,this.renderer.gl=i,this.renderer.CONTEXT_UID=zt++,i.isContextLost()&&i.getExtension("WEBGL_lose_context")&&i.getExtension("WEBGL_lose_context").restoreContext()},ContextSystem.prototype.initFromContext=function initFromContext(i){this.gl=i,this.validateContext(i),this.renderer.gl=i,this.renderer.CONTEXT_UID=zt++,this.renderer.runners.contextChange.run(i)},ContextSystem.prototype.initFromOptions=function initFromOptions(i){var o=this.createContext(this.renderer.view,i);this.initFromContext(o)},ContextSystem.prototype.createContext=function createContext(i,o){var a;if(pe.PREFER_ENV>=Y.WEBGL2&&(a=i.getContext("webgl2",o)),a)this.webGLVersion=2;else if(this.webGLVersion=1,!(a=i.getContext("webgl",o)||i.getContext("experimental-webgl",o)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=a,this.getExtensions(),a},ContextSystem.prototype.getExtensions=function getExtensions(){var i=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:i.getExtension("WEBGL_draw_buffers"),depthTexture:i.getExtension("WEBGL_depth_texture"),loseContext:i.getExtension("WEBGL_lose_context"),vertexArrayObject:i.getExtension("OES_vertex_array_object")||i.getExtension("MOZ_OES_vertex_array_object")||i.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:i.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:i.getExtension("OES_element_index_uint"),floatTexture:i.getExtension("OES_texture_float"),floatTextureLinear:i.getExtension("OES_texture_float_linear"),textureHalfFloat:i.getExtension("OES_texture_half_float"),textureHalfFloatLinear:i.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:i.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:i.getExtension("EXT_color_buffer_float"),floatTextureLinear:i.getExtension("OES_texture_float_linear")})},ContextSystem.prototype.handleContextLost=function handleContextLost(i){i.preventDefault()},ContextSystem.prototype.handleContextRestored=function handleContextRestored(){this.renderer.runners.contextChange.run(this.gl)},ContextSystem.prototype.destroy=function destroy(){var i=this.renderer.view;i.removeEventListener("webglcontextlost",this.handleContextLost),i.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},ContextSystem.prototype.postrender=function postrender(){this.renderer.renderingToScreen&&this.gl.flush()},ContextSystem.prototype.validateContext=function validateContext(i){i.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")},Object.defineProperties(ContextSystem.prototype,o)}(ht),function(i){function FramebufferSystem(o){i.call(this,o),this.managedFramebuffers=[],this.unknownFramebuffer=new lt(10,10)}i&&(FramebufferSystem.__proto__=i),FramebufferSystem.prototype=Object.create(i&&i.prototype),FramebufferSystem.prototype.constructor=FramebufferSystem;var o={size:{configurable:!0}};FramebufferSystem.prototype.contextChange=function contextChange(){var i=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new He,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var o=this.renderer.context.extensions.drawBuffers,a=this.renderer.context.extensions.depthTexture;pe.PREFER_ENV===Y.WEBGL_LEGACY&&(o=null,a=null),o?i.drawBuffers=function(i){return o.drawBuffersWEBGL(i)}:(this.hasMRT=!1,i.drawBuffers=function(){}),a||(this.writeDepthTexture=!1)}},FramebufferSystem.prototype.bind=function bind(i,o){var a=this.gl;if(i){var h=i.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(i);this.current!==i&&(this.current=i,a.bindFramebuffer(a.FRAMEBUFFER,h.framebuffer)),h.dirtyId!==i.dirtyId&&(h.dirtyId=i.dirtyId,h.dirtyFormat!==i.dirtyFormat?(h.dirtyFormat=i.dirtyFormat,this.updateFramebuffer(i)):h.dirtySize!==i.dirtySize&&(h.dirtySize=i.dirtySize,this.resizeFramebuffer(i)));for(var c=0;c<i.colorTextures.length;c++)i.colorTextures[c].texturePart?this.renderer.texture.unbind(i.colorTextures[c].texture):this.renderer.texture.unbind(i.colorTextures[c]);i.depthTexture&&this.renderer.texture.unbind(i.depthTexture),o?this.setViewport(o.x,o.y,o.width,o.height):this.setViewport(0,0,i.width,i.height)}else this.current&&(this.current=null,a.bindFramebuffer(a.FRAMEBUFFER,null)),o?this.setViewport(o.x,o.y,o.width,o.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},FramebufferSystem.prototype.setViewport=function setViewport(i,o,a,h){var c=this.viewport;c.width===a&&c.height===h&&c.x===i&&c.y===o||(c.x=i,c.y=o,c.width=a,c.height=h,this.gl.viewport(i,o,a,h))},o.size.get=function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},FramebufferSystem.prototype.clear=function clear(i,o,a,h){var c=this.gl;c.clearColor(i,o,a,h),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},FramebufferSystem.prototype.initFramebuffer=function initFramebuffer(i){var o={framebuffer:this.gl.createFramebuffer(),stencil:null,dirtyId:0,dirtyFormat:0,dirtySize:0};return i.glFramebuffers[this.CONTEXT_UID]=o,this.managedFramebuffers.push(i),i.disposeRunner.add(this),o},FramebufferSystem.prototype.resizeFramebuffer=function resizeFramebuffer(i){var o=this.gl,a=i.glFramebuffers[this.CONTEXT_UID];a.stencil&&(o.bindRenderbuffer(o.RENDERBUFFER,a.stencil),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,i.width,i.height));for(var h=i.colorTextures,c=0;c<h.length;c++)this.renderer.texture.bind(h[c],0);i.depthTexture&&this.renderer.texture.bind(i.depthTexture,0)},FramebufferSystem.prototype.updateFramebuffer=function updateFramebuffer(i){var o=this.gl,a=i.glFramebuffers[this.CONTEXT_UID],h=i.colorTextures.length;o.drawBuffers||(h=Math.min(h,1));for(var c=[],l=0;l<h;l++){var m=i.colorTextures[l];m.texturePart?(this.renderer.texture.bind(m.texture,0),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0+l,o.TEXTURE_CUBE_MAP_NEGATIVE_X+m.side,m.texture._glTextures[this.CONTEXT_UID].texture,0)):(this.renderer.texture.bind(m,0),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0+l,o.TEXTURE_2D,m._glTextures[this.CONTEXT_UID].texture,0)),c.push(o.COLOR_ATTACHMENT0+l)}if(c.length>1&&o.drawBuffers(c),i.depthTexture&&this.writeDepthTexture){var g=i.depthTexture;this.renderer.texture.bind(g,0),o.framebufferTexture2D(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.TEXTURE_2D,g._glTextures[this.CONTEXT_UID].texture,0)}a.stencil||!i.stencil&&!i.depth||(a.stencil=o.createRenderbuffer(),o.bindRenderbuffer(o.RENDERBUFFER,a.stencil),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,i.width,i.height),i.depthTexture||o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,a.stencil))},FramebufferSystem.prototype.disposeFramebuffer=function disposeFramebuffer(i,o){var a=i.glFramebuffers[this.CONTEXT_UID],h=this.gl;if(a){delete i.glFramebuffers[this.CONTEXT_UID];var c=this.managedFramebuffers.indexOf(i);c>=0&&this.managedFramebuffers.splice(c,1),i.disposeRunner.remove(this),o||(h.deleteFramebuffer(a.framebuffer),a.stencil&&h.deleteRenderbuffer(a.stencil))}},FramebufferSystem.prototype.disposeAll=function disposeAll(i){var o=this.managedFramebuffers;this.managedFramebuffers=[];for(var a=0;a<o.length;a++)this.disposeFramebuffer(o[a],i)},FramebufferSystem.prototype.forceStencil=function forceStencil(){var i=this.current;if(i){var o=i.glFramebuffers[this.CONTEXT_UID];if(o&&!o.stencil){i.enableStencil();var a=i.width,h=i.height,c=this.gl,l=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,l),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,a,h),o.stencil=l,c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,l)}}},FramebufferSystem.prototype.reset=function reset(){this.current=this.unknownFramebuffer,this.viewport=new He},Object.defineProperties(FramebufferSystem.prototype,o)}(ht),function GLBuffer(i){this.buffer=i,this.updateID=-1,this.byteLength=-1,this.refCount=0}),Lt={5126:4,5123:2,5121:1},Bt=(function(i){function GeometrySystem(o){i.call(this,o),this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.boundBuffers={},this.managedGeometries={},this.managedBuffers={}}i&&(GeometrySystem.__proto__=i),GeometrySystem.prototype=Object.create(i&&i.prototype),GeometrySystem.prototype.constructor=GeometrySystem,GeometrySystem.prototype.contextChange=function contextChange(){this.disposeAll(!0);var i=this.gl=this.renderer.gl,o=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,!i.createVertexArray){var a=this.renderer.context.extensions.vertexArrayObject;pe.PREFER_ENV===Y.WEBGL_LEGACY&&(a=null),a?(i.createVertexArray=function(){return a.createVertexArrayOES()},i.bindVertexArray=function(i){return a.bindVertexArrayOES(i)},i.deleteVertexArray=function(i){return a.deleteVertexArrayOES(i)}):(this.hasVao=!1,i.createVertexArray=function(){},i.bindVertexArray=function(){},i.deleteVertexArray=function(){})}if(!i.vertexAttribDivisor){var h=i.getExtension("ANGLE_instanced_arrays");h?(i.vertexAttribDivisor=function(i,o){return h.vertexAttribDivisorANGLE(i,o)},i.drawElementsInstanced=function(i,o,a,c,l){return h.drawElementsInstancedANGLE(i,o,a,c,l)},i.drawArraysInstanced=function(i,o,a,c){return h.drawArraysInstancedANGLE(i,o,a,c)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===o.webGLVersion||!!o.extensions.uint32ElementIndex},GeometrySystem.prototype.bind=function bind(i,o){o=o||this.renderer.shader.shader;var a=this.gl,h=i.glVertexArrayObjects[this.CONTEXT_UID];h||(this.managedGeometries[i.id]=i,i.disposeRunner.add(this),i.glVertexArrayObjects[this.CONTEXT_UID]=h={});var c=h[o.program.id]||this.initGeometryVao(i,o.program);this._activeGeometry=i,this._activeVao!==c&&(this._activeVao=c,this.hasVao?a.bindVertexArray(c):this.activateVao(i,o.program)),this.updateBuffers()},GeometrySystem.prototype.reset=function reset(){this.unbind()},GeometrySystem.prototype.updateBuffers=function updateBuffers(){for(var i=this._activeGeometry,o=this.gl,a=0;a<i.buffers.length;a++){var h=i.buffers[a],c=h._glBuffers[this.CONTEXT_UID];if(h._updateID!==c.updateID){c.updateID=h._updateID;var l=h.index?o.ELEMENT_ARRAY_BUFFER:o.ARRAY_BUFFER;if(o.bindBuffer(l,c.buffer),this._boundBuffer=c,c.byteLength>=h.data.byteLength)o.bufferSubData(l,0,h.data);else{var m=h.static?o.STATIC_DRAW:o.DYNAMIC_DRAW;c.byteLength=h.data.byteLength,o.bufferData(l,h.data,m)}}}},GeometrySystem.prototype.checkCompatibility=function checkCompatibility(i,o){var a=i.attributes,h=o.attributeData;for(var c in h)if(!a[c])throw new Error('shader and geometry incompatible, geometry missing the "'+c+'" attribute')},GeometrySystem.prototype.getSignature=function getSignature(i,o){var a=i.attributes,h=o.attributeData,c=["g",i.id];for(var l in a)h[l]&&c.push(l);return c.join("-")},GeometrySystem.prototype.initGeometryVao=function initGeometryVao(i,o){this.checkCompatibility(i,o);var a=this.gl,h=this.CONTEXT_UID,c=this.getSignature(i,o),l=i.glVertexArrayObjects[this.CONTEXT_UID],m=l[c];if(m)return l[o.id]=m,m;var g=i.buffers,_=i.attributes,x={},S={};for(var R in g)x[R]=0,S[R]=0;for(var k in _)!_[k].size&&o.attributeData[k]?_[k].size=o.attributeData[k].size:_[k].size||console.warn("PIXI Geometry attribute '"+k+"' size cannot be determined (likely the bound shader does not have the attribute)"),x[_[k].buffer]+=_[k].size*Lt[_[k].type];for(var j in _){var X=_[j],Y=X.size;void 0===X.stride&&(x[X.buffer]===Y*Lt[X.type]?X.stride=0:X.stride=x[X.buffer]),void 0===X.start&&(X.start=S[X.buffer],S[X.buffer]+=Y*Lt[X.type])}m=a.createVertexArray(),a.bindVertexArray(m);for(var q=0;q<g.length;q++){var Z=g[q];Z._glBuffers[h]||(Z._glBuffers[h]=new Dt(a.createBuffer()),this.managedBuffers[Z.id]=Z,Z.disposeRunner.add(this)),Z._glBuffers[h].refCount++}return this.activateVao(i,o),this._activeVao=m,l[o.id]=m,l[c]=m,m},GeometrySystem.prototype.disposeBuffer=function disposeBuffer(i,o){if(this.managedBuffers[i.id]){delete this.managedBuffers[i.id];var a=i._glBuffers[this.CONTEXT_UID],h=this.gl;i.disposeRunner.remove(this),a&&(o||h.deleteBuffer(a.buffer),delete i._glBuffers[this.CONTEXT_UID])}},GeometrySystem.prototype.disposeGeometry=function disposeGeometry(i,o){if(this.managedGeometries[i.id]){delete this.managedGeometries[i.id];var a=i.glVertexArrayObjects[this.CONTEXT_UID],h=this.gl,c=i.buffers;if(i.disposeRunner.remove(this),a){for(var l=0;l<c.length;l++){var m=c[l]._glBuffers[this.CONTEXT_UID];m.refCount--,0!==m.refCount||o||this.disposeBuffer(c[l],o)}if(!o)for(var g in a)if("g"===g[0]){var _=a[g];this._activeVao===_&&this.unbind(),h.deleteVertexArray(_)}delete i.glVertexArrayObjects[this.CONTEXT_UID]}}},GeometrySystem.prototype.disposeAll=function disposeAll(i){for(var o=Object.keys(this.managedGeometries),a=0;a<o.length;a++)this.disposeGeometry(this.managedGeometries[o[a]],i);o=Object.keys(this.managedBuffers);for(var h=0;h<o.length;h++)this.disposeBuffer(this.managedBuffers[o[h]],i)},GeometrySystem.prototype.activateVao=function activateVao(i,o){var a=this.gl,h=this.CONTEXT_UID,c=i.buffers,l=i.attributes;i.indexBuffer&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,i.indexBuffer._glBuffers[h].buffer);var m=null;for(var g in l){var _=l[g],x=c[_.buffer]._glBuffers[h];if(o.attributeData[g]){m!==x&&(a.bindBuffer(a.ARRAY_BUFFER,x.buffer),m=x);var S=o.attributeData[g].location;if(a.enableVertexAttribArray(S),a.vertexAttribPointer(S,_.size,_.type||a.FLOAT,_.normalized,_.stride,_.start),_.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");a.vertexAttribDivisor(S,1)}}}},GeometrySystem.prototype.draw=function draw(i,o,a,h){var c=this.gl,l=this._activeGeometry;if(l.indexBuffer){var m=l.indexBuffer.data.BYTES_PER_ELEMENT,g=2===m?c.UNSIGNED_SHORT:c.UNSIGNED_INT;2===m||4===m&&this.canUseUInt32ElementIndex?l.instanced?c.drawElementsInstanced(i,o||l.indexBuffer.data.length,g,(a||0)*m,h||1):c.drawElements(i,o||l.indexBuffer.data.length,g,(a||0)*m):console.warn("unsupported index buffer type: uint32")}else l.instanced?c.drawArraysInstanced(i,a,o||l.getSize(),h||1):c.drawArrays(i,a,o||l.getSize());return this},GeometrySystem.prototype.unbind=function unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}}(ht),function MaskData(i){this.type=he.NONE,this.autoDetect=!0,this.maskObject=i||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null});function compileProgram(i,o,a,h){var c=compileShader(i,i.VERTEX_SHADER,o),l=compileShader(i,i.FRAGMENT_SHADER,a),m=i.createProgram();if(i.attachShader(m,c),i.attachShader(m,l),h)for(var g in h)i.bindAttribLocation(m,h[g],g);return i.linkProgram(m),i.getProgramParameter(m,i.LINK_STATUS)||(i.getShaderParameter(c,i.COMPILE_STATUS)||(console.warn(o),console.error(i.getShaderInfoLog(c))),i.getShaderParameter(l,i.COMPILE_STATUS)||(console.warn(a),console.error(i.getShaderInfoLog(l))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",i.getProgramParameter(m,i.VALIDATE_STATUS)),console.error("gl.getError()",i.getError()),""!==i.getProgramInfoLog(m)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",i.getProgramInfoLog(m)),i.deleteProgram(m),m=null),i.deleteShader(c),i.deleteShader(l),m}function compileShader(i,o,a){var h=i.createShader(o);return i.shaderSource(h,a),i.compileShader(h),h}function core_es_defaultValue(i,o){switch(i){case"float":return 0;case"vec2":return new Float32Array(2*o);case"vec3":return new Float32Array(3*o);case"vec4":return new Float32Array(4*o);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*o);case"ivec3":return new Int32Array(3*o);case"ivec4":return new Int32Array(4*o);case"bool":return!1;case"bvec2":return booleanArray(2*o);case"bvec3":return booleanArray(3*o);case"bvec4":return booleanArray(4*o);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function booleanArray(i){for(var o=new Array(i),a=0;a<o.length;a++)o[a]=!1;return o}Bt.prototype.reset=function reset(){this.pooled&&(this.maskObject=null,this.type=he.NONE,this.autoDetect=!0),this._target=null},Bt.prototype.copyCountersOrReset=function copyCountersOrReset(i){i?(this._stencilCounter=i._stencilCounter,this._scissorCounter=i._scissorCounter,this._scissorRect=i._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)};var Nt,Gt={},Ut=Gt;function getTestContext(){if(Ut===Gt||Ut&&Ut.isContextLost()){var i,o=document.createElement("canvas");pe.PREFER_ENV>=Y.WEBGL2&&(i=o.getContext("webgl2",{})),i||((i=o.getContext("webgl",{})||o.getContext("experimental-webgl",{}))?i.getExtension("WEBGL_draw_buffers"):i=null),Ut=i}return Ut}function setPrecision(i,o,a){if("precision"!==i.substring(0,9)){var h=o;return o===ue.HIGH&&a!==ue.HIGH&&(h=ue.MEDIUM),"precision "+h+" float;\n"+i}return a!==ue.HIGH&&"precision highp"===i.substring(0,15)?i.replace("precision highp","precision mediump"):i}var jt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(i){return jt[i]}var Wt=null,Xt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(i,o){if(!Wt){var a=Object.keys(Xt);Wt={};for(var h=0;h<a.length;++h){var c=a[h];Wt[i[c]]=Xt[c]}}return Wt[o]}var Ht,Vt={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Yt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},qt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function generateIfTestSrc(i){for(var o="",a=0;a<i;++a)a>0&&(o+="\nelse "),a<i-1&&(o+="if(test == "+a+".0){}");return o}var Kt=0,Zt={},Qt=function Program(i,o,a){void 0===a&&(a="pixi-shader"),this.id=Kt++,this.vertexSrc=i||Program.defaultVertexSrc,this.fragmentSrc=o||Program.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(a=a.replace(/\s+/g,"-"),Zt[a]?(Zt[a]++,a+="-"+Zt[a]):Zt[a]=1,this.vertexSrc="#define SHADER_NAME "+a+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+a+"\n"+this.fragmentSrc,this.vertexSrc=setPrecision(this.vertexSrc,pe.PRECISION_VERTEX,ue.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,pe.PRECISION_FRAGMENT,function getMaxFragmentPrecision(){if(!Nt){Nt=ue.MEDIUM;var i=getTestContext();if(i&&i.getShaderPrecisionFormat){var o=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);Nt=o.precision?ue.HIGH:ue.MEDIUM}}return Nt}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null},Jt={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};Qt.prototype.extractData=function extractData(i,o){var a=getTestContext();if(a){var h=compileProgram(a,i,o);this.attributeData=this.getAttributeData(h,a),this.uniformData=this.getUniformData(h,a),a.deleteProgram(h)}else this.uniformData={},this.attributeData={}},Qt.prototype.getAttributeData=function getAttributeData(i,o){for(var a={},h=[],c=o.getProgramParameter(i,o.ACTIVE_ATTRIBUTES),l=0;l<c;l++){var m=o.getActiveAttrib(i,l),g=mapType(o,m.type),_={type:g,name:m.name,size:mapSize(g),location:0};a[m.name]=_,h.push(_)}h.sort((function(i,o){return i.name>o.name?1:-1}));for(var x=0;x<h.length;x++)h[x].location=x;return a},Qt.prototype.getUniformData=function getUniformData(i,o){for(var a={},h=o.getProgramParameter(i,o.ACTIVE_UNIFORMS),c=0;c<h;c++){var l=o.getActiveUniform(i,c),m=l.name.replace(/\[.*?\]/,""),g=l.name.match(/\[.*?\]/,""),_=mapType(o,l.type);a[m]={type:_,size:l.size,isArray:g,value:core_es_defaultValue(_,l.size)}}return a},Jt.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},Jt.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},Qt.from=function from(i,o,a){var h=i+o,c=be[h];return c||(be[h]=c=new Qt(i,o,a)),c},Object.defineProperties(Qt,Jt);var $t=function Shader(i,o){for(var a in this.program=i,this.uniformGroup=o?o instanceof It?o:new It(o):new It({}),i.uniformData)this.uniformGroup.uniforms[a]instanceof Array&&(this.uniformGroup.uniforms[a]=new Float32Array(this.uniformGroup.uniforms[a]))},er={uniforms:{configurable:!0}};$t.prototype.checkUniformExists=function checkUniformExists(i,o){if(o.uniforms[i])return!0;for(var a in o.uniforms){var h=o.uniforms[a];if(h.group&&this.checkUniformExists(i,h))return!0}return!1},$t.prototype.destroy=function destroy(){this.uniformGroup=null},er.uniforms.get=function(){return this.uniformGroup.uniforms},$t.from=function from(i,o,a){var h=Qt.from(i,o);return new $t(h,a)},Object.defineProperties($t.prototype,er);var tr=function State(){this.data=0,this.blendMode=Z.NORMAL,this.polygonOffset=0,this.blend=!0},rr={blend:{configurable:!0},offsets:{configurable:!0},culling:{configurable:!0},depthTest:{configurable:!0},clockwiseFrontFace:{configurable:!0},blendMode:{configurable:!0},polygonOffset:{configurable:!0}};rr.blend.get=function(){return!!(1&this.data)},rr.blend.set=function(i){!!(1&this.data)!==i&&(this.data^=1)},rr.offsets.get=function(){return!!(2&this.data)},rr.offsets.set=function(i){!!(2&this.data)!==i&&(this.data^=2)},rr.culling.get=function(){return!!(4&this.data)},rr.culling.set=function(i){!!(4&this.data)!==i&&(this.data^=4)},rr.depthTest.get=function(){return!!(8&this.data)},rr.depthTest.set=function(i){!!(8&this.data)!==i&&(this.data^=8)},rr.clockwiseFrontFace.get=function(){return!!(16&this.data)},rr.clockwiseFrontFace.set=function(i){!!(16&this.data)!==i&&(this.data^=16)},rr.blendMode.get=function(){return this._blendMode},rr.blendMode.set=function(i){this.blend=i!==Z.NONE,this._blendMode=i},rr.polygonOffset.get=function(){return this._polygonOffset},rr.polygonOffset.set=function(i){this.offsets=!!i,this._polygonOffset=i},tr.for2d=function for2d(){var i=new tr;return i.depthTest=!1,i.blend=!0,i},Object.defineProperties(tr.prototype,rr);var ir=function(i){function Filter(o,a,h){var c=Qt.from(o||Filter.defaultVertexSrc,a||Filter.defaultFragmentSrc);i.call(this,c,h),this.padding=0,this.resolution=pe.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0,this.legacy=!!this.program.attributeData.aTextureCoord,this.state=new tr}i&&(Filter.__proto__=i),Filter.prototype=Object.create(i&&i.prototype),Filter.prototype.constructor=Filter;var o={blendMode:{configurable:!0}},a={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};return Filter.prototype.apply=function apply(i,o,a,h,c){i.applyFilter(this,o,a,h,c)},o.blendMode.get=function(){return this.state.blendMode},o.blendMode.set=function(i){this.state.blendMode=i},a.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},a.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},Object.defineProperties(Filter.prototype,o),Object.defineProperties(Filter,a),Filter}($t);ir.SOURCE_KEY_MAP={};var nr=new ze,or=function TextureMatrix(i,o){this._texture=i,this.mapCoord=new ze,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._updateID=-1,this.clampOffset=0,this.clampMargin=void 0===o?.5:o,this.isSimple=!1},ar={texture:{configurable:!0}};ar.texture.get=function(){return this._texture},ar.texture.set=function(i){this._texture=i,this._updateID=-1},or.prototype.multiplyUvs=function multiplyUvs(i,o){void 0===o&&(o=i);for(var a=this.mapCoord,h=0;h<i.length;h+=2){var c=i[h],l=i[h+1];o[h]=c*a.a+l*a.c+a.tx,o[h+1]=c*a.b+l*a.d+a.ty}return o},or.prototype.update=function update(i){var o=this._texture;if(!o||!o.valid)return!1;if(!i&&this._updateID===o._updateID)return!1;this._updateID=o._updateID;var a=o._uvs;this.mapCoord.set(a.x1-a.x0,a.y1-a.y0,a.x3-a.x0,a.y3-a.y0,a.x0,a.y0);var h=o.orig,c=o.trim;c&&(nr.set(h.width/c.width,0,0,h.height/c.height,-c.x/c.width,-c.y/c.height),this.mapCoord.append(nr));var l=o.baseTexture,m=this.uClampFrame,g=this.clampMargin/l.resolution,_=this.clampOffset;return m[0]=(o._frame.x+g+_)/l.width,m[1]=(o._frame.y+g+_)/l.height,m[2]=(o._frame.x+o._frame.width-g+_)/l.width,m[3]=(o._frame.y+o._frame.height-g+_)/l.height,this.uClampOffset[0]=_/l.realWidth,this.uClampOffset[1]=_/l.realHeight,this.isSimple=o._frame.width===l.width&&o._frame.height===l.height&&0===o.rotate,!0},Object.defineProperties(or.prototype,ar);var sr=function(i){function SpriteMaskFilter(o){var a=new ze;i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n"),o.renderable=!1,this.maskSprite=o,this.maskMatrix=a}return i&&(SpriteMaskFilter.__proto__=i),SpriteMaskFilter.prototype=Object.create(i&&i.prototype),SpriteMaskFilter.prototype.constructor=SpriteMaskFilter,SpriteMaskFilter.prototype.apply=function apply(i,o,a,h){var c=this.maskSprite,l=this.maskSprite.texture;l.valid&&(l.transform||(l.transform=new or(l,0)),l.transform.update(),this.uniforms.npmAlpha=l.baseTexture.alphaMode?0:1,this.uniforms.mask=l,this.uniforms.otherMatrix=i.calculateSpriteMatrix(this.maskMatrix,c).prepend(l.transform.mapCoord),this.uniforms.alpha=c.worldAlpha,this.uniforms.maskClamp=l.transform.uClampFrame,i.applyFilter(this,o,a,h))},SpriteMaskFilter}(ir),ur=(function(i){function MaskSystem(o){i.call(this,o),this.scissorRenderTarget=null,this.enableScissor=!1,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}i&&(MaskSystem.__proto__=i),MaskSystem.prototype=Object.create(i&&i.prototype),MaskSystem.prototype.constructor=MaskSystem,MaskSystem.prototype.setMaskStack=function setMaskStack(i){this.maskStack=i,this.renderer.scissor.setMaskStack(i),this.renderer.stencil.setMaskStack(i)},MaskSystem.prototype.push=function push(i,o){if(!o.isMaskData){var a=this.maskDataPool.pop()||new Bt;a.pooled=!0,a.maskObject=o,o=a}switch(o.autoDetect&&this.detect(o),o.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),o._target=i,o.type){case he.SCISSOR:this.maskStack.push(o),this.renderer.scissor.push(o);break;case he.STENCIL:this.maskStack.push(o),this.renderer.stencil.push(o);break;case he.SPRITE:o.copyCountersOrReset(null),this.pushSpriteMask(o),this.maskStack.push(o)}},MaskSystem.prototype.pop=function pop(i){var o=this.maskStack.pop();if(o&&o._target===i){switch(o.type){case he.SCISSOR:this.renderer.scissor.pop();break;case he.STENCIL:this.renderer.stencil.pop(o.maskObject);break;case he.SPRITE:this.popSpriteMask()}o.reset(),o.pooled&&this.maskDataPool.push(o)}},MaskSystem.prototype.detect=function detect(i){var o=i.maskObject;if(o.isSprite)i.type=he.SPRITE;else if(i.type=he.STENCIL,this.enableScissor&&o.isFastRect&&o.isFastRect()){var a=o.worldTransform,h=Math.atan2(a.b,a.a),c=Math.atan2(a.d,a.c);h=Math.round(h*(180/Math.PI)*100),c=((c=Math.round(c*(180/Math.PI)*100)-h)%18e3+18e3)%18e3,0==(h=(h%9e3+9e3)%9e3)&&9e3===c&&(i.type=he.SCISSOR)}},MaskSystem.prototype.pushSpriteMask=function pushSpriteMask(i){var o=i.maskObject,a=i._target,h=this.alphaMaskPool[this.alphaMaskIndex];h||(h=this.alphaMaskPool[this.alphaMaskIndex]=[new sr(o)]),h[0].resolution=this.renderer.resolution,h[0].maskSprite=o;var c=a.filterArea;a.filterArea=o.getBounds(!0),this.renderer.filter.push(a,h),a.filterArea=c,this.alphaMaskIndex++},MaskSystem.prototype.popSpriteMask=function popSpriteMask(){this.renderer.filter.pop(),this.alphaMaskIndex--}}(ht),function(i){function AbstractMaskSystem(o){i.call(this,o),this.maskStack=[],this.glConst=0}return i&&(AbstractMaskSystem.__proto__=i),AbstractMaskSystem.prototype=Object.create(i&&i.prototype),AbstractMaskSystem.prototype.constructor=AbstractMaskSystem,AbstractMaskSystem.prototype.getStackLength=function getStackLength(){return this.maskStack.length},AbstractMaskSystem.prototype.setMaskStack=function setMaskStack(i){var o=this.renderer.gl,a=this.getStackLength();this.maskStack=i;var h=this.getStackLength();h!==a&&(0===h?o.disable(this.glConst):(o.enable(this.glConst),this._useCurrent()))},AbstractMaskSystem.prototype._useCurrent=function _useCurrent(){},AbstractMaskSystem.prototype.destroy=function destroy(){i.prototype.destroy.call(this,this),this.maskStack=null},AbstractMaskSystem}(ht)),hr=(function(i){function ScissorSystem(o){i.call(this,o),this.glConst=WebGLRenderingContext.SCISSOR_TEST}i&&(ScissorSystem.__proto__=i),ScissorSystem.prototype=Object.create(i&&i.prototype),ScissorSystem.prototype.constructor=ScissorSystem,ScissorSystem.prototype.getStackLength=function getStackLength(){var i=this.maskStack[this.maskStack.length-1];return i?i._scissorCounter:0},ScissorSystem.prototype.push=function push(i){var o=i.maskObject;o.renderable=!0;var a=i._scissorRect,h=o.getBounds(!0),c=this.renderer.gl;o.renderable=!1,a?h.fit(a):c.enable(c.SCISSOR_TEST),i._scissorCounter++,i._scissorRect=h,this._useCurrent()},ScissorSystem.prototype.pop=function pop(){var i=this.renderer.gl;this.getStackLength()>0?this._useCurrent():i.disable(i.SCISSOR_TEST)},ScissorSystem.prototype._useCurrent=function _useCurrent(){var i=this.maskStack[this.maskStack.length-1]._scissorRect,o=this.renderer.renderTexture.current,a=this.renderer.projection,h=a.transform,c=a.sourceFrame,l=a.destinationFrame,m=o?o.resolution:this.renderer.resolution,g=(i.x-c.x)*m+l.x,_=(i.y-c.y)*m+l.y,x=i.width*m,S=i.height*m;h&&(g+=h.tx*m,_+=h.ty*m),o||(_=this.renderer.height-S-_),this.renderer.gl.scissor(g,_,x,S)}}(ur),function(i){function StencilSystem(o){i.call(this,o),this.glConst=WebGLRenderingContext.STENCIL_TEST}i&&(StencilSystem.__proto__=i),StencilSystem.prototype=Object.create(i&&i.prototype),StencilSystem.prototype.constructor=StencilSystem,StencilSystem.prototype.getStackLength=function getStackLength(){var i=this.maskStack[this.maskStack.length-1];return i?i._stencilCounter:0},StencilSystem.prototype.push=function push(i){var o=i.maskObject,a=this.renderer.gl,h=i._stencilCounter;0===h&&(this.renderer.framebuffer.forceStencil(),a.enable(a.STENCIL_TEST)),i._stencilCounter++,a.colorMask(!1,!1,!1,!1),a.stencilFunc(a.EQUAL,h,this._getBitwiseMask()),a.stencilOp(a.KEEP,a.KEEP,a.INCR),o.renderable=!0,o.render(this.renderer),this.renderer.batch.flush(),o.renderable=!1,this._useCurrent()},StencilSystem.prototype.pop=function pop(i){var o=this.renderer.gl;0===this.getStackLength()?(o.disable(o.STENCIL_TEST),o.clear(o.STENCIL_BUFFER_BIT),o.clearStencil(0)):(o.colorMask(!1,!1,!1,!1),o.stencilOp(o.KEEP,o.KEEP,o.DECR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent())},StencilSystem.prototype._useCurrent=function _useCurrent(){var i=this.renderer.gl;i.colorMask(!0,!0,!0,!0),i.stencilFunc(i.EQUAL,this.getStackLength(),this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)},StencilSystem.prototype._getBitwiseMask=function _getBitwiseMask(){return(1<<this.getStackLength())-1}}(ur),function(i){function ProjectionSystem(o){i.call(this,o),this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ze,this.transform=null}i&&(ProjectionSystem.__proto__=i),ProjectionSystem.prototype=Object.create(i&&i.prototype),ProjectionSystem.prototype.constructor=ProjectionSystem,ProjectionSystem.prototype.update=function update(i,o,a,h){this.destinationFrame=i||this.destinationFrame||this.defaultFrame,this.sourceFrame=o||this.sourceFrame||i,this.calculateProjection(this.destinationFrame,this.sourceFrame,a,h),this.transform&&this.projectionMatrix.append(this.transform);var c=this.renderer;c.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,c.globalUniforms.update(),c.shader.shader&&c.shader.syncUniformGroup(c.shader.shader.uniforms.globals)},ProjectionSystem.prototype.calculateProjection=function calculateProjection(i,o,a,h){var c=this.projectionMatrix;h?(c.a=1/i.width*2*a,c.d=-1/i.height*2*a,c.tx=-1-o.x*c.a,c.ty=1-o.y*c.d):(c.a=1/i.width*2*a,c.d=1/i.height*2*a,c.tx=-1-o.x*c.a,c.ty=-1-o.y*c.d)},ProjectionSystem.prototype.setTransform=function setTransform(){}}(ht),new He),cr=(function(i){function RenderTextureSystem(o){i.call(this,o),this.clearColor=o._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new He,this.destinationFrame=new He}i&&(RenderTextureSystem.__proto__=i),RenderTextureSystem.prototype=Object.create(i&&i.prototype),RenderTextureSystem.prototype.constructor=RenderTextureSystem,RenderTextureSystem.prototype.bind=function bind(i,o,a){void 0===i&&(i=null),this.current=i;var h,c=this.renderer;if(i){var l=i.baseTexture;h=l.resolution,a||(hr.width=l.realWidth,hr.height=l.realHeight,a=hr),o||(o=a),this.renderer.framebuffer.bind(l.framebuffer,a),this.renderer.projection.update(a,o,h,!1),this.renderer.mask.setMaskStack(l.maskStack)}else h=this.renderer.resolution,a||(hr.width=c.width,hr.height=c.height,a=hr),o||(o=a),c.framebuffer.bind(null,a),this.renderer.projection.update(a,o,h,!0),this.renderer.mask.setMaskStack(this.defaultMaskStack);this.sourceFrame.copyFrom(o),this.destinationFrame.x=a.x/h,this.destinationFrame.y=a.y/h,this.destinationFrame.width=a.width/h,this.destinationFrame.height=a.height/h,o===a&&this.sourceFrame.copyFrom(this.destinationFrame)},RenderTextureSystem.prototype.clear=function clear(i){i=this.current?i||this.current.baseTexture.clearColor:i||this.clearColor,this.renderer.framebuffer.clear(i[0],i[1],i[2],i[3])},RenderTextureSystem.prototype.resize=function resize(){this.bind(null)},RenderTextureSystem.prototype.reset=function reset(){this.bind(null)}}(ht),function GLProgram(i,o){this.program=i,this.uniformData=o,this.uniformGroups={}});cr.prototype.destroy=function destroy(){this.uniformData=null,this.uniformGroups=null,this.program=null};var lr=0,pr={textureCount:0},fr=(function(i){function ShaderSystem(o){i.call(this,o),this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this.id=lr++}i&&(ShaderSystem.__proto__=i),ShaderSystem.prototype=Object.create(i&&i.prototype),ShaderSystem.prototype.constructor=ShaderSystem,ShaderSystem.prototype.systemCheck=function systemCheck(){if(!function unsafeEvalSupported(){if("boolean"==typeof Ht)return Ht;try{var i=new Function("param1","param2","param3","return param1[param2] === param3;");Ht=!0===i({a:"b"},"a","b")}catch(i){Ht=!1}return Ht}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},ShaderSystem.prototype.contextChange=function contextChange(i){this.gl=i,this.reset()},ShaderSystem.prototype.bind=function bind(i,o){i.uniforms.globals=this.renderer.globalUniforms;var a=i.program,h=a.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(i);return this.shader=i,this.program!==a&&(this.program=a,this.gl.useProgram(h.program)),o||(pr.textureCount=0,this.syncUniformGroup(i.uniformGroup,pr)),h},ShaderSystem.prototype.setUniforms=function setUniforms(i){var o=this.shader.program,a=o.glPrograms[this.renderer.CONTEXT_UID];o.syncUniforms(a.uniformData,i,this.renderer)},ShaderSystem.prototype.syncUniformGroup=function syncUniformGroup(i,o){var a=this.getglProgram();i.static&&i.dirtyId===a.uniformGroups[i.id]||(a.uniformGroups[i.id]=i.dirtyId,this.syncUniforms(i,a,o))},ShaderSystem.prototype.syncUniforms=function syncUniforms(i,o,a){(i.syncUniforms[this.shader.program.id]||this.createSyncGroups(i))(o.uniformData,i.uniforms,this.renderer,a)},ShaderSystem.prototype.createSyncGroups=function createSyncGroups(i){var o=this.getSignature(i,this.shader.program.uniformData);return this.cache[o]||(this.cache[o]=function generateUniformsSync(i,o){var a="var v = null;\n    var cv = null\n    var t = 0;\n    var gl = renderer.gl\n    ";for(var h in i.uniforms){var c=o[h];c?"float"===c.type&&1===c.size?a+="\n            if(uv."+h+" !== ud."+h+".value)\n            {\n                ud."+h+".value = uv."+h+"\n                gl.uniform1f(ud."+h+".location, uv."+h+")\n            }\n":"sampler2D"!==c.type&&"samplerCube"!==c.type&&"sampler2DArray"!==c.type||1!==c.size||c.isArray?"mat3"===c.type&&1===c.size?void 0!==i.uniforms[h].a?a+="\n                gl.uniformMatrix3fv(ud."+h+".location, false, uv."+h+".toArray(true));\n                \n":a+="\n                gl.uniformMatrix3fv(ud."+h+".location, false, uv."+h+");\n                \n":"vec2"===c.type&&1===c.size?void 0!==i.uniforms[h].x?a+="\n                cv = ud."+h+".value;\n                v = uv."+h+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud."+h+".location, v.x, v.y);\n                }\n":a+="\n                cv = ud."+h+".value;\n                v = uv."+h+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud."+h+".location, v[0], v[1]);\n                }\n                \n":"vec4"===c.type&&1===c.size?void 0!==i.uniforms[h].width?a+="\n                cv = ud."+h+".value;\n                v = uv."+h+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud."+h+".location, v.x, v.y, v.width, v.height)\n                }\n":a+="\n                cv = ud."+h+".value;\n                v = uv."+h+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud."+h+".location, v[0], v[1], v[2], v[3])\n                }\n                \n":a+="\n            cv = ud."+h+".value;\n            v = uv."+h+";\n            "+(1===c.size?Vt:Yt)[c.type].replace("location","ud."+h+".location")+";\n":a+="\n\n            t = syncData.textureCount++;\n\n            renderer.texture.bind(uv."+h+", t);\n            \n            if(ud."+h+".value !== t)\n            {\n                ud."+h+".value = t;\n                gl.uniform1i(ud."+h+".location, t);\n; // eslint-disable-line max-len\n            }\n":i.uniforms[h].group&&(a+="\n                    renderer.shader.syncUniformGroup(uv."+h+", syncData);\n                ")}return new Function("ud","uv","renderer","syncData",a)}(i,this.shader.program.uniformData)),i.syncUniforms[this.shader.program.id]=this.cache[o],i.syncUniforms[this.shader.program.id]},ShaderSystem.prototype.getSignature=function getSignature(i,o){var a=i.uniforms,h=[];for(var c in a)h.push(c),o[c]&&h.push(o[c].type);return h.join("-")},ShaderSystem.prototype.getglProgram=function getglProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},ShaderSystem.prototype.generateShader=function generateShader(i){var o=this.gl,a=i.program,h={};for(var c in a.attributeData)h[c]=a.attributeData[c].location;var l=compileProgram(o,a.vertexSrc,a.fragmentSrc,h),m={};for(var g in a.uniformData){var _=a.uniformData[g];m[g]={location:o.getUniformLocation(l,g),value:core_es_defaultValue(_.type,_.size)}}var x=new cr(l,m);return a.glPrograms[this.renderer.CONTEXT_UID]=x,x},ShaderSystem.prototype.reset=function reset(){this.program=null,this.shader=null},ShaderSystem.prototype.destroy=function destroy(){this.destroyed=!0}}(ht),function(i){function StateSystem(o){i.call(this,o),this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Z.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.checks=[],this.defaultState=new tr,this.defaultState.blend=!0,this.defaultState.depth=!0}i&&(StateSystem.__proto__=i),StateSystem.prototype=Object.create(i&&i.prototype),StateSystem.prototype.constructor=StateSystem,StateSystem.prototype.contextChange=function contextChange(i){this.gl=i,this.blendModes=function mapWebGLBlendModesToPixi(i,o){return void 0===o&&(o=[]),o[Z.NORMAL]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Z.ADD]=[i.ONE,i.ONE],o[Z.MULTIPLY]=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Z.SCREEN]=[i.ONE,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Z.OVERLAY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Z.DARKEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Z.LIGHTEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Z.COLOR_DODGE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Z.COLOR_BURN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Z.HARD_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Z.SOFT_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Z.DIFFERENCE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Z.EXCLUSION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Z.HUE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Z.SATURATION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Z.COLOR]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Z.LUMINOSITY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Z.NONE]=[0,0],o[Z.NORMAL_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Z.ADD_NPM]=[i.SRC_ALPHA,i.ONE,i.ONE,i.ONE],o[Z.SCREEN_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Z.SRC_IN]=[i.DST_ALPHA,i.ZERO],o[Z.SRC_OUT]=[i.ONE_MINUS_DST_ALPHA,i.ZERO],o[Z.SRC_ATOP]=[i.DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],o[Z.DST_OVER]=[i.ONE_MINUS_DST_ALPHA,i.ONE],o[Z.DST_IN]=[i.ZERO,i.SRC_ALPHA],o[Z.DST_OUT]=[i.ZERO,i.ONE_MINUS_SRC_ALPHA],o[Z.DST_ATOP]=[i.ONE_MINUS_DST_ALPHA,i.SRC_ALPHA],o[Z.XOR]=[i.ONE_MINUS_DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],o[Z.SUBTRACT]=[i.ONE,i.ONE,i.ONE,i.ONE,i.FUNC_REVERSE_SUBTRACT,i.FUNC_ADD],o}(i),this.set(this.defaultState),this.reset()},StateSystem.prototype.set=function set(i){if(i=i||this.defaultState,this.stateId!==i.data){for(var o=this.stateId^i.data,a=0;o;)1&o&&this.map[a].call(this,!!(i.data&1<<a)),o>>=1,a++;this.stateId=i.data}for(var h=0;h<this.checks.length;h++)this.checks[h](this,i)},StateSystem.prototype.forceState=function forceState(i){i=i||this.defaultState;for(var o=0;o<this.map.length;o++)this.map[o].call(this,!!(i.data&1<<o));for(var a=0;a<this.checks.length;a++)this.checks[a](this,i);this.stateId=i.data},StateSystem.prototype.setBlend=function setBlend(i){this.updateCheck(StateSystem.checkBlendMode,i),this.gl[i?"enable":"disable"](this.gl.BLEND)},StateSystem.prototype.setOffset=function setOffset(i){this.updateCheck(StateSystem.checkPolygonOffset,i),this.gl[i?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},StateSystem.prototype.setDepthTest=function setDepthTest(i){this.gl[i?"enable":"disable"](this.gl.DEPTH_TEST)},StateSystem.prototype.setCullFace=function setCullFace(i){this.gl[i?"enable":"disable"](this.gl.CULL_FACE)},StateSystem.prototype.setFrontFace=function setFrontFace(i){this.gl.frontFace(this.gl[i?"CW":"CCW"])},StateSystem.prototype.setBlendMode=function setBlendMode(i){if(i!==this.blendMode){this.blendMode=i;var o=this.blendModes[i],a=this.gl;2===o.length?a.blendFunc(o[0],o[1]):a.blendFuncSeparate(o[0],o[1],o[2],o[3]),6===o.length?(this._blendEq=!0,a.blendEquationSeparate(o[4],o[5])):this._blendEq&&(this._blendEq=!1,a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD))}},StateSystem.prototype.setPolygonOffset=function setPolygonOffset(i,o){this.gl.polygonOffset(i,o)},StateSystem.prototype.reset=function reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(0),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},StateSystem.prototype.updateCheck=function updateCheck(i,o){var a=this.checks.indexOf(i);o&&-1===a?this.checks.push(i):o||-1===a||this.checks.splice(a,1)},StateSystem.checkBlendMode=function checkBlendMode(i,o){i.setBlendMode(o.blendMode)},StateSystem.checkPolygonOffset=function checkPolygonOffset(i,o){i.setPolygonOffset(o.polygonOffset,0)}}(ht),function(i){function TextureGCSystem(o){i.call(this,o),this.count=0,this.checkCount=0,this.maxIdle=pe.GC_MAX_IDLE,this.checkCountMax=pe.GC_MAX_CHECK_COUNT,this.mode=pe.GC_MODE}i&&(TextureGCSystem.__proto__=i),TextureGCSystem.prototype=Object.create(i&&i.prototype),TextureGCSystem.prototype.constructor=TextureGCSystem,TextureGCSystem.prototype.postrender=function postrender(){this.renderer.renderingToScreen&&(this.count++,this.mode!==se.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},TextureGCSystem.prototype.run=function run(){for(var i=this.renderer.texture,o=i.managedTextures,a=!1,h=0;h<o.length;h++){var c=o[h];!c.framebuffer&&this.count-c.touched>this.maxIdle&&(i.destroyTexture(c,!0),o[h]=null,a=!0)}if(a){for(var l=0,m=0;m<o.length;m++)null!==o[m]&&(o[l++]=o[m]);o.length=l}},TextureGCSystem.prototype.unload=function unload(i){var o=this.renderer.textureSystem;i._texture&&i._texture._glRenderTargets&&o.destroyTexture(i._texture);for(var a=i.children.length-1;a>=0;a--)this.unload(i.children[a])}}(ht),function GLTexture(i){this.texture=i,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121});(function(i){function TextureSystem(o){i.call(this,o),this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new rt}i&&(TextureSystem.__proto__=i),TextureSystem.prototype=Object.create(i&&i.prototype),TextureSystem.prototype.constructor=TextureSystem,TextureSystem.prototype.contextChange=function contextChange(){var i=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var o=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=o;for(var a=0;a<o;a++)this.boundTextures[a]=null;this.emptyTextures={};var h=new fr(i.createTexture());i.bindTexture(i.TEXTURE_2D,h.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[i.TEXTURE_2D]=h,this.emptyTextures[i.TEXTURE_CUBE_MAP]=new fr(i.createTexture()),i.bindTexture(i.TEXTURE_CUBE_MAP,this.emptyTextures[i.TEXTURE_CUBE_MAP].texture);for(var c=0;c<6;c++)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,null);i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MIN_FILTER,i.LINEAR);for(var l=0;l<this.boundTextures.length;l++)this.bind(null,l)},TextureSystem.prototype.bind=function bind(i,o){void 0===o&&(o=0);var a=this.gl;if(i){if((i=i.baseTexture||i).valid){i.touched=this.renderer.textureGC.count;var h=i._glTextures[this.CONTEXT_UID]||this.initTexture(i);this.boundTextures[o]!==i&&(this.currentLocation!==o&&(this.currentLocation=o,a.activeTexture(a.TEXTURE0+o)),a.bindTexture(i.target,h.texture)),h.dirtyId!==i.dirtyId&&(this.currentLocation!==o&&(this.currentLocation=o,a.activeTexture(a.TEXTURE0+o)),this.updateTexture(i)),this.boundTextures[o]=i}}else this.currentLocation!==o&&(this.currentLocation=o,a.activeTexture(a.TEXTURE0+o)),a.bindTexture(a.TEXTURE_2D,this.emptyTextures[a.TEXTURE_2D].texture),this.boundTextures[o]=null},TextureSystem.prototype.reset=function reset(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]=this.unknownTexture},TextureSystem.prototype.unbind=function unbind(i){var o=this.gl,a=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var h=0;h<a.length;h++)a[h]===this.unknownTexture&&this.bind(null,h)}for(var c=0;c<a.length;c++)a[c]===i&&(this.currentLocation!==c&&(o.activeTexture(o.TEXTURE0+c),this.currentLocation=c),o.bindTexture(o.TEXTURE_2D,this.emptyTextures[i.target].texture),a[c]=null)},TextureSystem.prototype.initTexture=function initTexture(i){var o=new fr(this.gl.createTexture());return o.dirtyId=-1,i._glTextures[this.CONTEXT_UID]=o,this.managedTextures.push(i),i.on("dispose",this.destroyTexture,this),o},TextureSystem.prototype.initTextureType=function initTextureType(i,o){if(o.internalFormat=i.format,o.type=i.type,2===this.webGLVersion){var a=this.renderer.gl;i.type===a.FLOAT&&i.format===a.RGBA&&(o.internalFormat=a.RGBA32F),i.type===re.HALF_FLOAT&&(o.type=a.HALF_FLOAT),o.type===a.HALF_FLOAT&&i.format===a.RGBA&&(o.internalFormat=a.RGBA16F)}},TextureSystem.prototype.updateTexture=function updateTexture(i){var o=i._glTextures[this.CONTEXT_UID];if(o){var a=this.renderer;if(this.initTextureType(i,o),i.resource&&i.resource.upload(a,i,o));else{var h=i.realWidth,c=i.realHeight,l=a.gl;(o.width!==h||o.height!==c||o.dirtyId<0)&&(o.width=h,o.height=c,l.texImage2D(i.target,0,o.internalFormat,h,c,0,i.format,o.type,null))}i.dirtyStyleId!==o.dirtyStyleId&&this.updateTextureStyle(i),o.dirtyId=i.dirtyId}},TextureSystem.prototype.destroyTexture=function destroyTexture(i,o){var a=this.gl;if((i=i.baseTexture||i)._glTextures[this.CONTEXT_UID]&&(this.unbind(i),a.deleteTexture(i._glTextures[this.CONTEXT_UID].texture),i.off("dispose",this.destroyTexture,this),delete i._glTextures[this.CONTEXT_UID],!o)){var h=this.managedTextures.indexOf(i);-1!==h&&removeItems(this.managedTextures,h,1)}},TextureSystem.prototype.updateTextureStyle=function updateTextureStyle(i){var o=i._glTextures[this.CONTEXT_UID];o&&(i.mipmap!==oe.POW2&&2===this.webGLVersion||i.isPowerOfTwo?o.mipmap=i.mipmap>=1:o.mipmap=0,2===this.webGLVersion||i.isPowerOfTwo?o.wrapMode=i.wrapMode:o.wrapMode=ne.CLAMP,i.resource&&i.resource.style(this.renderer,i,o)||this.setStyle(i,o),o.dirtyStyleId=i.dirtyStyleId)},TextureSystem.prototype.setStyle=function setStyle(i,o){var a=this.gl;if(o.mipmap&&a.generateMipmap(i.target),a.texParameteri(i.target,a.TEXTURE_WRAP_S,o.wrapMode),a.texParameteri(i.target,a.TEXTURE_WRAP_T,o.wrapMode),o.mipmap){a.texParameteri(i.target,a.TEXTURE_MIN_FILTER,i.scaleMode===ie.LINEAR?a.LINEAR_MIPMAP_LINEAR:a.NEAREST_MIPMAP_NEAREST);var h=this.renderer.context.extensions.anisotropicFiltering;if(h&&i.anisotropicLevel>0&&i.scaleMode===ie.LINEAR){var c=Math.min(i.anisotropicLevel,a.getParameter(h.MAX_TEXTURE_MAX_ANISOTROPY_EXT));a.texParameterf(i.target,h.TEXTURE_MAX_ANISOTROPY_EXT,c)}}else a.texParameteri(i.target,a.TEXTURE_MIN_FILTER,i.scaleMode===ie.LINEAR?a.LINEAR:a.NEAREST);a.texParameteri(i.target,a.TEXTURE_MAG_FILTER,i.scaleMode===ie.LINEAR?a.LINEAR:a.NEAREST)}})(ht),new ze;me.a;var mr=function BatchDrawCall(){this.texArray=null,this.blend=0,this.type=$.TRIANGLES,this.start=0,this.size=0,this.data=null},gr=function BatchTextureArray(){this.elements=[],this.ids=[],this.count=0};gr.prototype.clear=function clear(){for(var i=0;i<this.count;i++)this.elements[i]=null;this.count=0};var yr=function ViewableBuffer(i){this.rawBinaryData=new ArrayBuffer(i),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)},_r={int8View:{configurable:!0},uint8View:{configurable:!0},int16View:{configurable:!0},uint16View:{configurable:!0},int32View:{configurable:!0}};_r.int8View.get=function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},_r.uint8View.get=function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},_r.int16View.get=function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},_r.uint16View.get=function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},_r.int32View.get=function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},yr.prototype.view=function view(i){return this[i+"View"]},yr.prototype.destroy=function destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},yr.sizeOf=function sizeOf(i){switch(i){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(i+" isn't a valid view type")}},Object.defineProperties(yr.prototype,_r);var vr=function(i){function AbstractBatchRenderer(o){i.call(this,o),this.shaderGenerator=null,this.geometryClass=null,this.vertexSize=null,this.state=tr.for2d(),this.size=4*pe.SPRITE_BATCH_SIZE,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),o.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}return i&&(AbstractBatchRenderer.__proto__=i),AbstractBatchRenderer.prototype=Object.create(i&&i.prototype),AbstractBatchRenderer.prototype.constructor=AbstractBatchRenderer,AbstractBatchRenderer.prototype.contextChange=function contextChange(){var i=this.renderer.gl;pe.PREFER_ENV===Y.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),pe.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function checkMaxIfStatementsInShader(i,o){if(0===i)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var a=o.createShader(o.FRAGMENT_SHADER);;){var h=qt.replace(/%forloop%/gi,generateIfTestSrc(i));if(o.shaderSource(a,h),o.compileShader(a),o.getShaderParameter(a,o.COMPILE_STATUS))break;i=i/2|0}return i}(this.MAX_TEXTURES,i)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var o=0;o<this._packedGeometryPoolSize;o++)this._packedGeometries[o]=new this.geometryClass;this.initFlushBuffers()},AbstractBatchRenderer.prototype.initFlushBuffers=function initFlushBuffers(){for(var i=AbstractBatchRenderer._drawCallPool,o=AbstractBatchRenderer._textureArrayPool,a=this.size/4,h=Math.floor(a/this.MAX_TEXTURES)+1;i.length<a;)i.push(new mr);for(;o.length<h;)o.push(new gr);for(var c=0;c<this.MAX_TEXTURES;c++)this._tempBoundTextures[c]=null},AbstractBatchRenderer.prototype.onPrerender=function onPrerender(){this._flushId=0},AbstractBatchRenderer.prototype.render=function render(i){i._texture.valid&&(this._vertexCount+i.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=i.vertexData.length/2,this._indexCount+=i.indices.length,this._bufferedTextures[this._bufferSize]=i._texture.baseTexture,this._bufferedElements[this._bufferSize++]=i)},AbstractBatchRenderer.prototype.buildTexturesAndDrawCalls=function buildTexturesAndDrawCalls(){var i=this._bufferedTextures,o=this.MAX_TEXTURES,a=AbstractBatchRenderer._textureArrayPool,h=this.renderer.batch,c=this._tempBoundTextures,l=this.renderer.textureGC.count,m=++rt._globalBatch,g=0,_=a[0],x=0;h.copyBoundTextures(c,o);for(var S=0;S<this._bufferSize;++S){var R=i[S];i[S]=null,R._batchEnabled!==m&&(_.count>=o&&(h.boundArray(_,c,m,o),this.buildDrawCalls(_,x,S),x=S,_=a[++g],++m),R._batchEnabled=m,R.touched=l,_.elements[_.count++]=R)}_.count>0&&(h.boundArray(_,c,m,o),this.buildDrawCalls(_,x,this._bufferSize),++g,++m);for(var k=0;k<c.length;k++)c[k]=null;rt._globalBatch=m},AbstractBatchRenderer.prototype.buildDrawCalls=function buildDrawCalls(i,o,a){var h=this._bufferedElements,c=this._attributeBuffer,l=this._indexBuffer,m=this.vertexSize,g=AbstractBatchRenderer._drawCallPool,_=this._dcIndex,x=this._aIndex,S=this._iIndex,R=g[_];R.start=this._iIndex,R.texArray=i;for(var k=o;k<a;++k){var j=h[k],X=j._texture.baseTexture,Y=_e[X.alphaMode?1:0][j.blendMode];h[k]=null,o<k&&R.blend!==Y&&(R.size=S-R.start,o=k,(R=g[++_]).texArray=i,R.start=S),this.packInterleavedGeometry(j,c,l,x,S),x+=j.vertexData.length/2*m,S+=j.indices.length,R.blend=Y}o<a&&(R.size=S-R.start,++_),this._dcIndex=_,this._aIndex=x,this._iIndex=S},AbstractBatchRenderer.prototype.bindAndClearTexArray=function bindAndClearTexArray(i){for(var o=this.renderer.texture,a=0;a<i.count;a++)o.bind(i.elements[a],i.ids[a]),i.elements[a]=null;i.count=0},AbstractBatchRenderer.prototype.updateGeometry=function updateGeometry(){var i=this._packedGeometries,o=this._attributeBuffer,a=this._indexBuffer;pe.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(o.rawBinaryData),i[this._flushId]._indexBuffer.update(a),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(o.rawBinaryData),i[this._flushId]._indexBuffer.update(a),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},AbstractBatchRenderer.prototype.drawBatches=function drawBatches(){for(var i=this._dcIndex,o=this.renderer,a=o.gl,h=o.state,c=AbstractBatchRenderer._drawCallPool,l=null,m=0;m<i;m++){var g=c[m],_=g.texArray,x=g.type,S=g.size,R=g.start,k=g.blend;l!==_&&(l=_,this.bindAndClearTexArray(_)),this.state.blendMode=k,h.set(this.state),a.drawElements(x,S,a.UNSIGNED_SHORT,2*R)}},AbstractBatchRenderer.prototype.flush=function flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},AbstractBatchRenderer.prototype.start=function start(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),pe.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},AbstractBatchRenderer.prototype.stop=function stop(){this.flush()},AbstractBatchRenderer.prototype.destroy=function destroy(){for(var o=0;o<this._packedGeometryPoolSize;o++)this._packedGeometries[o]&&this._packedGeometries[o].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),i.prototype.destroy.call(this)},AbstractBatchRenderer.prototype.getAttributeBuffer=function getAttributeBuffer(i){var o=nextPow2(Math.ceil(i/8)),a=log2(o),h=8*o;this._aBuffers.length<=a&&(this._iBuffers.length=a+1);var c=this._aBuffers[h];return c||(this._aBuffers[h]=c=new yr(h*this.vertexSize*4)),c},AbstractBatchRenderer.prototype.getIndexBuffer=function getIndexBuffer(i){var o=nextPow2(Math.ceil(i/12)),a=log2(o),h=12*o;this._iBuffers.length<=a&&(this._iBuffers.length=a+1);var c=this._iBuffers[a];return c||(this._iBuffers[a]=c=new Uint16Array(h)),c},AbstractBatchRenderer.prototype.packInterleavedGeometry=function packInterleavedGeometry(i,o,a,h,c){for(var l=o.uint32View,m=o.float32View,g=h/this.vertexSize,_=i.uvs,x=i.indices,S=i.vertexData,R=i._texture.baseTexture._batchLocation,k=Math.min(i.worldAlpha,1),j=k<1&&i._texture.baseTexture.alphaMode?function premultiplyTint(i,o){if(1===o)return(255*o<<24)+i;if(0===o)return 0;var a=i>>16&255,h=i>>8&255,c=255&i;return(255*o<<24)+((a=a*o+.5|0)<<16)+((h=h*o+.5|0)<<8)+(c*o+.5|0)}(i._tintRGB,k):i._tintRGB+(255*k<<24),X=0;X<S.length;X+=2)m[h++]=S[X],m[h++]=S[X+1],m[h++]=_[X],m[h++]=_[X+1],l[h++]=j,m[h++]=R;for(var Y=0;Y<x.length;Y++)a[c++]=g+x[Y]},AbstractBatchRenderer}(kt);vr._drawCallPool=[],vr._textureArrayPool=[];var xr=function BatchShaderGenerator(i,o){if(this.vertexSrc=i,this.fragTemplate=o,this.programCache={},this.defaultGroupCache={},o.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(o.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')};xr.prototype.generateShader=function generateShader(i){if(!this.programCache[i]){for(var o=new Int32Array(i),a=0;a<i;a++)o[a]=a;this.defaultGroupCache[i]=It.from({uSamplers:o},!0);var h=this.fragTemplate;h=(h=h.replace(/%count%/gi,""+i)).replace(/%forloop%/gi,this.generateSampleSrc(i)),this.programCache[i]=new Qt(this.vertexSrc,h)}var c={tint:new Float32Array([1,1,1,1]),translationMatrix:new ze,default:this.defaultGroupCache[i]};return new $t(this.programCache[i],c)},xr.prototype.generateSampleSrc=function generateSampleSrc(i){var o="";o+="\n",o+="\n";for(var a=0;a<i;a++)a>0&&(o+="\nelse "),a<i-1&&(o+="if(vTextureId < "+a+".5)"),o+="\n{",o+="\n\tcolor = texture2D(uSamplers["+a+"], vTextureCoord);",o+="\n}";return(o+="\n")+"\n"};var Sr=function(i){function BatchGeometry(o){void 0===o&&(o=!1),i.call(this),this._buffer=new St(null,o,!1),this._indexBuffer=new St(null,o,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,re.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,re.FLOAT).addAttribute("aColor",this._buffer,4,!0,re.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,re.FLOAT).addIndex(this._indexBuffer)}return i&&(BatchGeometry.__proto__=i),BatchGeometry.prototype=Object.create(i&&i.prototype),BatchGeometry.prototype.constructor=BatchGeometry,BatchGeometry}(Ct),br="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",wr="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",Tr=function BatchPluginFactory(){},Er={defaultVertexSrc:{configurable:!0},defaultFragmentTemplate:{configurable:!0}};Tr.create=function create(i){var o=Object.assign({vertex:br,fragment:wr,geometryClass:Sr,vertexSize:6},i),a=o.vertex,h=o.fragment,c=o.vertexSize,l=o.geometryClass;return function(i){function BatchPlugin(o){i.call(this,o),this.shaderGenerator=new xr(a,h),this.geometryClass=l,this.vertexSize=c}return i&&(BatchPlugin.__proto__=i),BatchPlugin.prototype=Object.create(i&&i.prototype),BatchPlugin.prototype.constructor=BatchPlugin,BatchPlugin}(vr)},Er.defaultVertexSrc.get=function(){return br},Er.defaultFragmentTemplate.get=function(){return wr},Object.defineProperties(Tr,Er),Tr.create();var Cr=function(i){function AlphaFilter(o){void 0===o&&(o=1),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1}),this.alpha=o}i&&(AlphaFilter.__proto__=i),AlphaFilter.prototype=Object.create(i&&i.prototype),AlphaFilter.prototype.constructor=AlphaFilter;var o={alpha:{configurable:!0}};return o.alpha.get=function(){return this.uniforms.uAlpha},o.alpha.set=function(i){this.uniforms.uAlpha=i},Object.defineProperties(AlphaFilter.prototype,o),AlphaFilter}(ir),Pr={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Or=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n"),Ar=function(i){function BlurFilterPass(o,a,h,c,l){var m=function generateBlurVertSource(i,o){var a,h=Math.ceil(i/2),c="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",l="";a=o?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var m=0;m<i;m++){var g=a.replace("%index%",m);l+=g=g.replace("%sampleIndex%",m-(h-1)+".0"),l+="\n"}return(c=c.replace("%blur%",l)).replace("%size%",i)}(l=l||5,o),g=function generateBlurFragSource(i){for(var o,a=Pr[i],h=a.length,c=Or,l="",m=0;m<i;m++){var g="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",m);o=m,m>=h&&(o=i-m-1),l+=g=g.replace("%value%",a[o]),l+="\n"}return(c=c.replace("%blur%",l)).replace("%size%",i)}(l);i.call(this,m,g),this.horizontal=o,this.resolution=c||pe.RESOLUTION,this._quality=0,this.quality=h||4,this.blur=a||8}i&&(BlurFilterPass.__proto__=i),BlurFilterPass.prototype=Object.create(i&&i.prototype),BlurFilterPass.prototype.constructor=BlurFilterPass;var o={blur:{configurable:!0},quality:{configurable:!0}};return BlurFilterPass.prototype.apply=function apply(i,o,a,h){if(a?this.horizontal?this.uniforms.strength=1/a.width*(a.width/o.width):this.uniforms.strength=1/a.height*(a.height/o.height):this.horizontal?this.uniforms.strength=1/i.renderer.width*(i.renderer.width/o.width):this.uniforms.strength=1/i.renderer.height*(i.renderer.height/o.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)i.applyFilter(this,o,a,h);else{var c=i.getFilterTexture(),l=i.renderer,m=o,g=c;this.state.blend=!1,i.applyFilter(this,m,g,!0);for(var _=1;_<this.passes-1;_++){l.renderTexture.bind(m,m.filterFrame),this.uniforms.uSampler=g;var x=g;g=m,m=x,l.shader.bind(this),l.geometry.draw(5)}this.state.blend=!0,i.applyFilter(this,g,a,h),i.returnFilterTexture(c)}},o.blur.get=function(){return this.strength},o.blur.set=function(i){this.padding=1+2*Math.abs(i),this.strength=i},o.quality.get=function(){return this._quality},o.quality.set=function(i){this._quality=i,this.passes=i},Object.defineProperties(BlurFilterPass.prototype,o),BlurFilterPass}(ir),Rr=function(i){function BloomFilter(o,a,h,c){var l,m;void 0===o&&(o=2),void 0===a&&(a=4),void 0===h&&(h=pe.RESOLUTION),void 0===c&&(c=5),i.call(this),"number"==typeof o?(l=o,m=o):o instanceof Ae?(l=o.x,m=o.y):Array.isArray(o)&&(l=o[0],m=o[1]),this.blurXFilter=new Ar(!0,l,a,h,c),this.blurYFilter=new Ar(!1,m,a,h,c),this.blurYFilter.blendMode=Z.SCREEN,this.defaultFilter=new Cr}i&&(BloomFilter.__proto__=i),BloomFilter.prototype=Object.create(i&&i.prototype),BloomFilter.prototype.constructor=BloomFilter;var o={blur:{configurable:!0},blurX:{configurable:!0},blurY:{configurable:!0}};return BloomFilter.prototype.apply=function apply(i,o,a){var h=i.getFilterTexture(!0);this.defaultFilter.apply(i,o,a),this.blurXFilter.apply(i,o,h),this.blurYFilter.apply(i,h,a),i.returnFilterTexture(h)},o.blur.get=function(){return this.blurXFilter.blur},o.blur.set=function(i){this.blurXFilter.blur=this.blurYFilter.blur=i},o.blurX.get=function(){return this.blurXFilter.blur},o.blurX.set=function(i){this.blurXFilter.blur=i},o.blurY.get=function(){return this.blurYFilter.blur},o.blurY.set=function(i){this.blurYFilter.blur=i},Object.defineProperties(BloomFilter.prototype,o),BloomFilter}(ir),Ir="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",Mr="uniform float radius;\nuniform float strength;\nuniform vec2 center;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nvoid main()\n{\n    vec2 coord = vTextureCoord * filterArea.xy;\n    coord -= center * dimensions.xy;\n    float distance = length(coord);\n    if (distance < radius) {\n        float percent = distance / radius;\n        if (strength > 0.0) {\n            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n        } else {\n            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n        }\n    }\n    coord += center * dimensions.xy;\n    coord /= filterArea.xy;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    gl_FragColor = color;\n}\n",kr=function(i){function BulgePinchFilter(o){if(i.call(this,Ir,Mr),"object"!=_typeof2(o)){var a=arguments[0],h=arguments[1],c=arguments[2];o={},void 0!==a&&(o.center=a),void 0!==h&&(o.radius=h),void 0!==c&&(o.strength=c)}this.uniforms.dimensions=new Float32Array(2),Object.assign(this,{center:[.5,.5],radius:100,strength:1},o)}i&&(BulgePinchFilter.__proto__=i),BulgePinchFilter.prototype=Object.create(i&&i.prototype),BulgePinchFilter.prototype.constructor=BulgePinchFilter;var o={radius:{configurable:!0},strength:{configurable:!0},center:{configurable:!0}};return BulgePinchFilter.prototype.apply=function apply(i,o,a,h){this.uniforms.dimensions[0]=o.filterFrame.width,this.uniforms.dimensions[1]=o.filterFrame.height,i.applyFilter(this,o,a,h)},o.radius.get=function(){return this.uniforms.radius},o.radius.set=function(i){this.uniforms.radius=i},o.strength.get=function(){return this.uniforms.strength},o.strength.set=function(i){this.uniforms.strength=i},o.center.get=function(){return this.uniforms.center},o.center.set=function(i){this.uniforms.center=i},Object.defineProperties(BulgePinchFilter.prototype,o),BulgePinchFilter}(h.m),Fr=a(2),zr=function(i){function ColorMapFilter(o,a,h){void 0===a&&(a=!1),void 0===h&&(h=1),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform sampler2D colorMap;\nuniform float _mix;\nuniform float _size;\nuniform float _sliceSize;\nuniform float _slicePixelSize;\nuniform float _sliceInnerSize;\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord.xy);\n\n    vec4 adjusted;\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n        float innerWidth = _size - 1.0;\n        float zSlice0 = min(floor(color.b * innerWidth), innerWidth);\n        float zSlice1 = min(zSlice0 + 1.0, innerWidth);\n        float xOffset = _slicePixelSize * 0.5 + color.r * _sliceInnerSize;\n        float s0 = xOffset + (zSlice0 * _sliceSize);\n        float s1 = xOffset + (zSlice1 * _sliceSize);\n        float yOffset = _sliceSize * 0.5 + color.g * (1.0 - _sliceSize);\n        vec4 slice0Color = texture2D(colorMap, vec2(s0,yOffset));\n        vec4 slice1Color = texture2D(colorMap, vec2(s1,yOffset));\n        float zOffset = fract(color.b * innerWidth);\n        adjusted = mix(slice0Color, slice1Color, zOffset);\n\n        color.rgb *= color.a;\n    }\n    gl_FragColor = vec4(mix(color, adjusted, _mix).rgb, color.a);\n\n}"),this._size=0,this._sliceSize=0,this._slicePixelSize=0,this._sliceInnerSize=0,this._scaleMode=null,this._nearest=!1,this.nearest=a,this.mix=h,this.colorMap=o}i&&(ColorMapFilter.__proto__=i),ColorMapFilter.prototype=Object.create(i&&i.prototype),ColorMapFilter.prototype.constructor=ColorMapFilter;var o={colorSize:{configurable:!0},colorMap:{configurable:!0},nearest:{configurable:!0}};return ColorMapFilter.prototype.apply=function apply(i,o,a,h){this.uniforms._mix=this.mix,i.applyFilter(this,o,a,h)},o.colorSize.get=function(){return this._size},o.colorMap.get=function(){return this._colorMap},o.colorMap.set=function(i){i instanceof h.G||(i=h.G.from(i)),i&&i.baseTexture&&(i.baseTexture.scaleMode=this._scaleMode,i.baseTexture.mipmap=!1,this._size=i.height,this._sliceSize=1/this._size,this._slicePixelSize=this._sliceSize/this._size,this._sliceInnerSize=this._slicePixelSize*(this._size-1),this.uniforms._size=this._size,this.uniforms._sliceSize=this._sliceSize,this.uniforms._slicePixelSize=this._slicePixelSize,this.uniforms._sliceInnerSize=this._sliceInnerSize,this.uniforms.colorMap=i),this._colorMap=i},o.nearest.get=function(){return this._nearest},o.nearest.set=function(i){this._nearest=i,this._scaleMode=i?Fr.n.NEAREST:Fr.n.LINEAR;var o=this._colorMap;o&&o.baseTexture&&(o.baseTexture._glTextures={},o.baseTexture.scaleMode=this._scaleMode,o.baseTexture.mipmap=!1,o._updateID++,o.baseTexture.emit("update",o.baseTexture))},ColorMapFilter.prototype.updateColorMap=function updateColorMap(){var i=this._colorMap;i&&i.baseTexture&&(i._updateID++,i.baseTexture.emit("update",i.baseTexture),this.colorMap=i)},ColorMapFilter.prototype.destroy=function destroy(o){this._colorMap&&this._colorMap.destroy(o),i.prototype.destroy.call(this)},Object.defineProperties(ColorMapFilter.prototype,o),ColorMapFilter}(h.m),Dr=function(i){function ColorOverlayFilter(o){void 0===o&&(o=0),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 color;\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec3 colorOverlay = color * currentColor.a;\n    gl_FragColor = vec4(colorOverlay.r, colorOverlay.g, colorOverlay.b, currentColor.a);\n}\n"),this.uniforms.color=new Float32Array(3),this.color=o}i&&(ColorOverlayFilter.__proto__=i),ColorOverlayFilter.prototype=Object.create(i&&i.prototype),ColorOverlayFilter.prototype.constructor=ColorOverlayFilter;var o={color:{configurable:!0}};return o.color.set=function(i){var o=this.uniforms.color;"number"==typeof i?(Object(k.hex2rgb)(i,o),this._color=i):(o[0]=i[0],o[1]=i[1],o[2]=i[2],this._color=Object(k.rgb2hex)(o))},o.color.get=function(){return this._color},Object.defineProperties(ColorOverlayFilter.prototype,o),ColorOverlayFilter}(h.m),Lr=function(i){function ColorReplaceFilter(o,a,h){void 0===o&&(o=16711680),void 0===a&&(a=0),void 0===h&&(h=.4),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 originalColor;\nuniform vec3 newColor;\nuniform float epsilon;\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec3 colorDiff = originalColor - (currentColor.rgb / max(currentColor.a, 0.0000000001));\n    float colorDistance = length(colorDiff);\n    float doReplace = step(colorDistance, epsilon);\n    gl_FragColor = vec4(mix(currentColor.rgb, (newColor + colorDiff) * currentColor.a, doReplace), currentColor.a);\n}\n"),this.uniforms.originalColor=new Float32Array(3),this.uniforms.newColor=new Float32Array(3),this.originalColor=o,this.newColor=a,this.epsilon=h}i&&(ColorReplaceFilter.__proto__=i),ColorReplaceFilter.prototype=Object.create(i&&i.prototype),ColorReplaceFilter.prototype.constructor=ColorReplaceFilter;var o={originalColor:{configurable:!0},newColor:{configurable:!0},epsilon:{configurable:!0}};return o.originalColor.set=function(i){var o=this.uniforms.originalColor;"number"==typeof i?(Object(k.hex2rgb)(i,o),this._originalColor=i):(o[0]=i[0],o[1]=i[1],o[2]=i[2],this._originalColor=Object(k.rgb2hex)(o))},o.originalColor.get=function(){return this._originalColor},o.newColor.set=function(i){var o=this.uniforms.newColor;"number"==typeof i?(Object(k.hex2rgb)(i,o),this._newColor=i):(o[0]=i[0],o[1]=i[1],o[2]=i[2],this._newColor=Object(k.rgb2hex)(o))},o.newColor.get=function(){return this._newColor},o.epsilon.set=function(i){this.uniforms.epsilon=i},o.epsilon.get=function(){return this.uniforms.epsilon},Object.defineProperties(ColorReplaceFilter.prototype,o),ColorReplaceFilter}(h.m),Br=function(i){function ConvolutionFilter(o,a,h){void 0===a&&(a=200),void 0===h&&(h=200),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n"),this.uniforms.texelSize=new Float32Array(2),this.uniforms.matrix=new Float32Array(9),void 0!==o&&(this.matrix=o),this.width=a,this.height=h}i&&(ConvolutionFilter.__proto__=i),ConvolutionFilter.prototype=Object.create(i&&i.prototype),ConvolutionFilter.prototype.constructor=ConvolutionFilter;var o={matrix:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return o.matrix.get=function(){return this.uniforms.matrix},o.matrix.set=function(i){var o=this;i.forEach((function(i,a){return o.uniforms.matrix[a]=i}))},o.width.get=function(){return 1/this.uniforms.texelSize[0]},o.width.set=function(i){this.uniforms.texelSize[0]=1/i},o.height.get=function(){return 1/this.uniforms.texelSize[1]},o.height.set=function(i){this.uniforms.texelSize[1]=1/i},Object.defineProperties(ConvolutionFilter.prototype,o),ConvolutionFilter}(h.m),Nr=function(i){function CrossHatchFilter(){i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}return i&&(CrossHatchFilter.__proto__=i),CrossHatchFilter.prototype=Object.create(i&&i.prototype),CrossHatchFilter.prototype.constructor=CrossHatchFilter,CrossHatchFilter}(h.m),Gr=function(i){function CRTFilter(o){i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nconst float SQRT_2 = 1.414213;\n\nconst float light = 1.0;\n\nuniform float curvature;\nuniform float lineWidth;\nuniform float lineContrast;\nuniform bool verticalLine;\nuniform float noise;\nuniform float noiseSize;\n\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\n\nuniform float seed;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 coord = pixelCoord / dimensions;\n\n    vec2 dir = vec2(coord - vec2(0.5, 0.5));\n\n    float _c = curvature > 0. ? curvature : 1.;\n    float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;\n    vec2 uv = dir * k;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 rgb = gl_FragColor.rgb;\n\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        rgb += _noise * noise;\n    }\n\n    if (lineWidth > 0.0) {\n        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;\n        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;\n        rgb *= j;\n        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);\n        rgb *= 0.99 + ceil(segment) * 0.015;\n    }\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    gl_FragColor.rgb = rgb;\n}\n"),this.uniforms.dimensions=new Float32Array(2),this.time=0,this.seed=0,Object.assign(this,{curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0},o)}i&&(CRTFilter.__proto__=i),CRTFilter.prototype=Object.create(i&&i.prototype),CRTFilter.prototype.constructor=CRTFilter;var o={curvature:{configurable:!0},lineWidth:{configurable:!0},lineContrast:{configurable:!0},verticalLine:{configurable:!0},noise:{configurable:!0},noiseSize:{configurable:!0},vignetting:{configurable:!0},vignettingAlpha:{configurable:!0},vignettingBlur:{configurable:!0}};return CRTFilter.prototype.apply=function apply(i,o,a,h){this.uniforms.dimensions[0]=o.filterFrame.width,this.uniforms.dimensions[1]=o.filterFrame.height,this.uniforms.seed=this.seed,this.uniforms.time=this.time,i.applyFilter(this,o,a,h)},o.curvature.set=function(i){this.uniforms.curvature=i},o.curvature.get=function(){return this.uniforms.curvature},o.lineWidth.set=function(i){this.uniforms.lineWidth=i},o.lineWidth.get=function(){return this.uniforms.lineWidth},o.lineContrast.set=function(i){this.uniforms.lineContrast=i},o.lineContrast.get=function(){return this.uniforms.lineContrast},o.verticalLine.set=function(i){this.uniforms.verticalLine=i},o.verticalLine.get=function(){return this.uniforms.verticalLine},o.noise.set=function(i){this.uniforms.noise=i},o.noise.get=function(){return this.uniforms.noise},o.noiseSize.set=function(i){this.uniforms.noiseSize=i},o.noiseSize.get=function(){return this.uniforms.noiseSize},o.vignetting.set=function(i){this.uniforms.vignetting=i},o.vignetting.get=function(){return this.uniforms.vignetting},o.vignettingAlpha.set=function(i){this.uniforms.vignettingAlpha=i},o.vignettingAlpha.get=function(){return this.uniforms.vignettingAlpha},o.vignettingBlur.set=function(i){this.uniforms.vignettingBlur=i},o.vignettingBlur.get=function(){return this.uniforms.vignettingBlur},Object.defineProperties(CRTFilter.prototype,o),CRTFilter}(h.m),Ur=function(i){function DotFilter(o,a){void 0===o&&(o=1),void 0===a&&(a=5),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 filterArea;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * filterArea.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n"),this.scale=o,this.angle=a}i&&(DotFilter.__proto__=i),DotFilter.prototype=Object.create(i&&i.prototype),DotFilter.prototype.constructor=DotFilter;var o={scale:{configurable:!0},angle:{configurable:!0}};return o.scale.get=function(){return this.uniforms.scale},o.scale.set=function(i){this.uniforms.scale=i},o.angle.get=function(){return this.uniforms.angle},o.angle.set=function(i){this.uniforms.angle=i},Object.defineProperties(DotFilter.prototype,o),DotFilter}(h.m),jr="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",Wr="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform vec3 color;\n\nuniform vec2 shift;\nuniform vec4 inputSize;\n\nvoid main(void){\n    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);\n\n    // Premultiply alpha\n    sample.rgb = color.rgb * sample.a;\n\n    // alpha user alpha\n    sample *= alpha;\n\n    gl_FragColor = sample;\n}",Xr=function(i){function DropShadowFilter(o){o&&o.constructor!==Object&&(console.warn("DropShadowFilter now uses options instead of (rotation, distance, blur, color, alpha)"),o={rotation:o},void 0!==arguments[1]&&(o.distance=arguments[1]),void 0!==arguments[2]&&(o.blur=arguments[2]),void 0!==arguments[3]&&(o.color=arguments[3]),void 0!==arguments[4]&&(o.alpha=arguments[4])),o=Object.assign({rotation:45,distance:5,color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:g.b.RESOLUTION},o),i.call(this);var a=o.kernels,h=o.blur,c=o.quality,_=o.pixelSize,x=o.resolution;this._tintFilter=new i(jr,Wr),this._tintFilter.uniforms.color=new Float32Array(4),this._tintFilter.uniforms.shift=new l.g,this._tintFilter.resolution=x,this._blurFilter=a?new m(a):new m(h,c),this.pixelSize=_,this.resolution=x;var S=o.shadowOnly,R=o.rotation,k=o.distance,j=o.alpha,X=o.color;this.shadowOnly=S,this.rotation=R,this.distance=k,this.alpha=j,this.color=X,this._updatePadding()}i&&(DropShadowFilter.__proto__=i),DropShadowFilter.prototype=Object.create(i&&i.prototype),DropShadowFilter.prototype.constructor=DropShadowFilter;var o={resolution:{configurable:!0},distance:{configurable:!0},rotation:{configurable:!0},alpha:{configurable:!0},color:{configurable:!0},kernels:{configurable:!0},blur:{configurable:!0},quality:{configurable:!0},pixelSize:{configurable:!0}};return DropShadowFilter.prototype.apply=function apply(i,o,a,h){var c=i.getFilterTexture();this._tintFilter.apply(i,o,c,1),this._blurFilter.apply(i,c,a,h),!0!==this.shadowOnly&&i.applyFilter(this,o,a,0),i.returnFilterTexture(c)},DropShadowFilter.prototype._updatePadding=function _updatePadding(){this.padding=this.distance+2*this.blur},DropShadowFilter.prototype._updateShift=function _updateShift(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))},o.resolution.get=function(){return this._resolution},o.resolution.set=function(i){this._resolution=i,this._tintFilter&&(this._tintFilter.resolution=i),this._blurFilter&&(this._blurFilter.resolution=i)},o.distance.get=function(){return this._distance},o.distance.set=function(i){this._distance=i,this._updatePadding(),this._updateShift()},o.rotation.get=function(){return this.angle/l.b},o.rotation.set=function(i){this.angle=i*l.b,this._updateShift()},o.alpha.get=function(){return this._tintFilter.uniforms.alpha},o.alpha.set=function(i){this._tintFilter.uniforms.alpha=i},o.color.get=function(){return Object(k.rgb2hex)(this._tintFilter.uniforms.color)},o.color.set=function(i){Object(k.hex2rgb)(i,this._tintFilter.uniforms.color)},o.kernels.get=function(){return this._blurFilter.kernels},o.kernels.set=function(i){this._blurFilter.kernels=i},o.blur.get=function(){return this._blurFilter.blur},o.blur.set=function(i){this._blurFilter.blur=i,this._updatePadding()},o.quality.get=function(){return this._blurFilter.quality},o.quality.set=function(i){this._blurFilter.quality=i},o.pixelSize.get=function(){return this._blurFilter.pixelSize},o.pixelSize.set=function(i){this._blurFilter.pixelSize=i},Object.defineProperties(DropShadowFilter.prototype,o),DropShadowFilter}(h.m),Hr=function(i){function EmbossFilter(o){void 0===o&&(o=5),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float strength;\nuniform vec4 filterArea;\n\n\nvoid main(void)\n{\n\tvec2 onePixel = vec2(1.0 / filterArea);\n\n\tvec4 color;\n\n\tcolor.rgb = vec3(0.5);\n\n\tcolor -= texture2D(uSampler, vTextureCoord - onePixel) * strength;\n\tcolor += texture2D(uSampler, vTextureCoord + onePixel) * strength;\n\n\tcolor.rgb = vec3((color.r + color.g + color.b) / 3.0);\n\n\tfloat alpha = texture2D(uSampler, vTextureCoord).a;\n\n\tgl_FragColor = vec4(color.rgb * alpha, alpha);\n}\n"),this.strength=o}i&&(EmbossFilter.__proto__=i),EmbossFilter.prototype=Object.create(i&&i.prototype),EmbossFilter.prototype.constructor=EmbossFilter;var o={strength:{configurable:!0}};return o.strength.get=function(){return this.uniforms.strength},o.strength.set=function(i){this.uniforms.strength=i},Object.defineProperties(EmbossFilter.prototype,o),EmbossFilter}(h.m),Vr=function(i){function GlitchFilter(o){void 0===o&&(o={}),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","// precision highp float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\nuniform float aspect;\n\nuniform sampler2D displacementMap;\nuniform float offset;\nuniform float sinDir;\nuniform float cosDir;\nuniform int fillMode;\n\nuniform float seed;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nconst int TRANSPARENT = 0;\nconst int ORIGINAL = 1;\nconst int LOOP = 2;\nconst int CLAMP = 3;\nconst int MIRROR = 4;\n\nvoid main(void)\n{\n    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;\n\n    if (coord.x > 1.0 || coord.y > 1.0) {\n        return;\n    }\n\n    float cx = coord.x - 0.5;\n    float cy = (coord.y - 0.5) * aspect;\n    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;\n\n    // displacementMap: repeat\n    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);\n\n    // displacementMap: mirror\n    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);\n\n    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));\n\n    float displacement = (dc.r - dc.g) * (offset / filterArea.x);\n\n    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);\n\n    if (fillMode == CLAMP) {\n        coord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    } else {\n        if( coord.x > filterClamp.z ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x -= filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x = filterClamp.z * 2.0 - coord.x;\n            }\n        } else if( coord.x < filterClamp.x ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x += filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x *= -filterClamp.z;\n            }\n        }\n\n        if( coord.y > filterClamp.w ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y -= filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y = filterClamp.w * 2.0 - coord.y;\n            }\n        } else if( coord.y < filterClamp.y ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y += filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y *= -filterClamp.w;\n            }\n        }\n    }\n\n    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;\n    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;\n    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;\n    gl_FragColor.a = texture2D(uSampler, coord).a;\n}\n"),this.uniforms.dimensions=new Float32Array(2),o=Object.assign({slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},o),this.direction=o.direction,this.red=o.red,this.green=o.green,this.blue=o.blue,this.offset=o.offset,this.fillMode=o.fillMode,this.average=o.average,this.seed=o.seed,this.minSize=o.minSize,this.sampleSize=o.sampleSize,this._canvas=document.createElement("canvas"),this._canvas.width=4,this._canvas.height=this.sampleSize,this.texture=h.G.from(this._canvas,{scaleMode:Fr.n.NEAREST}),this._slices=0,this.slices=o.slices}i&&(GlitchFilter.__proto__=i),GlitchFilter.prototype=Object.create(i&&i.prototype),GlitchFilter.prototype.constructor=GlitchFilter;var o={sizes:{configurable:!0},offsets:{configurable:!0},slices:{configurable:!0},direction:{configurable:!0},red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return GlitchFilter.prototype.apply=function apply(i,o,a,h){var c=o.filterFrame.width,l=o.filterFrame.height;this.uniforms.dimensions[0]=c,this.uniforms.dimensions[1]=l,this.uniforms.aspect=l/c,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,i.applyFilter(this,o,a,h)},GlitchFilter.prototype._randomizeSizes=function _randomizeSizes(){var i=this._sizes,o=this._slices-1,a=this.sampleSize,h=Math.min(this.minSize/a,.9/this._slices);if(this.average){for(var c=this._slices,l=1,m=0;m<o;m++){var g=l/(c-m),_=Math.max(g*(1-.6*Math.random()),h);i[m]=_,l-=_}i[o]=l}else{for(var x=1,S=Math.sqrt(1/this._slices),R=0;R<o;R++){var k=Math.max(S*x*Math.random(),h);i[R]=k,x-=k}i[o]=x}this.shuffle()},GlitchFilter.prototype.shuffle=function shuffle(){for(var i=this._sizes,o=this._slices-1;o>0;o--){var a=Math.random()*o>>0,h=i[o];i[o]=i[a],i[a]=h}},GlitchFilter.prototype._randomizeOffsets=function _randomizeOffsets(){for(var i=0;i<this._slices;i++)this._offsets[i]=Math.random()*(Math.random()<.5?-1:1)},GlitchFilter.prototype.refresh=function refresh(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()},GlitchFilter.prototype.redraw=function redraw(){var i,o=this.sampleSize,a=this.texture,h=this._canvas.getContext("2d");h.clearRect(0,0,8,o);for(var c=0,l=0;l<this._slices;l++){i=Math.floor(256*this._offsets[l]);var m=this._sizes[l]*o,g=i>0?i:0,_=i<0?-i:0;h.fillStyle="rgba("+g+", "+_+", 0, 1)",h.fillRect(0,c>>0,o,m+1>>0),c+=m}a.baseTexture.update(),this.uniforms.displacementMap=a},o.sizes.set=function(i){for(var o=Math.min(this._slices,i.length),a=0;a<o;a++)this._sizes[a]=i[a]},o.sizes.get=function(){return this._sizes},o.offsets.set=function(i){for(var o=Math.min(this._slices,i.length),a=0;a<o;a++)this._offsets[a]=i[a]},o.offsets.get=function(){return this._offsets},o.slices.get=function(){return this._slices},o.slices.set=function(i){this._slices!==i&&(this._slices=i,this.uniforms.slices=i,this._sizes=this.uniforms.slicesWidth=new Float32Array(i),this._offsets=this.uniforms.slicesOffset=new Float32Array(i),this.refresh())},o.direction.get=function(){return this._direction},o.direction.set=function(i){if(this._direction!==i){this._direction=i;var o=i*l.b;this.uniforms.sinDir=Math.sin(o),this.uniforms.cosDir=Math.cos(o)}},o.red.get=function(){return this.uniforms.red},o.red.set=function(i){this.uniforms.red=i},o.green.get=function(){return this.uniforms.green},o.green.set=function(i){this.uniforms.green=i},o.blue.get=function(){return this.uniforms.blue},o.blue.set=function(i){this.uniforms.blue=i},GlitchFilter.prototype.destroy=function destroy(){this.texture.destroy(!0),this.texture=null,this._canvas=null,this.red=null,this.green=null,this.blue=null,this._sizes=null,this._offsets=null},Object.defineProperties(GlitchFilter.prototype,o),GlitchFilter}(h.m);Vr.TRANSPARENT=0,Vr.ORIGINAL=1,Vr.LOOP=2,Vr.CLAMP=3,Vr.MIRROR=4;var Yr=function(){function Runner(i){this.items=[],this._name=i,this._aliasCount=0}return Runner.prototype.emit=function(i,o,a,h,c,l,m,g){if(arguments.length>8)throw new Error("max arguments reached");var _=this,x=_.name,S=_.items;this._aliasCount++;for(var R=0,k=S.length;R<k;R++)S[R][x](i,o,a,h,c,l,m,g);return S===this.items&&this._aliasCount--,this},Runner.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},Runner.prototype.add=function(i){return i[this._name]&&(this.ensureNonAliasedItems(),this.remove(i),this.items.push(i)),this},Runner.prototype.remove=function(i){var o=this.items.indexOf(i);return-1!==o&&(this.ensureNonAliasedItems(),this.items.splice(o,1)),this},Runner.prototype.contains=function(i){return-1!==this.items.indexOf(i)},Runner.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},Runner.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(Runner.prototype,"empty",{get:function get(){return 0===this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(Runner.prototype,"name",{get:function get(){return this._name},enumerable:!0,configurable:!0}),Runner}();Object.defineProperties(Yr.prototype,{dispatch:{value:Yr.prototype.emit},run:{value:Yr.prototype.emit}});var qr,Kr,Zr,Qr,Jr,$r,ei,ti,ri,ii,ni,oi,ai,si,ui=Object(ce.a)(window.navigator),hi={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function settings_es_maxRecommendedTextures(i){var o=!0;if(ui.tablet||ui.phone){if(o=!1,ui.apple.device){var a=navigator.userAgent.match(/OS (\d+)_(\d+)?/);a&&parseInt(a[1],10)>=11&&(o=!0)}if(ui.android.device){var h=navigator.userAgent.match(/Android\s([0-9.]*)/);h&&parseInt(h[1],10)>=7&&(o=!0)}}return o?i:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:ui.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:function settings_es_canUploadSameBuffer(){return!ui.apple.device}(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};!function(i){i[i.WEBGL_LEGACY=0]="WEBGL_LEGACY",i[i.WEBGL=1]="WEBGL",i[i.WEBGL2=2]="WEBGL2"}(qr||(qr={})),function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.WEBGL=1]="WEBGL",i[i.CANVAS=2]="CANVAS"}(Kr||(Kr={})),function(i){i[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR"}(Zr||(Zr={})),function(i){i[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Qr||(Qr={})),function(i){i[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Jr||(Jr={})),function(i){i[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}($r||($r={})),function(i){i[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.FLOAT=5126]="FLOAT",i[i.HALF_FLOAT=36193]="HALF_FLOAT"}(ei||(ei={})),function(i){i[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR"}(ti||(ti={})),function(i){i[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(ri||(ri={})),function(i){i[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON"}(ii||(ii={})),function(i){i[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(ni||(ni={})),function(i){i[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL"}(oi||(oi={})),function(i){i.LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp"}(ai||(ai={})),function(i){i[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE"}(si||(si={})),hi.RETINA_PREFIX=/@([0-9\.]+)x/,hi.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var ci=function utils_es_mapPremultipliedBlendModes(){for(var i=[],o=[],a=0;a<32;a++)i[a]=a,o[a]=a;i[Zr.NORMAL_NPM]=Zr.NORMAL,i[Zr.ADD_NPM]=Zr.ADD,i[Zr.SCREEN_NPM]=Zr.SCREEN,o[Zr.NORMAL]=Zr.NORMAL_NPM,o[Zr.ADD]=Zr.ADD_NPM,o[Zr.SCREEN]=Zr.SCREEN_NPM;var h=[];return h.push(o),h.push(i),h}();function utils_es_nextPow2(i){return i+=0===i?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,1+(i|=i>>>16)}function utils_es_isPow2(i){return!(i&i-1||!i)}function utils_es_log2(i){var o=(i>65535?1:0)<<4,a=((i>>>=o)>255?1:0)<<3;return o|=a,o|=a=((i>>>=a)>15?1:0)<<2,(o|=a=((i>>>=a)>3?1:0)<<1)|(i>>>=a)>>1}function utils_es_removeItems(i,o,a){var h,c=i.length;if(!(o>=c||0===a)){var l=c-(a=o+a>c?c-o:a);for(h=o;h<l;++h)i[h]=i[h+a];i.length=l}}Float32Array,Uint32Array,Int32Array,Uint8Array;var li=0;function utils_es_uid(){return++li}var di,pi,fi={},mi=Object.create(null),gi=Object.create(null);function utils_es_getResolutionOfUrl(i,o){var a=hi.RETINA_PREFIX.exec(i);return a?parseFloat(a[1]):void 0!==o?o:1}!function(){function CanvasRenderTarget(i,o,a){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=a||hi.RESOLUTION,this.resize(i,o)}CanvasRenderTarget.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},CanvasRenderTarget.prototype.resize=function(i,o){this.canvas.width=i*this.resolution,this.canvas.height=o*this.resolution},CanvasRenderTarget.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(CanvasRenderTarget.prototype,"width",{get:function get(){return this.canvas.width},set:function set(i){this.canvas.width=i},enumerable:!0,configurable:!0}),Object.defineProperty(CanvasRenderTarget.prototype,"height",{get:function get(){return this.canvas.height},set:function set(i){this.canvas.height=i},enumerable:!0,configurable:!0})}(),hi.TARGET_FPMS=.06,function(i){i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY"}(pi||(pi={}));var yi,_i=function(){function TickerListener(i,o,a,h){void 0===o&&(o=null),void 0===a&&(a=0),void 0===h&&(h=!1),this.fn=i,this.context=o,this.priority=a,this.once=h,this.next=null,this.previous=null,this._destroyed=!1}return TickerListener.prototype.match=function(i,o){return void 0===o&&(o=null),this.fn===i&&this.context===o},TickerListener.prototype.emit=function(i){this.fn&&(this.context?this.fn.call(this.context,i):this.fn(i));var o=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),o},TickerListener.prototype.connect=function(i){this.previous=i,i.next&&(i.next.previous=this),this.next=i.next,i.next=this},TickerListener.prototype.destroy=function(i){void 0===i&&(i=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var o=this.next;return this.next=i?null:o,this.previous=null,o},TickerListener}(),vi=function(){function Ticker(){var i=this;this._head=new _i(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/hi.TARGET_FPMS,this.elapsedMS=1/hi.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(o){i._requestId=null,i.started&&(i.update(o),i.started&&null===i._requestId&&i._head.next&&(i._requestId=requestAnimationFrame(i._tick)))}}return Ticker.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},Ticker.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},Ticker.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},Ticker.prototype.add=function(i,o,a){return void 0===a&&(a=pi.NORMAL),this._addListener(new _i(i,o,a))},Ticker.prototype.addOnce=function(i,o,a){return void 0===a&&(a=pi.NORMAL),this._addListener(new _i(i,o,a,!0))},Ticker.prototype._addListener=function(i){var o=this._head.next,a=this._head;if(o){for(;o;){if(i.priority>o.priority){i.connect(a);break}a=o,o=o.next}i.previous||i.connect(a)}else i.connect(a);return this._startIfPossible(),this},Ticker.prototype.remove=function(i,o){for(var a=this._head.next;a;)a=a.match(i,o)?a.destroy():a.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(Ticker.prototype,"count",{get:function get(){if(!this._head)return 0;for(var i=0,o=this._head;o=o.next;)i++;return i},enumerable:!0,configurable:!0}),Ticker.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},Ticker.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},Ticker.prototype.destroy=function(){if(!this._protected){this.stop();for(var i=this._head.next;i;)i=i.destroy(!0);this._head.destroy(),this._head=null}},Ticker.prototype.update=function(i){var o;if(void 0===i&&(i=performance.now()),i>this.lastTime){if((o=this.elapsedMS=i-this.lastTime)>this._maxElapsedMS&&(o=this._maxElapsedMS),o*=this.speed,this._minElapsedMS){var a=i-this._lastFrame|0;if(a<this._minElapsedMS)return;this._lastFrame=i-a%this._minElapsedMS}this.deltaMS=o,this.deltaTime=this.deltaMS*hi.TARGET_FPMS;for(var h=this._head,c=h.next;c;)c=c.emit(this.deltaTime);h.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=i},Object.defineProperty(Ticker.prototype,"FPS",{get:function get(){return 1e3/this.elapsedMS},enumerable:!0,configurable:!0}),Object.defineProperty(Ticker.prototype,"minFPS",{get:function get(){return 1e3/this._maxElapsedMS},set:function set(i){var o=Math.min(this.maxFPS,i),a=Math.min(Math.max(0,o)/1e3,hi.TARGET_FPMS);this._maxElapsedMS=1/a},enumerable:!0,configurable:!0}),Object.defineProperty(Ticker.prototype,"maxFPS",{get:function get(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function set(i){if(0===i)this._minElapsedMS=0;else{var o=Math.max(this.minFPS,i);this._minElapsedMS=1/(o/1e3)}},enumerable:!0,configurable:!0}),Object.defineProperty(Ticker,"shared",{get:function get(){if(!Ticker._shared){var i=Ticker._shared=new Ticker;i.autoStart=!0,i._protected=!0}return Ticker._shared},enumerable:!0,configurable:!0}),Object.defineProperty(Ticker,"system",{get:function get(){if(!Ticker._system){var i=Ticker._system=new Ticker;i.autoStart=!0,i._protected=!0}return Ticker._system},enumerable:!0,configurable:!0}),Ticker}(),xi=(function(){function TickerPlugin(){}TickerPlugin.init=function(i){var o=this;i=Object.assign({autoStart:!0,sharedTicker:!1},i),Object.defineProperty(this,"ticker",{set:function set(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,pi.LOW)},get:function get(){return this._ticker}}),this.stop=function(){o._ticker.stop()},this.start=function(){o._ticker.start()},this._ticker=null,this.ticker=i.sharedTicker?vi.shared:new vi,i.autoStart&&this.start()},TickerPlugin.destroy=function(){if(this._ticker){var i=this._ticker;this.ticker=null,i.destroy()}}}(),function(){function Point(i,o){void 0===i&&(i=0),void 0===o&&(o=0),this.x=i,this.y=o}return Point.prototype.clone=function(){return new Point(this.x,this.y)},Point.prototype.copyFrom=function(i){return this.set(i.x,i.y),this},Point.prototype.copyTo=function(i){return i.set(this.x,this.y),i},Point.prototype.equals=function(i){return i.x===this.x&&i.y===this.y},Point.prototype.set=function(i,o){return void 0===i&&(i=0),void 0===o&&(o=i),this.x=i,this.y=o,this},Point}()),Si=function(){function ObservablePoint(i,o,a,h){void 0===a&&(a=0),void 0===h&&(h=0),this._x=a,this._y=h,this.cb=i,this.scope=o}return ObservablePoint.prototype.clone=function(i,o){return void 0===i&&(i=this.cb),void 0===o&&(o=this.scope),new ObservablePoint(i,o,this._x,this._y)},ObservablePoint.prototype.set=function(i,o){return void 0===i&&(i=0),void 0===o&&(o=i),this._x===i&&this._y===o||(this._x=i,this._y=o,this.cb.call(this.scope)),this},ObservablePoint.prototype.copyFrom=function(i){return this._x===i.x&&this._y===i.y||(this._x=i.x,this._y=i.y,this.cb.call(this.scope)),this},ObservablePoint.prototype.copyTo=function(i){return i.set(this._x,this._y),i},ObservablePoint.prototype.equals=function(i){return i.x===this._x&&i.y===this._y},Object.defineProperty(ObservablePoint.prototype,"x",{get:function get(){return this._x},set:function set(i){this._x!==i&&(this._x=i,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),Object.defineProperty(ObservablePoint.prototype,"y",{get:function get(){return this._y},set:function set(i){this._y!==i&&(this._y=i,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),ObservablePoint}(),bi=2*Math.PI,wi=180/Math.PI,Ti=Math.PI/180;!function(i){i[i.POLY=0]="POLY",i[i.RECT=1]="RECT",i[i.CIRC=2]="CIRC",i[i.ELIP=3]="ELIP",i[i.RREC=4]="RREC"}(yi||(yi={}));var Ei=function(){function Matrix(i,o,a,h,c,l){void 0===i&&(i=1),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=1),void 0===c&&(c=0),void 0===l&&(l=0),this.array=null,this.a=i,this.b=o,this.c=a,this.d=h,this.tx=c,this.ty=l}return Matrix.prototype.fromArray=function(i){this.a=i[0],this.b=i[1],this.c=i[3],this.d=i[4],this.tx=i[2],this.ty=i[5]},Matrix.prototype.set=function(i,o,a,h,c,l){return this.a=i,this.b=o,this.c=a,this.d=h,this.tx=c,this.ty=l,this},Matrix.prototype.toArray=function(i,o){this.array||(this.array=new Float32Array(9));var a=o||this.array;return i?(a[0]=this.a,a[1]=this.b,a[2]=0,a[3]=this.c,a[4]=this.d,a[5]=0,a[6]=this.tx,a[7]=this.ty,a[8]=1):(a[0]=this.a,a[1]=this.c,a[2]=this.tx,a[3]=this.b,a[4]=this.d,a[5]=this.ty,a[6]=0,a[7]=0,a[8]=1),a},Matrix.prototype.apply=function(i,o){o=o||new xi;var a=i.x,h=i.y;return o.x=this.a*a+this.c*h+this.tx,o.y=this.b*a+this.d*h+this.ty,o},Matrix.prototype.applyInverse=function(i,o){o=o||new xi;var a=1/(this.a*this.d+this.c*-this.b),h=i.x,c=i.y;return o.x=this.d*a*h+-this.c*a*c+(this.ty*this.c-this.tx*this.d)*a,o.y=this.a*a*c+-this.b*a*h+(-this.ty*this.a+this.tx*this.b)*a,o},Matrix.prototype.translate=function(i,o){return this.tx+=i,this.ty+=o,this},Matrix.prototype.scale=function(i,o){return this.a*=i,this.d*=o,this.c*=i,this.b*=o,this.tx*=i,this.ty*=o,this},Matrix.prototype.rotate=function(i){var o=Math.cos(i),a=Math.sin(i),h=this.a,c=this.c,l=this.tx;return this.a=h*o-this.b*a,this.b=h*a+this.b*o,this.c=c*o-this.d*a,this.d=c*a+this.d*o,this.tx=l*o-this.ty*a,this.ty=l*a+this.ty*o,this},Matrix.prototype.append=function(i){var o=this.a,a=this.b,h=this.c,c=this.d;return this.a=i.a*o+i.b*h,this.b=i.a*a+i.b*c,this.c=i.c*o+i.d*h,this.d=i.c*a+i.d*c,this.tx=i.tx*o+i.ty*h+this.tx,this.ty=i.tx*a+i.ty*c+this.ty,this},Matrix.prototype.setTransform=function(i,o,a,h,c,l,m,g,_){return this.a=Math.cos(m+_)*c,this.b=Math.sin(m+_)*c,this.c=-Math.sin(m-g)*l,this.d=Math.cos(m-g)*l,this.tx=i-(a*this.a+h*this.c),this.ty=o-(a*this.b+h*this.d),this},Matrix.prototype.prepend=function(i){var o=this.tx;if(1!==i.a||0!==i.b||0!==i.c||1!==i.d){var a=this.a,h=this.c;this.a=a*i.a+this.b*i.c,this.b=a*i.b+this.b*i.d,this.c=h*i.a+this.d*i.c,this.d=h*i.b+this.d*i.d}return this.tx=o*i.a+this.ty*i.c+i.tx,this.ty=o*i.b+this.ty*i.d+i.ty,this},Matrix.prototype.decompose=function(i){var o=this.a,a=this.b,h=this.c,c=this.d,l=-Math.atan2(-h,c),m=Math.atan2(a,o),g=Math.abs(l+m);return g<1e-5||Math.abs(bi-g)<1e-5?(i.rotation=m,i.skew.x=i.skew.y=0):(i.rotation=0,i.skew.x=l,i.skew.y=m),i.scale.x=Math.sqrt(o*o+a*a),i.scale.y=Math.sqrt(h*h+c*c),i.position.x=this.tx,i.position.y=this.ty,i},Matrix.prototype.invert=function(){var i=this.a,o=this.b,a=this.c,h=this.d,c=this.tx,l=i*h-o*a;return this.a=h/l,this.b=-o/l,this.c=-a/l,this.d=i/l,this.tx=(a*this.ty-h*c)/l,this.ty=-(i*this.ty-o*c)/l,this},Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Matrix.prototype.clone=function(){var i=new Matrix;return i.a=this.a,i.b=this.b,i.c=this.c,i.d=this.d,i.tx=this.tx,i.ty=this.ty,i},Matrix.prototype.copyTo=function(i){return i.a=this.a,i.b=this.b,i.c=this.c,i.d=this.d,i.tx=this.tx,i.ty=this.ty,i},Matrix.prototype.copyFrom=function(i){return this.a=i.a,this.b=i.b,this.c=i.c,this.d=i.d,this.tx=i.tx,this.ty=i.ty,this},Object.defineProperty(Matrix,"IDENTITY",{get:function get(){return new Matrix},enumerable:!0,configurable:!0}),Object.defineProperty(Matrix,"TEMP_MATRIX",{get:function get(){return new Matrix},enumerable:!0,configurable:!0}),Matrix}(),Ci=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Pi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Oi=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ai=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Ri=[],Ii=[],Mi=Math.sign;!function math_es_init(){for(var i=0;i<16;i++){var o=[];Ri.push(o);for(var a=0;a<16;a++)for(var h=Mi(Ci[i]*Ci[a]+Oi[i]*Pi[a]),c=Mi(Pi[i]*Ci[a]+Ai[i]*Pi[a]),l=Mi(Ci[i]*Oi[a]+Oi[i]*Ai[a]),m=Mi(Pi[i]*Oi[a]+Ai[i]*Ai[a]),g=0;g<16;g++)if(Ci[g]===h&&Pi[g]===c&&Oi[g]===l&&Ai[g]===m){o.push(g);break}}for(i=0;i<16;i++){var _=new Ei;_.set(Ci[i],Pi[i],Oi[i],Ai[i],0,0),Ii.push(_)}}();var ki={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function uX(i){return Ci[i]},uY:function uY(i){return Pi[i]},vX:function vX(i){return Oi[i]},vY:function vY(i){return Ai[i]},inv:function inv(i){return 8&i?15&i:7&-i},add:function add(i,o){return Ri[i][o]},sub:function sub(i,o){return Ri[i][ki.inv(o)]},rotate180:function rotate180(i){return 4^i},isVertical:function isVertical(i){return 2==(3&i)},byDirection:function byDirection(i,o){return 2*Math.abs(i)<=Math.abs(o)?o>=0?ki.S:ki.N:2*Math.abs(o)<=Math.abs(i)?i>0?ki.E:ki.W:o>0?i>0?ki.SE:ki.SW:i>0?ki.NE:ki.NW},matrixAppendRotationInv:function matrixAppendRotationInv(i,o,a,h){void 0===a&&(a=0),void 0===h&&(h=0);var c=Ii[ki.inv(o)];c.tx=a,c.ty=h,i.append(c)}},Fi=function(){function Transform(){this.worldTransform=new Ei,this.localTransform=new Ei,this.position=new Si(this.onChange,this,0,0),this.scale=new Si(this.onChange,this,1,1),this.pivot=new Si(this.onChange,this,0,0),this.skew=new Si(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return Transform.prototype.onChange=function(){this._localID++},Transform.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},Transform.prototype.updateLocalTransform=function(){var i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1)},Transform.prototype.updateTransform=function(i){var o=this.localTransform;if(this._localID!==this._currentLocalID&&(o.a=this._cx*this.scale.x,o.b=this._sx*this.scale.x,o.c=this._cy*this.scale.y,o.d=this._sy*this.scale.y,o.tx=this.position.x-(this.pivot.x*o.a+this.pivot.y*o.c),o.ty=this.position.y-(this.pivot.x*o.b+this.pivot.y*o.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==i._worldID){var a=i.worldTransform,h=this.worldTransform;h.a=o.a*a.a+o.b*a.c,h.b=o.a*a.b+o.b*a.d,h.c=o.c*a.a+o.d*a.c,h.d=o.c*a.b+o.d*a.d,h.tx=o.tx*a.a+o.ty*a.c+a.tx,h.ty=o.tx*a.b+o.ty*a.d+a.ty,this._parentID=i._worldID,this._worldID++}},Transform.prototype.setFromMatrix=function(i){i.decompose(this),this._localID++},Object.defineProperty(Transform.prototype,"rotation",{get:function get(){return this._rotation},set:function set(i){this._rotation!==i&&(this._rotation=i,this.updateSkew())},enumerable:!0,configurable:!0}),Transform.IDENTITY=new Transform,Transform}(),zi=function(){function Rectangle(i,o,a,h){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.x=Number(i),this.y=Number(o),this.width=Number(a),this.height=Number(h),this.type=yi.RECT}return Object.defineProperty(Rectangle.prototype,"left",{get:function get(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(Rectangle.prototype,"right",{get:function get(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(Rectangle.prototype,"top",{get:function get(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(Rectangle.prototype,"bottom",{get:function get(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(Rectangle,"EMPTY",{get:function get(){return new Rectangle(0,0,0,0)},enumerable:!0,configurable:!0}),Rectangle.prototype.clone=function(){return new Rectangle(this.x,this.y,this.width,this.height)},Rectangle.prototype.copyFrom=function(i){return this.x=i.x,this.y=i.y,this.width=i.width,this.height=i.height,this},Rectangle.prototype.copyTo=function(i){return i.x=this.x,i.y=this.y,i.width=this.width,i.height=this.height,i},Rectangle.prototype.contains=function(i,o){return!(this.width<=0||this.height<=0)&&i>=this.x&&i<this.x+this.width&&o>=this.y&&o<this.y+this.height},Rectangle.prototype.pad=function(i,o){return void 0===i&&(i=0),void 0===o&&(o=i),this.x-=i,this.y-=o,this.width+=2*i,this.height+=2*o,this},Rectangle.prototype.fit=function(i){var o=Math.max(this.x,i.x),a=Math.min(this.x+this.width,i.x+i.width),h=Math.max(this.y,i.y),c=Math.min(this.y+this.height,i.y+i.height);return this.x=o,this.width=Math.max(a-o,0),this.y=h,this.height=Math.max(c-h,0),this},Rectangle.prototype.ceil=function(i,o){void 0===i&&(i=1),void 0===o&&(o=.001);var a=Math.ceil((this.x+this.width-o)*i)/i,h=Math.ceil((this.y+this.height-o)*i)/i;return this.x=Math.floor((this.x+o)*i)/i,this.y=Math.floor((this.y+o)*i)/i,this.width=a-this.x,this.height=h-this.y,this},Rectangle.prototype.enlarge=function(i){var o=Math.min(this.x,i.x),a=Math.max(this.x+this.width,i.x+i.width),h=Math.min(this.y,i.y),c=Math.max(this.y+this.height,i.y+i.height);return this.x=o,this.width=a-o,this.y=h,this.height=c-h,this},Rectangle}();(function(){function Circle(i,o,a){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),this.x=i,this.y=o,this.radius=a,this.type=yi.CIRC}Circle.prototype.clone=function(){return new Circle(this.x,this.y,this.radius)},Circle.prototype.contains=function(i,o){if(this.radius<=0)return!1;var a=this.radius*this.radius,h=this.x-i,c=this.y-o;return(h*=h)+(c*=c)<=a},Circle.prototype.getBounds=function(){return new zi(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}})(),function(){function Ellipse(i,o,a,h){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.x=i,this.y=o,this.width=a,this.height=h,this.type=yi.ELIP}Ellipse.prototype.clone=function(){return new Ellipse(this.x,this.y,this.width,this.height)},Ellipse.prototype.contains=function(i,o){if(this.width<=0||this.height<=0)return!1;var a=(i-this.x)/this.width,h=(o-this.y)/this.height;return(a*=a)+(h*=h)<=1},Ellipse.prototype.getBounds=function(){return new zi(this.x-this.width,this.y-this.height,this.width,this.height)}}(),function(){function Polygon(){for(var i=arguments,o=[],a=0;a<arguments.length;a++)o[a]=i[a];if(Array.isArray(o[0])&&(o=o[0]),o[0]instanceof xi){for(var h=[],c=0,l=(o=o).length;c<l;c++)h.push(o[c].x,o[c].y);o=h}this.points=o,this.type=yi.POLY,this.closeStroke=!0}Polygon.prototype.clone=function(){var i=new Polygon(this.points.slice());return i.closeStroke=this.closeStroke,i},Polygon.prototype.contains=function(i,o){for(var a=!1,h=this.points.length/2,c=0,l=h-1;c<h;l=c++){var m=this.points[2*c],g=this.points[2*c+1],_=this.points[2*l],x=this.points[2*l+1];g>o!=x>o&&i<(o-g)/(x-g)*(_-m)+m&&(a=!a)}return a}}(),function(){function RoundedRectangle(i,o,a,h,c){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===c&&(c=20),this.x=i,this.y=o,this.width=a,this.height=h,this.radius=c,this.type=yi.RREC}RoundedRectangle.prototype.clone=function(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},RoundedRectangle.prototype.contains=function(i,o){if(this.width<=0||this.height<=0)return!1;if(i>=this.x&&i<=this.x+this.width&&o>=this.y&&o<=this.y+this.height){if(o>=this.y+this.radius&&o<=this.y+this.height-this.radius||i>=this.x+this.radius&&i<=this.x+this.width-this.radius)return!0;var a=i-(this.x+this.radius),h=o-(this.y+this.radius),c=this.radius*this.radius;if(a*a+h*h<=c)return!0;if((a=i-(this.x+this.width-this.radius))*a+h*h<=c)return!0;if(a*a+(h=o-(this.y+this.height-this.radius))*h<=c)return!0;if((a=i-(this.x+this.radius))*a+h*h<=c)return!0}return!1}}(),hi.SORTABLE_CHILDREN=!1;var Di=function Bounds(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null};Di.prototype.isEmpty=function isEmpty(){return this.minX>this.maxX||this.minY>this.maxY},Di.prototype.clear=function clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},Di.prototype.getRectangle=function getRectangle(i){return this.minX>this.maxX||this.minY>this.maxY?zi.EMPTY:((i=i||new zi(0,0,1,1)).x=this.minX,i.y=this.minY,i.width=this.maxX-this.minX,i.height=this.maxY-this.minY,i)},Di.prototype.addPoint=function addPoint(i){this.minX=Math.min(this.minX,i.x),this.maxX=Math.max(this.maxX,i.x),this.minY=Math.min(this.minY,i.y),this.maxY=Math.max(this.maxY,i.y)},Di.prototype.addQuad=function addQuad(i){var o=this.minX,a=this.minY,h=this.maxX,c=this.maxY,l=i[0],m=i[1];o=l<o?l:o,a=m<a?m:a,h=l>h?l:h,c=m>c?m:c,o=(l=i[2])<o?l:o,a=(m=i[3])<a?m:a,h=l>h?l:h,c=m>c?m:c,o=(l=i[4])<o?l:o,a=(m=i[5])<a?m:a,h=l>h?l:h,c=m>c?m:c,o=(l=i[6])<o?l:o,a=(m=i[7])<a?m:a,h=l>h?l:h,c=m>c?m:c,this.minX=o,this.minY=a,this.maxX=h,this.maxY=c},Di.prototype.addFrame=function addFrame(i,o,a,h,c){this.addFrameMatrix(i.worldTransform,o,a,h,c)},Di.prototype.addFrameMatrix=function addFrameMatrix(i,o,a,h,c){var l=i.a,m=i.b,g=i.c,_=i.d,x=i.tx,S=i.ty,R=this.minX,k=this.minY,j=this.maxX,X=this.maxY,Y=l*o+g*a+x,q=m*o+_*a+S;R=Y<R?Y:R,k=q<k?q:k,j=Y>j?Y:j,X=q>X?q:X,R=(Y=l*h+g*a+x)<R?Y:R,k=(q=m*h+_*a+S)<k?q:k,j=Y>j?Y:j,X=q>X?q:X,R=(Y=l*o+g*c+x)<R?Y:R,k=(q=m*o+_*c+S)<k?q:k,j=Y>j?Y:j,X=q>X?q:X,R=(Y=l*h+g*c+x)<R?Y:R,k=(q=m*h+_*c+S)<k?q:k,j=Y>j?Y:j,X=q>X?q:X,this.minX=R,this.minY=k,this.maxX=j,this.maxY=X},Di.prototype.addVertexData=function addVertexData(i,o,a){for(var h=this.minX,c=this.minY,l=this.maxX,m=this.maxY,g=o;g<a;g+=2){var _=i[g],x=i[g+1];h=_<h?_:h,c=x<c?x:c,l=_>l?_:l,m=x>m?x:m}this.minX=h,this.minY=c,this.maxX=l,this.maxY=m},Di.prototype.addVertices=function addVertices(i,o,a,h){this.addVerticesMatrix(i.worldTransform,o,a,h)},Di.prototype.addVerticesMatrix=function addVerticesMatrix(i,o,a,h,c,l){var m=i.a,g=i.b,_=i.c,x=i.d,S=i.tx,R=i.ty;c=c||0,l=l||0;for(var k=this.minX,j=this.minY,X=this.maxX,Y=this.maxY,q=a;q<h;q+=2){var Z=o[q],$=o[q+1],ee=m*Z+_*$+S,te=x*$+g*Z+R;k=Math.min(k,ee-c),X=Math.max(X,ee+c),j=Math.min(j,te-l),Y=Math.max(Y,te+l)}this.minX=k,this.minY=j,this.maxX=X,this.maxY=Y},Di.prototype.addBounds=function addBounds(i){var o=this.minX,a=this.minY,h=this.maxX,c=this.maxY;this.minX=i.minX<o?i.minX:o,this.minY=i.minY<a?i.minY:a,this.maxX=i.maxX>h?i.maxX:h,this.maxY=i.maxY>c?i.maxY:c},Di.prototype.addBoundsMask=function addBoundsMask(i,o){var a=i.minX>o.minX?i.minX:o.minX,h=i.minY>o.minY?i.minY:o.minY,c=i.maxX<o.maxX?i.maxX:o.maxX,l=i.maxY<o.maxY?i.maxY:o.maxY;if(a<=c&&h<=l){var m=this.minX,g=this.minY,_=this.maxX,x=this.maxY;this.minX=a<m?a:m,this.minY=h<g?h:g,this.maxX=c>_?c:_,this.maxY=l>x?l:x}},Di.prototype.addBoundsMatrix=function addBoundsMatrix(i,o){this.addFrameMatrix(o,i.minX,i.minY,i.maxX,i.maxY)},Di.prototype.addBoundsArea=function addBoundsArea(i,o){var a=i.minX>o.x?i.minX:o.x,h=i.minY>o.y?i.minY:o.y,c=i.maxX<o.x+o.width?i.maxX:o.x+o.width,l=i.maxY<o.y+o.height?i.maxY:o.y+o.height;if(a<=c&&h<=l){var m=this.minX,g=this.minY,_=this.maxX,x=this.maxY;this.minX=a<m?a:m,this.minY=h<g?h:g,this.maxX=c>_?c:_,this.maxY=l>x?l:x}},Di.prototype.pad=function pad(i,o){i=i||0,o=o||(0!==o?i:0),this.isEmpty()||(this.minX-=i,this.maxX+=i,this.minY-=o,this.maxY+=o)},Di.prototype.addFramePad=function addFramePad(i,o,a,h,c,l){i-=c,o-=l,a+=c,h+=l,this.minX=this.minX<i?this.minX:i,this.maxX=this.maxX>a?this.maxX:a,this.minY=this.minY<o?this.minY:o,this.maxY=this.maxY>h?this.maxY:h};var Li=function(i){function DisplayObject(){i.call(this),this.tempDisplayObjectParent=null,this.transform=new Fi,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Di,this._boundsID=0,this._lastBoundsID=-1,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}i&&(DisplayObject.__proto__=i),DisplayObject.prototype=Object.create(i&&i.prototype),DisplayObject.prototype.constructor=DisplayObject;var o={_tempDisplayObjectParent:{configurable:!0},x:{configurable:!0},y:{configurable:!0},worldTransform:{configurable:!0},localTransform:{configurable:!0},position:{configurable:!0},scale:{configurable:!0},pivot:{configurable:!0},skew:{configurable:!0},rotation:{configurable:!0},angle:{configurable:!0},zIndex:{configurable:!0},worldVisible:{configurable:!0},mask:{configurable:!0}};return DisplayObject.mixin=function mixin(i){for(var o=Object.keys(i),a=0;a<o.length;++a){var h=o[a];Object.defineProperty(DisplayObject.prototype,h,Object.getOwnPropertyDescriptor(i,h))}},o._tempDisplayObjectParent.get=function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new DisplayObject),this.tempDisplayObjectParent},DisplayObject.prototype.updateTransform=function updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},DisplayObject.prototype.calculateBounds=function calculateBounds(){},DisplayObject.prototype._recursivePostUpdateTransform=function _recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},DisplayObject.prototype.getBounds=function getBounds(i,o){return i||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&(this.calculateBounds(),this._lastBoundsID=this._boundsID),o||(this._boundsRect||(this._boundsRect=new zi),o=this._boundsRect),this._bounds.getRectangle(o)},DisplayObject.prototype.getLocalBounds=function getLocalBounds(i){var o=this.transform,a=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,i||(this._localBoundsRect||(this._localBoundsRect=new zi),i=this._localBoundsRect);var h=this.getBounds(!1,i);return this.parent=a,this.transform=o,h},DisplayObject.prototype.toGlobal=function toGlobal(i,o,a){return void 0===a&&(a=!1),a||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(i,o)},DisplayObject.prototype.toLocal=function toLocal(i,o,a,h){return o&&(i=o.toGlobal(i,a,h)),h||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(i,a)},DisplayObject.prototype.render=function render(i){},DisplayObject.prototype.setParent=function setParent(i){if(!i||!i.addChild)throw new Error("setParent: Argument must be a Container");return i.addChild(this),i},DisplayObject.prototype.setTransform=function setTransform(i,o,a,h,c,l,m,g,_){return void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=1),void 0===h&&(h=1),void 0===c&&(c=0),void 0===l&&(l=0),void 0===m&&(m=0),void 0===g&&(g=0),void 0===_&&(_=0),this.position.x=i,this.position.y=o,this.scale.x=a||1,this.scale.y=h||1,this.rotation=c,this.skew.x=l,this.skew.y=m,this.pivot.x=g,this.pivot.y=_,this},DisplayObject.prototype.destroy=function destroy(){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},o.x.get=function(){return this.position.x},o.x.set=function(i){this.transform.position.x=i},o.y.get=function(){return this.position.y},o.y.set=function(i){this.transform.position.y=i},o.worldTransform.get=function(){return this.transform.worldTransform},o.localTransform.get=function(){return this.transform.localTransform},o.position.get=function(){return this.transform.position},o.position.set=function(i){this.transform.position.copyFrom(i)},o.scale.get=function(){return this.transform.scale},o.scale.set=function(i){this.transform.scale.copyFrom(i)},o.pivot.get=function(){return this.transform.pivot},o.pivot.set=function(i){this.transform.pivot.copyFrom(i)},o.skew.get=function(){return this.transform.skew},o.skew.set=function(i){this.transform.skew.copyFrom(i)},o.rotation.get=function(){return this.transform.rotation},o.rotation.set=function(i){this.transform.rotation=i},o.angle.get=function(){return this.transform.rotation*wi},o.angle.set=function(i){this.transform.rotation=i*Ti},o.zIndex.get=function(){return this._zIndex},o.zIndex.set=function(i){this._zIndex=i,this.parent&&(this.parent.sortDirty=!0)},o.worldVisible.get=function(){var i=this;do{if(!i.visible)return!1;i=i.parent}while(i);return!0},o.mask.get=function(){return this._mask},o.mask.set=function(i){if(this._mask){var o=this._mask.maskObject||this._mask;o.renderable=!0,o.isMask=!1}if(this._mask=i,this._mask){var a=this._mask.maskObject||this._mask;a.renderable=!1,a.isMask=!0}},Object.defineProperties(DisplayObject.prototype,o),DisplayObject}(me.a);function display_es_sortChildren(i,o){return i.zIndex===o.zIndex?i._lastSortedIndex-o._lastSortedIndex:i.zIndex-o.zIndex}Li.prototype.displayObjectUpdateTransform=Li.prototype.updateTransform;var Bi=function(i){function Container(){i.call(this),this.children=[],this.sortableChildren=hi.SORTABLE_CHILDREN,this.sortDirty=!1}i&&(Container.__proto__=i),Container.prototype=Object.create(i&&i.prototype),Container.prototype.constructor=Container;var o={width:{configurable:!0},height:{configurable:!0}};return Container.prototype.onChildrenChange=function onChildrenChange(){},Container.prototype.addChild=function addChild(i){var o=arguments,a=arguments.length;if(a>1)for(var h=0;h<a;h++)this.addChild(o[h]);else i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this);return i},Container.prototype.addChildAt=function addChildAt(i,o){if(o<0||o>this.children.length)throw new Error(i+"addChildAt: The index "+o+" supplied is out of bounds "+this.children.length);return i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.splice(o,0,i),this._boundsID++,this.onChildrenChange(o),i.emit("added",this),this.emit("childAdded",i,this,o),i},Container.prototype.swapChildren=function swapChildren(i,o){if(i!==o){var a=this.getChildIndex(i),h=this.getChildIndex(o);this.children[a]=o,this.children[h]=i,this.onChildrenChange(a<h?a:h)}},Container.prototype.getChildIndex=function getChildIndex(i){var o=this.children.indexOf(i);if(-1===o)throw new Error("The supplied DisplayObject must be a child of the caller");return o},Container.prototype.setChildIndex=function setChildIndex(i,o){if(o<0||o>=this.children.length)throw new Error("The index "+o+" supplied is out of bounds "+this.children.length);var a=this.getChildIndex(i);utils_es_removeItems(this.children,a,1),this.children.splice(o,0,i),this.onChildrenChange(o)},Container.prototype.getChildAt=function getChildAt(i){if(i<0||i>=this.children.length)throw new Error("getChildAt: Index ("+i+") does not exist.");return this.children[i]},Container.prototype.removeChild=function removeChild(i){var o=arguments,a=arguments.length;if(a>1)for(var h=0;h<a;h++)this.removeChild(o[h]);else{var c=this.children.indexOf(i);if(-1===c)return null;i.parent=null,i.transform._parentID=-1,utils_es_removeItems(this.children,c,1),this._boundsID++,this.onChildrenChange(c),i.emit("removed",this),this.emit("childRemoved",i,this,c)}return i},Container.prototype.removeChildAt=function removeChildAt(i){var o=this.getChildAt(i);return o.parent=null,o.transform._parentID=-1,utils_es_removeItems(this.children,i,1),this._boundsID++,this.onChildrenChange(i),o.emit("removed",this),this.emit("childRemoved",o,this,i),o},Container.prototype.removeChildren=function removeChildren(i,o){void 0===i&&(i=0);var a,h=i,c="number"==typeof o?o:this.children.length,l=c-h;if(l>0&&l<=c){a=this.children.splice(h,l);for(var m=0;m<a.length;++m)a[m].parent=null,a[m].transform&&(a[m].transform._parentID=-1);this._boundsID++,this.onChildrenChange(i);for(var g=0;g<a.length;++g)a[g].emit("removed",this),this.emit("childRemoved",a[g],this,g);return a}if(0===l&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},Container.prototype.sortChildren=function sortChildren$1(){for(var i=!1,o=0,a=this.children.length;o<a;++o){var h=this.children[o];h._lastSortedIndex=o,i||0===h.zIndex||(i=!0)}i&&this.children.length>1&&this.children.sort(display_es_sortChildren),this.sortDirty=!1},Container.prototype.updateTransform=function updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var i=0,o=this.children.length;i<o;++i){var a=this.children[i];a.visible&&a.updateTransform()}},Container.prototype.calculateBounds=function calculateBounds(){this._bounds.clear(),this._calculateBounds();for(var i=0;i<this.children.length;i++){var o=this.children[i];if(o.visible&&o.renderable)if(o.calculateBounds(),o._mask){var a=o._mask.maskObject||o._mask;a.calculateBounds(),this._bounds.addBoundsMask(o._bounds,a._bounds)}else o.filterArea?this._bounds.addBoundsArea(o._bounds,o.filterArea):this._bounds.addBounds(o._bounds)}this._lastBoundsID=this._boundsID},Container.prototype._calculateBounds=function _calculateBounds(){},Container.prototype.render=function render(i){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(i);else{this._render(i);for(var o=0,a=this.children.length;o<a;++o)this.children[o].render(i)}},Container.prototype.renderAdvanced=function renderAdvanced(i){i.batch.flush();var o=this.filters,a=this._mask;if(o){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var h=0;h<o.length;h++)o[h].enabled&&this._enabledFilters.push(o[h]);this._enabledFilters.length&&i.filter.push(this,this._enabledFilters)}a&&i.mask.push(this,this._mask),this._render(i);for(var c=0,l=this.children.length;c<l;c++)this.children[c].render(i);i.batch.flush(),a&&i.mask.pop(this,this._mask),o&&this._enabledFilters&&this._enabledFilters.length&&i.filter.pop()},Container.prototype._render=function _render(i){},Container.prototype.destroy=function destroy(o){i.prototype.destroy.call(this),this.sortDirty=!1;var a="boolean"==typeof o?o:o&&o.children,h=this.removeChildren(0,this.children.length);if(a)for(var c=0;c<h.length;++c)h[c].destroy(o)},o.width.get=function(){return this.scale.x*this.getLocalBounds().width},o.width.set=function(i){var o=this.getLocalBounds().width;this.scale.x=0!==o?i/o:1,this._width=i},o.height.get=function(){return this.scale.y*this.getLocalBounds().height},o.height.set=function(i){var o=this.getLocalBounds().height;this.scale.y=0!==o?i/o:1,this._height=i},Object.defineProperties(Container.prototype,o),Container}(Li);Bi.prototype.containerUpdateTransform=Bi.prototype.updateTransform;var Ni=function Resource(i,o){void 0===i&&(i=0),void 0===o&&(o=0),this._width=i,this._height=o,this.destroyed=!1,this.internal=!1,this.onResize=new Yr("setRealSize",2),this.onUpdate=new Yr("update"),this.onError=new Yr("onError",1)},Gi={valid:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};Ni.prototype.bind=function bind(i){this.onResize.add(i),this.onUpdate.add(i),this.onError.add(i),(this._width||this._height)&&this.onResize.run(this._width,this._height)},Ni.prototype.unbind=function unbind(i){this.onResize.remove(i),this.onUpdate.remove(i),this.onError.remove(i)},Ni.prototype.resize=function resize(i,o){i===this._width&&o===this._height||(this._width=i,this._height=o,this.onResize.run(i,o))},Gi.valid.get=function(){return!!this._width&&!!this._height},Ni.prototype.update=function update(){this.destroyed||this.onUpdate.run()},Ni.prototype.load=function load(){return Promise.resolve()},Gi.width.get=function(){return this._width},Gi.height.get=function(){return this._height},Ni.prototype.upload=function upload(i,o,a){return!1},Ni.prototype.style=function style(i,o,a){return!1},Ni.prototype.dispose=function dispose(){},Ni.prototype.destroy=function destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Object.defineProperties(Ni.prototype,Gi);var Ui=function(i){function BaseImageResource(o){var a=o.naturalWidth||o.videoWidth||o.width,h=o.naturalHeight||o.videoHeight||o.height;i.call(this,a,h),this.source=o,this.noSubImage=!1}return i&&(BaseImageResource.__proto__=i),BaseImageResource.prototype=Object.create(i&&i.prototype),BaseImageResource.prototype.constructor=BaseImageResource,BaseImageResource.crossOrigin=function crossOrigin(i,o,a){void 0===a&&0!==o.indexOf("data:")?i.crossOrigin=function utils_es_determineCrossOrigin(i,o){if(void 0===o&&(o=window.location),0===i.indexOf("data:"))return"";o=o||window.location,di||(di=document.createElement("a")),di.href=i;var a=Object(ye.parse)(di.href),h=!a.port&&""===o.port||a.port===o.port;return a.hostname===o.hostname&&h&&a.protocol===o.protocol?"":"anonymous"}(o):!1!==a&&(i.crossOrigin="string"==typeof a?a:"anonymous")},BaseImageResource.prototype.upload=function upload(i,o,a,h){var c=i.gl,l=o.realWidth,m=o.realHeight;return h=h||this.source,c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.alphaMode===ni.UNPACK),this.noSubImage||o.target!==c.TEXTURE_2D||a.width!==l||a.height!==m?(a.width=l,a.height=m,c.texImage2D(o.target,0,o.format,o.format,o.type,h)):c.texSubImage2D(c.TEXTURE_2D,0,0,0,o.format,o.type,h),!0},BaseImageResource.prototype.update=function update(){if(!this.destroyed){var o=this.source.naturalWidth||this.source.videoWidth||this.source.width,a=this.source.naturalHeight||this.source.videoHeight||this.source.height;this.resize(o,a),i.prototype.update.call(this)}},BaseImageResource.prototype.dispose=function dispose(){this.source=null},BaseImageResource}(Ni),ji=function(i){function ImageResource(o,a){if(a=a||{},!(o instanceof HTMLImageElement)){var h=new Image;i.crossOrigin(h,o,a.crossorigin),h.src=o,o=h}i.call(this,o),!o.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=o.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(void 0!==a.createBitmap?a.createBitmap:hi.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,this.alphaMode="number"==typeof a.alphaMode?a.alphaMode:null,void 0!==a.premultiplyAlpha&&(this.premultiplyAlpha=a.premultiplyAlpha),this.bitmap=null,this._load=null,!1!==a.autoLoad&&this.load()}return i&&(ImageResource.__proto__=i),ImageResource.prototype=Object.create(i&&i.prototype),ImageResource.prototype.constructor=ImageResource,ImageResource.prototype.load=function load(i){var o=this;return this._load||(void 0!==i&&(this.createBitmap=i),this._load=new Promise((function(i,a){o.url=o.source.src;var h=o.source,c=function completed(){o.destroyed||(h.onload=null,h.onerror=null,o.resize(h.width,h.height),o._load=null,o.createBitmap?i(o.process()):i(o))};h.complete&&h.src?c():(h.onload=c,h.onerror=function(i){a(i),o.onError.emit(i)})}))),this._load},ImageResource.prototype.process=function process(){var i=this;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(this.source,0,0,this.source.width,this.source.height,{premultiplyAlpha:this.premultiplyAlpha===ni.UNPACK?"premultiply":"none"}).then((function(o){return i.destroyed?Promise.reject():(i.bitmap=o,i.update(),i._process=null,Promise.resolve(i))})),this._process):Promise.resolve(this)},ImageResource.prototype.upload=function upload(o,a,h){if("number"==typeof this.alphaMode&&(a.alphaMode=this.alphaMode),!this.createBitmap)return i.prototype.upload.call(this,o,a,h);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(i.prototype.upload.call(this,o,a,h,this.bitmap),!this.preserveBitmap){var c=!0;for(var l in a._glTextures){var m=a._glTextures[l];if(m!==h&&m.dirtyId!==a.dirtyId){c=!1;break}}c&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},ImageResource.prototype.dispose=function dispose(){this.source.onload=null,this.source.onerror=null,i.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},ImageResource}(Ui),Wi=[];function core_es_autoDetectResource(i,o){if(!i)return null;var a="";if("string"==typeof i){var h=/\.(\w{3,4})(?:$|\?|#)/i.exec(i);h&&(a=h[1].toLowerCase())}for(var c=Wi.length-1;c>=0;--c){var l=Wi[c];if(l.test&&l.test(i,a))return new l(i,o)}return new ji(i,o)}var Xi=function(i){function BufferResource(o,a){var h=a||{},c=h.width,l=h.height;if(!c||!l)throw new Error("BufferResource width or height invalid");i.call(this,c,l),this.data=o}return i&&(BufferResource.__proto__=i),BufferResource.prototype=Object.create(i&&i.prototype),BufferResource.prototype.constructor=BufferResource,BufferResource.prototype.upload=function upload(i,o,a){var h=i.gl;return h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.alphaMode===ni.UNPACK),a.width===o.width&&a.height===o.height?h.texSubImage2D(o.target,0,0,0,o.width,o.height,o.format,o.type,this.data):(a.width=o.width,a.height=o.height,h.texImage2D(o.target,0,a.internalFormat,o.width,o.height,0,o.format,a.type,this.data)),!0},BufferResource.prototype.dispose=function dispose(){this.data=null},BufferResource.test=function test(i){return i instanceof Float32Array||i instanceof Uint8Array||i instanceof Uint32Array},BufferResource}(Ni),Hi={scaleMode:ti.NEAREST,format:Jr.RGBA,alphaMode:ni.NPM},Vi=function(i){function BaseTexture(o,a){void 0===o&&(o=null),void 0===a&&(a=null),i.call(this);var h=(a=a||{}).alphaMode,c=a.mipmap,l=a.anisotropicLevel,m=a.scaleMode,g=a.width,_=a.height,x=a.wrapMode,S=a.format,R=a.type,k=a.target,j=a.resolution,X=a.resourceOptions;!o||o instanceof Ni||((o=core_es_autoDetectResource(o,X)).internal=!0),this.width=g||0,this.height=_||0,this.resolution=j||hi.RESOLUTION,this.mipmap=void 0!==c?c:hi.MIPMAP_TEXTURES,this.anisotropicLevel=void 0!==l?l:hi.ANISOTROPIC_LEVEL,this.wrapMode=x||hi.WRAP_MODE,this.scaleMode=void 0!==m?m:hi.SCALE_MODE,this.format=S||Jr.RGBA,this.type=R||ei.UNSIGNED_BYTE,this.target=k||$r.TEXTURE_2D,this.alphaMode=void 0!==h?h:ni.UNPACK,void 0!==a.premultiplyAlpha&&(this.premultiplyAlpha=a.premultiplyAlpha),this.uid=utils_es_uid(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=g>0&&_>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.setResource(o)}i&&(BaseTexture.__proto__=i),BaseTexture.prototype=Object.create(i&&i.prototype),BaseTexture.prototype.constructor=BaseTexture;var o={realWidth:{configurable:!0},realHeight:{configurable:!0}};return o.realWidth.get=function(){return Math.ceil(this.width*this.resolution-1e-4)},o.realHeight.get=function(){return Math.ceil(this.height*this.resolution-1e-4)},BaseTexture.prototype.setStyle=function setStyle(i,o){var a;return void 0!==i&&i!==this.scaleMode&&(this.scaleMode=i,a=!0),void 0!==o&&o!==this.mipmap&&(this.mipmap=o,a=!0),a&&this.dirtyStyleId++,this},BaseTexture.prototype.setSize=function setSize(i,o,a){return this.resolution=a||this.resolution,this.width=i,this.height=o,this._refreshPOT(),this.update(),this},BaseTexture.prototype.setRealSize=function setRealSize(i,o,a){return this.resolution=a||this.resolution,this.width=i/this.resolution,this.height=o/this.resolution,this._refreshPOT(),this.update(),this},BaseTexture.prototype._refreshPOT=function _refreshPOT(){this.isPowerOfTwo=utils_es_isPow2(this.realWidth)&&utils_es_isPow2(this.realHeight)},BaseTexture.prototype.setResolution=function setResolution(i){var o=this.resolution;return o===i||(this.resolution=i,this.valid&&(this.width=this.width*o/i,this.height=this.height*o/i,this.emit("update",this)),this._refreshPOT()),this},BaseTexture.prototype.setResource=function setResource(i){if(this.resource===i)return this;if(this.resource)throw new Error("Resource can be set only once");return i.bind(this),this.resource=i,this},BaseTexture.prototype.update=function update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},BaseTexture.prototype.onError=function onError(i){this.emit("error",this,i)},BaseTexture.prototype.destroy=function destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete gi[this.cacheId],delete mi[this.cacheId],this.cacheId=null),this.dispose(),BaseTexture.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},BaseTexture.prototype.dispose=function dispose(){this.emit("dispose",this)},BaseTexture.from=function from(i,o,a){void 0===a&&(a=hi.STRICT_TEXTURE_CACHE);var h="string"==typeof i,c=null;h?c=i:(i._pixiId||(i._pixiId="pixiid_"+utils_es_uid()),c=i._pixiId);var l=gi[c];if(h&&a&&!l)throw new Error('The cacheId "'+c+'" does not exist in BaseTextureCache.');return l||((l=new BaseTexture(i,o)).cacheId=c,BaseTexture.addToCache(l,c)),l},BaseTexture.fromBuffer=function fromBuffer(i,o,a,h){i=i||new Float32Array(o*a*4);var c=new Xi(i,{width:o,height:a}),l=i instanceof Float32Array?ei.FLOAT:ei.UNSIGNED_BYTE;return new BaseTexture(c,Object.assign(Hi,h||{width:o,height:a,type:l}))},BaseTexture.addToCache=function addToCache(i,o){o&&(-1===i.textureCacheIds.indexOf(o)&&i.textureCacheIds.push(o),gi[o]&&console.warn("BaseTexture added to the cache with an id ["+o+"] that already had an entry"),gi[o]=i)},BaseTexture.removeFromCache=function removeFromCache(i){if("string"==typeof i){var o=gi[i];if(o){var a=o.textureCacheIds.indexOf(i);return a>-1&&o.textureCacheIds.splice(a,1),delete gi[i],o}}else if(i&&i.textureCacheIds){for(var h=0;h<i.textureCacheIds.length;++h)delete gi[i.textureCacheIds[h]];return i.textureCacheIds.length=0,i}return null},Object.defineProperties(BaseTexture.prototype,o),BaseTexture}(me.a);Vi._globalBatch=0;var Yi=function(i){function ArrayResource(o,a){var h;a=a||{};var c=o;Array.isArray(o)&&(h=o,c=o.length),i.call(this,a.width,a.height),this.items=[],this.itemDirtyIds=[];for(var l=0;l<c;l++){var m=new Vi;this.items.push(m),this.itemDirtyIds.push(-1)}if(this.length=c,this._load=null,h)for(var g=0;g<c;g++)this.addResourceAt(core_es_autoDetectResource(h[g],a),g)}return i&&(ArrayResource.__proto__=i),ArrayResource.prototype=Object.create(i&&i.prototype),ArrayResource.prototype.constructor=ArrayResource,ArrayResource.prototype.dispose=function dispose(){for(var i=0,o=this.length;i<o;i++)this.items[i].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},ArrayResource.prototype.addResourceAt=function addResourceAt(i,o){if(!this.items[o])throw new Error("Index "+o+" is out of bounds");return i.valid&&!this.valid&&this.resize(i.width,i.height),this.items[o].setResource(i),this},ArrayResource.prototype.bind=function bind(o){i.prototype.bind.call(this,o),o.target=$r.TEXTURE_2D_ARRAY;for(var a=0;a<this.length;a++)this.items[a].on("update",o.update,o)},ArrayResource.prototype.unbind=function unbind(o){i.prototype.unbind.call(this,o);for(var a=0;a<this.length;a++)this.items[a].off("update",o.update,o)},ArrayResource.prototype.load=function load(){var i=this;if(this._load)return this._load;var o=this.items.map((function(i){return i.resource})),a=o.map((function(i){return i.load()}));return this._load=Promise.all(a).then((function(){var a=o[0],h=a.width,c=a.height;return i.resize(h,c),Promise.resolve(i)})),this._load},ArrayResource.prototype.upload=function upload(i,o,a){var h=this.length,c=this.itemDirtyIds,l=this.items,m=i.gl;a.dirtyId<0&&m.texImage3D(m.TEXTURE_2D_ARRAY,0,o.format,this._width,this._height,h,0,o.format,o.type,null);for(var g=0;g<h;g++){var _=l[g];c[g]<_.dirtyId&&(c[g]=_.dirtyId,_.valid&&m.texSubImage3D(m.TEXTURE_2D_ARRAY,0,0,0,g,_.resource.width,_.resource.height,1,o.format,o.type,_.resource.source))}return!0},ArrayResource}(Ni),qi=function(i){function CanvasResource(){i.apply(this,arguments)}return i&&(CanvasResource.__proto__=i),CanvasResource.prototype=Object.create(i&&i.prototype),CanvasResource.prototype.constructor=CanvasResource,CanvasResource.test=function test(i){var o=window.OffscreenCanvas;return!!(o&&i instanceof o)||i instanceof HTMLCanvasElement},CanvasResource}(Ui),Ki=function(i){function CubeResource(o,a){if(a=a||{},i.call(this,o,a),this.length!==CubeResource.SIDES)throw new Error("Invalid length. Got "+this.length+", expected 6");for(var h=0;h<CubeResource.SIDES;h++)this.items[h].target=$r.TEXTURE_CUBE_MAP_POSITIVE_X+h;!1!==a.autoLoad&&this.load()}return i&&(CubeResource.__proto__=i),CubeResource.prototype=Object.create(i&&i.prototype),CubeResource.prototype.constructor=CubeResource,CubeResource.prototype.bind=function bind(o){i.prototype.bind.call(this,o),o.target=$r.TEXTURE_CUBE_MAP},CubeResource.prototype.upload=function upload(i,o,a){for(var h=this.itemDirtyIds,c=0;c<CubeResource.SIDES;c++){var l=this.items[c];h[c]<l.dirtyId&&(h[c]=l.dirtyId,l.valid&&l.resource.upload(i,l,a))}return!0},CubeResource}(Yi);Ki.SIDES=6;var Zi=function(i){function SVGResource(o,a){a=a||{},i.call(this,document.createElement("canvas")),this._width=0,this._height=0,this.svg=o,this.scale=a.scale||1,this._overrideWidth=a.width,this._overrideHeight=a.height,this._resolve=null,this._crossorigin=a.crossorigin,this._load=null,!1!==a.autoLoad&&this.load()}return i&&(SVGResource.__proto__=i),SVGResource.prototype=Object.create(i&&i.prototype),SVGResource.prototype.constructor=SVGResource,SVGResource.prototype.load=function load(){var i=this;return this._load||(this._load=new Promise((function(o){if(i._resolve=function(){i.resize(i.source.width,i.source.height),o(i)},/^\<svg/.test(i.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");i.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(i.svg)))}i._loadSvg()}))),this._load},SVGResource.prototype._loadSvg=function _loadSvg(){var o=this,a=new Image;i.crossOrigin(a,this.svg,this._crossorigin),a.src=this.svg,a.onerror=function(i){o._resolve&&(a.onerror=null,o.onError.run(i))},a.onload=function(){if(o._resolve){var i=a.width,h=a.height;if(!i||!h)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var c=i*o.scale,l=h*o.scale;(o._overrideWidth||o._overrideHeight)&&(c=o._overrideWidth||o._overrideHeight/h*i,l=o._overrideHeight||o._overrideWidth/i*h),c=Math.round(c),l=Math.round(l);var m=o.source;m.width=c,m.height=l,m._pixiId="canvas_"+utils_es_uid(),m.getContext("2d").drawImage(a,0,0,i,h,0,0,c,l),o._resolve(),o._resolve=null}}},SVGResource.getSize=function getSize(i){var o=SVGResource.SVG_SIZE.exec(i),a={};return o&&(a[o[1]]=Math.round(parseFloat(o[3])),a[o[5]]=Math.round(parseFloat(o[7]))),a},SVGResource.prototype.dispose=function dispose(){i.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},SVGResource.test=function test(i,o){return"svg"===o||"string"==typeof i&&0===i.indexOf("data:image/svg+xml;base64")||"string"==typeof i&&0===i.indexOf("<svg")},SVGResource}(Ui);Zi.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var Qi=function(i){function VideoResource(o,a){if(a=a||{},!(o instanceof HTMLVideoElement)){var h=document.createElement("video");h.setAttribute("preload","auto"),h.setAttribute("webkit-playsinline",""),h.setAttribute("playsinline",""),"string"==typeof o&&(o=[o]),i.crossOrigin(h,o[0].src||o[0],a.crossorigin);for(var c=0;c<o.length;++c){var l=document.createElement("source"),m=o[c],g=m.src,_=m.mime,x=(g=g||o[c]).split("?").shift().toLowerCase(),S=x.substr(x.lastIndexOf(".")+1);_=_||"video/"+S,l.src=g,l.type=_,h.appendChild(l)}o=h}i.call(this,o),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=a.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==a.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==a.autoLoad&&this.load()}i&&(VideoResource.__proto__=i),VideoResource.prototype=Object.create(i&&i.prototype),VideoResource.prototype.constructor=VideoResource;var o={autoUpdate:{configurable:!0},updateFPS:{configurable:!0}};return VideoResource.prototype.update=function update(o){if(void 0===o&&(o=0),!this.destroyed){var a=vi.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-a),(!this._updateFPS||this._msToNextUpdate<=0)&&(i.prototype.update.call(this,o),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},VideoResource.prototype.load=function load(){var i=this;if(this._load)return this._load;var o=this.source;return(o.readyState===o.HAVE_ENOUGH_DATA||o.readyState===o.HAVE_FUTURE_DATA)&&o.width&&o.height&&(o.complete=!0),o.addEventListener("play",this._onPlayStart.bind(this)),o.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(o.addEventListener("canplay",this._onCanPlay),o.addEventListener("canplaythrough",this._onCanPlay),o.addEventListener("error",this._onError,!0)),this._load=new Promise((function(a){i.valid?a(i):(i._resolve=a,o.load())})),this._load},VideoResource.prototype._onError=function _onError(){this.source.removeEventListener("error",this._onError,!0),this.onError.run(event)},VideoResource.prototype._isSourcePlaying=function _isSourcePlaying(){var i=this.source;return i.currentTime>0&&!1===i.paused&&!1===i.ended&&i.readyState>2},VideoResource.prototype._isSourceReady=function _isSourceReady(){return 3===this.source.readyState||4===this.source.readyState},VideoResource.prototype._onPlayStart=function _onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(vi.shared.add(this.update,this),this._isConnectedToTicker=!0)},VideoResource.prototype._onPlayStop=function _onPlayStop(){this._isConnectedToTicker&&(vi.shared.remove(this.update,this),this._isConnectedToTicker=!1)},VideoResource.prototype._onCanPlay=function _onCanPlay(){var i=this.source;i.removeEventListener("canplay",this._onCanPlay),i.removeEventListener("canplaythrough",this._onCanPlay);var o=this.valid;this.resize(i.videoWidth,i.videoHeight),!o&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&i.play()},VideoResource.prototype.dispose=function dispose(){this._isConnectedToTicker&&vi.shared.remove(this.update,this),this.source&&(this.source.removeEventListener("error",this._onError,!0),this.source.pause(),this.source.src="",this.source.load()),i.prototype.dispose.call(this)},o.autoUpdate.get=function(){return this._autoUpdate},o.autoUpdate.set=function(i){i!==this._autoUpdate&&(this._autoUpdate=i,!this._autoUpdate&&this._isConnectedToTicker?(vi.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(vi.shared.add(this.update,this),this._isConnectedToTicker=!0))},o.updateFPS.get=function(){return this._updateFPS},o.updateFPS.set=function(i){i!==this._updateFPS&&(this._updateFPS=i)},VideoResource.test=function test(i,o){return i instanceof HTMLVideoElement||VideoResource.TYPES.indexOf(o)>-1},Object.defineProperties(VideoResource.prototype,o),VideoResource}(Ui);Qi.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];var Ji=function(i){function ImageBitmapResource(){i.apply(this,arguments)}return i&&(ImageBitmapResource.__proto__=i),ImageBitmapResource.prototype=Object.create(i&&i.prototype),ImageBitmapResource.prototype.constructor=ImageBitmapResource,ImageBitmapResource.test=function test(i){return!!window.createImageBitmap&&i instanceof ImageBitmap},ImageBitmapResource}(Ui);Wi.push(ji,Ji,qi,Qi,Zi,Xi,Ki,Yi);var $i=function System(i){this.renderer=i};$i.prototype.destroy=function destroy(){this.renderer=null};var en=function(i){function DepthResource(){i.apply(this,arguments)}return i&&(DepthResource.__proto__=i),DepthResource.prototype=Object.create(i&&i.prototype),DepthResource.prototype.constructor=DepthResource,DepthResource.prototype.upload=function upload(i,o,a){var h=i.gl;return h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.alphaMode===ni.UNPACK),a.width===o.width&&a.height===o.height?h.texSubImage2D(o.target,0,0,0,o.width,o.height,o.format,o.type,this.data):(a.width=o.width,a.height=o.height,h.texImage2D(o.target,0,1===i.context.webGLVersion?h.DEPTH_COMPONENT:h.DEPTH_COMPONENT16,o.width,o.height,0,o.format,o.type,this.data)),!0},DepthResource}(Xi),tn=function Framebuffer(i,o){this.width=Math.ceil(i||100),this.height=Math.ceil(o||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Yr("disposeFramebuffer",2)},rn={colorTexture:{configurable:!0}};rn.colorTexture.get=function(){return this.colorTextures[0]},tn.prototype.addColorTexture=function addColorTexture(i,o){return void 0===i&&(i=0),this.colorTextures[i]=o||new Vi(null,{scaleMode:ti.NEAREST,resolution:1,mipmap:!1,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},tn.prototype.addDepthTexture=function addDepthTexture(i){return this.depthTexture=i||new Vi(new en(null,{width:this.width,height:this.height}),{scaleMode:ti.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:!1,format:Jr.DEPTH_COMPONENT,type:ei.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},tn.prototype.enableDepth=function enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},tn.prototype.enableStencil=function enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},tn.prototype.resize=function resize(i,o){if(i=Math.ceil(i),o=Math.ceil(o),i!==this.width||o!==this.height){this.width=i,this.height=o,this.dirtyId++,this.dirtySize++;for(var a=0;a<this.colorTextures.length;a++){var h=this.colorTextures[a],c=h.resolution;h.setSize(i/c,o/c)}if(this.depthTexture){var l=this.depthTexture.resolution;this.depthTexture.setSize(i/l,o/l)}}},tn.prototype.dispose=function dispose(){this.disposeRunner.run(this,!1)},Object.defineProperties(tn.prototype,rn);var nn=function(i){function BaseRenderTexture(o){if("number"==typeof o){var a=arguments[0],h=arguments[1],c=arguments[2],l=arguments[3];o={width:a,height:h,scaleMode:c,resolution:l}}i.call(this,null,o);var m=o||{},g=m.width,_=m.height;this.mipmap=!1,this.width=Math.ceil(g)||100,this.height=Math.ceil(_)||100,this.valid=!0,this._canvasRenderTarget=null,this.clearColor=[0,0,0,0],this.framebuffer=new tn(this.width*this.resolution,this.height*this.resolution).addColorTexture(0,this),this.maskStack=[],this.filterStack=[{}]}return i&&(BaseRenderTexture.__proto__=i),BaseRenderTexture.prototype=Object.create(i&&i.prototype),BaseRenderTexture.prototype.constructor=BaseRenderTexture,BaseRenderTexture.prototype.resize=function resize(i,o){i=Math.ceil(i),o=Math.ceil(o),this.framebuffer.resize(i*this.resolution,o*this.resolution)},BaseRenderTexture.prototype.dispose=function dispose(){this.framebuffer.dispose(),i.prototype.dispose.call(this)},BaseRenderTexture.prototype.destroy=function destroy(){i.prototype.destroy.call(this,!0),this.framebuffer=null},BaseRenderTexture}(Vi),an=function TextureUvs(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)};an.prototype.set=function set(i,o,a){var h=o.width,c=o.height;if(a){var l=i.width/2/h,m=i.height/2/c,g=i.x/h+l,_=i.y/c+m;a=ki.add(a,ki.NW),this.x0=g+l*ki.uX(a),this.y0=_+m*ki.uY(a),a=ki.add(a,2),this.x1=g+l*ki.uX(a),this.y1=_+m*ki.uY(a),a=ki.add(a,2),this.x2=g+l*ki.uX(a),this.y2=_+m*ki.uY(a),a=ki.add(a,2),this.x3=g+l*ki.uX(a),this.y3=_+m*ki.uY(a)}else this.x0=i.x/h,this.y0=i.y/c,this.x1=(i.x+i.width)/h,this.y1=i.y/c,this.x2=(i.x+i.width)/h,this.y2=(i.y+i.height)/c,this.x3=i.x/h,this.y3=(i.y+i.height)/c;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3};var sn=new an,un=function(i){function Texture(o,a,h,c,l,m){if(i.call(this),this.noFrame=!1,a||(this.noFrame=!0,a=new zi(0,0,1,1)),o instanceof Texture&&(o=o.baseTexture),this.baseTexture=o,this._frame=a,this.trim=c,this.valid=!1,this.requiresUpdate=!1,this._uvs=sn,this.uvMatrix=null,this.orig=h||a,this._rotate=Number(l||0),!0===l)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=m?new xi(m.x,m.y):new xi(0,0),this._updateID=0,this.textureCacheIds=[],o.valid?this.noFrame?o.valid&&this.onBaseTextureUpdated(o):this.frame=a:o.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&o.on("update",this.onBaseTextureUpdated,this)}i&&(Texture.__proto__=i),Texture.prototype=Object.create(i&&i.prototype),Texture.prototype.constructor=Texture;var o={resolution:{configurable:!0},frame:{configurable:!0},rotate:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return Texture.prototype.update=function update(){this.baseTexture.resource&&this.baseTexture.resource.update()},Texture.prototype.onBaseTextureUpdated=function onBaseTextureUpdated(i){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=i.width,this._frame.height=i.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},Texture.prototype.destroy=function destroy(i){if(this.baseTexture){if(i){var o=this.baseTexture.resource;o&&mi[o.url]&&Texture.removeFromCache(o.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture.removeFromCache(this),this.textureCacheIds=null},Texture.prototype.clone=function clone(){return new Texture(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},Texture.prototype.updateUvs=function updateUvs(){this._uvs===sn&&(this._uvs=new an),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},Texture.from=function from(i,o,a){void 0===o&&(o={}),void 0===a&&(a=hi.STRICT_TEXTURE_CACHE);var h="string"==typeof i,c=null;h?c=i:(i._pixiId||(i._pixiId="pixiid_"+utils_es_uid()),c=i._pixiId);var l=mi[c];if(h&&a&&!l)throw new Error('The cacheId "'+c+'" does not exist in TextureCache.');return l||(o.resolution||(o.resolution=utils_es_getResolutionOfUrl(i)),(l=new Texture(new Vi(i,o))).baseTexture.cacheId=c,Vi.addToCache(l.baseTexture,c),Texture.addToCache(l,c)),l},Texture.fromBuffer=function fromBuffer(i,o,a,h){return new Texture(Vi.fromBuffer(i,o,a,h))},Texture.fromLoader=function fromLoader(i,o,a){var h=new ji(i);h.url=o;var c=new Texture(new Vi(h,{scaleMode:hi.SCALE_MODE,resolution:utils_es_getResolutionOfUrl(o)}));return a||(a=o),Vi.addToCache(c.baseTexture,a),Texture.addToCache(c,a),a!==o&&(Vi.addToCache(c.baseTexture,o),Texture.addToCache(c,o)),c},Texture.addToCache=function addToCache(i,o){o&&(-1===i.textureCacheIds.indexOf(o)&&i.textureCacheIds.push(o),mi[o]&&console.warn("Texture added to the cache with an id ["+o+"] that already had an entry"),mi[o]=i)},Texture.removeFromCache=function removeFromCache(i){if("string"==typeof i){var o=mi[i];if(o){var a=o.textureCacheIds.indexOf(i);return a>-1&&o.textureCacheIds.splice(a,1),delete mi[i],o}}else if(i&&i.textureCacheIds){for(var h=0;h<i.textureCacheIds.length;++h)mi[i.textureCacheIds[h]]===i&&delete mi[i.textureCacheIds[h]];return i.textureCacheIds.length=0,i}return null},o.resolution.get=function(){return this.baseTexture.resolution},o.frame.get=function(){return this._frame},o.frame.set=function(i){this._frame=i,this.noFrame=!1;var o=i.x,a=i.y,h=i.width,c=i.height,l=o+h>this.baseTexture.width,m=a+c>this.baseTexture.height;if(l||m){var g=l&&m?"and":"or",_="X: "+o+" + "+h+" = "+(o+h)+" > "+this.baseTexture.width,x="Y: "+a+" + "+c+" = "+(a+c)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+_+" "+g+" "+x)}this.valid=h&&c&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=i),this.valid&&this.updateUvs()},o.rotate.get=function(){return this._rotate},o.rotate.set=function(i){this._rotate=i,this.valid&&this.updateUvs()},o.width.get=function(){return this.orig.width},o.height.get=function(){return this.orig.height},Object.defineProperties(Texture.prototype,o),Texture}(me.a);function core_es_removeAllHandlers(i){i.destroy=function _emptyDestroy(){},i.on=function _emptyOn(){},i.once=function _emptyOnce(){},i.emit=function _emptyEmit(){}}un.EMPTY=new un(new Vi),core_es_removeAllHandlers(un.EMPTY),core_es_removeAllHandlers(un.EMPTY.baseTexture),un.WHITE=function core_es_createWhiteTexture(){var i=document.createElement("canvas");i.width=16,i.height=16;var o=i.getContext("2d");return o.fillStyle="white",o.fillRect(0,0,16,16),new un(new Vi(new qi(i)))}(),core_es_removeAllHandlers(un.WHITE),core_es_removeAllHandlers(un.WHITE.baseTexture);var hn=function(i){function RenderTexture(o,a){var h=null;if(!(o instanceof nn)){var c=arguments[1],l=arguments[2],m=arguments[3],g=arguments[4];console.warn("Please use RenderTexture.create("+c+", "+l+") instead of the ctor directly."),h=arguments[0],a=null,o=new nn({width:c,height:l,scaleMode:m,resolution:g})}i.call(this,o,a),this.legacyRenderer=h,this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}return i&&(RenderTexture.__proto__=i),RenderTexture.prototype=Object.create(i&&i.prototype),RenderTexture.prototype.constructor=RenderTexture,RenderTexture.prototype.resize=function resize(i,o,a){void 0===a&&(a=!0),i=Math.ceil(i),o=Math.ceil(o),this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,a&&this.baseTexture.resize(i,o),this.updateUvs()},RenderTexture.prototype.setResolution=function setResolution(i){var o=this.baseTexture;o.resolution!==i&&(o.setResolution(i),this.resize(o.width,o.height,!1))},RenderTexture.create=function create(i){return"number"==typeof i&&(i={width:i,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new RenderTexture(new nn(i))},RenderTexture}(un),cn=function RenderTexturePool(i){this.texturePool={},this.textureOptions=i||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0};cn.prototype.createTexture=function createTexture(i,o){var a=new nn(Object.assign({width:i,height:o,resolution:1},this.textureOptions));return new hn(a)},cn.prototype.getOptimalTexture=function getOptimalTexture(i,o,a){void 0===a&&(a=1);var h=cn.SCREEN_KEY;i*=a,o*=a,this.enableFullScreen&&i===this._pixelsWidth&&o===this._pixelsHeight||(h=(65535&(i=utils_es_nextPow2(i)))<<16|65535&(o=utils_es_nextPow2(o))),this.texturePool[h]||(this.texturePool[h]=[]);var c=this.texturePool[h].pop();return c||(c=this.createTexture(i,o)),c.filterPoolKey=h,c.setResolution(a),c},cn.prototype.getFilterTexture=function getFilterTexture(i,o){var a=this.getOptimalTexture(i.width,i.height,o||i.resolution);return a.filterFrame=i.filterFrame,a},cn.prototype.returnTexture=function returnTexture(i){var o=i.filterPoolKey;i.filterFrame=null,this.texturePool[o].push(i)},cn.prototype.returnFilterTexture=function returnFilterTexture(i){this.returnTexture(i)},cn.prototype.clear=function clear(i){if(i=!1!==i)for(var o in this.texturePool){var a=this.texturePool[o];if(a)for(var h=0;h<a.length;h++)a[h].destroy(!0)}this.texturePool={}},cn.prototype.setScreenSize=function setScreenSize(i){if(i.width!==this._pixelsWidth||i.height!==this._pixelsHeight){var o=cn.SCREEN_KEY,a=this.texturePool[o];if(this.enableFullScreen=i.width>0&&i.height>0,a)for(var h=0;h<a.length;h++)a[h].destroy(!0);this.texturePool[o]=[],this._pixelsWidth=i.width,this._pixelsHeight=i.height}},cn.SCREEN_KEY="screen";var ln=function Attribute(i,o,a,h,c,l,m){void 0===a&&(a=!1),void 0===h&&(h=5126),this.buffer=i,this.size=o,this.normalized=a,this.type=h,this.stride=c,this.start=l,this.instance=m};ln.prototype.destroy=function destroy(){this.buffer=null},ln.from=function from(i,o,a,h,c){return new ln(i,o,a,h,c)};var dn=0,pn=function Buffer(i,o,a){void 0===o&&(o=!0),void 0===a&&(a=!1),this.data=i||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=a,this.static=o,this.id=dn++,this.disposeRunner=new Yr("disposeBuffer",2)};function lib_core_es_getBufferType(i){if(4===i.BYTES_PER_ELEMENT)return i instanceof Float32Array?"Float32Array":i instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===i.BYTES_PER_ELEMENT){if(i instanceof Uint16Array)return"Uint16Array"}else if(1===i.BYTES_PER_ELEMENT&&i instanceof Uint8Array)return"Uint8Array";return null}pn.prototype.update=function update(i){this.data=i||this.data,this._updateID++},pn.prototype.dispose=function dispose(){this.disposeRunner.run(this,!1)},pn.prototype.destroy=function destroy(){this.dispose(),this.data=null},pn.from=function from(i){return i instanceof Array&&(i=new Float32Array(i)),new pn(i)};var mn={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array},gn={5126:4,5123:2,5121:1},yn=0,_n={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},vn=function Geometry(i,o){void 0===i&&(i=[]),void 0===o&&(o={}),this.buffers=i,this.indexBuffer=null,this.attributes=o,this.glVertexArrayObjects={},this.id=yn++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Yr("disposeGeometry",2),this.refCount=0};vn.prototype.addAttribute=function addAttribute(i,o,a,h,c,l,m,g){if(void 0===h&&(h=!1),void 0===g&&(g=!1),!o)throw new Error("You must pass a buffer when creating an attribute");o.data||(o instanceof Array&&(o=new Float32Array(o)),o=new pn(o));var _=i.split("|");if(_.length>1){for(var x=0;x<_.length;x++)this.addAttribute(_[x],o,a,h,c);return this}var S=this.buffers.indexOf(o);return-1===S&&(this.buffers.push(o),S=this.buffers.length-1),this.attributes[i]=new ln(S,a,h,c,l,m,g),this.instanced=this.instanced||g,this},vn.prototype.getAttribute=function getAttribute(i){return this.attributes[i]},vn.prototype.getBuffer=function getBuffer(i){return this.buffers[this.getAttribute(i).buffer]},vn.prototype.addIndex=function addIndex(i){return i.data||(i instanceof Array&&(i=new Uint16Array(i)),i=new pn(i)),i.index=!0,this.indexBuffer=i,-1===this.buffers.indexOf(i)&&this.buffers.push(i),this},vn.prototype.getIndex=function getIndex(){return this.indexBuffer},vn.prototype.interleave=function interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var i,o=[],a=[],h=new pn;for(i in this.attributes){var c=this.attributes[i],l=this.buffers[c.buffer];o.push(l.data),a.push(c.size*gn[c.type]/4),c.buffer=0}for(h.data=function lib_core_es_interleaveTypedArrays(i,o){for(var a=0,h=0,c={},l=0;l<i.length;l++)h+=o[l],a+=i[l].length;for(var m=new ArrayBuffer(4*a),g=null,_=0,x=0;x<i.length;x++){var S=o[x],R=i[x],k=lib_core_es_getBufferType(R);c[k]||(c[k]=new mn[k](m)),g=c[k];for(var j=0;j<R.length;j++)g[(j/S|0)*h+_+j%S]=R[j];_+=S}return new Float32Array(m)}(o,a),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[h],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},vn.prototype.getSize=function getSize(){for(var i in this.attributes){var o=this.attributes[i];return this.buffers[o.buffer].data.length/(o.stride/4||o.size)}return 0},vn.prototype.dispose=function dispose(){this.disposeRunner.run(this,!1)},vn.prototype.destroy=function destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},vn.prototype.clone=function clone(){for(var i=new vn,o=0;o<this.buffers.length;o++)i.buffers[o]=new pn(this.buffers[o].data.slice());for(var a in this.attributes){var h=this.attributes[a];i.attributes[a]=new ln(h.buffer,h.size,h.normalized,h.type,h.stride,h.start,h.instance)}return this.indexBuffer&&(i.indexBuffer=i.buffers[this.buffers.indexOf(this.indexBuffer)],i.indexBuffer.index=!0),i},vn.merge=function merge(i){for(var o,a=new vn,h=[],c=[],l=[],m=0;m<i.length;m++){o=i[m];for(var g=0;g<o.buffers.length;g++)c[g]=c[g]||0,c[g]+=o.buffers[g].data.length,l[g]=0}for(var _=0;_<o.buffers.length;_++)h[_]=new(_n[lib_core_es_getBufferType(o.buffers[_].data)])(c[_]),a.buffers[_]=new pn(h[_]);for(var x=0;x<i.length;x++){o=i[x];for(var S=0;S<o.buffers.length;S++)h[S].set(o.buffers[S].data,l[S]),l[S]+=o.buffers[S].data.length}if(a.attributes=o.attributes,o.indexBuffer){a.indexBuffer=a.buffers[o.buffers.indexOf(o.indexBuffer)],a.indexBuffer.index=!0;for(var R=0,k=0,j=0,X=0,Y=0;Y<o.buffers.length;Y++)if(o.buffers[Y]!==o.indexBuffer){X=Y;break}for(var q in o.attributes){var Z=o.attributes[q];(0|Z.buffer)===X&&(k+=Z.size*gn[Z.type]/4)}for(var $=0;$<i.length;$++){for(var ee=i[$].indexBuffer.data,te=0;te<ee.length;te++)a.indexBuffer.data[te+j]+=R;R+=o.buffers[X].data.length/k,j+=ee.length}}return a};var xn=function(i){function Quad(){i.call(this),this.addAttribute("aVertexPosition",[0,0,1,0,1,1,0,1]).addIndex([0,1,3,2])}return i&&(Quad.__proto__=i),Quad.prototype=Object.create(i&&i.prototype),Quad.prototype.constructor=Quad,Quad}(vn),Sn=function(i){function QuadUv(){i.call(this),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new pn(this.vertices),this.uvBuffer=new pn(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}return i&&(QuadUv.__proto__=i),QuadUv.prototype=Object.create(i&&i.prototype),QuadUv.prototype.constructor=QuadUv,QuadUv.prototype.map=function map(i,o){var a=0,h=0;return this.uvs[0]=a,this.uvs[1]=h,this.uvs[2]=a+o.width/i.width,this.uvs[3]=h,this.uvs[4]=a+o.width/i.width,this.uvs[5]=h+o.height/i.height,this.uvs[6]=a,this.uvs[7]=h+o.height/i.height,a=o.x,h=o.y,this.vertices[0]=a,this.vertices[1]=h,this.vertices[2]=a+o.width,this.vertices[3]=h,this.vertices[4]=a+o.width,this.vertices[5]=h+o.height,this.vertices[6]=a,this.vertices[7]=h+o.height,this.invalidate(),this},QuadUv.prototype.invalidate=function invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},QuadUv}(vn),bn=0,wn=function UniformGroup(i,o){this.uniforms=i,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=bn++,this.static=!!o};wn.prototype.update=function update(){this.dirtyId++},wn.prototype.add=function add(i,o,a){this.uniforms[i]=new wn(o,a)},wn.from=function from(i,o){return new wn(i,o)};var Tn=function FilterState(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new zi,this.destinationFrame=new zi,this.filters=[]};Tn.prototype.clear=function clear(){this.target=null,this.filters=null,this.renderTexture=null};!function(i){function FilterSystem(o){i.call(this,o),this.defaultFilterStack=[{}],this.texturePool=new cn,this.texturePool.setScreenSize(o.view),this.statePool=[],this.quad=new xn,this.quadUv=new Sn,this.tempRect=new zi,this.activeState={},this.globalUniforms=new wn({outputFrame:this.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}i&&(FilterSystem.__proto__=i),FilterSystem.prototype=Object.create(i&&i.prototype),FilterSystem.prototype.constructor=FilterSystem,FilterSystem.prototype.push=function push(i,o){for(var a=this.renderer,h=this.defaultFilterStack,c=this.statePool.pop()||new Tn,l=o[0].resolution,m=o[0].padding,g=o[0].autoFit,_=o[0].legacy,x=1;x<o.length;x++){var S=o[x];l=Math.min(l,S.resolution),m=this.useMaxPadding?Math.max(m,S.padding):m+S.padding,g=g||S.autoFit,_=_||S.legacy}1===h.length&&(this.defaultFilterStack[0].renderTexture=a.renderTexture.current),h.push(c),c.resolution=l,c.legacy=_,c.target=i,c.sourceFrame.copyFrom(i.filterArea||i.getBounds(!0)),c.sourceFrame.pad(m),g&&c.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),c.sourceFrame.ceil(l),c.renderTexture=this.getOptimalFilterTexture(c.sourceFrame.width,c.sourceFrame.height,l),c.filters=o,c.destinationFrame.width=c.renderTexture.width,c.destinationFrame.height=c.renderTexture.height,c.renderTexture.filterFrame=c.sourceFrame,a.renderTexture.bind(c.renderTexture,c.sourceFrame),a.renderTexture.clear()},FilterSystem.prototype.pop=function pop(){var i=this.defaultFilterStack,o=i.pop(),a=o.filters;this.activeState=o;var h=this.globalUniforms.uniforms;h.outputFrame=o.sourceFrame,h.resolution=o.resolution;var c=h.inputSize,l=h.inputPixel,m=h.inputClamp;if(c[0]=o.destinationFrame.width,c[1]=o.destinationFrame.height,c[2]=1/c[0],c[3]=1/c[1],l[0]=c[0]*o.resolution,l[1]=c[1]*o.resolution,l[2]=1/l[0],l[3]=1/l[1],m[0]=.5*l[2],m[1]=.5*l[3],m[2]=o.sourceFrame.width*c[2]-.5*l[2],m[3]=o.sourceFrame.height*c[3]-.5*l[3],o.legacy){var g=h.filterArea;g[0]=o.destinationFrame.width,g[1]=o.destinationFrame.height,g[2]=o.sourceFrame.x,g[3]=o.sourceFrame.y,h.filterClamp=h.inputClamp}this.globalUniforms.update();var _=i[i.length-1];if(1===a.length)a[0].apply(this,o.renderTexture,_.renderTexture,!1,o),this.returnFilterTexture(o.renderTexture);else{var x=o.renderTexture,S=this.getOptimalFilterTexture(x.width,x.height,o.resolution);S.filterFrame=x.filterFrame;var R=0;for(R=0;R<a.length-1;++R){a[R].apply(this,x,S,!0,o);var k=x;x=S,S=k}a[R].apply(this,x,_.renderTexture,!1,o),this.returnFilterTexture(x),this.returnFilterTexture(S)}o.clear(),this.statePool.push(o)},FilterSystem.prototype.applyFilter=function applyFilter(i,o,a,h){var c=this.renderer;c.renderTexture.bind(a,a?a.filterFrame:null),h&&c.renderTexture.clear(),i.uniforms.uSampler=o,i.uniforms.filterGlobals=this.globalUniforms,c.state.set(i.state),c.shader.bind(i),i.legacy?(this.quadUv.map(o._frame,o.filterFrame),c.geometry.bind(this.quadUv),c.geometry.draw(Qr.TRIANGLES)):(c.geometry.bind(this.quad),c.geometry.draw(Qr.TRIANGLE_STRIP))},FilterSystem.prototype.calculateSpriteMatrix=function calculateSpriteMatrix(i,o){var a=this.activeState,h=a.sourceFrame,c=a.destinationFrame,l=o._texture.orig,m=i.set(c.width,0,0,c.height,h.x,h.y),g=o.worldTransform.copyTo(Ei.TEMP_MATRIX);return g.invert(),m.prepend(g),m.scale(1/l.width,1/l.height),m.translate(o.anchor.x,o.anchor.y),m},FilterSystem.prototype.destroy=function destroy(){this.texturePool.clear(!1)},FilterSystem.prototype.getOptimalFilterTexture=function getOptimalFilterTexture(i,o,a){return void 0===a&&(a=1),this.texturePool.getOptimalTexture(i,o,a)},FilterSystem.prototype.getFilterTexture=function getFilterTexture(i,o){if("number"==typeof i){var a=i;i=o,o=a}i=i||this.activeState.renderTexture;var h=this.texturePool.getOptimalTexture(i.width,i.height,o||i.resolution);return h.filterFrame=i.filterFrame,h},FilterSystem.prototype.returnFilterTexture=function returnFilterTexture(i){this.texturePool.returnTexture(i)},FilterSystem.prototype.emptyPool=function emptyPool(){this.texturePool.clear(!0)},FilterSystem.prototype.resize=function resize(){this.texturePool.setScreenSize(this.renderer.view)}}($i);var En=function ObjectRenderer(i){this.renderer=i};En.prototype.flush=function flush(){},En.prototype.destroy=function destroy(){this.renderer=null},En.prototype.start=function start(){},En.prototype.stop=function stop(){this.flush()},En.prototype.render=function render(i){};!function(i){function BatchSystem(o){i.call(this,o),this.emptyRenderer=new En(o),this.currentRenderer=this.emptyRenderer}i&&(BatchSystem.__proto__=i),BatchSystem.prototype=Object.create(i&&i.prototype),BatchSystem.prototype.constructor=BatchSystem,BatchSystem.prototype.setObjectRenderer=function setObjectRenderer(i){this.currentRenderer!==i&&(this.currentRenderer.stop(),this.currentRenderer=i,this.currentRenderer.start())},BatchSystem.prototype.flush=function flush(){this.setObjectRenderer(this.emptyRenderer)},BatchSystem.prototype.reset=function reset(){this.setObjectRenderer(this.emptyRenderer)},BatchSystem.prototype.copyBoundTextures=function copyBoundTextures(i,o){for(var a=this.renderer.texture.boundTextures,h=o-1;h>=0;--h)i[h]=a[h]||null,i[h]&&(i[h]._batchLocation=h)},BatchSystem.prototype.boundArray=function boundArray(i,o,a,h){for(var c=i.elements,l=i.ids,m=i.count,g=0,_=0;_<m;_++){var x=c[_],S=x._batchLocation;if(S>=0&&S<h&&o[S]===x)l[_]=S;else for(;g<h;){var R=o[g];if(!R||R._batchEnabled!==a||R._batchLocation!==g){l[_]=g,x._batchLocation=g,o[g]=x;break}g++}}}}($i);hi.PREFER_ENV=ui.any?qr.WEBGL:qr.WEBGL2,hi.STRICT_TEXTURE_CACHE=!1;var Cn=0,Pn=(function(i){function ContextSystem(o){i.call(this,o),this.webGLVersion=1,this.extensions={},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),o.view.addEventListener("webglcontextlost",this.handleContextLost,!1),o.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}i&&(ContextSystem.__proto__=i),ContextSystem.prototype=Object.create(i&&i.prototype),ContextSystem.prototype.constructor=ContextSystem;var o={isLost:{configurable:!0}};o.isLost.get=function(){return!this.gl||this.gl.isContextLost()},ContextSystem.prototype.contextChange=function contextChange(i){this.gl=i,this.renderer.gl=i,this.renderer.CONTEXT_UID=Cn++,i.isContextLost()&&i.getExtension("WEBGL_lose_context")&&i.getExtension("WEBGL_lose_context").restoreContext()},ContextSystem.prototype.initFromContext=function initFromContext(i){this.gl=i,this.validateContext(i),this.renderer.gl=i,this.renderer.CONTEXT_UID=Cn++,this.renderer.runners.contextChange.run(i)},ContextSystem.prototype.initFromOptions=function initFromOptions(i){var o=this.createContext(this.renderer.view,i);this.initFromContext(o)},ContextSystem.prototype.createContext=function createContext(i,o){var a;if(hi.PREFER_ENV>=qr.WEBGL2&&(a=i.getContext("webgl2",o)),a)this.webGLVersion=2;else if(this.webGLVersion=1,!(a=i.getContext("webgl",o)||i.getContext("experimental-webgl",o)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=a,this.getExtensions(),a},ContextSystem.prototype.getExtensions=function getExtensions(){var i=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:i.getExtension("WEBGL_draw_buffers"),depthTexture:i.getExtension("WEBGL_depth_texture"),loseContext:i.getExtension("WEBGL_lose_context"),vertexArrayObject:i.getExtension("OES_vertex_array_object")||i.getExtension("MOZ_OES_vertex_array_object")||i.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:i.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:i.getExtension("OES_element_index_uint"),floatTexture:i.getExtension("OES_texture_float"),floatTextureLinear:i.getExtension("OES_texture_float_linear"),textureHalfFloat:i.getExtension("OES_texture_half_float"),textureHalfFloatLinear:i.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:i.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:i.getExtension("EXT_color_buffer_float"),floatTextureLinear:i.getExtension("OES_texture_float_linear")})},ContextSystem.prototype.handleContextLost=function handleContextLost(i){i.preventDefault()},ContextSystem.prototype.handleContextRestored=function handleContextRestored(){this.renderer.runners.contextChange.run(this.gl)},ContextSystem.prototype.destroy=function destroy(){var i=this.renderer.view;i.removeEventListener("webglcontextlost",this.handleContextLost),i.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},ContextSystem.prototype.postrender=function postrender(){this.renderer.renderingToScreen&&this.gl.flush()},ContextSystem.prototype.validateContext=function validateContext(i){i.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")},Object.defineProperties(ContextSystem.prototype,o)}($i),function(i){function FramebufferSystem(o){i.call(this,o),this.managedFramebuffers=[],this.unknownFramebuffer=new tn(10,10)}i&&(FramebufferSystem.__proto__=i),FramebufferSystem.prototype=Object.create(i&&i.prototype),FramebufferSystem.prototype.constructor=FramebufferSystem;var o={size:{configurable:!0}};FramebufferSystem.prototype.contextChange=function contextChange(){var i=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new zi,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var o=this.renderer.context.extensions.drawBuffers,a=this.renderer.context.extensions.depthTexture;hi.PREFER_ENV===qr.WEBGL_LEGACY&&(o=null,a=null),o?i.drawBuffers=function(i){return o.drawBuffersWEBGL(i)}:(this.hasMRT=!1,i.drawBuffers=function(){}),a||(this.writeDepthTexture=!1)}},FramebufferSystem.prototype.bind=function bind(i,o){var a=this.gl;if(i){var h=i.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(i);this.current!==i&&(this.current=i,a.bindFramebuffer(a.FRAMEBUFFER,h.framebuffer)),h.dirtyId!==i.dirtyId&&(h.dirtyId=i.dirtyId,h.dirtyFormat!==i.dirtyFormat?(h.dirtyFormat=i.dirtyFormat,this.updateFramebuffer(i)):h.dirtySize!==i.dirtySize&&(h.dirtySize=i.dirtySize,this.resizeFramebuffer(i)));for(var c=0;c<i.colorTextures.length;c++)i.colorTextures[c].texturePart?this.renderer.texture.unbind(i.colorTextures[c].texture):this.renderer.texture.unbind(i.colorTextures[c]);i.depthTexture&&this.renderer.texture.unbind(i.depthTexture),o?this.setViewport(o.x,o.y,o.width,o.height):this.setViewport(0,0,i.width,i.height)}else this.current&&(this.current=null,a.bindFramebuffer(a.FRAMEBUFFER,null)),o?this.setViewport(o.x,o.y,o.width,o.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},FramebufferSystem.prototype.setViewport=function setViewport(i,o,a,h){var c=this.viewport;c.width===a&&c.height===h&&c.x===i&&c.y===o||(c.x=i,c.y=o,c.width=a,c.height=h,this.gl.viewport(i,o,a,h))},o.size.get=function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},FramebufferSystem.prototype.clear=function clear(i,o,a,h){var c=this.gl;c.clearColor(i,o,a,h),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},FramebufferSystem.prototype.initFramebuffer=function initFramebuffer(i){var o={framebuffer:this.gl.createFramebuffer(),stencil:null,dirtyId:0,dirtyFormat:0,dirtySize:0};return i.glFramebuffers[this.CONTEXT_UID]=o,this.managedFramebuffers.push(i),i.disposeRunner.add(this),o},FramebufferSystem.prototype.resizeFramebuffer=function resizeFramebuffer(i){var o=this.gl,a=i.glFramebuffers[this.CONTEXT_UID];a.stencil&&(o.bindRenderbuffer(o.RENDERBUFFER,a.stencil),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,i.width,i.height));for(var h=i.colorTextures,c=0;c<h.length;c++)this.renderer.texture.bind(h[c],0);i.depthTexture&&this.renderer.texture.bind(i.depthTexture,0)},FramebufferSystem.prototype.updateFramebuffer=function updateFramebuffer(i){var o=this.gl,a=i.glFramebuffers[this.CONTEXT_UID],h=i.colorTextures.length;o.drawBuffers||(h=Math.min(h,1));for(var c=[],l=0;l<h;l++){var m=i.colorTextures[l];m.texturePart?(this.renderer.texture.bind(m.texture,0),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0+l,o.TEXTURE_CUBE_MAP_NEGATIVE_X+m.side,m.texture._glTextures[this.CONTEXT_UID].texture,0)):(this.renderer.texture.bind(m,0),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0+l,o.TEXTURE_2D,m._glTextures[this.CONTEXT_UID].texture,0)),c.push(o.COLOR_ATTACHMENT0+l)}if(c.length>1&&o.drawBuffers(c),i.depthTexture&&this.writeDepthTexture){var g=i.depthTexture;this.renderer.texture.bind(g,0),o.framebufferTexture2D(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.TEXTURE_2D,g._glTextures[this.CONTEXT_UID].texture,0)}a.stencil||!i.stencil&&!i.depth||(a.stencil=o.createRenderbuffer(),o.bindRenderbuffer(o.RENDERBUFFER,a.stencil),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,i.width,i.height),i.depthTexture||o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,a.stencil))},FramebufferSystem.prototype.disposeFramebuffer=function disposeFramebuffer(i,o){var a=i.glFramebuffers[this.CONTEXT_UID],h=this.gl;if(a){delete i.glFramebuffers[this.CONTEXT_UID];var c=this.managedFramebuffers.indexOf(i);c>=0&&this.managedFramebuffers.splice(c,1),i.disposeRunner.remove(this),o||(h.deleteFramebuffer(a.framebuffer),a.stencil&&h.deleteRenderbuffer(a.stencil))}},FramebufferSystem.prototype.disposeAll=function disposeAll(i){var o=this.managedFramebuffers;this.managedFramebuffers=[];for(var a=0;a<o.length;a++)this.disposeFramebuffer(o[a],i)},FramebufferSystem.prototype.forceStencil=function forceStencil(){var i=this.current;if(i){var o=i.glFramebuffers[this.CONTEXT_UID];if(o&&!o.stencil){i.enableStencil();var a=i.width,h=i.height,c=this.gl,l=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,l),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,a,h),o.stencil=l,c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,l)}}},FramebufferSystem.prototype.reset=function reset(){this.current=this.unknownFramebuffer,this.viewport=new zi},Object.defineProperties(FramebufferSystem.prototype,o)}($i),function GLBuffer(i){this.buffer=i,this.updateID=-1,this.byteLength=-1,this.refCount=0}),On={5126:4,5123:2,5121:1},An=(function(i){function GeometrySystem(o){i.call(this,o),this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.boundBuffers={},this.managedGeometries={},this.managedBuffers={}}i&&(GeometrySystem.__proto__=i),GeometrySystem.prototype=Object.create(i&&i.prototype),GeometrySystem.prototype.constructor=GeometrySystem,GeometrySystem.prototype.contextChange=function contextChange(){this.disposeAll(!0);var i=this.gl=this.renderer.gl,o=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,!i.createVertexArray){var a=this.renderer.context.extensions.vertexArrayObject;hi.PREFER_ENV===qr.WEBGL_LEGACY&&(a=null),a?(i.createVertexArray=function(){return a.createVertexArrayOES()},i.bindVertexArray=function(i){return a.bindVertexArrayOES(i)},i.deleteVertexArray=function(i){return a.deleteVertexArrayOES(i)}):(this.hasVao=!1,i.createVertexArray=function(){},i.bindVertexArray=function(){},i.deleteVertexArray=function(){})}if(!i.vertexAttribDivisor){var h=i.getExtension("ANGLE_instanced_arrays");h?(i.vertexAttribDivisor=function(i,o){return h.vertexAttribDivisorANGLE(i,o)},i.drawElementsInstanced=function(i,o,a,c,l){return h.drawElementsInstancedANGLE(i,o,a,c,l)},i.drawArraysInstanced=function(i,o,a,c){return h.drawArraysInstancedANGLE(i,o,a,c)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===o.webGLVersion||!!o.extensions.uint32ElementIndex},GeometrySystem.prototype.bind=function bind(i,o){o=o||this.renderer.shader.shader;var a=this.gl,h=i.glVertexArrayObjects[this.CONTEXT_UID];h||(this.managedGeometries[i.id]=i,i.disposeRunner.add(this),i.glVertexArrayObjects[this.CONTEXT_UID]=h={});var c=h[o.program.id]||this.initGeometryVao(i,o.program);this._activeGeometry=i,this._activeVao!==c&&(this._activeVao=c,this.hasVao?a.bindVertexArray(c):this.activateVao(i,o.program)),this.updateBuffers()},GeometrySystem.prototype.reset=function reset(){this.unbind()},GeometrySystem.prototype.updateBuffers=function updateBuffers(){for(var i=this._activeGeometry,o=this.gl,a=0;a<i.buffers.length;a++){var h=i.buffers[a],c=h._glBuffers[this.CONTEXT_UID];if(h._updateID!==c.updateID){c.updateID=h._updateID;var l=h.index?o.ELEMENT_ARRAY_BUFFER:o.ARRAY_BUFFER;if(o.bindBuffer(l,c.buffer),this._boundBuffer=c,c.byteLength>=h.data.byteLength)o.bufferSubData(l,0,h.data);else{var m=h.static?o.STATIC_DRAW:o.DYNAMIC_DRAW;c.byteLength=h.data.byteLength,o.bufferData(l,h.data,m)}}}},GeometrySystem.prototype.checkCompatibility=function checkCompatibility(i,o){var a=i.attributes,h=o.attributeData;for(var c in h)if(!a[c])throw new Error('shader and geometry incompatible, geometry missing the "'+c+'" attribute')},GeometrySystem.prototype.getSignature=function getSignature(i,o){var a=i.attributes,h=o.attributeData,c=["g",i.id];for(var l in a)h[l]&&c.push(l);return c.join("-")},GeometrySystem.prototype.initGeometryVao=function initGeometryVao(i,o){this.checkCompatibility(i,o);var a=this.gl,h=this.CONTEXT_UID,c=this.getSignature(i,o),l=i.glVertexArrayObjects[this.CONTEXT_UID],m=l[c];if(m)return l[o.id]=m,m;var g=i.buffers,_=i.attributes,x={},S={};for(var R in g)x[R]=0,S[R]=0;for(var k in _)!_[k].size&&o.attributeData[k]?_[k].size=o.attributeData[k].size:_[k].size||console.warn("PIXI Geometry attribute '"+k+"' size cannot be determined (likely the bound shader does not have the attribute)"),x[_[k].buffer]+=_[k].size*On[_[k].type];for(var j in _){var X=_[j],Y=X.size;void 0===X.stride&&(x[X.buffer]===Y*On[X.type]?X.stride=0:X.stride=x[X.buffer]),void 0===X.start&&(X.start=S[X.buffer],S[X.buffer]+=Y*On[X.type])}m=a.createVertexArray(),a.bindVertexArray(m);for(var q=0;q<g.length;q++){var Z=g[q];Z._glBuffers[h]||(Z._glBuffers[h]=new Pn(a.createBuffer()),this.managedBuffers[Z.id]=Z,Z.disposeRunner.add(this)),Z._glBuffers[h].refCount++}return this.activateVao(i,o),this._activeVao=m,l[o.id]=m,l[c]=m,m},GeometrySystem.prototype.disposeBuffer=function disposeBuffer(i,o){if(this.managedBuffers[i.id]){delete this.managedBuffers[i.id];var a=i._glBuffers[this.CONTEXT_UID],h=this.gl;i.disposeRunner.remove(this),a&&(o||h.deleteBuffer(a.buffer),delete i._glBuffers[this.CONTEXT_UID])}},GeometrySystem.prototype.disposeGeometry=function disposeGeometry(i,o){if(this.managedGeometries[i.id]){delete this.managedGeometries[i.id];var a=i.glVertexArrayObjects[this.CONTEXT_UID],h=this.gl,c=i.buffers;if(i.disposeRunner.remove(this),a){for(var l=0;l<c.length;l++){var m=c[l]._glBuffers[this.CONTEXT_UID];m.refCount--,0!==m.refCount||o||this.disposeBuffer(c[l],o)}if(!o)for(var g in a)if("g"===g[0]){var _=a[g];this._activeVao===_&&this.unbind(),h.deleteVertexArray(_)}delete i.glVertexArrayObjects[this.CONTEXT_UID]}}},GeometrySystem.prototype.disposeAll=function disposeAll(i){for(var o=Object.keys(this.managedGeometries),a=0;a<o.length;a++)this.disposeGeometry(this.managedGeometries[o[a]],i);o=Object.keys(this.managedBuffers);for(var h=0;h<o.length;h++)this.disposeBuffer(this.managedBuffers[o[h]],i)},GeometrySystem.prototype.activateVao=function activateVao(i,o){var a=this.gl,h=this.CONTEXT_UID,c=i.buffers,l=i.attributes;i.indexBuffer&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,i.indexBuffer._glBuffers[h].buffer);var m=null;for(var g in l){var _=l[g],x=c[_.buffer]._glBuffers[h];if(o.attributeData[g]){m!==x&&(a.bindBuffer(a.ARRAY_BUFFER,x.buffer),m=x);var S=o.attributeData[g].location;if(a.enableVertexAttribArray(S),a.vertexAttribPointer(S,_.size,_.type||a.FLOAT,_.normalized,_.stride,_.start),_.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");a.vertexAttribDivisor(S,1)}}}},GeometrySystem.prototype.draw=function draw(i,o,a,h){var c=this.gl,l=this._activeGeometry;if(l.indexBuffer){var m=l.indexBuffer.data.BYTES_PER_ELEMENT,g=2===m?c.UNSIGNED_SHORT:c.UNSIGNED_INT;2===m||4===m&&this.canUseUInt32ElementIndex?l.instanced?c.drawElementsInstanced(i,o||l.indexBuffer.data.length,g,(a||0)*m,h||1):c.drawElements(i,o||l.indexBuffer.data.length,g,(a||0)*m):console.warn("unsupported index buffer type: uint32")}else l.instanced?c.drawArraysInstanced(i,a,o||l.getSize(),h||1):c.drawArrays(i,a,o||l.getSize());return this},GeometrySystem.prototype.unbind=function unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}}($i),function MaskData(i){this.type=si.NONE,this.autoDetect=!0,this.maskObject=i||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null});function core_es_compileProgram(i,o,a,h){var c=core_es_compileShader(i,i.VERTEX_SHADER,o),l=core_es_compileShader(i,i.FRAGMENT_SHADER,a),m=i.createProgram();if(i.attachShader(m,c),i.attachShader(m,l),h)for(var g in h)i.bindAttribLocation(m,h[g],g);return i.linkProgram(m),i.getProgramParameter(m,i.LINK_STATUS)||(i.getShaderParameter(c,i.COMPILE_STATUS)||(console.warn(o),console.error(i.getShaderInfoLog(c))),i.getShaderParameter(l,i.COMPILE_STATUS)||(console.warn(a),console.error(i.getShaderInfoLog(l))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",i.getProgramParameter(m,i.VALIDATE_STATUS)),console.error("gl.getError()",i.getError()),""!==i.getProgramInfoLog(m)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",i.getProgramInfoLog(m)),i.deleteProgram(m),m=null),i.deleteShader(c),i.deleteShader(l),m}function core_es_compileShader(i,o,a){var h=i.createShader(o);return i.shaderSource(h,a),i.compileShader(h),h}function lib_core_es_defaultValue(i,o){switch(i){case"float":return 0;case"vec2":return new Float32Array(2*o);case"vec3":return new Float32Array(3*o);case"vec4":return new Float32Array(4*o);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*o);case"ivec3":return new Int32Array(3*o);case"ivec4":return new Int32Array(4*o);case"bool":return!1;case"bvec2":return core_es_booleanArray(2*o);case"bvec3":return core_es_booleanArray(3*o);case"bvec4":return core_es_booleanArray(4*o);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function core_es_booleanArray(i){for(var o=new Array(i),a=0;a<o.length;a++)o[a]=!1;return o}An.prototype.reset=function reset(){this.pooled&&(this.maskObject=null,this.type=si.NONE,this.autoDetect=!0),this._target=null},An.prototype.copyCountersOrReset=function copyCountersOrReset(i){i?(this._stencilCounter=i._stencilCounter,this._scissorCounter=i._scissorCounter,this._scissorRect=i._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)};var Rn,In={},Mn=In;function core_es_getTestContext(){if(Mn===In||Mn&&Mn.isContextLost()){var i,o=document.createElement("canvas");hi.PREFER_ENV>=qr.WEBGL2&&(i=o.getContext("webgl2",{})),i||((i=o.getContext("webgl",{})||o.getContext("experimental-webgl",{}))?i.getExtension("WEBGL_draw_buffers"):i=null),Mn=i}return Mn}function core_es_setPrecision(i,o,a){if("precision"!==i.substring(0,9)){var h=o;return o===ai.HIGH&&a!==ai.HIGH&&(h=ai.MEDIUM),"precision "+h+" float;\n"+i}return a!==ai.HIGH&&"precision highp"===i.substring(0,15)?i.replace("precision highp","precision mediump"):i}var kn={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function core_es_mapSize(i){return kn[i]}var Fn=null,zn={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray"};function core_es_mapType(i,o){if(!Fn){var a=Object.keys(zn);Fn={};for(var h=0;h<a.length;++h){var c=a[h];Fn[i[c]]=zn[c]}}return Fn[o]}var Dn,Ln={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Bn={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},Nn=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function core_es_generateIfTestSrc(i){for(var o="",a=0;a<i;++a)a>0&&(o+="\nelse "),a<i-1&&(o+="if(test == "+a+".0){}");return o}var Gn=0,Un={},jn=function Program(i,o,a){void 0===a&&(a="pixi-shader"),this.id=Gn++,this.vertexSrc=i||Program.defaultVertexSrc,this.fragmentSrc=o||Program.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(a=a.replace(/\s+/g,"-"),Un[a]?(Un[a]++,a+="-"+Un[a]):Un[a]=1,this.vertexSrc="#define SHADER_NAME "+a+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+a+"\n"+this.fragmentSrc,this.vertexSrc=core_es_setPrecision(this.vertexSrc,hi.PRECISION_VERTEX,ai.HIGH),this.fragmentSrc=core_es_setPrecision(this.fragmentSrc,hi.PRECISION_FRAGMENT,function core_es_getMaxFragmentPrecision(){if(!Rn){Rn=ai.MEDIUM;var i=core_es_getTestContext();if(i&&i.getShaderPrecisionFormat){var o=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);Rn=o.precision?ai.HIGH:ai.MEDIUM}}return Rn}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null},Wn={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};jn.prototype.extractData=function extractData(i,o){var a=core_es_getTestContext();if(a){var h=core_es_compileProgram(a,i,o);this.attributeData=this.getAttributeData(h,a),this.uniformData=this.getUniformData(h,a),a.deleteProgram(h)}else this.uniformData={},this.attributeData={}},jn.prototype.getAttributeData=function getAttributeData(i,o){for(var a={},h=[],c=o.getProgramParameter(i,o.ACTIVE_ATTRIBUTES),l=0;l<c;l++){var m=o.getActiveAttrib(i,l),g=core_es_mapType(o,m.type),_={type:g,name:m.name,size:core_es_mapSize(g),location:0};a[m.name]=_,h.push(_)}h.sort((function(i,o){return i.name>o.name?1:-1}));for(var x=0;x<h.length;x++)h[x].location=x;return a},jn.prototype.getUniformData=function getUniformData(i,o){for(var a={},h=o.getProgramParameter(i,o.ACTIVE_UNIFORMS),c=0;c<h;c++){var l=o.getActiveUniform(i,c),m=l.name.replace(/\[.*?\]/,""),g=l.name.match(/\[.*?\]/,""),_=core_es_mapType(o,l.type);a[m]={type:_,size:l.size,isArray:g,value:lib_core_es_defaultValue(_,l.size)}}return a},Wn.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},Wn.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},jn.from=function from(i,o,a){var h=i+o,c=fi[h];return c||(fi[h]=c=new jn(i,o,a)),c},Object.defineProperties(jn,Wn);var Xn=function Shader(i,o){for(var a in this.program=i,this.uniformGroup=o?o instanceof wn?o:new wn(o):new wn({}),i.uniformData)this.uniformGroup.uniforms[a]instanceof Array&&(this.uniformGroup.uniforms[a]=new Float32Array(this.uniformGroup.uniforms[a]))},Hn={uniforms:{configurable:!0}};Xn.prototype.checkUniformExists=function checkUniformExists(i,o){if(o.uniforms[i])return!0;for(var a in o.uniforms){var h=o.uniforms[a];if(h.group&&this.checkUniformExists(i,h))return!0}return!1},Xn.prototype.destroy=function destroy(){this.uniformGroup=null},Hn.uniforms.get=function(){return this.uniformGroup.uniforms},Xn.from=function from(i,o,a){var h=jn.from(i,o);return new Xn(h,a)},Object.defineProperties(Xn.prototype,Hn);var Vn=function State(){this.data=0,this.blendMode=Zr.NORMAL,this.polygonOffset=0,this.blend=!0},Yn={blend:{configurable:!0},offsets:{configurable:!0},culling:{configurable:!0},depthTest:{configurable:!0},clockwiseFrontFace:{configurable:!0},blendMode:{configurable:!0},polygonOffset:{configurable:!0}};Yn.blend.get=function(){return!!(1&this.data)},Yn.blend.set=function(i){!!(1&this.data)!==i&&(this.data^=1)},Yn.offsets.get=function(){return!!(2&this.data)},Yn.offsets.set=function(i){!!(2&this.data)!==i&&(this.data^=2)},Yn.culling.get=function(){return!!(4&this.data)},Yn.culling.set=function(i){!!(4&this.data)!==i&&(this.data^=4)},Yn.depthTest.get=function(){return!!(8&this.data)},Yn.depthTest.set=function(i){!!(8&this.data)!==i&&(this.data^=8)},Yn.clockwiseFrontFace.get=function(){return!!(16&this.data)},Yn.clockwiseFrontFace.set=function(i){!!(16&this.data)!==i&&(this.data^=16)},Yn.blendMode.get=function(){return this._blendMode},Yn.blendMode.set=function(i){this.blend=i!==Zr.NONE,this._blendMode=i},Yn.polygonOffset.get=function(){return this._polygonOffset},Yn.polygonOffset.set=function(i){this.offsets=!!i,this._polygonOffset=i},Vn.for2d=function for2d(){var i=new Vn;return i.depthTest=!1,i.blend=!0,i},Object.defineProperties(Vn.prototype,Yn);var qn=function(i){function Filter(o,a,h){var c=jn.from(o||Filter.defaultVertexSrc,a||Filter.defaultFragmentSrc);i.call(this,c,h),this.padding=0,this.resolution=hi.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0,this.legacy=!!this.program.attributeData.aTextureCoord,this.state=new Vn}i&&(Filter.__proto__=i),Filter.prototype=Object.create(i&&i.prototype),Filter.prototype.constructor=Filter;var o={blendMode:{configurable:!0}},a={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};return Filter.prototype.apply=function apply(i,o,a,h,c){i.applyFilter(this,o,a,h,c)},o.blendMode.get=function(){return this.state.blendMode},o.blendMode.set=function(i){this.state.blendMode=i},a.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},a.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},Object.defineProperties(Filter.prototype,o),Object.defineProperties(Filter,a),Filter}(Xn);qn.SOURCE_KEY_MAP={};var Kn=new Ei,Zn=function TextureMatrix(i,o){this._texture=i,this.mapCoord=new Ei,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._updateID=-1,this.clampOffset=0,this.clampMargin=void 0===o?.5:o,this.isSimple=!1},Qn={texture:{configurable:!0}};Qn.texture.get=function(){return this._texture},Qn.texture.set=function(i){this._texture=i,this._updateID=-1},Zn.prototype.multiplyUvs=function multiplyUvs(i,o){void 0===o&&(o=i);for(var a=this.mapCoord,h=0;h<i.length;h+=2){var c=i[h],l=i[h+1];o[h]=c*a.a+l*a.c+a.tx,o[h+1]=c*a.b+l*a.d+a.ty}return o},Zn.prototype.update=function update(i){var o=this._texture;if(!o||!o.valid)return!1;if(!i&&this._updateID===o._updateID)return!1;this._updateID=o._updateID;var a=o._uvs;this.mapCoord.set(a.x1-a.x0,a.y1-a.y0,a.x3-a.x0,a.y3-a.y0,a.x0,a.y0);var h=o.orig,c=o.trim;c&&(Kn.set(h.width/c.width,0,0,h.height/c.height,-c.x/c.width,-c.y/c.height),this.mapCoord.append(Kn));var l=o.baseTexture,m=this.uClampFrame,g=this.clampMargin/l.resolution,_=this.clampOffset;return m[0]=(o._frame.x+g+_)/l.width,m[1]=(o._frame.y+g+_)/l.height,m[2]=(o._frame.x+o._frame.width-g+_)/l.width,m[3]=(o._frame.y+o._frame.height-g+_)/l.height,this.uClampOffset[0]=_/l.realWidth,this.uClampOffset[1]=_/l.realHeight,this.isSimple=o._frame.width===l.width&&o._frame.height===l.height&&0===o.rotate,!0},Object.defineProperties(Zn.prototype,Qn);var Jn=function(i){function SpriteMaskFilter(o){var a=new Ei;i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n"),o.renderable=!1,this.maskSprite=o,this.maskMatrix=a}return i&&(SpriteMaskFilter.__proto__=i),SpriteMaskFilter.prototype=Object.create(i&&i.prototype),SpriteMaskFilter.prototype.constructor=SpriteMaskFilter,SpriteMaskFilter.prototype.apply=function apply(i,o,a,h){var c=this.maskSprite,l=this.maskSprite.texture;l.valid&&(l.transform||(l.transform=new Zn(l,0)),l.transform.update(),this.uniforms.npmAlpha=l.baseTexture.alphaMode?0:1,this.uniforms.mask=l,this.uniforms.otherMatrix=i.calculateSpriteMatrix(this.maskMatrix,c).prepend(l.transform.mapCoord),this.uniforms.alpha=c.worldAlpha,this.uniforms.maskClamp=l.transform.uClampFrame,i.applyFilter(this,o,a,h))},SpriteMaskFilter}(qn),$n=(function(i){function MaskSystem(o){i.call(this,o),this.scissorRenderTarget=null,this.enableScissor=!1,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}i&&(MaskSystem.__proto__=i),MaskSystem.prototype=Object.create(i&&i.prototype),MaskSystem.prototype.constructor=MaskSystem,MaskSystem.prototype.setMaskStack=function setMaskStack(i){this.maskStack=i,this.renderer.scissor.setMaskStack(i),this.renderer.stencil.setMaskStack(i)},MaskSystem.prototype.push=function push(i,o){if(!o.isMaskData){var a=this.maskDataPool.pop()||new An;a.pooled=!0,a.maskObject=o,o=a}switch(o.autoDetect&&this.detect(o),o.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),o._target=i,o.type){case si.SCISSOR:this.maskStack.push(o),this.renderer.scissor.push(o);break;case si.STENCIL:this.maskStack.push(o),this.renderer.stencil.push(o);break;case si.SPRITE:o.copyCountersOrReset(null),this.pushSpriteMask(o),this.maskStack.push(o)}},MaskSystem.prototype.pop=function pop(i){var o=this.maskStack.pop();if(o&&o._target===i){switch(o.type){case si.SCISSOR:this.renderer.scissor.pop();break;case si.STENCIL:this.renderer.stencil.pop(o.maskObject);break;case si.SPRITE:this.popSpriteMask()}o.reset(),o.pooled&&this.maskDataPool.push(o)}},MaskSystem.prototype.detect=function detect(i){var o=i.maskObject;if(o.isSprite)i.type=si.SPRITE;else if(i.type=si.STENCIL,this.enableScissor&&o.isFastRect&&o.isFastRect()){var a=o.worldTransform,h=Math.atan2(a.b,a.a),c=Math.atan2(a.d,a.c);h=Math.round(h*(180/Math.PI)*100),c=((c=Math.round(c*(180/Math.PI)*100)-h)%18e3+18e3)%18e3,0==(h=(h%9e3+9e3)%9e3)&&9e3===c&&(i.type=si.SCISSOR)}},MaskSystem.prototype.pushSpriteMask=function pushSpriteMask(i){var o=i.maskObject,a=i._target,h=this.alphaMaskPool[this.alphaMaskIndex];h||(h=this.alphaMaskPool[this.alphaMaskIndex]=[new Jn(o)]),h[0].resolution=this.renderer.resolution,h[0].maskSprite=o;var c=a.filterArea;a.filterArea=o.getBounds(!0),this.renderer.filter.push(a,h),a.filterArea=c,this.alphaMaskIndex++},MaskSystem.prototype.popSpriteMask=function popSpriteMask(){this.renderer.filter.pop(),this.alphaMaskIndex--}}($i),function(i){function AbstractMaskSystem(o){i.call(this,o),this.maskStack=[],this.glConst=0}return i&&(AbstractMaskSystem.__proto__=i),AbstractMaskSystem.prototype=Object.create(i&&i.prototype),AbstractMaskSystem.prototype.constructor=AbstractMaskSystem,AbstractMaskSystem.prototype.getStackLength=function getStackLength(){return this.maskStack.length},AbstractMaskSystem.prototype.setMaskStack=function setMaskStack(i){var o=this.renderer.gl,a=this.getStackLength();this.maskStack=i;var h=this.getStackLength();h!==a&&(0===h?o.disable(this.glConst):(o.enable(this.glConst),this._useCurrent()))},AbstractMaskSystem.prototype._useCurrent=function _useCurrent(){},AbstractMaskSystem.prototype.destroy=function destroy(){i.prototype.destroy.call(this,this),this.maskStack=null},AbstractMaskSystem}($i)),eo=(function(i){function ScissorSystem(o){i.call(this,o),this.glConst=WebGLRenderingContext.SCISSOR_TEST}i&&(ScissorSystem.__proto__=i),ScissorSystem.prototype=Object.create(i&&i.prototype),ScissorSystem.prototype.constructor=ScissorSystem,ScissorSystem.prototype.getStackLength=function getStackLength(){var i=this.maskStack[this.maskStack.length-1];return i?i._scissorCounter:0},ScissorSystem.prototype.push=function push(i){var o=i.maskObject;o.renderable=!0;var a=i._scissorRect,h=o.getBounds(!0),c=this.renderer.gl;o.renderable=!1,a?h.fit(a):c.enable(c.SCISSOR_TEST),i._scissorCounter++,i._scissorRect=h,this._useCurrent()},ScissorSystem.prototype.pop=function pop(){var i=this.renderer.gl;this.getStackLength()>0?this._useCurrent():i.disable(i.SCISSOR_TEST)},ScissorSystem.prototype._useCurrent=function _useCurrent(){var i=this.maskStack[this.maskStack.length-1]._scissorRect,o=this.renderer.renderTexture.current,a=this.renderer.projection,h=a.transform,c=a.sourceFrame,l=a.destinationFrame,m=o?o.resolution:this.renderer.resolution,g=(i.x-c.x)*m+l.x,_=(i.y-c.y)*m+l.y,x=i.width*m,S=i.height*m;h&&(g+=h.tx*m,_+=h.ty*m),o||(_=this.renderer.height-S-_),this.renderer.gl.scissor(g,_,x,S)}}($n),function(i){function StencilSystem(o){i.call(this,o),this.glConst=WebGLRenderingContext.STENCIL_TEST}i&&(StencilSystem.__proto__=i),StencilSystem.prototype=Object.create(i&&i.prototype),StencilSystem.prototype.constructor=StencilSystem,StencilSystem.prototype.getStackLength=function getStackLength(){var i=this.maskStack[this.maskStack.length-1];return i?i._stencilCounter:0},StencilSystem.prototype.push=function push(i){var o=i.maskObject,a=this.renderer.gl,h=i._stencilCounter;0===h&&(this.renderer.framebuffer.forceStencil(),a.enable(a.STENCIL_TEST)),i._stencilCounter++,a.colorMask(!1,!1,!1,!1),a.stencilFunc(a.EQUAL,h,this._getBitwiseMask()),a.stencilOp(a.KEEP,a.KEEP,a.INCR),o.renderable=!0,o.render(this.renderer),this.renderer.batch.flush(),o.renderable=!1,this._useCurrent()},StencilSystem.prototype.pop=function pop(i){var o=this.renderer.gl;0===this.getStackLength()?(o.disable(o.STENCIL_TEST),o.clear(o.STENCIL_BUFFER_BIT),o.clearStencil(0)):(o.colorMask(!1,!1,!1,!1),o.stencilOp(o.KEEP,o.KEEP,o.DECR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent())},StencilSystem.prototype._useCurrent=function _useCurrent(){var i=this.renderer.gl;i.colorMask(!0,!0,!0,!0),i.stencilFunc(i.EQUAL,this.getStackLength(),this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)},StencilSystem.prototype._getBitwiseMask=function _getBitwiseMask(){return(1<<this.getStackLength())-1}}($n),function(i){function ProjectionSystem(o){i.call(this,o),this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Ei,this.transform=null}i&&(ProjectionSystem.__proto__=i),ProjectionSystem.prototype=Object.create(i&&i.prototype),ProjectionSystem.prototype.constructor=ProjectionSystem,ProjectionSystem.prototype.update=function update(i,o,a,h){this.destinationFrame=i||this.destinationFrame||this.defaultFrame,this.sourceFrame=o||this.sourceFrame||i,this.calculateProjection(this.destinationFrame,this.sourceFrame,a,h),this.transform&&this.projectionMatrix.append(this.transform);var c=this.renderer;c.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,c.globalUniforms.update(),c.shader.shader&&c.shader.syncUniformGroup(c.shader.shader.uniforms.globals)},ProjectionSystem.prototype.calculateProjection=function calculateProjection(i,o,a,h){var c=this.projectionMatrix;h?(c.a=1/i.width*2*a,c.d=-1/i.height*2*a,c.tx=-1-o.x*c.a,c.ty=1-o.y*c.d):(c.a=1/i.width*2*a,c.d=1/i.height*2*a,c.tx=-1-o.x*c.a,c.ty=-1-o.y*c.d)},ProjectionSystem.prototype.setTransform=function setTransform(){}}($i),new zi),to=(function(i){function RenderTextureSystem(o){i.call(this,o),this.clearColor=o._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new zi,this.destinationFrame=new zi}i&&(RenderTextureSystem.__proto__=i),RenderTextureSystem.prototype=Object.create(i&&i.prototype),RenderTextureSystem.prototype.constructor=RenderTextureSystem,RenderTextureSystem.prototype.bind=function bind(i,o,a){void 0===i&&(i=null),this.current=i;var h,c=this.renderer;if(i){var l=i.baseTexture;h=l.resolution,a||(eo.width=l.realWidth,eo.height=l.realHeight,a=eo),o||(o=a),this.renderer.framebuffer.bind(l.framebuffer,a),this.renderer.projection.update(a,o,h,!1),this.renderer.mask.setMaskStack(l.maskStack)}else h=this.renderer.resolution,a||(eo.width=c.width,eo.height=c.height,a=eo),o||(o=a),c.framebuffer.bind(null,a),this.renderer.projection.update(a,o,h,!0),this.renderer.mask.setMaskStack(this.defaultMaskStack);this.sourceFrame.copyFrom(o),this.destinationFrame.x=a.x/h,this.destinationFrame.y=a.y/h,this.destinationFrame.width=a.width/h,this.destinationFrame.height=a.height/h,o===a&&this.sourceFrame.copyFrom(this.destinationFrame)},RenderTextureSystem.prototype.clear=function clear(i){i=this.current?i||this.current.baseTexture.clearColor:i||this.clearColor,this.renderer.framebuffer.clear(i[0],i[1],i[2],i[3])},RenderTextureSystem.prototype.resize=function resize(){this.bind(null)},RenderTextureSystem.prototype.reset=function reset(){this.bind(null)}}($i),function GLProgram(i,o){this.program=i,this.uniformData=o,this.uniformGroups={}});to.prototype.destroy=function destroy(){this.uniformData=null,this.uniformGroups=null,this.program=null};var ro=0,io={textureCount:0},no=(function(i){function ShaderSystem(o){i.call(this,o),this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this.id=ro++}i&&(ShaderSystem.__proto__=i),ShaderSystem.prototype=Object.create(i&&i.prototype),ShaderSystem.prototype.constructor=ShaderSystem,ShaderSystem.prototype.systemCheck=function systemCheck(){if(!function core_es_unsafeEvalSupported(){if("boolean"==typeof Dn)return Dn;try{var i=new Function("param1","param2","param3","return param1[param2] === param3;");Dn=!0===i({a:"b"},"a","b")}catch(i){Dn=!1}return Dn}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},ShaderSystem.prototype.contextChange=function contextChange(i){this.gl=i,this.reset()},ShaderSystem.prototype.bind=function bind(i,o){i.uniforms.globals=this.renderer.globalUniforms;var a=i.program,h=a.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(i);return this.shader=i,this.program!==a&&(this.program=a,this.gl.useProgram(h.program)),o||(io.textureCount=0,this.syncUniformGroup(i.uniformGroup,io)),h},ShaderSystem.prototype.setUniforms=function setUniforms(i){var o=this.shader.program,a=o.glPrograms[this.renderer.CONTEXT_UID];o.syncUniforms(a.uniformData,i,this.renderer)},ShaderSystem.prototype.syncUniformGroup=function syncUniformGroup(i,o){var a=this.getglProgram();i.static&&i.dirtyId===a.uniformGroups[i.id]||(a.uniformGroups[i.id]=i.dirtyId,this.syncUniforms(i,a,o))},ShaderSystem.prototype.syncUniforms=function syncUniforms(i,o,a){(i.syncUniforms[this.shader.program.id]||this.createSyncGroups(i))(o.uniformData,i.uniforms,this.renderer,a)},ShaderSystem.prototype.createSyncGroups=function createSyncGroups(i){var o=this.getSignature(i,this.shader.program.uniformData);return this.cache[o]||(this.cache[o]=function core_es_generateUniformsSync(i,o){var a="var v = null;\n    var cv = null\n    var t = 0;\n    var gl = renderer.gl\n    ";for(var h in i.uniforms){var c=o[h];c?"float"===c.type&&1===c.size?a+="\n            if(uv."+h+" !== ud."+h+".value)\n            {\n                ud."+h+".value = uv."+h+"\n                gl.uniform1f(ud."+h+".location, uv."+h+")\n            }\n":"sampler2D"!==c.type&&"samplerCube"!==c.type&&"sampler2DArray"!==c.type||1!==c.size||c.isArray?"mat3"===c.type&&1===c.size?void 0!==i.uniforms[h].a?a+="\n                gl.uniformMatrix3fv(ud."+h+".location, false, uv."+h+".toArray(true));\n                \n":a+="\n                gl.uniformMatrix3fv(ud."+h+".location, false, uv."+h+");\n                \n":"vec2"===c.type&&1===c.size?void 0!==i.uniforms[h].x?a+="\n                cv = ud."+h+".value;\n                v = uv."+h+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud."+h+".location, v.x, v.y);\n                }\n":a+="\n                cv = ud."+h+".value;\n                v = uv."+h+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud."+h+".location, v[0], v[1]);\n                }\n                \n":"vec4"===c.type&&1===c.size?void 0!==i.uniforms[h].width?a+="\n                cv = ud."+h+".value;\n                v = uv."+h+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud."+h+".location, v.x, v.y, v.width, v.height)\n                }\n":a+="\n                cv = ud."+h+".value;\n                v = uv."+h+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud."+h+".location, v[0], v[1], v[2], v[3])\n                }\n                \n":a+="\n            cv = ud."+h+".value;\n            v = uv."+h+";\n            "+(1===c.size?Ln:Bn)[c.type].replace("location","ud."+h+".location")+";\n":a+="\n\n            t = syncData.textureCount++;\n\n            renderer.texture.bind(uv."+h+", t);\n            \n            if(ud."+h+".value !== t)\n            {\n                ud."+h+".value = t;\n                gl.uniform1i(ud."+h+".location, t);\n; // eslint-disable-line max-len\n            }\n":i.uniforms[h].group&&(a+="\n                    renderer.shader.syncUniformGroup(uv."+h+", syncData);\n                ")}return new Function("ud","uv","renderer","syncData",a)}(i,this.shader.program.uniformData)),i.syncUniforms[this.shader.program.id]=this.cache[o],i.syncUniforms[this.shader.program.id]},ShaderSystem.prototype.getSignature=function getSignature(i,o){var a=i.uniforms,h=[];for(var c in a)h.push(c),o[c]&&h.push(o[c].type);return h.join("-")},ShaderSystem.prototype.getglProgram=function getglProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},ShaderSystem.prototype.generateShader=function generateShader(i){var o=this.gl,a=i.program,h={};for(var c in a.attributeData)h[c]=a.attributeData[c].location;var l=core_es_compileProgram(o,a.vertexSrc,a.fragmentSrc,h),m={};for(var g in a.uniformData){var _=a.uniformData[g];m[g]={location:o.getUniformLocation(l,g),value:lib_core_es_defaultValue(_.type,_.size)}}var x=new to(l,m);return a.glPrograms[this.renderer.CONTEXT_UID]=x,x},ShaderSystem.prototype.reset=function reset(){this.program=null,this.shader=null},ShaderSystem.prototype.destroy=function destroy(){this.destroyed=!0}}($i),function(i){function StateSystem(o){i.call(this,o),this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Zr.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.checks=[],this.defaultState=new Vn,this.defaultState.blend=!0,this.defaultState.depth=!0}i&&(StateSystem.__proto__=i),StateSystem.prototype=Object.create(i&&i.prototype),StateSystem.prototype.constructor=StateSystem,StateSystem.prototype.contextChange=function contextChange(i){this.gl=i,this.blendModes=function core_es_mapWebGLBlendModesToPixi(i,o){return void 0===o&&(o=[]),o[Zr.NORMAL]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Zr.ADD]=[i.ONE,i.ONE],o[Zr.MULTIPLY]=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Zr.SCREEN]=[i.ONE,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Zr.OVERLAY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Zr.DARKEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Zr.LIGHTEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Zr.COLOR_DODGE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Zr.COLOR_BURN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Zr.HARD_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Zr.SOFT_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Zr.DIFFERENCE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Zr.EXCLUSION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Zr.HUE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Zr.SATURATION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Zr.COLOR]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Zr.LUMINOSITY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Zr.NONE]=[0,0],o[Zr.NORMAL_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Zr.ADD_NPM]=[i.SRC_ALPHA,i.ONE,i.ONE,i.ONE],o[Zr.SCREEN_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],o[Zr.SRC_IN]=[i.DST_ALPHA,i.ZERO],o[Zr.SRC_OUT]=[i.ONE_MINUS_DST_ALPHA,i.ZERO],o[Zr.SRC_ATOP]=[i.DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],o[Zr.DST_OVER]=[i.ONE_MINUS_DST_ALPHA,i.ONE],o[Zr.DST_IN]=[i.ZERO,i.SRC_ALPHA],o[Zr.DST_OUT]=[i.ZERO,i.ONE_MINUS_SRC_ALPHA],o[Zr.DST_ATOP]=[i.ONE_MINUS_DST_ALPHA,i.SRC_ALPHA],o[Zr.XOR]=[i.ONE_MINUS_DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],o[Zr.SUBTRACT]=[i.ONE,i.ONE,i.ONE,i.ONE,i.FUNC_REVERSE_SUBTRACT,i.FUNC_ADD],o}(i),this.set(this.defaultState),this.reset()},StateSystem.prototype.set=function set(i){if(i=i||this.defaultState,this.stateId!==i.data){for(var o=this.stateId^i.data,a=0;o;)1&o&&this.map[a].call(this,!!(i.data&1<<a)),o>>=1,a++;this.stateId=i.data}for(var h=0;h<this.checks.length;h++)this.checks[h](this,i)},StateSystem.prototype.forceState=function forceState(i){i=i||this.defaultState;for(var o=0;o<this.map.length;o++)this.map[o].call(this,!!(i.data&1<<o));for(var a=0;a<this.checks.length;a++)this.checks[a](this,i);this.stateId=i.data},StateSystem.prototype.setBlend=function setBlend(i){this.updateCheck(StateSystem.checkBlendMode,i),this.gl[i?"enable":"disable"](this.gl.BLEND)},StateSystem.prototype.setOffset=function setOffset(i){this.updateCheck(StateSystem.checkPolygonOffset,i),this.gl[i?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},StateSystem.prototype.setDepthTest=function setDepthTest(i){this.gl[i?"enable":"disable"](this.gl.DEPTH_TEST)},StateSystem.prototype.setCullFace=function setCullFace(i){this.gl[i?"enable":"disable"](this.gl.CULL_FACE)},StateSystem.prototype.setFrontFace=function setFrontFace(i){this.gl.frontFace(this.gl[i?"CW":"CCW"])},StateSystem.prototype.setBlendMode=function setBlendMode(i){if(i!==this.blendMode){this.blendMode=i;var o=this.blendModes[i],a=this.gl;2===o.length?a.blendFunc(o[0],o[1]):a.blendFuncSeparate(o[0],o[1],o[2],o[3]),6===o.length?(this._blendEq=!0,a.blendEquationSeparate(o[4],o[5])):this._blendEq&&(this._blendEq=!1,a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD))}},StateSystem.prototype.setPolygonOffset=function setPolygonOffset(i,o){this.gl.polygonOffset(i,o)},StateSystem.prototype.reset=function reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(0),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},StateSystem.prototype.updateCheck=function updateCheck(i,o){var a=this.checks.indexOf(i);o&&-1===a?this.checks.push(i):o||-1===a||this.checks.splice(a,1)},StateSystem.checkBlendMode=function checkBlendMode(i,o){i.setBlendMode(o.blendMode)},StateSystem.checkPolygonOffset=function checkPolygonOffset(i,o){i.setPolygonOffset(o.polygonOffset,0)}}($i),function(i){function TextureGCSystem(o){i.call(this,o),this.count=0,this.checkCount=0,this.maxIdle=hi.GC_MAX_IDLE,this.checkCountMax=hi.GC_MAX_CHECK_COUNT,this.mode=hi.GC_MODE}i&&(TextureGCSystem.__proto__=i),TextureGCSystem.prototype=Object.create(i&&i.prototype),TextureGCSystem.prototype.constructor=TextureGCSystem,TextureGCSystem.prototype.postrender=function postrender(){this.renderer.renderingToScreen&&(this.count++,this.mode!==oi.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},TextureGCSystem.prototype.run=function run(){for(var i=this.renderer.texture,o=i.managedTextures,a=!1,h=0;h<o.length;h++){var c=o[h];!c.framebuffer&&this.count-c.touched>this.maxIdle&&(i.destroyTexture(c,!0),o[h]=null,a=!0)}if(a){for(var l=0,m=0;m<o.length;m++)null!==o[m]&&(o[l++]=o[m]);o.length=l}},TextureGCSystem.prototype.unload=function unload(i){var o=this.renderer.textureSystem;i._texture&&i._texture._glRenderTargets&&o.destroyTexture(i._texture);for(var a=i.children.length-1;a>=0;a--)this.unload(i.children[a])}}($i),function GLTexture(i){this.texture=i,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121});(function(i){function TextureSystem(o){i.call(this,o),this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Vi}i&&(TextureSystem.__proto__=i),TextureSystem.prototype=Object.create(i&&i.prototype),TextureSystem.prototype.constructor=TextureSystem,TextureSystem.prototype.contextChange=function contextChange(){var i=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var o=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=o;for(var a=0;a<o;a++)this.boundTextures[a]=null;this.emptyTextures={};var h=new no(i.createTexture());i.bindTexture(i.TEXTURE_2D,h.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[i.TEXTURE_2D]=h,this.emptyTextures[i.TEXTURE_CUBE_MAP]=new no(i.createTexture()),i.bindTexture(i.TEXTURE_CUBE_MAP,this.emptyTextures[i.TEXTURE_CUBE_MAP].texture);for(var c=0;c<6;c++)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,null);i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MIN_FILTER,i.LINEAR);for(var l=0;l<this.boundTextures.length;l++)this.bind(null,l)},TextureSystem.prototype.bind=function bind(i,o){void 0===o&&(o=0);var a=this.gl;if(i){if((i=i.baseTexture||i).valid){i.touched=this.renderer.textureGC.count;var h=i._glTextures[this.CONTEXT_UID]||this.initTexture(i);this.boundTextures[o]!==i&&(this.currentLocation!==o&&(this.currentLocation=o,a.activeTexture(a.TEXTURE0+o)),a.bindTexture(i.target,h.texture)),h.dirtyId!==i.dirtyId&&(this.currentLocation!==o&&(this.currentLocation=o,a.activeTexture(a.TEXTURE0+o)),this.updateTexture(i)),this.boundTextures[o]=i}}else this.currentLocation!==o&&(this.currentLocation=o,a.activeTexture(a.TEXTURE0+o)),a.bindTexture(a.TEXTURE_2D,this.emptyTextures[a.TEXTURE_2D].texture),this.boundTextures[o]=null},TextureSystem.prototype.reset=function reset(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]=this.unknownTexture},TextureSystem.prototype.unbind=function unbind(i){var o=this.gl,a=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var h=0;h<a.length;h++)a[h]===this.unknownTexture&&this.bind(null,h)}for(var c=0;c<a.length;c++)a[c]===i&&(this.currentLocation!==c&&(o.activeTexture(o.TEXTURE0+c),this.currentLocation=c),o.bindTexture(o.TEXTURE_2D,this.emptyTextures[i.target].texture),a[c]=null)},TextureSystem.prototype.initTexture=function initTexture(i){var o=new no(this.gl.createTexture());return o.dirtyId=-1,i._glTextures[this.CONTEXT_UID]=o,this.managedTextures.push(i),i.on("dispose",this.destroyTexture,this),o},TextureSystem.prototype.initTextureType=function initTextureType(i,o){if(o.internalFormat=i.format,o.type=i.type,2===this.webGLVersion){var a=this.renderer.gl;i.type===a.FLOAT&&i.format===a.RGBA&&(o.internalFormat=a.RGBA32F),i.type===ei.HALF_FLOAT&&(o.type=a.HALF_FLOAT),o.type===a.HALF_FLOAT&&i.format===a.RGBA&&(o.internalFormat=a.RGBA16F)}},TextureSystem.prototype.updateTexture=function updateTexture(i){var o=i._glTextures[this.CONTEXT_UID];if(o){var a=this.renderer;if(this.initTextureType(i,o),i.resource&&i.resource.upload(a,i,o));else{var h=i.realWidth,c=i.realHeight,l=a.gl;(o.width!==h||o.height!==c||o.dirtyId<0)&&(o.width=h,o.height=c,l.texImage2D(i.target,0,o.internalFormat,h,c,0,i.format,o.type,null))}i.dirtyStyleId!==o.dirtyStyleId&&this.updateTextureStyle(i),o.dirtyId=i.dirtyId}},TextureSystem.prototype.destroyTexture=function destroyTexture(i,o){var a=this.gl;if((i=i.baseTexture||i)._glTextures[this.CONTEXT_UID]&&(this.unbind(i),a.deleteTexture(i._glTextures[this.CONTEXT_UID].texture),i.off("dispose",this.destroyTexture,this),delete i._glTextures[this.CONTEXT_UID],!o)){var h=this.managedTextures.indexOf(i);-1!==h&&utils_es_removeItems(this.managedTextures,h,1)}},TextureSystem.prototype.updateTextureStyle=function updateTextureStyle(i){var o=i._glTextures[this.CONTEXT_UID];o&&(i.mipmap!==ii.POW2&&2===this.webGLVersion||i.isPowerOfTwo?o.mipmap=i.mipmap>=1:o.mipmap=0,2===this.webGLVersion||i.isPowerOfTwo?o.wrapMode=i.wrapMode:o.wrapMode=ri.CLAMP,i.resource&&i.resource.style(this.renderer,i,o)||this.setStyle(i,o),o.dirtyStyleId=i.dirtyStyleId)},TextureSystem.prototype.setStyle=function setStyle(i,o){var a=this.gl;if(o.mipmap&&a.generateMipmap(i.target),a.texParameteri(i.target,a.TEXTURE_WRAP_S,o.wrapMode),a.texParameteri(i.target,a.TEXTURE_WRAP_T,o.wrapMode),o.mipmap){a.texParameteri(i.target,a.TEXTURE_MIN_FILTER,i.scaleMode===ti.LINEAR?a.LINEAR_MIPMAP_LINEAR:a.NEAREST_MIPMAP_NEAREST);var h=this.renderer.context.extensions.anisotropicFiltering;if(h&&i.anisotropicLevel>0&&i.scaleMode===ti.LINEAR){var c=Math.min(i.anisotropicLevel,a.getParameter(h.MAX_TEXTURE_MAX_ANISOTROPY_EXT));a.texParameterf(i.target,h.TEXTURE_MAX_ANISOTROPY_EXT,c)}}else a.texParameteri(i.target,a.TEXTURE_MIN_FILTER,i.scaleMode===ti.LINEAR?a.LINEAR:a.NEAREST);a.texParameteri(i.target,a.TEXTURE_MAG_FILTER,i.scaleMode===ti.LINEAR?a.LINEAR:a.NEAREST)}})($i),new Ei;me.a;var oo=function BatchDrawCall(){this.texArray=null,this.blend=0,this.type=Qr.TRIANGLES,this.start=0,this.size=0,this.data=null},ao=function BatchTextureArray(){this.elements=[],this.ids=[],this.count=0};ao.prototype.clear=function clear(){for(var i=0;i<this.count;i++)this.elements[i]=null;this.count=0};var so=function ViewableBuffer(i){this.rawBinaryData=new ArrayBuffer(i),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)},uo={int8View:{configurable:!0},uint8View:{configurable:!0},int16View:{configurable:!0},uint16View:{configurable:!0},int32View:{configurable:!0}};uo.int8View.get=function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},uo.uint8View.get=function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},uo.int16View.get=function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},uo.uint16View.get=function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},uo.int32View.get=function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},so.prototype.view=function view(i){return this[i+"View"]},so.prototype.destroy=function destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},so.sizeOf=function sizeOf(i){switch(i){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(i+" isn't a valid view type")}},Object.defineProperties(so.prototype,uo);var ho=function(i){function AbstractBatchRenderer(o){i.call(this,o),this.shaderGenerator=null,this.geometryClass=null,this.vertexSize=null,this.state=Vn.for2d(),this.size=4*hi.SPRITE_BATCH_SIZE,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),o.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}return i&&(AbstractBatchRenderer.__proto__=i),AbstractBatchRenderer.prototype=Object.create(i&&i.prototype),AbstractBatchRenderer.prototype.constructor=AbstractBatchRenderer,AbstractBatchRenderer.prototype.contextChange=function contextChange(){var i=this.renderer.gl;hi.PREFER_ENV===qr.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),hi.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function core_es_checkMaxIfStatementsInShader(i,o){if(0===i)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var a=o.createShader(o.FRAGMENT_SHADER);;){var h=Nn.replace(/%forloop%/gi,core_es_generateIfTestSrc(i));if(o.shaderSource(a,h),o.compileShader(a),o.getShaderParameter(a,o.COMPILE_STATUS))break;i=i/2|0}return i}(this.MAX_TEXTURES,i)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var o=0;o<this._packedGeometryPoolSize;o++)this._packedGeometries[o]=new this.geometryClass;this.initFlushBuffers()},AbstractBatchRenderer.prototype.initFlushBuffers=function initFlushBuffers(){for(var i=AbstractBatchRenderer._drawCallPool,o=AbstractBatchRenderer._textureArrayPool,a=this.size/4,h=Math.floor(a/this.MAX_TEXTURES)+1;i.length<a;)i.push(new oo);for(;o.length<h;)o.push(new ao);for(var c=0;c<this.MAX_TEXTURES;c++)this._tempBoundTextures[c]=null},AbstractBatchRenderer.prototype.onPrerender=function onPrerender(){this._flushId=0},AbstractBatchRenderer.prototype.render=function render(i){i._texture.valid&&(this._vertexCount+i.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=i.vertexData.length/2,this._indexCount+=i.indices.length,this._bufferedTextures[this._bufferSize]=i._texture.baseTexture,this._bufferedElements[this._bufferSize++]=i)},AbstractBatchRenderer.prototype.buildTexturesAndDrawCalls=function buildTexturesAndDrawCalls(){var i=this._bufferedTextures,o=this.MAX_TEXTURES,a=AbstractBatchRenderer._textureArrayPool,h=this.renderer.batch,c=this._tempBoundTextures,l=this.renderer.textureGC.count,m=++Vi._globalBatch,g=0,_=a[0],x=0;h.copyBoundTextures(c,o);for(var S=0;S<this._bufferSize;++S){var R=i[S];i[S]=null,R._batchEnabled!==m&&(_.count>=o&&(h.boundArray(_,c,m,o),this.buildDrawCalls(_,x,S),x=S,_=a[++g],++m),R._batchEnabled=m,R.touched=l,_.elements[_.count++]=R)}_.count>0&&(h.boundArray(_,c,m,o),this.buildDrawCalls(_,x,this._bufferSize),++g,++m);for(var k=0;k<c.length;k++)c[k]=null;Vi._globalBatch=m},AbstractBatchRenderer.prototype.buildDrawCalls=function buildDrawCalls(i,o,a){var h=this._bufferedElements,c=this._attributeBuffer,l=this._indexBuffer,m=this.vertexSize,g=AbstractBatchRenderer._drawCallPool,_=this._dcIndex,x=this._aIndex,S=this._iIndex,R=g[_];R.start=this._iIndex,R.texArray=i;for(var k=o;k<a;++k){var j=h[k],X=j._texture.baseTexture,Y=ci[X.alphaMode?1:0][j.blendMode];h[k]=null,o<k&&R.blend!==Y&&(R.size=S-R.start,o=k,(R=g[++_]).texArray=i,R.start=S),this.packInterleavedGeometry(j,c,l,x,S),x+=j.vertexData.length/2*m,S+=j.indices.length,R.blend=Y}o<a&&(R.size=S-R.start,++_),this._dcIndex=_,this._aIndex=x,this._iIndex=S},AbstractBatchRenderer.prototype.bindAndClearTexArray=function bindAndClearTexArray(i){for(var o=this.renderer.texture,a=0;a<i.count;a++)o.bind(i.elements[a],i.ids[a]),i.elements[a]=null;i.count=0},AbstractBatchRenderer.prototype.updateGeometry=function updateGeometry(){var i=this._packedGeometries,o=this._attributeBuffer,a=this._indexBuffer;hi.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(o.rawBinaryData),i[this._flushId]._indexBuffer.update(a),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(o.rawBinaryData),i[this._flushId]._indexBuffer.update(a),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},AbstractBatchRenderer.prototype.drawBatches=function drawBatches(){for(var i=this._dcIndex,o=this.renderer,a=o.gl,h=o.state,c=AbstractBatchRenderer._drawCallPool,l=null,m=0;m<i;m++){var g=c[m],_=g.texArray,x=g.type,S=g.size,R=g.start,k=g.blend;l!==_&&(l=_,this.bindAndClearTexArray(_)),this.state.blendMode=k,h.set(this.state),a.drawElements(x,S,a.UNSIGNED_SHORT,2*R)}},AbstractBatchRenderer.prototype.flush=function flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},AbstractBatchRenderer.prototype.start=function start(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),hi.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},AbstractBatchRenderer.prototype.stop=function stop(){this.flush()},AbstractBatchRenderer.prototype.destroy=function destroy(){for(var o=0;o<this._packedGeometryPoolSize;o++)this._packedGeometries[o]&&this._packedGeometries[o].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),i.prototype.destroy.call(this)},AbstractBatchRenderer.prototype.getAttributeBuffer=function getAttributeBuffer(i){var o=utils_es_nextPow2(Math.ceil(i/8)),a=utils_es_log2(o),h=8*o;this._aBuffers.length<=a&&(this._iBuffers.length=a+1);var c=this._aBuffers[h];return c||(this._aBuffers[h]=c=new so(h*this.vertexSize*4)),c},AbstractBatchRenderer.prototype.getIndexBuffer=function getIndexBuffer(i){var o=utils_es_nextPow2(Math.ceil(i/12)),a=utils_es_log2(o),h=12*o;this._iBuffers.length<=a&&(this._iBuffers.length=a+1);var c=this._iBuffers[a];return c||(this._iBuffers[a]=c=new Uint16Array(h)),c},AbstractBatchRenderer.prototype.packInterleavedGeometry=function packInterleavedGeometry(i,o,a,h,c){for(var l=o.uint32View,m=o.float32View,g=h/this.vertexSize,_=i.uvs,x=i.indices,S=i.vertexData,R=i._texture.baseTexture._batchLocation,k=Math.min(i.worldAlpha,1),j=k<1&&i._texture.baseTexture.alphaMode?function utils_es_premultiplyTint(i,o){if(1===o)return(255*o<<24)+i;if(0===o)return 0;var a=i>>16&255,h=i>>8&255,c=255&i;return(255*o<<24)+((a=a*o+.5|0)<<16)+((h=h*o+.5|0)<<8)+(c*o+.5|0)}(i._tintRGB,k):i._tintRGB+(255*k<<24),X=0;X<S.length;X+=2)m[h++]=S[X],m[h++]=S[X+1],m[h++]=_[X],m[h++]=_[X+1],l[h++]=j,m[h++]=R;for(var Y=0;Y<x.length;Y++)a[c++]=g+x[Y]},AbstractBatchRenderer}(En);ho._drawCallPool=[],ho._textureArrayPool=[];var co=function BatchShaderGenerator(i,o){if(this.vertexSrc=i,this.fragTemplate=o,this.programCache={},this.defaultGroupCache={},o.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(o.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')};co.prototype.generateShader=function generateShader(i){if(!this.programCache[i]){for(var o=new Int32Array(i),a=0;a<i;a++)o[a]=a;this.defaultGroupCache[i]=wn.from({uSamplers:o},!0);var h=this.fragTemplate;h=(h=h.replace(/%count%/gi,""+i)).replace(/%forloop%/gi,this.generateSampleSrc(i)),this.programCache[i]=new jn(this.vertexSrc,h)}var c={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ei,default:this.defaultGroupCache[i]};return new Xn(this.programCache[i],c)},co.prototype.generateSampleSrc=function generateSampleSrc(i){var o="";o+="\n",o+="\n";for(var a=0;a<i;a++)a>0&&(o+="\nelse "),a<i-1&&(o+="if(vTextureId < "+a+".5)"),o+="\n{",o+="\n\tcolor = texture2D(uSamplers["+a+"], vTextureCoord);",o+="\n}";return(o+="\n")+"\n"};var lo=function(i){function BatchGeometry(o){void 0===o&&(o=!1),i.call(this),this._buffer=new pn(null,o,!1),this._indexBuffer=new pn(null,o,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,ei.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,ei.FLOAT).addAttribute("aColor",this._buffer,4,!0,ei.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,ei.FLOAT).addIndex(this._indexBuffer)}return i&&(BatchGeometry.__proto__=i),BatchGeometry.prototype=Object.create(i&&i.prototype),BatchGeometry.prototype.constructor=BatchGeometry,BatchGeometry}(vn),po="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",fo="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",mo=function BatchPluginFactory(){},go={defaultVertexSrc:{configurable:!0},defaultFragmentTemplate:{configurable:!0}};mo.create=function create(i){var o=Object.assign({vertex:po,fragment:fo,geometryClass:lo,vertexSize:6},i),a=o.vertex,h=o.fragment,c=o.vertexSize,l=o.geometryClass;return function(i){function BatchPlugin(o){i.call(this,o),this.shaderGenerator=new co(a,h),this.geometryClass=l,this.vertexSize=c}return i&&(BatchPlugin.__proto__=i),BatchPlugin.prototype=Object.create(i&&i.prototype),BatchPlugin.prototype.constructor=BatchPlugin,BatchPlugin}(ho)},go.defaultVertexSrc.get=function(){return po},go.defaultFragmentTemplate.get=function(){return fo},Object.defineProperties(mo,go),mo.create();var yo=function(i){function GlowFilter(o){var a=Object.assign({},GlowFilter.defaults,o),h=a.distance,c=a.outerStrength,l=a.innerStrength,m=a.color,g=a.knockout,_=a.quality;h=Math.round(h),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float outerStrength;\nuniform float innerStrength;\n\nuniform vec4 glowColor;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform bool knockout;\n\nconst float PI = 3.14159265358979323846264;\n\nconst float DIST = __DIST__;\nconst float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);\nconst float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);\n\nconst float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n\n    float totalAlpha = 0.0;\n\n    vec2 direction;\n    vec2 displaced;\n    vec4 curColor;\n\n    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {\n       direction = vec2(cos(angle), sin(angle)) * px;\n\n       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {\n           displaced = clamp(vTextureCoord + direction * \n                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);\n\n           curColor = texture2D(uSampler, displaced);\n\n           totalAlpha += (DIST - curDistance) * curColor.a;\n       }\n    }\n    \n    curColor = texture2D(uSampler, vTextureCoord);\n\n    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);\n\n    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;\n    float innerGlowStrength = min(1.0, innerGlowAlpha);\n    \n    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);\n\n    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);\n    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);\n\n    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;\n    \n    if (knockout) {\n      float resultAlpha = outerGlowAlpha + innerGlowAlpha;\n      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);\n    }\n    else {\n      gl_FragColor = innerColor + outerGlowColor;\n    }\n}\n".replace(/__ANGLE_STEP_SIZE__/gi,""+(1/_/h).toFixed(7)).replace(/__DIST__/gi,h.toFixed(0)+".0")),this.uniforms.glowColor=new Float32Array([0,0,0,1]),Object.assign(this,{color:m,outerStrength:c,innerStrength:l,padding:h,knockout:g})}i&&(GlowFilter.__proto__=i),GlowFilter.prototype=Object.create(i&&i.prototype),GlowFilter.prototype.constructor=GlowFilter;var o={color:{configurable:!0},outerStrength:{configurable:!0},innerStrength:{configurable:!0},knockout:{configurable:!0}};return o.color.get=function(){return function utils_es_rgb2hex(i){return(255*i[0]<<16)+(255*i[1]<<8)+(255*i[2]|0)}(this.uniforms.glowColor)},o.color.set=function(i){!function utils_es_hex2rgb(i,o){return(o=o||[])[0]=(i>>16&255)/255,o[1]=(i>>8&255)/255,o[2]=(255&i)/255,o}(i,this.uniforms.glowColor)},o.outerStrength.get=function(){return this.uniforms.outerStrength},o.outerStrength.set=function(i){this.uniforms.outerStrength=i},o.innerStrength.get=function(){return this.uniforms.innerStrength},o.innerStrength.set=function(i){this.uniforms.innerStrength=i},o.knockout.get=function(){return this.uniforms.knockout},o.knockout.set=function(i){this.uniforms.knockout=i},Object.defineProperties(GlowFilter.prototype,o),GlowFilter}(qn);yo.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1};var _o="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",vo="vec3 mod289(vec3 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 mod289(vec4 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 permute(vec4 x)\n{\n    return mod289(((x * 34.0) + 1.0) * x);\n}\nvec4 taylorInvSqrt(vec4 r)\n{\n    return 1.79284291400159 - 0.85373472095314 * r;\n}\nvec3 fade(vec3 t)\n{\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\n    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n    Pi0 = mod289(Pi0);\n    Pi1 = mod289(Pi1);\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = Pi0.zzzz;\n    vec4 iz1 = Pi1.zzzz;\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n    vec4 gx0 = ixy0 * (1.0 / 7.0);\n    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n    gx0 = fract(gx0);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n    vec4 sz0 = step(gz0, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n    vec4 gx1 = ixy1 * (1.0 / 7.0);\n    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n    gx1 = fract(gx1);\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n    vec4 sz1 = step(gz1, vec4(0.0));\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n    g000 *= norm0.x;\n    g010 *= norm0.y;\n    g100 *= norm0.z;\n    g110 *= norm0.w;\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n    g001 *= norm1.x;\n    g011 *= norm1.y;\n    g101 *= norm1.z;\n    g111 *= norm1.w;\n    float n000 = dot(g000, Pf0);\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n    float n111 = dot(g111, Pf1);\n    vec3 fade_xyz = fade(Pf0);\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n    return 2.2 * n_xyz;\n}\nfloat turb(vec3 P, vec3 rep, float lacunarity, float gain)\n{\n    float sum = 0.0;\n    float sc = 1.0;\n    float totalgain = 1.0;\n    for (float i = 0.0; i < 6.0; i++)\n    {\n        sum += totalgain * pnoise(P * sc, rep);\n        sc *= lacunarity;\n        totalgain *= gain;\n    }\n    return abs(sum);\n}\n",xo="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform vec2 light;\nuniform bool parallel;\nuniform float aspect;\n\nuniform float gain;\nuniform float lacunarity;\nuniform float time;\n\n${perlin}\n\nvoid main(void) {\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    float d;\n\n    if (parallel) {\n        float _cos = light.x;\n        float _sin = light.y;\n        d = (_cos * coord.x) + (_sin * coord.y * aspect);\n    } else {\n        float dx = coord.x - light.x / dimensions.x;\n        float dy = (coord.y - light.y / dimensions.y) * aspect;\n        float dis = sqrt(dx * dx + dy * dy) + 0.00001;\n        d = dy / dis;\n    }\n\n    vec3 dir = vec3(d, d, 0.0);\n\n    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);\n    noise = mix(noise, 0.0, 0.3);\n    //fade vertically.\n    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);\n    mist.a = 1.0;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;\n}\n",So=function(i){function GodrayFilter(o){i.call(this,_o,xo.replace("${perlin}",vo)),this.uniforms.dimensions=new Float32Array(2),"number"==typeof o&&(console.warn("GodrayFilter now uses options instead of (angle, gain, lacunarity, time)"),o={angle:o},void 0!==arguments[1]&&(o.gain=arguments[1]),void 0!==arguments[2]&&(o.lacunarity=arguments[2]),void 0!==arguments[3]&&(o.time=arguments[3])),o=Object.assign({angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0]},o),this._angleLight=new l.g,this.angle=o.angle,this.gain=o.gain,this.lacunarity=o.lacunarity,this.parallel=o.parallel,this.center=o.center,this.time=o.time}i&&(GodrayFilter.__proto__=i),GodrayFilter.prototype=Object.create(i&&i.prototype),GodrayFilter.prototype.constructor=GodrayFilter;var o={angle:{configurable:!0},gain:{configurable:!0},lacunarity:{configurable:!0}};return GodrayFilter.prototype.apply=function apply(i,o,a,h){var c=o.filterFrame,l=c.width,m=c.height;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=l,this.uniforms.dimensions[1]=m,this.uniforms.aspect=m/l,this.uniforms.time=this.time,i.applyFilter(this,o,a,h)},o.angle.get=function(){return this._angle},o.angle.set=function(i){this._angle=i;var o=i*l.b;this._angleLight.x=Math.cos(o),this._angleLight.y=Math.sin(o)},o.gain.get=function(){return this.uniforms.gain},o.gain.set=function(i){this.uniforms.gain=i},o.lacunarity.get=function(){return this.uniforms.lacunarity},o.lacunarity.set=function(i){this.uniforms.lacunarity=i},Object.defineProperties(GodrayFilter.prototype,o),GodrayFilter}(h.m),bo=function(i){function MotionBlurFilter(o,a,h){void 0===o&&(o=[0,0]),void 0===a&&(a=5),void 0===h&&(h=0),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uVelocity;\nuniform int uKernelSize;\nuniform float uOffset;\n\nconst int MAX_KERNEL_SIZE = 2048;\n\n// Notice:\n// the perfect way:\n//    int kernelSize = min(uKernelSize, MAX_KERNELSIZE);\n// BUT in real use-case , uKernelSize < MAX_KERNELSIZE almost always.\n// So use uKernelSize directly.\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    if (uKernelSize == 0)\n    {\n        gl_FragColor = color;\n        return;\n    }\n\n    vec2 velocity = uVelocity / filterArea.xy;\n    float offset = -uOffset / length(uVelocity) - 0.5;\n    int k = uKernelSize - 1;\n\n    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {\n        if (i == k) {\n            break;\n        }\n        vec2 bias = velocity * (float(i) / float(k) + offset);\n        color += texture2D(uSampler, vTextureCoord + bias);\n    }\n    gl_FragColor = color / float(uKernelSize);\n}\n"),this.uniforms.uVelocity=new Float32Array(2),this._velocity=new l.e(this.velocityChanged,this),this.velocity=o,this.kernelSize=a,this.offset=h}i&&(MotionBlurFilter.__proto__=i),MotionBlurFilter.prototype=Object.create(i&&i.prototype),MotionBlurFilter.prototype.constructor=MotionBlurFilter;var o={velocity:{configurable:!0},offset:{configurable:!0}};return MotionBlurFilter.prototype.apply=function apply(i,o,a,h){var c=this.velocity,l=c.x,m=c.y;this.uniforms.uKernelSize=0!==l||0!==m?this.kernelSize:0,i.applyFilter(this,o,a,h)},o.velocity.set=function(i){Array.isArray(i)?this._velocity.set(i[0],i[1]):(i instanceof l.g||i instanceof l.e)&&this._velocity.copyFrom(i)},o.velocity.get=function(){return this._velocity},MotionBlurFilter.prototype.velocityChanged=function velocityChanged(){this.uniforms.uVelocity[0]=this._velocity.x,this.uniforms.uVelocity[1]=this._velocity.y},o.offset.set=function(i){this.uniforms.uOffset=i},o.offset.get=function(){return this.uniforms.uOffset},Object.defineProperties(MotionBlurFilter.prototype,o),MotionBlurFilter}(h.m),wo=function(i){function MultiColorReplaceFilter(o,a,h){void 0===a&&(a=.05),void 0===h&&(h=null),h=h||o.length,i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float epsilon;\n\nconst int MAX_COLORS = %maxColors%;\n\nuniform vec3 originalColors[MAX_COLORS];\nuniform vec3 targetColors[MAX_COLORS];\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    float alpha = gl_FragColor.a;\n    if (alpha < 0.0001)\n    {\n      return;\n    }\n\n    vec3 color = gl_FragColor.rgb / alpha;\n\n    for(int i = 0; i < MAX_COLORS; i++)\n    {\n      vec3 origColor = originalColors[i];\n      if (origColor.r < 0.0)\n      {\n        break;\n      }\n      vec3 colorDiff = origColor - color;\n      if (length(colorDiff) < epsilon)\n      {\n        vec3 targetColor = targetColors[i];\n        gl_FragColor = vec4((targetColor + colorDiff) * alpha, alpha);\n        return;\n      }\n    }\n}\n".replace(/%maxColors%/g,h)),this.epsilon=a,this._maxColors=h,this._replacements=null,this.uniforms.originalColors=new Float32Array(3*h),this.uniforms.targetColors=new Float32Array(3*h),this.replacements=o}i&&(MultiColorReplaceFilter.__proto__=i),MultiColorReplaceFilter.prototype=Object.create(i&&i.prototype),MultiColorReplaceFilter.prototype.constructor=MultiColorReplaceFilter;var o={replacements:{configurable:!0},maxColors:{configurable:!0},epsilon:{configurable:!0}};return o.replacements.set=function(i){var o=this.uniforms.originalColors,a=this.uniforms.targetColors,h=i.length;if(h>this._maxColors)throw"Length of replacements ("+h+") exceeds the maximum colors length ("+this._maxColors+")";o[3*h]=-1;for(var c=0;c<h;c++){var l=i[c],m=l[0];"number"==typeof m?m=Object(k.hex2rgb)(m):l[0]=Object(k.rgb2hex)(m),o[3*c]=m[0],o[3*c+1]=m[1],o[3*c+2]=m[2];var g=l[1];"number"==typeof g?g=Object(k.hex2rgb)(g):l[1]=Object(k.rgb2hex)(g),a[3*c]=g[0],a[3*c+1]=g[1],a[3*c+2]=g[2]}this._replacements=i},o.replacements.get=function(){return this._replacements},MultiColorReplaceFilter.prototype.refresh=function refresh(){this.replacements=this._replacements},o.maxColors.get=function(){return this._maxColors},o.epsilon.set=function(i){this.uniforms.epsilon=i},o.epsilon.get=function(){return this.uniforms.epsilon},Object.defineProperties(MultiColorReplaceFilter.prototype,o),MultiColorReplaceFilter}(h.m),To=function(i){function OldFilmFilter(o,a){void 0===a&&(a=0),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform float sepia;\nuniform float noise;\nuniform float noiseSize;\nuniform float scratch;\nuniform float scratchDensity;\nuniform float scratchWidth;\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\nuniform float seed;\n\nconst float SQRT_2 = 1.414213;\nconst vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec3 Overlay(vec3 src, vec3 dst)\n{\n    // if (dst <= 0.5) then: 2 * src * dst\n    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)\n    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),\n                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),\n                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));\n}\n\n\nvoid main()\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 color = gl_FragColor.rgb;\n\n    if (sepia > 0.0)\n    {\n        float gray = (color.x + color.y + color.z) / 3.0;\n        vec3 grayscale = vec3(gray);\n\n        color = Overlay(SEPIA_RGB, grayscale);\n\n        color = grayscale + sepia * (color - grayscale);\n    }\n\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        vec2 dir = vec2(vec2(0.5, 0.5) - coord);\n        dir.y *= dimensions.y / dimensions.x;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    if (scratchDensity > seed && scratch != 0.0)\n    {\n        float phase = seed * 256.0;\n        float s = mod(floor(phase), 2.0);\n        float dist = 1.0 / scratchDensity;\n        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));\n        if (d < seed * 0.6 + 0.4)\n        {\n            highp float period = scratchDensity * 10.0;\n\n            float xx = coord.x * period + phase;\n            float aa = abs(mod(xx, 0.5) * 4.0);\n            float bb = mod(floor(xx / 0.5), 2.0);\n            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);\n\n            float kk = 2.0 * period;\n            float dw = scratchWidth / dimensions.x * (0.75 + seed);\n            float dh = dw * kk;\n\n            float tine = (yy - (2.0 - dh));\n\n            if (tine > 0.0) {\n                float _sign = sign(scratch);\n\n                tine = s * tine / period + scratch + 0.1;\n                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);\n\n                color.rgb *= tine;\n            }\n        }\n    }\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);\n        // float _noise = snoise(d) * 0.5;\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        color += _noise * noise;\n    }\n\n    gl_FragColor.rgb = color;\n}\n"),this.uniforms.dimensions=new Float32Array(2),"number"==typeof o?(this.seed=o,o=null):this.seed=a,Object.assign(this,{sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3},o)}i&&(OldFilmFilter.__proto__=i),OldFilmFilter.prototype=Object.create(i&&i.prototype),OldFilmFilter.prototype.constructor=OldFilmFilter;var o={sepia:{configurable:!0},noise:{configurable:!0},noiseSize:{configurable:!0},scratch:{configurable:!0},scratchDensity:{configurable:!0},scratchWidth:{configurable:!0},vignetting:{configurable:!0},vignettingAlpha:{configurable:!0},vignettingBlur:{configurable:!0}};return OldFilmFilter.prototype.apply=function apply(i,o,a,h){this.uniforms.dimensions[0]=o.filterFrame.width,this.uniforms.dimensions[1]=o.filterFrame.height,this.uniforms.seed=this.seed,i.applyFilter(this,o,a,h)},o.sepia.set=function(i){this.uniforms.sepia=i},o.sepia.get=function(){return this.uniforms.sepia},o.noise.set=function(i){this.uniforms.noise=i},o.noise.get=function(){return this.uniforms.noise},o.noiseSize.set=function(i){this.uniforms.noiseSize=i},o.noiseSize.get=function(){return this.uniforms.noiseSize},o.scratch.set=function(i){this.uniforms.scratch=i},o.scratch.get=function(){return this.uniforms.scratch},o.scratchDensity.set=function(i){this.uniforms.scratchDensity=i},o.scratchDensity.get=function(){return this.uniforms.scratchDensity},o.scratchWidth.set=function(i){this.uniforms.scratchWidth=i},o.scratchWidth.get=function(){return this.uniforms.scratchWidth},o.vignetting.set=function(i){this.uniforms.vignetting=i},o.vignetting.get=function(){return this.uniforms.vignetting},o.vignettingAlpha.set=function(i){this.uniforms.vignettingAlpha=i},o.vignettingAlpha.get=function(){return this.uniforms.vignettingAlpha},o.vignettingBlur.set=function(i){this.uniforms.vignettingBlur=i},o.vignettingBlur.get=function(){return this.uniforms.vignettingBlur},Object.defineProperties(OldFilmFilter.prototype,o),OldFilmFilter}(h.m),Eo=function(i){function OutlineFilter(o,a,h){void 0===o&&(o=1),void 0===a&&(a=0),void 0===h&&(h=.1);var c=Math.max(h*OutlineFilter.MAX_SAMPLES,OutlineFilter.MIN_SAMPLES),l=(2*Math.PI/c).toFixed(7);i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 thickness;\nuniform vec4 outlineColor;\nuniform vec4 filterClamp;\n\nconst float DOUBLE_PI = 3.14159265358979323846264 * 2.;\n\nvoid main(void) {\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float maxAlpha = 0.;\n    vec2 displaced;\n    for (float angle = 0.; angle <= DOUBLE_PI; angle += ${angleStep}) {\n        displaced.x = vTextureCoord.x + thickness.x * cos(angle);\n        displaced.y = vTextureCoord.y + thickness.y * sin(angle);\n        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n        maxAlpha = max(maxAlpha, curColor.a);\n    }\n    float resultAlpha = max(maxAlpha, ownColor.a);\n    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);\n}\n".replace(/\$\{angleStep\}/,l)),this.uniforms.thickness=new Float32Array([0,0]),this.thickness=o,this.uniforms.outlineColor=new Float32Array([0,0,0,1]),this.color=a,this.quality=h}i&&(OutlineFilter.__proto__=i),OutlineFilter.prototype=Object.create(i&&i.prototype),OutlineFilter.prototype.constructor=OutlineFilter;var o={color:{configurable:!0}};return OutlineFilter.prototype.apply=function apply(i,o,a,h){this.uniforms.thickness[0]=this.thickness/o._frame.width,this.uniforms.thickness[1]=this.thickness/o._frame.height,i.applyFilter(this,o,a,h)},o.color.get=function(){return Object(k.rgb2hex)(this.uniforms.outlineColor)},o.color.set=function(i){Object(k.hex2rgb)(i,this.uniforms.outlineColor)},Object.defineProperties(OutlineFilter.prototype,o),OutlineFilter}(h.m);Eo.MIN_SAMPLES=1,Eo.MAX_SAMPLES=100;var Co=function(i){function PixelateFilter(o){void 0===o&&(o=10),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec2 size;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 pixelate(vec2 coord, vec2 size)\n{\n\treturn floor( coord / size ) * size;\n}\n\nvoid main(void)\n{\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = pixelate(coord, size);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord);\n}\n"),this.size=o}i&&(PixelateFilter.__proto__=i),PixelateFilter.prototype=Object.create(i&&i.prototype),PixelateFilter.prototype.constructor=PixelateFilter;var o={size:{configurable:!0}};return o.size.get=function(){return this.uniforms.size},o.size.set=function(i){"number"==typeof i&&(i=[i,i]),this.uniforms.size=i},Object.defineProperties(PixelateFilter.prototype,o),PixelateFilter}(h.m),Po=function(i){function RadialBlurFilter(o,a,h,c){void 0===o&&(o=0),void 0===a&&(a=[0,0]),void 0===h&&(h=5),void 0===c&&(c=-1),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform float uRadian;\nuniform vec2 uCenter;\nuniform float uRadius;\nuniform int uKernelSize;\n\nconst int MAX_KERNEL_SIZE = 2048;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    if (uKernelSize == 0)\n    {\n        gl_FragColor = color;\n        return;\n    }\n\n    float aspect = filterArea.y / filterArea.x;\n    vec2 center = uCenter.xy / filterArea.xy;\n    float gradient = uRadius / filterArea.x * 0.3;\n    float radius = uRadius / filterArea.x - gradient * 0.5;\n    int k = uKernelSize - 1;\n\n    vec2 coord = vTextureCoord;\n    vec2 dir = vec2(center - coord);\n    float dist = length(vec2(dir.x, dir.y * aspect));\n\n    float radianStep = uRadian;\n    if (radius >= 0.0 && dist > radius) {\n        float delta = dist - radius;\n        float gap = gradient;\n        float scale = 1.0 - abs(delta / gap);\n        if (scale <= 0.0) {\n            gl_FragColor = color;\n            return;\n        }\n        radianStep *= scale;\n    }\n    radianStep /= float(k);\n\n    float s = sin(radianStep);\n    float c = cos(radianStep);\n    mat2 rotationMatrix = mat2(vec2(c, -s), vec2(s, c));\n\n    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {\n        if (i == k) {\n            break;\n        }\n\n        coord -= center;\n        coord.y *= aspect;\n        coord = rotationMatrix * coord;\n        coord.y /= aspect;\n        coord += center;\n\n        vec4 sample = texture2D(uSampler, coord);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample;\n    }\n\n    gl_FragColor = color / float(uKernelSize);\n}\n"),this._angle=0,this.angle=o,this.center=a,this.kernelSize=h,this.radius=c}i&&(RadialBlurFilter.__proto__=i),RadialBlurFilter.prototype=Object.create(i&&i.prototype),RadialBlurFilter.prototype.constructor=RadialBlurFilter;var o={angle:{configurable:!0},center:{configurable:!0},radius:{configurable:!0}};return RadialBlurFilter.prototype.apply=function apply(i,o,a,h){this.uniforms.uKernelSize=0!==this._angle?this.kernelSize:0,i.applyFilter(this,o,a,h)},o.angle.set=function(i){this._angle=i,this.uniforms.uRadian=i*Math.PI/180},o.angle.get=function(){return this._angle},o.center.get=function(){return this.uniforms.uCenter},o.center.set=function(i){this.uniforms.uCenter=i},o.radius.get=function(){return this.uniforms.uRadius},o.radius.set=function(i){(i<0||i===1/0)&&(i=-1),this.uniforms.uRadius=i},Object.defineProperties(RadialBlurFilter.prototype,o),RadialBlurFilter}(h.m),Oo=function(i){function ReflectionFilter(o){i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nuniform bool mirror;\nuniform float boundary;\nuniform vec2 amplitude;\nuniform vec2 waveLength;\nuniform vec2 alpha;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 coord = pixelCoord / dimensions;\n\n    if (coord.y < boundary) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    float k = (coord.y - boundary) / (1. - boundary + 0.0001);\n    float areaY = boundary * dimensions.y / filterArea.y;\n    float v = areaY + areaY - vTextureCoord.y;\n    float y = mirror ? v : vTextureCoord.y;\n\n    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;\n    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;\n    float _alpha = (alpha.y - alpha.x) * k + alpha.x;\n\n    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;\n    x = clamp(x, filterClamp.x, filterClamp.z);\n\n    vec4 color = texture2D(uSampler, vec2(x, y));\n\n    gl_FragColor = color * _alpha;\n}\n"),this.uniforms.amplitude=new Float32Array(2),this.uniforms.waveLength=new Float32Array(2),this.uniforms.alpha=new Float32Array(2),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,{mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0},o)}i&&(ReflectionFilter.__proto__=i),ReflectionFilter.prototype=Object.create(i&&i.prototype),ReflectionFilter.prototype.constructor=ReflectionFilter;var o={mirror:{configurable:!0},boundary:{configurable:!0},amplitude:{configurable:!0},waveLength:{configurable:!0},alpha:{configurable:!0}};return ReflectionFilter.prototype.apply=function apply(i,o,a,h){this.uniforms.dimensions[0]=o.filterFrame.width,this.uniforms.dimensions[1]=o.filterFrame.height,this.uniforms.time=this.time,i.applyFilter(this,o,a,h)},o.mirror.set=function(i){this.uniforms.mirror=i},o.mirror.get=function(){return this.uniforms.mirror},o.boundary.set=function(i){this.uniforms.boundary=i},o.boundary.get=function(){return this.uniforms.boundary},o.amplitude.set=function(i){this.uniforms.amplitude[0]=i[0],this.uniforms.amplitude[1]=i[1]},o.amplitude.get=function(){return this.uniforms.amplitude},o.waveLength.set=function(i){this.uniforms.waveLength[0]=i[0],this.uniforms.waveLength[1]=i[1]},o.waveLength.get=function(){return this.uniforms.waveLength},o.alpha.set=function(i){this.uniforms.alpha[0]=i[0],this.uniforms.alpha[1]=i[1]},o.alpha.get=function(){return this.uniforms.alpha},Object.defineProperties(ReflectionFilter.prototype,o),ReflectionFilter}(h.m),Ao=function(i){function RGBSplitFilter(o,a,h){void 0===o&&(o=[-10,0]),void 0===a&&(a=[0,10]),void 0===h&&(h=[0,0]),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n"),this.red=o,this.green=a,this.blue=h}i&&(RGBSplitFilter.__proto__=i),RGBSplitFilter.prototype=Object.create(i&&i.prototype),RGBSplitFilter.prototype.constructor=RGBSplitFilter;var o={red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return o.red.get=function(){return this.uniforms.red},o.red.set=function(i){this.uniforms.red=i},o.green.get=function(){return this.uniforms.green},o.green.set=function(i){this.uniforms.green=i},o.blue.get=function(){return this.uniforms.blue},o.blue.set=function(i){this.uniforms.blue=i},Object.defineProperties(RGBSplitFilter.prototype,o),RGBSplitFilter}(h.m),Ro=function(i){function ShockwaveFilter(o,a,h){void 0===o&&(o=[0,0]),void 0===a&&(a={}),void 0===h&&(h=0),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nuniform vec2 center;\n\nuniform float amplitude;\nuniform float wavelength;\n// uniform float power;\nuniform float brightness;\nuniform float speed;\nuniform float radius;\n\nuniform float time;\n\nconst float PI = 3.14159;\n\nvoid main()\n{\n    float halfWavelength = wavelength * 0.5 / filterArea.x;\n    float maxRadius = radius / filterArea.x;\n    float currentRadius = time * speed / filterArea.x;\n\n    float fade = 1.0;\n\n    if (maxRadius > 0.0) {\n        if (currentRadius > maxRadius) {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);\n    }\n\n    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);\n    dir.y *= filterArea.y / filterArea.x;\n    float dist = length(dir);\n\n    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    vec2 diffUV = normalize(dir);\n\n    float diff = (dist - currentRadius) / halfWavelength;\n\n    float p = 1.0 - pow(abs(diff), 2.0);\n\n    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );\n    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );\n\n    vec2 offset = diffUV * powDiff / filterArea.xy;\n\n    // Do clamp :\n    vec2 coord = vTextureCoord + offset;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    // No clamp :\n    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);\n\n    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;\n\n    gl_FragColor = color;\n}\n"),this.center=o,Array.isArray(a)&&(console.warn("Deprecated Warning: ShockwaveFilter params Array has been changed to options Object."),a={}),a=Object.assign({amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1},a),this.amplitude=a.amplitude,this.wavelength=a.wavelength,this.brightness=a.brightness,this.speed=a.speed,this.radius=a.radius,this.time=h}i&&(ShockwaveFilter.__proto__=i),ShockwaveFilter.prototype=Object.create(i&&i.prototype),ShockwaveFilter.prototype.constructor=ShockwaveFilter;var o={center:{configurable:!0},amplitude:{configurable:!0},wavelength:{configurable:!0},brightness:{configurable:!0},speed:{configurable:!0},radius:{configurable:!0}};return ShockwaveFilter.prototype.apply=function apply(i,o,a,h){this.uniforms.time=this.time,i.applyFilter(this,o,a,h)},o.center.get=function(){return this.uniforms.center},o.center.set=function(i){this.uniforms.center=i},o.amplitude.get=function(){return this.uniforms.amplitude},o.amplitude.set=function(i){this.uniforms.amplitude=i},o.wavelength.get=function(){return this.uniforms.wavelength},o.wavelength.set=function(i){this.uniforms.wavelength=i},o.brightness.get=function(){return this.uniforms.brightness},o.brightness.set=function(i){this.uniforms.brightness=i},o.speed.get=function(){return this.uniforms.speed},o.speed.set=function(i){this.uniforms.speed=i},o.radius.get=function(){return this.uniforms.radius},o.radius.set=function(i){this.uniforms.radius=i},Object.defineProperties(ShockwaveFilter.prototype,o),ShockwaveFilter}(h.m),Io=function(i){function SimpleLightmapFilter(o,a,h){void 0===a&&(a=0),void 0===h&&(h=1),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform sampler2D uLightmap;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\nuniform vec4 ambientColor;\nvoid main() {\n    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);\n    vec2 lightCoord = (vTextureCoord * filterArea.xy) / dimensions;\n    vec4 light = texture2D(uLightmap, lightCoord);\n    vec3 ambient = ambientColor.rgb * ambientColor.a;\n    vec3 intensity = ambient + light.rgb;\n    vec3 finalColor = diffuseColor.rgb * intensity;\n    gl_FragColor = vec4(finalColor, diffuseColor.a);\n}\n"),this.uniforms.dimensions=new Float32Array(2),this.uniforms.ambientColor=new Float32Array([0,0,0,h]),this.texture=o,this.color=a}i&&(SimpleLightmapFilter.__proto__=i),SimpleLightmapFilter.prototype=Object.create(i&&i.prototype),SimpleLightmapFilter.prototype.constructor=SimpleLightmapFilter;var o={texture:{configurable:!0},color:{configurable:!0},alpha:{configurable:!0}};return SimpleLightmapFilter.prototype.apply=function apply(i,o,a,h){this.uniforms.dimensions[0]=o.filterFrame.width,this.uniforms.dimensions[1]=o.filterFrame.height,i.applyFilter(this,o,a,h)},o.texture.get=function(){return this.uniforms.uLightmap},o.texture.set=function(i){this.uniforms.uLightmap=i},o.color.set=function(i){var o=this.uniforms.ambientColor;"number"==typeof i?(Object(k.hex2rgb)(i,o),this._color=i):(o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],this._color=Object(k.rgb2hex)(o))},o.color.get=function(){return this._color},o.alpha.get=function(){return this.uniforms.ambientColor[3]},o.alpha.set=function(i){this.uniforms.ambientColor[3]=i},Object.defineProperties(SimpleLightmapFilter.prototype,o),SimpleLightmapFilter}(h.m),Mo=function(i){function TiltShiftAxisFilter(o,a,h,c){void 0===o&&(o=100),void 0===a&&(a=600),void 0===h&&(h=null),void 0===c&&(c=null),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    color /= total;\n    color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n"),this.uniforms.blur=o,this.uniforms.gradientBlur=a,this.uniforms.start=h||new l.g(0,window.innerHeight/2),this.uniforms.end=c||new l.g(600,window.innerHeight/2),this.uniforms.delta=new l.g(30,30),this.uniforms.texSize=new l.g(window.innerWidth,window.innerHeight),this.updateDelta()}i&&(TiltShiftAxisFilter.__proto__=i),TiltShiftAxisFilter.prototype=Object.create(i&&i.prototype),TiltShiftAxisFilter.prototype.constructor=TiltShiftAxisFilter;var o={blur:{configurable:!0},gradientBlur:{configurable:!0},start:{configurable:!0},end:{configurable:!0}};return TiltShiftAxisFilter.prototype.updateDelta=function updateDelta(){this.uniforms.delta.x=0,this.uniforms.delta.y=0},o.blur.get=function(){return this.uniforms.blur},o.blur.set=function(i){this.uniforms.blur=i},o.gradientBlur.get=function(){return this.uniforms.gradientBlur},o.gradientBlur.set=function(i){this.uniforms.gradientBlur=i},o.start.get=function(){return this.uniforms.start},o.start.set=function(i){this.uniforms.start=i,this.updateDelta()},o.end.get=function(){return this.uniforms.end},o.end.set=function(i){this.uniforms.end=i,this.updateDelta()},Object.defineProperties(TiltShiftAxisFilter.prototype,o),TiltShiftAxisFilter}(h.m),ko=function(i){function TiltShiftXFilter(){i.apply(this,arguments)}return i&&(TiltShiftXFilter.__proto__=i),TiltShiftXFilter.prototype=Object.create(i&&i.prototype),TiltShiftXFilter.prototype.constructor=TiltShiftXFilter,TiltShiftXFilter.prototype.updateDelta=function updateDelta(){var i=this.uniforms.end.x-this.uniforms.start.x,o=this.uniforms.end.y-this.uniforms.start.y,a=Math.sqrt(i*i+o*o);this.uniforms.delta.x=i/a,this.uniforms.delta.y=o/a},TiltShiftXFilter}(Mo),Fo=function(i){function TiltShiftYFilter(){i.apply(this,arguments)}return i&&(TiltShiftYFilter.__proto__=i),TiltShiftYFilter.prototype=Object.create(i&&i.prototype),TiltShiftYFilter.prototype.constructor=TiltShiftYFilter,TiltShiftYFilter.prototype.updateDelta=function updateDelta(){var i=this.uniforms.end.x-this.uniforms.start.x,o=this.uniforms.end.y-this.uniforms.start.y,a=Math.sqrt(i*i+o*o);this.uniforms.delta.x=-o/a,this.uniforms.delta.y=i/a},TiltShiftYFilter}(Mo),zo=function(i){function TiltShiftFilter(o,a,h,c){void 0===o&&(o=100),void 0===a&&(a=600),void 0===h&&(h=null),void 0===c&&(c=null),i.call(this),this.tiltShiftXFilter=new ko(o,a,h,c),this.tiltShiftYFilter=new Fo(o,a,h,c)}i&&(TiltShiftFilter.__proto__=i),TiltShiftFilter.prototype=Object.create(i&&i.prototype),TiltShiftFilter.prototype.constructor=TiltShiftFilter;var o={blur:{configurable:!0},gradientBlur:{configurable:!0},start:{configurable:!0},end:{configurable:!0}};return TiltShiftFilter.prototype.apply=function apply(i,o,a){var h=i.getFilterTexture();this.tiltShiftXFilter.apply(i,o,h),this.tiltShiftYFilter.apply(i,h,a),i.returnFilterTexture(h)},o.blur.get=function(){return this.tiltShiftXFilter.blur},o.blur.set=function(i){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=i},o.gradientBlur.get=function(){return this.tiltShiftXFilter.gradientBlur},o.gradientBlur.set=function(i){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=i},o.start.get=function(){return this.tiltShiftXFilter.start},o.start.set=function(i){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=i},o.end.get=function(){return this.tiltShiftXFilter.end},o.end.set=function(i){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=i},Object.defineProperties(TiltShiftFilter.prototype,o),TiltShiftFilter}(h.m),Do=function(i){function TwistFilter(o,a,h){void 0===o&&(o=200),void 0===a&&(a=4),void 0===h&&(h=20),i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 twist(vec2 coord)\n{\n    coord -= offset;\n\n    float dist = length(coord);\n\n    if (dist < radius)\n    {\n        float ratioDist = (radius - dist) / radius;\n        float angleMod = ratioDist * ratioDist * angle;\n        float s = sin(angleMod);\n        float c = cos(angleMod);\n        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n    }\n\n    coord += offset;\n\n    return coord;\n}\n\nvoid main(void)\n{\n\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = twist(coord);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord );\n\n}\n"),this.radius=o,this.angle=a,this.padding=h}i&&(TwistFilter.__proto__=i),TwistFilter.prototype=Object.create(i&&i.prototype),TwistFilter.prototype.constructor=TwistFilter;var o={offset:{configurable:!0},radius:{configurable:!0},angle:{configurable:!0}};return o.offset.get=function(){return this.uniforms.offset},o.offset.set=function(i){this.uniforms.offset=i},o.radius.get=function(){return this.uniforms.radius},o.radius.set=function(i){this.uniforms.radius=i},o.angle.get=function(){return this.uniforms.angle},o.angle.set=function(i){this.uniforms.angle=i},Object.defineProperties(TwistFilter.prototype,o),TwistFilter}(h.m),Lo="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",Bo="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uCenter;\nuniform float uStrength;\nuniform float uInnerRadius;\nuniform float uRadius;\n\nconst float MAX_KERNEL_SIZE = 32.0;\n\n// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand(vec2 co, float seed) {\n    const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);\n    return fract(sin(sn) * c + seed);\n}\n\nvoid main() {\n\n    float minGradient = uInnerRadius * 0.3;\n    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;\n\n    float gradient = uRadius * 0.3;\n    float radius = (uRadius - gradient * 0.5) / filterArea.x;\n\n    float countLimit = MAX_KERNEL_SIZE;\n\n    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);\n    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));\n\n    float strength = uStrength;\n\n    float delta = 0.0;\n    float gap;\n    if (dist < innerRadius) {\n        delta = innerRadius - dist;\n        gap = minGradient;\n    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity\n        delta = dist - radius;\n        gap = gradient;\n    }\n\n    if (delta > 0.0) {\n        float normalCount = gap / filterArea.x;\n        delta = (normalCount - delta) / normalCount;\n        countLimit *= delta;\n        strength *= delta;\n        if (countLimit < 1.0)\n        {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n    }\n\n    // randomize the lookup values to hide the fixed number of samples\n    float offset = rand(vTextureCoord, 0.0);\n\n    float total = 0.0;\n    vec4 color = vec4(0.0);\n\n    dir *= strength;\n\n    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {\n        float percent = (t + offset) / MAX_KERNEL_SIZE;\n        float weight = 4.0 * (percent - percent * percent);\n        vec2 p = vTextureCoord + dir * percent;\n        vec4 sample = texture2D(uSampler, p);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n\n        if (t > countLimit){\n            break;\n        }\n    }\n\n    color /= total;\n    // switch back from pre-multiplied alpha\n    // color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n",No=function(i){function ZoomBlurFilter(o){if(i.call(this,Lo,Bo),"object"!=_typeof2(o)){var a=arguments[0],h=arguments[1],c=arguments[2],l=arguments[3];o={},void 0!==a&&(o.strength=a),void 0!==h&&(o.center=h),void 0!==c&&(o.innerRadius=c),void 0!==l&&(o.radius=l)}Object.assign(this,{strength:.1,center:[0,0],innerRadius:0,radius:-1},o)}i&&(ZoomBlurFilter.__proto__=i),ZoomBlurFilter.prototype=Object.create(i&&i.prototype),ZoomBlurFilter.prototype.constructor=ZoomBlurFilter;var o={center:{configurable:!0},strength:{configurable:!0},innerRadius:{configurable:!0},radius:{configurable:!0}};return o.center.get=function(){return this.uniforms.uCenter},o.center.set=function(i){this.uniforms.uCenter=i},o.strength.get=function(){return this.uniforms.uStrength},o.strength.set=function(i){this.uniforms.uStrength=i},o.innerRadius.get=function(){return this.uniforms.uInnerRadius},o.innerRadius.set=function(i){this.uniforms.uInnerRadius=i},o.radius.get=function(){return this.uniforms.uRadius},o.radius.set=function(i){(i<0||i===1/0)&&(i=-1),this.uniforms.uRadius=i},Object.defineProperties(ZoomBlurFilter.prototype,o),ZoomBlurFilter}(h.m);function ownKeys(i,o){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(i);o&&(h=h.filter((function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable}))),a.push.apply(a,h)}return a}function _defineProperty(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}var Go=function _objectSpread(i){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?ownKeys(Object(a),!0).forEach((function(o){_defineProperty(i,o,a[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(a,o))}))}return i}({},a(4).filters,{AdjustmentFilter:c,AdvancedBloomFilter:S,AsciiFilter:R,BevelFilter:j,BloomFilter:Rr,BulgePinchFilter:kr,ColorMapFilter:zr,ColorOverlayFilter:Dr,ColorReplaceFilter:Lr,ConvolutionFilter:Br,CrossHatchFilter:Nr,CRTFilter:Gr,DotFilter:Ur,DropShadowFilter:Xr,EmbossFilter:Hr,GlitchFilter:Vr,GlowFilter:yo,GodrayFilter:So,KawaseBlurFilter:m,MotionBlurFilter:bo,MultiColorReplaceFilter:wo,OldFilmFilter:To,OutlineFilter:Eo,PixelateFilter:Co,RadialBlurFilter:Po,ReflectionFilter:Oo,RGBSplitFilter:Ao,ShockwaveFilter:Ro,SimpleLightmapFilter:Io,TiltShiftFilter:zo,TwistFilter:Do,ZoomBlurFilter:No});o.a=Go},function(i,o){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(i){"object"==("undefined"==typeof window?"undefined":_typeof2(window))&&(a=window)}i.exports=a},function(i,o,a){i.exports=function bindInternal4(i,o){return function(a,h,c,l){return i.call(o,a,h,c,l)}}},function(i,o,a){i.exports=function applyWithContext(i,o,a){switch(a.length){case 0:return i.call(o);case 1:return i.call(o,a[0]);case 2:return i.call(o,a[0],a[1]);case 3:return i.call(o,a[0],a[1],a[2]);case 4:return i.call(o,a[0],a[1],a[2],a[3]);case 5:return i.call(o,a[0],a[1],a[2],a[3],a[4]);case 6:return i.call(o,a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return i.call(o,a[0],a[1],a[2],a[3],a[4],a[5],a[6]);case 8:return i.call(o,a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7]);default:return i.apply(o,a)}}},function(i,o,a){function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}a.d(o,"a",(function(){return h}));var h=function(){function LinkValue(i){!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,LinkValue),this._value=i}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(LinkValue,[{key:"get",value:function get(){return this._value}},{key:"set",value:function set(i){this._value=i}}]),LinkValue}()},function(i,o,a){(function(i){var h=a(6);function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function _typeof(i){return _typeof2(i)}:function _typeof(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":_typeof2(i)})(i)}function _possibleConstructorReturn(i,o){return!o||"object"!==_typeof(o)&&"function"!=typeof o?function _assertThisInitialized(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}(i):o}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(i){return!1}}function _getPrototypeOf(i){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(i){return i.__proto__||Object.getPrototypeOf(i)})(i)}function _setPrototypeOf(i,o){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(i,o){return i.__proto__=o,i})(i,o)}function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}function _createClass(i,o,a){return o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a),i}var c=function(){function PixiMS(i){_classCallCheck(this,PixiMS),this.VERSION="PixiMultiStyle_Core v.0.1",this.GLOBAL_STYLES=["align","breakWords","wordWrap","wordWrapWidth","leading"],this._motionTextContainer=[],this._mcID=-1,this.tagReg=/{(i|s)-([^\s|}]+)\|([\s\S|}]*?)(?:\|([^\s|}]+))*}|{(n)-(\d+)}|\n/,this._allowEvents=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","pointercancel","pointerdown","pointermove","pointerout","pointerover","pointertap","pointerup","pointerupoutside","rightclick","rightdown","rightup","rightupoutside","tap","touchcancel","touchend","touchendoutside","touchmove","touchstart"],this._iconsID=[],this._styles={}}return _createClass(PixiMS,[{key:"newMS",value:function newMS(i,o,a,h){if(this._mcID++,this._motionTextContainer[this._mcID])return console.error("ERROR the pixi text id: "+this._mcID+" alrealy exist!, Use destroy");for(var c in o)"default"!==c&&"global"!==c&&(o[c]=Object.assign({},o.global,o.default,o[c]));var m=new l;return m.set(this._mcID,i,o,a,h),m._ini_TextBuilder(),m._msRender(),this._motionTextContainer[this._mcID]=m,m}}]),PixiMS}(),l=function(o){!function _inherits(i,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&_setPrototypeOf(i,o)}(MotionTextContainers,o);var a=function _createSuper(i){return function(){var o,a=_getPrototypeOf(i);if(_isNativeReflectConstruct()){var h=_getPrototypeOf(this).constructor;o=Reflect.construct(a,arguments,h)}else o=a.apply(this,arguments);return _possibleConstructorReturn(this,o)}}(MotionTextContainers);function MotionTextContainers(){var i;return _classCallCheck(this,MotionTextContainers),(i=a.call(this)).initialize(),i}return _createClass(MotionTextContainers,[{key:"initialize",value:function initialize(){return this.renderable=!1,this._id=0,this._text="",this._style={},this._textSplitBy=0,this._startEffect=!1,this._scrollSetup=!1,this._motionsSetup=[],this._childTexts=[],this._dataTxt=!1,this._dataLine=!1,this._easingStartID=[],this._easingID=[],this._scrollBreakControl=!1,this._currentLineControl=0,this.tagReg=m.tagReg,this.labeledList={},this}},{key:"set",value:function set(o,a,h,c,l){var m=this;return this._id=o||0,this._text=a||"",this.x=c||0,this.y=l||0,this._style=h||{},this.style={},Object.defineProperties(this.style,{_fontSize:{value:h.default.fontSize||26,writable:!0,enumerable:!0},fontSize:{set:function set(i){for(var o=i/m.style._fontSize,a=0;a<m._childTexts.length;a++)"icon"==m._dataTxt[a].type?m._childTexts[a].scale.set(m._dataTxt[a].style.scale.x*o):"newLine"==m._dataTxt[a].type?m._childTexts[a].height=m._dataTxt[a].style.height*o:m._childTexts[a].style.fontSize=i,m._childTexts[a].x=m._dataTxt[a].xPos*o,m._childTexts[a].y=m._dataTxt[a].yPos*o;m.style._fontSize=i,Object.values(m._style).forEach((function(o){void 0!==o.fontSize&&(o.fontSize=i)})),m.resize()},get:function get(){return this._fontSize}}}),this.anchor=new i.ObservablePoint((function(){this.txtChildContainer.dock.set(this.anchor.x,this.anchor.y)}),this,null,null),this}},{key:"add_splitBy",value:function add_splitBy(i){return this._textSplitBy=i||0,this}},{key:"_newData",value:function _newData(i,o,a,h){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{type:i,value:o,tag:a,style:h,xPos:0,yPos:0,line:0,label:c}}},{key:"_ini_TextBuilder",value:function _ini_TextBuilder(){this.txtChildContainer=new i.Container;for(var o,a,c=this._text.valueOf(),l=[];null!==(o=this.tagReg.exec(c));)o.index>0&&l.push(this._newData("txt",c.slice(0,o.index),"default",this._style.default)),"\n"==o[0]?l.push(this._newData("newLine",1,"n-1",!1)):"s"==o[1]?l.push(this._newData("txt",o[3],o[1]+"-"+o[2],this._style[o[2]],o[4])):"n"===o[5]?l.push(this._newData("newLine",Number(o[6]),o[5]+"-"+o[6],!1)):"i"===o[1]&&l.push(this._newData("icon",o[3],o[1]+"-"+o[2],this._style[o[2]],o[4])),c=c.slice(o.index+o[0].length);if(c&&l.push(this._newData("txt",c,"default",this._style.default)),this._textSplitBy){var g=this._textSplitBy;a=1===g?/\w+.|\W/g:2===g&&/[\s\S]/g;for(var _=[],x=0,S=l.length;x<S;x++)if("txt"===l[x].type)for(;null!==(o=this.tagReg.exec(l[x].value));)_.push(this._newData(l[x].type,o[0],l[x].tag,l[x].style));else _.push(l[x]);l=_}a=/[`~!@#$%^&*()\-_=+,<.>/?[{\]}\\\|;:'"ㄱ-ㅎ가-힣\w]+.|\W/;for(var R=-1,k=0,j=0,X=0,Y=!0,q=[],Z=this._style.global.wordWrap&&this._style.global.wordWrapWidth||!1,$=!1,ee=0,te=0;te<l.length;te++){var re=l[te],ie=q[R];if(Y&&(j+=X+(this._style.global.leading||0),k=0,X=0,Y=!1,ie=q[++R]={width:0,height:0,txtID:[],line:R}),!$){switch(re.type){case"txt":case"mouse":$=new i.Text(re.value,re.style);break;case"icon":var ne=h.a.get("resource");if($=new i.Sprite(ne[re.value]),re.style)for(var oe in re.style)oe in $&&($[oe].constructor==i.ObservablePoint?$[oe].set(re.style[oe].x,re.style[oe].x):"x"!==oe&&"y"!==oe||(re[oe+"Pos"]=re.style[oe]));break;case"newLine":Y=!0,($=new i.Graphics).drawRect(0,0,0,ie.height+re.value),re.style={height:ie.height+re.value};break;default:($=new i.Graphics).drawRect(0,0,0,0)}if(re.style&&re.style.constructor===Object)for(var ae in re.style)-1!==m._allowEvents.indexOf(ae)&&($.on(ae,re.style[ae]),$.interactive=!0);re.label&&($.label=re.label,this.labeledList[$.label]=$)}if(Z&&k+$.width>Z){if(ee++>1e4){confirm("ERROR (INFINI LOOP) EXCEED LIMIT WORDWRAP < SPLITED TEXT LENGTH, USE DEBUG FOR CHECK WORD INTEGRITY"),console.error("WIDTH ERROR: ",$);break}if("icon"===re.type||"mouse"===re.type){Y=!0,te--;continue}if("txt"===re.type&&re.value.length<2){Y=!0,te--;continue}for(var se=new RegExp(a,"g"),ue=Math.ceil($.width/re.value.length),he=0,ce=!1;null!==(o=se.exec(re.value));){var de=o[0].length;if(k+de*ue+he>Z){if(0===o.index){Y=!0,te--,ce=!0;break}if(0!==o.index){re.value=o.input.slice(0,o.index);var pe=this._newData("txt",o.input.slice(o.index),re.tag,re.style);l.splice(te+1,0,pe),$.text=re.value,Y=!0;break}}he+=de*ue}if(ce)continue}re.xPos+=k,re.yPos+=j,re.line=R,k+=$.width,ie.width=k,X=$.height>X&&$.height||X,ie.height=X,ie.txtID.push(te),this._childTexts.push($),$.renderable=!1,this.txtChildContainer.addChild($),$=!1}if(this._style.global&&this._style.global.align)for(var fe=Z||q.reduce((function(i,o){return{width:Math.max(i.width,o.width)}}),{width:0}).width,me=q.length;me--;){var ye=void 0;"left"===this._style.global.align?ye=fe-q[me].width>0?0:fe-q[me].width:"right"===this._style.global.align?ye=q[me].width-fe:"center"===this._style.global.align&&(ye=-1*(fe-q[me].width)/2);for(var _e=q[me].txtID.length;_e--;)l[q[me].txtID[_e]].xPos-=ye}this._dataTxt=l,this._dataLine=q,this.addChild(this.txtChildContainer);var ve=q.reduce((function(i,o){return{width:Math.max(i.width,o.width),height:i.height+o.height}}),{width:0,height:0});return this.defaultWidth=ve.width,this.defaultHeight=ve.height,ve}},{key:"_msRender",value:function _msRender(){this.renderable=!0;for(var i=this._dataTxt.length;i--;)this._childTexts[i].x=this._dataTxt[i].xPos,this._childTexts[i].y=this._dataTxt[i].yPos,this._childTexts[i].renderable=!0;return this}},{key:"resize",value:function resize(){var i=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=0,h=0;o||(this._dataLine.forEach((function(o){o.txtID.forEach((function(c){var l=i._childTexts[c];a+=l.width,o.width=a,h=Math.max(l.height,h),o.height=h})),a=0,h=0})),o=this._dataLine.reduce((function(i,o){return{width:Math.max(i.width,o.width),height:i.height+o.height}}),{width:0,height:0}),this.defaultWidth=o.width,this.defaultHeight=o.height),this.txtChildContainer.defaultWidth=o.width,this.txtChildContainer.defaultHeight=o.height,this.txtChildContainer.transform._updateDock=!0}},{key:"testmask",value:function testmask(){var o=new i.RenderTexture.create(600,65),a=new i.Sprite(o),h=new i.Graphics;h.beginFill(16777215,1),h.drawRect(0,0,600,65),h.endFill();var c=new i.filters.BlurYFilter(6);return h._filters=[c],Graphics._renderer.render(h,o),this.addChild(a),this.mask=a,this}},{key:"text",set:function set(i){this._childTexts=[],this.txtChildContainer.destroy(),this._text=i;var o=this._ini_TextBuilder();this._msRender(),this.resize(o),this.txtChildContainer.dock.set(this.anchor.x,this.anchor.y)},get:function get(){return this._text}}]),MotionTextContainers}(i.Container),m=new c;o.a=m}).call(this,a(4))},function(i,o,a){a.d(o,"a",(function(){return c}));var h=a(4),c=function Polygon(i){return function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Polygon),new h.Polygon(i)}},function(i,o,a){a.d(o,"a",(function(){return m}));var h=a(13),c=(a(25),a(6)),l=a(23);function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var m=function(){function Input(i){var o=this;!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Input);var a=c.a.get("manager"),m=c.a.get("screen");this._id=a.addInput(this),this._createdAt=Date.now(),this._blink=!1,this._focus=!1;var g={name:this._id,isInputContainer:!0,color:16777215,focusY:null},_=Object.assign({},g,i);this._container=new h.a(_),this._container._inputObject=this,this._focusY=_.focusY,this.padding={top:8,bottom:8,left:8,right:8};var x=new WG.Sprite(_.image,{parent:this._id});this.sprite=x,x.x=x.width/2,x.y=x.height/2,this._textContainer=new h.a({x:this.padding.left,name:this._id+"_text",parent:this._id}),this._text=new WG.Text("",{parent:this._id+"_text",fill:_.color,anchor:{x:0,y:.5},fontSize:36}),this._text.y=x.height/2,this._cursorGrpahics=new l.a({parent:this._id}),this.cursorWidth=1,this._currentCursor=0;var S=document.createElement("input");S.type="text",S.style.position="absolute",S.style.pointerEvents="none",S.style.opacity=0;var R=function adjust(){o._text.text=S.value,o._currentCursor=S.selectionEnd;var i=0;if(0!==o._currentCursor&&(o._text.text=o._text.text.substring(0,o._currentCursor),i=o._text.width),o._text.text=S.value,o._text.text.length===o._currentCursor){var a=0;i>x.width-o.padding.left-o.padding.right&&(a=x.width-o.padding.left-o.padding.right-i),o._text.x=a,o._cursorPosition=i+o.cursorWidth+a}else if(i+o._text.x<0){var h=-1*(i+o._text.x);o._text.x+=h,o._cursorPosition=0}else if(i+o._text.x>0){var c=-1*(i+o._text.x);o._cursorPosition=-c,o._cursorPosition>x.width-o.padding.left-o.padding.right&&(o._cursorPosition=x.width-o.padding.left-o.padding.right,c=x.width-o.padding.left-o.padding.right-i,o._text.x=c)}0===o._currentCursor&&(o._cursorPosition=0),o._renderCursor()};S.onkeyup=function(){R()},document.body.appendChild(S),this._isDown=!1,this._dom=S,S.onfocus=function(i){o._focus||(o._focus=!0,m._isKeyboardOn=!0,null!==o._focusY&&(o._container.y=o._focusY))},S.onblur=function(){o._isDown||o._focus&&(m._isKeyboardOn=!1,o._focus=!1,o._container.y=o._originalY)},this._container.on("pointerdown",(function(i){o._isDown=!0,setTimeout((function(){a.setFocusedInput(o),S.focus()}),100)})),this._container.on("pointermove",(function(i){if(o._isDown){for(var a=i.calc,h=o._container.x+o.padding.left,c=a.x-h,l=c-o._text.x,m=o._text.text,g=0,_=0;_<m.length&&(o._text.text=m.substr(0,_+1),!(l<o._text.width));_++)g=_+1;c>x.width-o.padding.left-o.padding.right&&(g+=1),S.selectionStart=g,S.selectionEnd=g,R()}})),this._container.on("pointerup",(function(){o._isDown=!1})),this._container.on("pointerout",(function(){o._isDown=!1})),this._graphics=new l.a({parent:this._id}),this._graphics.clear(),this._graphics.beginFill(16777215,1),this._graphics.drawRect(0,0,x.width-this.padding.right-2*this.cursorWidth,x.height-this.padding.bottom-this.padding.top),this._textContainer.mask=this._graphics,this._container.x-=this.sprite.width/2,this._container.y-=this.sprite.height/2,this._originalY=this._container.y}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(Input,[{key:"_update",value:function _update(){var i=Date.now();i-this._createdAt>500&&(this._createdAt=i,this._cursorGrpahics.clear(),this._blink=!this._blink,this._renderCursor())}},{key:"_renderCursor",value:function _renderCursor(){this._cursorGrpahics.clear(),this._blink&&(this._cursorGrpahics.beginFill(16777215,1),this._cursorGrpahics.drawRect(this._cursorPosition+this.padding.left,this.sprite.height/2-this._text.height/2,this.cursorWidth,this._text.height))}},{key:"destroy",value:function destroy(){var i=c.a.get("manager");this._container.destroy(),i.deleteInput(this)}},{key:"x",set:function set(i){this._container.x=i-this.sprite.width/2},get:function get(){return this._container.x+this.sprite.width/2}},{key:"y",set:function set(i){this._container.y=i-this.sprite.height/2},get:function get(){return this._container.y+this.sprite.height/2}},{key:"width",get:function get(){return this.sprite.width}},{key:"height",get:function get(){return this.sprite.height}},{key:"text",get:function get(){return this._text.text}},{key:"textObject",get:function get(){return this._text}}]),Input}()},function(i,o,a){a.d(o,"a",(function(){return l}));var h=a(6),c=a(15);function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var l=function(){function Timer(i){!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Timer);var o={onStart:null,onComplete:null,onProgress:null,duration:1e3,delay:0,easing:c.a.linear},a=Object.assign({},o,i);this._startTime=Date.now(),this.duration=a.duration,this.delay=a.delay,this.easing=a.easing,this.onComplete=a.onComplete,this.onStart=a.onStart,this.onProgress=a.onProgress,this._isOnStart=!1,this.running=!0,this.done=!1;var l=h.a.get("manager");this._id=l.addTimer(this)}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(Timer,[{key:"_update",value:function _update(){var i=h.a.get("manager");if(this.running){var o=Date.now();if(!(o-this._startTime<this.delay)){this.onStart&&!1===this._isOnStart&&(this.onStart(),this._isOnStart=!0);var a=o-this._startTime-this.delay,c=a/this.duration;c>=1&&(c=1),c=this.easing(c),this.onProgress&&this.onProgress(c,a),1===c&&(this.onComplete&&this.onComplete(),i.deleteTimer(this),this.done=!0)}}}},{key:"stop",value:function stop(){h.a.get("manager").deleteTimer(this)}},{key:"pause",value:function pause(){this.running=!1,this._pauseTime=Date.now()}},{key:"resume",value:function resume(){if(!this.running){var i=Date.now()-this._pauseTime;this.running=!0,this._startTime+=i}}}]),Timer}()},function(i,o,a){a.d(o,"a",(function(){return l}));var h=a(4),c=a(12);function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function _typeof(i){return _typeof2(i)}:function _typeof(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":_typeof2(i)})(i)}function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}function _get(i,o,a){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(i,o,a){var h=function _superPropBase(i,o){for(;!Object.prototype.hasOwnProperty.call(i,o)&&null!==(i=_getPrototypeOf(i)););return i}(i,o);if(h){var c=Object.getOwnPropertyDescriptor(h,o);return c.get?c.get.call(a):c.value}})(i,o,a||i)}function _possibleConstructorReturn(i,o){return!o||"object"!==_typeof(o)&&"function"!=typeof o?function _assertThisInitialized(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}(i):o}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(i){return!1}}function _getPrototypeOf(i){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(i){return i.__proto__||Object.getPrototypeOf(i)})(i)}function _setPrototypeOf(i,o){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(i,o){return i.__proto__=o,i})(i,o)}a(6),a(7);var l=function(i){!function _inherits(i,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&_setPrototypeOf(i,o)}(Mesh,i);var o=function _createSuper(i){return function(){var o,a=_getPrototypeOf(i);if(_isNativeReflectConstruct()){var h=_getPrototypeOf(this).constructor;o=Reflect.construct(a,arguments,h)}else o=a.apply(this,arguments);return _possibleConstructorReturn(this,o)}}(Mesh);function Mesh(i,a,c){var l;!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Mesh);var m=Object.assign({},{},c),g=new h.Mesh(i,a);return(l=o.call(this,g,m))._pixiObject=g,l}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(Mesh,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Mesh.prototype),"destroy",this).call(this)}},{key:"shader",get:function get(){return this._pixiObject.shader}}]),Mesh}(c.a)},function(i,o,a){a.d(o,"a",(function(){return m}));var h=a(4),c=a(12),l=a(6);function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function _typeof(i){return _typeof2(i)}:function _typeof(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":_typeof2(i)})(i)}function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}function _possibleConstructorReturn(i,o){return!o||"object"!==_typeof(o)&&"function"!=typeof o?function _assertThisInitialized(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}(i):o}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(i){return!1}}function _getPrototypeOf(i){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(i){return i.__proto__||Object.getPrototypeOf(i)})(i)}function _setPrototypeOf(i,o){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(i,o){return i.__proto__=o,i})(i,o)}a(8);var m=function(i){!function _inherits(i,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&_setPrototypeOf(i,o)}(BitmapText,i);var o=function _createSuper(i){return function(){var o,a=_getPrototypeOf(i);if(_isNativeReflectConstruct()){var h=_getPrototypeOf(this).constructor;o=Reflect.construct(a,arguments,h)}else o=a.apply(this,arguments);return _possibleConstructorReturn(this,o)}}(BitmapText);function BitmapText(i,a){var c;!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,BitmapText);var m=Object.assign({},{},a);void 0===m.fontFamily&&console.error("[WG.BitmapText] FontFamily를 지정해주세요");var g=l.a.get("manager");if(!g.isInstalledBitmapFont(m.fontFamily)){for(var _=l.a.get("resource"),x=Object.keys(_),S=[],R=_[m.fontFamily+".fnt"],k=0;k<x.length;k++){var j=x[k];j.includes(m.fontFamily)&&!j.includes("fnt")&&S.push(j)}var X=R.indexOf("kernings"),Y=R.indexOf("kerning",X+1);-1!==X&&(R=R.replace(R.substring(X,Y),""));for(var q={},Z=0;Z<S.length;Z++){var $=S[Z];q[$.split("/").pop()]=_[$]}h.BitmapFont.install(R,q);var ee=R.indexOf("face=")+6,te=R.indexOf('"',ee),re=R.substring(ee,te);g.installBitmapFont(m.fontFamily,re)}var ie=g.getFaceNameFromBitmapFont(m.fontFamily),ne=new h.BitmapText(i,{fontName:ie});return(c=o.call(this,ne,m))._pixiObject=ne,c}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(BitmapText,[{key:"text",set:function set(i){this._pixiObject.text=i},get:function get(){return this._pixiObject.text}},{key:"letterSpacing",set:function set(i){this._pixiObject.letterSpacing=i},get:function get(){return this._pixiObject.letterSpacing}},{key:"align",set:function set(i){this._pixiObject.align=i},get:function get(){return this._pixiObject.align}}]),BitmapText}(c.a)},function(i,o,a){a.d(o,"a",(function(){return ne}));var h,c,l,m=a(4),g=function(){function PropertyNode(i,o,a){this.value=i,this.time=o,this.next=null,this.isStepped=!1,this.ease=a?"function"==typeof a?a:c.generateEase(a):null}return PropertyNode.createList=function(i){if("list"in i){var o=i.list,a=void 0,h=void 0,l=o[0],m=l.value,g=l.time;if(h=a=new PropertyNode("string"==typeof m?c.hexToRGB(m):m,g,i.ease),o.length>2||2===o.length&&o[1].value!==m)for(var _=1;_<o.length;++_){var x=o[_],S=x.value,R=x.time;a.next=new PropertyNode("string"==typeof S?c.hexToRGB(S):S,R),a=a.next}return h.isStepped=!!i.isStepped,h}var k=new PropertyNode("string"==typeof i.start?c.hexToRGB(i.start):i.start,0);return i.end!==i.start&&(k.next=new PropertyNode("string"==typeof i.end?c.hexToRGB(i.end):i.end,1)),k},PropertyNode}(),_=m;function GetTextureFromString(i){return h(i)}h=parseInt(/^(\d+)\./.exec(m.VERSION)[1])<5?_.Texture.fromImage:_.Texture.from,(l=c||(c={})).verbose=!1,l.DEG_TO_RADS=Math.PI/180,l.rotatePoint=function rotatePoint(i,o){if(i){i*=l.DEG_TO_RADS;var a=Math.sin(i),h=Math.cos(i),c=o.x*h-o.y*a,m=o.x*a+o.y*h;o.x=c,o.y=m}},l.combineRGBComponents=function combineRGBComponents(i,o,a){return i<<16|o<<8|a},l.normalize=function normalize(i){var o=1/l.length(i);i.x*=o,i.y*=o},l.scaleBy=function scaleBy(i,o){i.x*=o,i.y*=o},l.length=function length(i){return Math.sqrt(i.x*i.x+i.y*i.y)},l.hexToRGB=function hexToRGB(i,o){var a;return o||(o={}),"#"==i.charAt(0)?i=i.substr(1):0===i.indexOf("0x")&&(i=i.substr(2)),8==i.length&&(a=i.substr(0,2),i=i.substr(2)),o.r=parseInt(i.substr(0,2),16),o.g=parseInt(i.substr(2,2),16),o.b=parseInt(i.substr(4,2),16),a&&(o.a=parseInt(a,16)),o},l.generateEase=function generateEase(i){var o=i.length,a=1/o;return function(h){var c,l,m=o*h|0;return c=(h-m*a)*o,(l=i[m]||i[o-1]).s+c*(2*(1-c)*(l.cp-l.s)+c*(l.e-l.s))}},l.getBlendMode=function getBlendMode(i){if(!i)return m.BLEND_MODES.NORMAL;for(i=i.toUpperCase();i.indexOf(" ")>=0;)i=i.replace(" ","_");return m.BLEND_MODES[i]||m.BLEND_MODES.NORMAL},l.createSteppedGradient=function createSteppedGradient(i,o){void 0===o&&(o=10),("number"!=typeof o||o<=0)&&(o=10);var a=new g(l.hexToRGB(i[0].value),i[0].time);a.isStepped=!0;for(var h=a,c=i[0],m=1,_=i[m],x=1;x<o;++x){for(var S=x/o;S>_.time;)c=_,_=i[++m];S=(S-c.time)/(_.time-c.time);var R=l.hexToRGB(c.value),k=l.hexToRGB(_.value),j={r:(k.r-R.r)*S+R.r,g:(k.g-R.g)*S+R.g,b:(k.b-R.b)*S+R.b};h.next=new g(j,x/o),h=h.next}return a};var x=function extendStatics(i,o){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])})(i,o)};function __extends(i,o){function __(){this.constructor=i}x(i,o),i.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}var S=function(){function PropertyList(i){void 0===i&&(i=!1),this.current=null,this.next=null,this.isColor=!!i,this.interpolate=null,this.ease=null}return PropertyList.prototype.reset=function(i){this.current=i,this.next=i.next,this.next&&this.next.time>=1?this.interpolate=this.isColor?intColorSimple:intValueSimple:i.isStepped?this.interpolate=this.isColor?intColorStepped:intValueStepped:this.interpolate=this.isColor?intColorComplex:intValueComplex,this.ease=this.current.ease},PropertyList}();function intValueSimple(i){return this.ease&&(i=this.ease(i)),(this.next.value-this.current.value)*i+this.current.value}function intColorSimple(i){this.ease&&(i=this.ease(i));var o=this.current.value,a=this.next.value,h=(a.r-o.r)*i+o.r,l=(a.g-o.g)*i+o.g,m=(a.b-o.b)*i+o.b;return c.combineRGBComponents(h,l,m)}function intValueComplex(i){for(this.ease&&(i=this.ease(i));i>this.next.time;)this.current=this.next,this.next=this.next.next;return i=(i-this.current.time)/(this.next.time-this.current.time),(this.next.value-this.current.value)*i+this.current.value}function intColorComplex(i){for(this.ease&&(i=this.ease(i));i>this.next.time;)this.current=this.next,this.next=this.next.next;i=(i-this.current.time)/(this.next.time-this.current.time);var o=this.current.value,a=this.next.value,h=(a.r-o.r)*i+o.r,l=(a.g-o.g)*i+o.g,m=(a.b-o.b)*i+o.b;return c.combineRGBComponents(h,l,m)}function intValueStepped(i){for(this.ease&&(i=this.ease(i));this.next&&i>this.next.time;)this.current=this.next,this.next=this.next.next;return this.current.value}function intColorStepped(i){for(this.ease&&(i=this.ease(i));this.next&&i>this.next.time;)this.current=this.next,this.next=this.next.next;var o=this.current.value;return c.combineRGBComponents(o.r,o.g,o.b)}var R,k=function(i){function Particle(o){var a=i.call(this)||this;return a.emitter=o,a.anchor.x=a.anchor.y=.5,a.velocity=new m.Point,a.rotationSpeed=0,a.rotationAcceleration=0,a.maxLife=0,a.age=0,a.ease=null,a.extraData=null,a.alphaList=new S,a.speedList=new S,a.speedMultiplier=1,a.acceleration=new m.Point,a.maxSpeed=NaN,a.scaleList=new S,a.scaleMultiplier=1,a.colorList=new S(!0),a._doAlpha=!1,a._doScale=!1,a._doSpeed=!1,a._doAcceleration=!1,a._doColor=!1,a._doNormalMovement=!1,a._oneOverLife=0,a.next=null,a.prev=null,a.init=a.init,a.Particle_init=Particle.prototype.init,a.update=a.update,a.Particle_update=Particle.prototype.update,a.Sprite_destroy=i.prototype.destroy,a.Particle_destroy=Particle.prototype.destroy,a.applyArt=a.applyArt,a.kill=a.kill,a}return __extends(Particle,i),Particle.prototype.init=function(){this.age=0,this.velocity.x=this.speedList.current.value*this.speedMultiplier,this.velocity.y=0,c.rotatePoint(this.rotation,this.velocity),this.noRotation?this.rotation=0:this.rotation*=c.DEG_TO_RADS,this.rotationSpeed*=c.DEG_TO_RADS,this.rotationAcceleration*=c.DEG_TO_RADS,this.alpha=this.alphaList.current.value,this.scale.x=this.scale.y=this.scaleList.current.value,this._doAlpha=!!this.alphaList.current.next,this._doSpeed=!!this.speedList.current.next,this._doScale=!!this.scaleList.current.next,this._doColor=!!this.colorList.current.next,this._doAcceleration=0!==this.acceleration.x||0!==this.acceleration.y,this._doNormalMovement=this._doSpeed||0!==this.speedList.current.value||this._doAcceleration,this._oneOverLife=1/this.maxLife;var i=this.colorList.current.value;this.tint=c.combineRGBComponents(i.r,i.g,i.b),this.visible=!0},Particle.prototype.applyArt=function(i){this.texture=i||m.Texture.EMPTY},Particle.prototype.update=function(i){if(this.age+=i,this.age>=this.maxLife||this.age<0)return this.kill(),-1;var o=this.age*this._oneOverLife;if(this.ease&&(o=4==this.ease.length?this.ease(o,0,1,1):this.ease(o)),this._doAlpha&&(this.alpha=this.alphaList.interpolate(o)),this._doScale){var a=this.scaleList.interpolate(o)*this.scaleMultiplier;this.scale.x=this.scale.y=a}if(this._doNormalMovement){var h=void 0,l=void 0;if(this._doSpeed){var m=this.speedList.interpolate(o)*this.speedMultiplier;c.normalize(this.velocity),c.scaleBy(this.velocity,m),h=this.velocity.x*i,l=this.velocity.y*i}else if(this._doAcceleration){var g=this.velocity.x,_=this.velocity.y;if(this.velocity.x+=this.acceleration.x*i,this.velocity.y+=this.acceleration.y*i,this.maxSpeed){var x=c.length(this.velocity);x>this.maxSpeed&&c.scaleBy(this.velocity,this.maxSpeed/x)}h=(g+this.velocity.x)/2*i,l=(_+this.velocity.y)/2*i}else h=this.velocity.x*i,l=this.velocity.y*i;this.position.x+=h,this.position.y+=l}if(this._doColor&&(this.tint=this.colorList.interpolate(o)),0!==this.rotationAcceleration){var S=this.rotationSpeed+this.rotationAcceleration*i;this.rotation+=(this.rotationSpeed+S)/2*i,this.rotationSpeed=S}else 0!==this.rotationSpeed?this.rotation+=this.rotationSpeed*i:this.acceleration&&!this.noRotation&&(this.rotation=Math.atan2(this.velocity.y,this.velocity.x));return o},Particle.prototype.kill=function(){this.emitter.recycle(this)},Particle.prototype.destroy=function(){this.parent&&this.parent.removeChild(this),this.Sprite_destroy(),this.emitter=this.velocity=this.colorList=this.scaleList=this.alphaList=this.speedList=this.ease=this.next=this.prev=null},Particle.parseArt=function(i){var o;for(o=i.length;o>=0;--o)"string"==typeof i[o]&&(i[o]=GetTextureFromString(i[o]));if(c.verbose)for(o=i.length-1;o>0;--o)if(i[o].baseTexture!=i[o-1].baseTexture){window.console&&console.warn("PixiParticles: using particle textures from different images may hinder performance in WebGL");break}return i},Particle.parseData=function(i){return i},Particle}(m.Sprite),j=function(){function PolygonalChain(i){this.segments=[],this.countingLengths=[],this.totalLength=0,this.init(i)}return PolygonalChain.prototype.init=function(i){if(i&&i.length)if(Array.isArray(i[0]))for(var o=0;o<i.length;++o)for(var a=i[o],h=a[0],c=1;c<a.length;++c){var l=a[c];this.segments.push({p1:h,p2:l,l:0}),h=l}else for(h=i[0],o=1;o<i.length;++o)l=i[o],this.segments.push({p1:h,p2:l,l:0}),h=l;else this.segments.push({p1:{x:0,y:0},p2:{x:0,y:0},l:0});for(o=0;o<this.segments.length;++o){var m=this.segments[o],g=m.p1,_=m.p2,x=Math.sqrt((_.x-g.x)*(_.x-g.x)+(_.y-g.y)*(_.y-g.y));this.segments[o].l=x,this.totalLength+=x,this.countingLengths.push(this.totalLength)}},PolygonalChain.prototype.getRandomPoint=function(i){var o,a,h=Math.random()*this.totalLength;if(1===this.segments.length)o=this.segments[0],a=h;else for(var c=0;c<this.countingLengths.length;++c)if(h<this.countingLengths[c]){o=this.segments[c],a=0===c?h:h-this.countingLengths[c-1];break}a/=o.l||1;var l=o.p1,m=o.p2;i.x=l.x+a*(m.x-l.x),i.y=l.y+a*(m.y-l.y)},PolygonalChain}(),X=m;R=parseInt(/^(\d+)\./.exec(m.VERSION)[1])<5?X.ticker.shared:X.Ticker.shared;var Y=new m.Point,q=function(){function Emitter(i,o,a){this._currentImageIndex=-1,this._particleConstructor=k,this.particleImages=null,this.startAlpha=null,this.startSpeed=null,this.minimumSpeedMultiplier=1,this.acceleration=null,this.maxSpeed=NaN,this.startScale=null,this.minimumScaleMultiplier=1,this.startColor=null,this.minLifetime=0,this.maxLifetime=0,this.minStartRotation=0,this.maxStartRotation=0,this.noRotation=!1,this.minRotationSpeed=0,this.maxRotationSpeed=0,this.particleBlendMode=0,this.customEase=null,this.extraData=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=null,this.spawnType=null,this._spawnFunc=null,this.spawnRect=null,this.spawnCircle=null,this.spawnPolygonalChain=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0,this.rotation=0,this.ownerPos=null,this._prevEmitterPos=null,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._origArt=null,this._autoUpdate=!1,this._currentImageIndex=-1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=i,o&&a&&this.init(o,a),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}return Object.defineProperty(Emitter.prototype,"orderedArt",{get:function get(){return-1!==this._currentImageIndex},set:function set(i){this._currentImageIndex=i?0:-1},enumerable:!0,configurable:!0}),Object.defineProperty(Emitter.prototype,"frequency",{get:function get(){return this._frequency},set:function set(i){this._frequency="number"==typeof i&&i>0?i:1},enumerable:!0,configurable:!0}),Object.defineProperty(Emitter.prototype,"particleConstructor",{get:function get(){return this._particleConstructor},set:function set(i){if(i!=this._particleConstructor){this._particleConstructor=i,this.cleanup();for(var o=this._poolFirst;o;o=o.next)o.destroy();this._poolFirst=null,this._origConfig&&this._origArt&&this.init(this._origArt,this._origConfig)}},enumerable:!0,configurable:!0}),Object.defineProperty(Emitter.prototype,"parent",{get:function get(){return this._parent},set:function set(i){this.cleanup(),this._parent=i},enumerable:!0,configurable:!0}),Emitter.prototype.init=function(i,o){if(i&&o){this.cleanup(),this._origConfig=o,this._origArt=i,i=Array.isArray(i)?i.slice():[i];var a=this._particleConstructor;this.particleImages=a.parseArt?a.parseArt(i):i,o.alpha?this.startAlpha=g.createList(o.alpha):this.startAlpha=new g(1,0),o.speed?(this.startSpeed=g.createList(o.speed),this.minimumSpeedMultiplier=("minimumSpeedMultiplier"in o?o.minimumSpeedMultiplier:o.speed.minimumSpeedMultiplier)||1):(this.minimumSpeedMultiplier=1,this.startSpeed=new g(0,0));var h=o.acceleration;h&&(h.x||h.y)?(this.startSpeed.next=null,this.acceleration=new m.Point(h.x,h.y),this.maxSpeed=o.maxSpeed||NaN):this.acceleration=new m.Point,o.scale?(this.startScale=g.createList(o.scale),this.minimumScaleMultiplier=("minimumScaleMultiplier"in o?o.minimumScaleMultiplier:o.scale.minimumScaleMultiplier)||1):(this.startScale=new g(1,0),this.minimumScaleMultiplier=1),o.color?this.startColor=g.createList(o.color):this.startColor=new g({r:255,g:255,b:255},0),o.startRotation?(this.minStartRotation=o.startRotation.min,this.maxStartRotation=o.startRotation.max):this.minStartRotation=this.maxStartRotation=0,o.noRotation&&(this.minStartRotation||this.maxStartRotation)?this.noRotation=!!o.noRotation:this.noRotation=!1,o.rotationSpeed?(this.minRotationSpeed=o.rotationSpeed.min,this.maxRotationSpeed=o.rotationSpeed.max):this.minRotationSpeed=this.maxRotationSpeed=0,this.rotationAcceleration=o.rotationAcceleration||0,this.minLifetime=o.lifetime.min,this.maxLifetime=o.lifetime.max,this.particleBlendMode=c.getBlendMode(o.blendMode),o.ease?this.customEase="function"==typeof o.ease?o.ease:c.generateEase(o.ease):this.customEase=null,a.parseData?this.extraData=a.parseData(o.extraData):this.extraData=o.extraData||null,this.spawnRect=this.spawnCircle=null,this.particlesPerWave=1,o.particlesPerWave&&o.particlesPerWave>1&&(this.particlesPerWave=o.particlesPerWave),this.particleSpacing=0,this.angleStart=0,this.parseSpawnType(o),this.frequency=o.frequency,this.spawnChance="number"==typeof o.spawnChance&&o.spawnChance>0?o.spawnChance:1,this.emitterLifetime=o.emitterLifetime||-1,this.maxParticles=o.maxParticles>0?o.maxParticles:1e3,this.addAtBack=!!o.addAtBack,this.rotation=0,this.ownerPos=new m.Point,this.spawnPos=new m.Point(o.pos.x,o.pos.y),this.initAdditional(i,o),this._prevEmitterPos=this.spawnPos.clone(),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=void 0===o.emit||!!o.emit,this.autoUpdate=!!o.autoUpdate,this.orderedArt=!!o.orderedArt}},Emitter.prototype.initAdditional=function(i,o){},Emitter.prototype.parseSpawnType=function(i){var o;switch(i.spawnType){case"rect":this.spawnType="rect",this._spawnFunc=this._spawnRect;var a=i.spawnRect;this.spawnRect=new m.Rectangle(a.x,a.y,a.w,a.h);break;case"circle":this.spawnType="circle",this._spawnFunc=this._spawnCircle,o=i.spawnCircle,this.spawnCircle=new m.Circle(o.x,o.y,o.r);break;case"ring":this.spawnType="ring",this._spawnFunc=this._spawnRing,o=i.spawnCircle,this.spawnCircle=new m.Circle(o.x,o.y,o.r),this.spawnCircle.minRadius=o.minR;break;case"burst":this.spawnType="burst",this._spawnFunc=this._spawnBurst,this.particleSpacing=i.particleSpacing,this.angleStart=i.angleStart?i.angleStart:0;break;case"point":this.spawnType="point",this._spawnFunc=this._spawnPoint;break;case"polygonalChain":this.spawnType="polygonalChain",this._spawnFunc=this._spawnPolygonalChain,this.spawnPolygonalChain=new j(i.spawnPolygon);break;default:this.spawnType="point",this._spawnFunc=this._spawnPoint}},Emitter.prototype.recycle=function(i){i.next&&(i.next.prev=i.prev),i.prev&&(i.prev.next=i.next),i==this._activeParticlesLast&&(this._activeParticlesLast=i.prev),i==this._activeParticlesFirst&&(this._activeParticlesFirst=i.next),i.prev=null,i.next=this._poolFirst,this._poolFirst=i,i.parent&&i.parent.removeChild(i),--this.particleCount},Emitter.prototype.rotate=function(i){if(this.rotation!=i){var o=i-this.rotation;this.rotation=i,c.rotatePoint(o,this.spawnPos),this._posChanged=!0}},Emitter.prototype.updateSpawnPos=function(i,o){this._posChanged=!0,this.spawnPos.x=i,this.spawnPos.y=o},Emitter.prototype.updateOwnerPos=function(i,o){this._posChanged=!0,this.ownerPos.x=i,this.ownerPos.y=o},Emitter.prototype.resetPositionTracking=function(){this._prevPosIsValid=!1},Object.defineProperty(Emitter.prototype,"emit",{get:function get(){return this._emit},set:function set(i){this._emit=!!i,this._emitterLife=this.emitterLifetime},enumerable:!0,configurable:!0}),Object.defineProperty(Emitter.prototype,"autoUpdate",{get:function get(){return this._autoUpdate},set:function set(i){this._autoUpdate&&!i?R.remove(this.update,this):!this._autoUpdate&&i&&R.add(this.update,this),this._autoUpdate=!!i},enumerable:!0,configurable:!0}),Emitter.prototype.playOnceAndDestroy=function(i){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=i},Emitter.prototype.playOnce=function(i){this.emit=!0,this._completeCallback=i},Emitter.prototype.update=function(i){if(this._autoUpdate&&(i=i/m.settings.TARGET_FPMS/1e3),this._parent){var o,a,h,c,l;for(a=this._activeParticlesFirst;a;a=h)h=a.next,a.update(i);this._prevPosIsValid&&(c=this._prevEmitterPos.x,l=this._prevEmitterPos.y);var g=this.ownerPos.x+this.spawnPos.x,_=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=i<0?0:i;this._spawnTimer<=0;){if(this._emitterLife>0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles)this._spawnTimer+=this._frequency;else{var x;if(x=this.minLifetime==this.maxLifetime?this.minLifetime:Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer<x){var S=void 0,R=void 0;if(this._prevPosIsValid&&this._posChanged){var k=1+this._spawnTimer/i;S=(g-c)*k+c,R=(_-l)*k+l}else S=g,R=_;o=0;for(var j=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount);o<j;++o)if(!(this.spawnChance<1&&Math.random()>=this.spawnChance)){var X=void 0;if(this._poolFirst?(X=this._poolFirst,this._poolFirst=this._poolFirst.next,X.next=null):X=new this.particleConstructor(this),this.particleImages.length>1?-1!==this._currentImageIndex?(X.applyArt(this.particleImages[this._currentImageIndex++]),(this._currentImageIndex<0||this._currentImageIndex>=this.particleImages.length)&&(this._currentImageIndex=0)):X.applyArt(this.particleImages[Math.floor(Math.random()*this.particleImages.length)]):X.applyArt(this.particleImages[0]),X.alphaList.reset(this.startAlpha),1!=this.minimumSpeedMultiplier&&(X.speedMultiplier=Math.random()*(1-this.minimumSpeedMultiplier)+this.minimumSpeedMultiplier),X.speedList.reset(this.startSpeed),X.acceleration.x=this.acceleration.x,X.acceleration.y=this.acceleration.y,X.maxSpeed=this.maxSpeed,1!=this.minimumScaleMultiplier&&(X.scaleMultiplier=Math.random()*(1-this.minimumScaleMultiplier)+this.minimumScaleMultiplier),X.scaleList.reset(this.startScale),X.colorList.reset(this.startColor),this.minRotationSpeed==this.maxRotationSpeed?X.rotationSpeed=this.minRotationSpeed:X.rotationSpeed=Math.random()*(this.maxRotationSpeed-this.minRotationSpeed)+this.minRotationSpeed,X.rotationAcceleration=this.rotationAcceleration,X.noRotation=this.noRotation,X.maxLife=x,X.blendMode=this.particleBlendMode,X.ease=this.customEase,X.extraData=this.extraData,this.applyAdditionalProperties(X),this._spawnFunc(X,S,R,o),X.init(),X.update(-this._spawnTimer),X.parent){var Y=this._parent.children;if(Y[0]==X)Y.shift();else if(Y[Y.length-1]==X)Y.pop();else{var q=Y.indexOf(X);Y.splice(q,1)}this.addAtBack?Y.unshift(X):Y.push(X)}else this.addAtBack?this._parent.addChildAt(X,0):this._parent.addChild(X);this._activeParticlesLast?(this._activeParticlesLast.next=X,X.prev=this._activeParticlesLast,this._activeParticlesLast=X):this._activeParticlesLast=this._activeParticlesFirst=X,++this.particleCount}}this._spawnTimer+=this._frequency}}if(this._posChanged&&(this._prevEmitterPos.x=g,this._prevEmitterPos.y=_,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst){if(this._completeCallback){var Z=this._completeCallback;this._completeCallback=null,Z()}this._destroyWhenComplete&&this.destroy()}}},Emitter.prototype.applyAdditionalProperties=function(i){},Emitter.prototype._spawnPoint=function(i,o,a){this.minStartRotation==this.maxStartRotation?i.rotation=this.minStartRotation+this.rotation:i.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,i.position.x=o,i.position.y=a},Emitter.prototype._spawnRect=function(i,o,a){this.minStartRotation==this.maxStartRotation?i.rotation=this.minStartRotation+this.rotation:i.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,Y.x=Math.random()*this.spawnRect.width+this.spawnRect.x,Y.y=Math.random()*this.spawnRect.height+this.spawnRect.y,0!==this.rotation&&c.rotatePoint(this.rotation,Y),i.position.x=o+Y.x,i.position.y=a+Y.y},Emitter.prototype._spawnCircle=function(i,o,a){this.minStartRotation==this.maxStartRotation?i.rotation=this.minStartRotation+this.rotation:i.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,Y.x=Math.random()*this.spawnCircle.radius,Y.y=0,c.rotatePoint(360*Math.random(),Y),Y.x+=this.spawnCircle.x,Y.y+=this.spawnCircle.y,0!==this.rotation&&c.rotatePoint(this.rotation,Y),i.position.x=o+Y.x,i.position.y=a+Y.y},Emitter.prototype._spawnRing=function(i,o,a){var h=this.spawnCircle;this.minStartRotation==this.maxStartRotation?i.rotation=this.minStartRotation+this.rotation:i.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,h.minRadius!==h.radius?Y.x=Math.random()*(h.radius-h.minRadius)+h.minRadius:Y.x=h.radius,Y.y=0;var l=360*Math.random();i.rotation+=l,c.rotatePoint(l,Y),Y.x+=this.spawnCircle.x,Y.y+=this.spawnCircle.y,0!==this.rotation&&c.rotatePoint(this.rotation,Y),i.position.x=o+Y.x,i.position.y=a+Y.y},Emitter.prototype._spawnPolygonalChain=function(i,o,a){this.minStartRotation==this.maxStartRotation?i.rotation=this.minStartRotation+this.rotation:i.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,this.spawnPolygonalChain.getRandomPoint(Y),0!==this.rotation&&c.rotatePoint(this.rotation,Y),i.position.x=o+Y.x,i.position.y=a+Y.y},Emitter.prototype._spawnBurst=function(i,o,a,h){0===this.particleSpacing?i.rotation=360*Math.random():i.rotation=this.angleStart+this.particleSpacing*h+this.rotation,i.position.x=o,i.position.y=a},Emitter.prototype.cleanup=function(){var i,o;for(i=this._activeParticlesFirst;i;i=o)o=i.next,this.recycle(i),i.parent&&i.parent.removeChild(i);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0},Emitter.prototype.destroy=function(){var i;this.autoUpdate=!1,this.cleanup();for(var o=this._poolFirst;o;o=i)i=o.next,o.destroy();this._poolFirst=this._parent=this.particleImages=this.spawnPos=this.ownerPos=this.startColor=this.startScale=this.startAlpha=this.startSpeed=this.customEase=this._completeCallback=null},Emitter}(),Z=new m.Point,$=["pow","sqrt","abs","floor","round","ceil","E","PI","sin","cos","tan","asin","acos","atan","atan2","log"],ee=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat($).join("|"),"g"),te=(function(i){function PathParticle(o){var a=i.call(this,o)||this;return a.path=null,a.initialRotation=0,a.initialPosition=new m.Point,a.movement=0,a}__extends(PathParticle,i),PathParticle.prototype.init=function(){this.initialRotation=this.rotation,this.Particle_init(),this.path=this.extraData.path,this._doNormalMovement=!this.path,this.movement=0,this.initialPosition.x=this.position.x,this.initialPosition.y=this.position.y},PathParticle.prototype.update=function(i){var o=this.Particle_update(i);if(o>=0&&this.path){var a=this.speedList.interpolate(o)*this.speedMultiplier;this.movement+=a*i,Z.x=this.movement,Z.y=this.path(this.movement),c.rotatePoint(this.initialRotation,Z),this.position.x=this.initialPosition.x+Z.x,this.position.y=this.initialPosition.y+Z.y}return o},PathParticle.prototype.destroy=function(){this.Particle_destroy(),this.path=this.initialPosition=null},PathParticle.parseArt=function(i){return k.parseArt(i)},PathParticle.parseData=function(i){var o={};if(i&&i.path)try{o.path=function(i){for(var o=i.match(ee),a=o.length-1;a>=0;--a)$.indexOf(o[a])>=0&&(o[a]="Math."+o[a]);return i=o.join(""),new Function("x","return "+i+";")}(i.path)}catch(i){c.verbose&&console.error("PathParticle: error in parsing path expression"),o.path=null}else c.verbose&&console.error("PathParticle requires a path string in extraData!"),o.path=null;return o}}(k),function(i){function AnimatedParticle(o){var a=i.call(this,o)||this;return a.textures=null,a.duration=0,a.framerate=0,a.elapsed=0,a.loop=!1,a}return __extends(AnimatedParticle,i),AnimatedParticle.prototype.init=function(){this.Particle_init(),this.elapsed=0,this.framerate<0&&(this.duration=this.maxLife,this.framerate=this.textures.length/this.duration)},AnimatedParticle.prototype.applyArt=function(i){this.textures=i.textures,this.framerate=i.framerate,this.duration=i.duration,this.loop=i.loop},AnimatedParticle.prototype.update=function(i){var o=this.Particle_update(i);if(o>=0){this.elapsed+=i,this.elapsed>this.duration&&(this.loop?this.elapsed=this.elapsed%this.duration:this.elapsed=this.duration-1e-6);var a=this.elapsed*this.framerate+1e-7|0;this.texture=this.textures[a]||m.Texture.EMPTY}return o},AnimatedParticle.prototype.destroy=function(){this.Particle_destroy(),this.textures=null},AnimatedParticle.parseArt=function(i){for(var o,a,h,c,l,g=[],_=0;_<i.length;++_){o=i[_],g[_]=a={},a.textures=l=[],h=o.textures;for(var x=0;x<h.length;++x)if("string"==typeof(c=h[x]))l.push(GetTextureFromString(c));else if(c instanceof m.Texture)l.push(c);else{var S=c.count||1;for(c="string"==typeof c.texture?GetTextureFromString(c.texture):c.texture;S>0;--S)l.push(c)}"matchLife"==o.framerate?(a.framerate=-1,a.duration=0,a.loop=!1):(a.loop=!!o.loop,a.framerate=o.framerate>0?o.framerate:60,a.duration=l.length/a.framerate)}return g},AnimatedParticle}(k)),re=a(13),ie=a(6);function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}a(22);var ne=function(){function Particle(i){var o=this;!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Particle);var a=Object.assign({},{loop:!0,onComplete:null,playOnce:!0},i),h=new re.a(a);this.container=h,this.playOnce=a.playOnce,this.onComplete=a.onComplete;var c=ie.a.get("resource"),l=null,g=1e3;if("json"===a.image.split(".").pop()){var _=c[a.image],x={framerate:39,loop:a.loop,textures:[]};g=a.speed?a.speed:_.data&&_.data.speed?_.data.speed:1e3;for(var S=Object.keys(_.frames),R=0;R<S.length;R++)x.textures.push(m.utils.TextureCache[S[R]]);var k=g/(l=x).textures.length;te.prototype.update=function(i){var o=this.Particle_update(i);if(void 0===this.lastUpdate&&(this.lastUpdate=Date.now(),this.frame=0,this.texture=this.textures[this.frame]),o>=0){var a=Date.now();a-this.lastUpdate>k&&(this.frame+=1,this.frame>=l.textures.length&&(this.loop?this.frame=0:this.frame-=1),this.texture=this.textures[this.frame]||Texture.EMPTY,this.lastUpdate=a)}return o}}else l=c[a.image];this._emitter=new q(h._pixiObject,[l],a.options),"json"===a.image.split(".").pop()&&(this._emitter.particleConstructor=te);var j=ie.a.get("manager");this._emitter._completeCallback=function(){o.onComplete&&o.onComplete(),o.playOnce&&o.destroy()},this._id=j.addParticles(this)}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(Particle,[{key:"_update",value:function _update(i){this._emitter.update(.001*i)}},{key:"destroy",value:function destroy(){var i=ie.a.get("manager");this._emitter.cleanup(),this._emitter.destroy(),this.container.destroy(),i.deleteParticle(this)}},{key:"stop",value:function stop(){this._emitter.emit=!1}},{key:"play",value:function play(){this._emitter.emit=!0}},{key:"setOnComplete",value:function setOnComplete(i){var o=this;this.onComplete=i,this._emitter._completeCallback=function(){o.onComplete&&o.onComplete(),o.playOnce&&o.destroy()}}},{key:"setting",value:function setting(i){this._emitter.init(this._emitter.particleImages,i)}}]),Particle}()},function(i,o,a){i.exports=function parseURI(i,o){o=o||{};for(var a={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},h=a.parser[o.strictMode?"strict":"loose"].exec(i),c={},l=14;l--;)c[a.key[l]]=h[l]||"";return c[a.q.name]={},c[a.key[12]].replace(a.q.parser,(function(i,o,h){o&&(c[a.q.name][o]=h)})),c}},function(i){i.exports=JSON.parse('{"name":"webgamejs","version":"2.0.0","description":"webgame.js - webpack","main":"index.js","author":"ziplabinc","license":"MIT","dependencies":{"deepmerge":"^4.2.2","fast-clone":"^1.5.13","fast.js":"^0.1.1","pixi-better-scroller":"^0.1.85","pixi-filters":"^3.1.1","pixi-particles":"^4.2.0","pixi.js":"^5.3.0","stats.js":"^0.17.0","webfontloader":"^1.6.28"},"scripts":{"dev":"webpack --env dev","test":"webpack --env dev --watch","build":"webpack --env dev && webpack --env prod","doc":"docsify serve ./document"},"devDependencies":{"@babel/core":"^7.9.0","@babel/preset-env":"^7.9.0","@purtuga/esm-webpack-plugin":"^1.2.1","babel-loader":"^8.1.0","babel-polyfill":"^6.26.0","docsify-cli":"^4.4.0","terser-webpack-plugin":"^2.3.5","uglifyjs-webpack-plugin":"^2.2.0","webpack":"^4.42.1","webpack-auto-inject-version":"^1.2.2","webpack-bundle-analyzer":"^3.6.1","webpack-cli":"^3.3.11","worker-loader":"^2.0.0"}}')},function(i,o,a){i.exports=function fastCloneArray(i){var o,a=i.length,h=new Array(a);for(o=0;o<a;o++)h[o]=i[o];return h}},function(i,o,a){var h=a(16);i.exports=function fastFilter(i,o,a){var c,l=i.length,m=[],g=void 0!==a?h(o,a):o;for(c=0;c<l;c++)g(i[c],c,i)&&m.push(i[c]);return m}},function(i,o,a){var h=a(16);i.exports=function fastForEach(i,o,a){var c,l=i.length,m=void 0!==a?h(o,a):o;for(c=0;c<l;c++)m(i[c],c,i)}},function(i,o,a){var h=a(16);i.exports=function fastMap(i,o,a){var c,l=i.length,m=new Array(l),g=void 0!==a?h(o,a):o;for(c=0;c<l;c++)m[c]=g(i[c],c,i);return m}},function(i,o,a){var h=a(29);i.exports=function fastReduce(i,o,a,c){var l,m,g=i.length,_=void 0!==c?h(o,c):o;for(void 0===a?(l=1,m=i[0]):(l=0,m=a);l<g;l++)m=_(m,i[l],l,i);return m}},function(i,o,a){var h=a(29);i.exports=function fastReduce(i,o,a,c){var l,m,g=i.length,_=void 0!==c?h(o,c):o;for(void 0===a?(l=g-2,m=i[g-1]):(l=g-1,m=a);l>=0;l--)m=_(m,i[l],l,i);return m}},function(i,o,a){i.exports=function applyNoContext(i,o){switch(o.length){case 0:return i();case 1:return i(o[0]);case 2:return i(o[0],o[1]);case 3:return i(o[0],o[1],o[2]);case 4:return i(o[0],o[1],o[2],o[3]);case 5:return i(o[0],o[1],o[2],o[3],o[4]);case 6:return i(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return i(o[0],o[1],o[2],o[3],o[4],o[5],o[6]);case 8:return i(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]);default:return i.apply(void 0,o)}}},function(i,o,a){i.exports=function fastCloneObject(i){var o,a,h=Object.keys(i),c=h.length,l={};for(o=0;o<c;o++)l[a=h[o]]=i[a];return l}},function(i,o,a){var h=a(16);i.exports=function fastFilterObject(i,o,a){var c,l,m=Object.keys(i),g=m.length,_={},x=void 0!==a?h(o,a):o;for(c=0;c<g;c++)x(i[l=m[c]],l,i)&&(_[l]=i[l]);return _}},function(i,o,a){var h=a(16);i.exports=function fastForEachObject(i,o,a){var c,l,m=Object.keys(i),g=m.length,_=void 0!==a?h(o,a):o;for(l=0;l<g;l++)_(i[c=m[l]],c,i)}},function(i,o,a){var h=a(16);i.exports=function fastMapObject(i,o,a){var c,l,m=Object.keys(i),g=m.length,_={},x=void 0!==a?h(o,a):o;for(c=0;c<g;c++)_[l=m[c]]=x(i[l],l,i);return _}},function(i,o,a){var h=a(29);i.exports=function fastReduceObject(i,o,a,c){var l,m,g,_=Object.keys(i),x=_.length,S=void 0!==c?h(o,c):o;for(void 0===a?(l=1,g=i[_[0]]):(l=0,g=a);l<x;l++)g=S(g,i[m=_[l]],m,i);return g}},function(i,o,a){var h=a(29);i.exports=function fastReduceRightObject(i,o,a,c){var l,m,g,_=Object.keys(i),x=_.length,S=void 0!==c?h(o,c):o;for(void 0===a?(l=x-2,g=i[_[x-1]]):(l=x-1,g=a);l>=0;l--)g=S(g,i[m=_[l]],m,i);return g}},function(i,o,a){(function(h,c){var l;!function(h){var m=h.Promise,g=m&&"resolve"in m&&"reject"in m&&"all"in m&&"race"in m&&function(){var i;return new m((function(o){i=o})),"function"==typeof i}();o?(o.Promise=g?m:Promise,o.Polyfill=Promise):void 0===(l=function(){return g?m:Promise}.call(o,a,o,i))||(i.exports=l);var _=function NOOP(){};function isArray(i){return"[object Array]"===Object.prototype.toString.call(i)}var x,S=void 0!==c?c:setTimeout,R=[];function asyncFlush(){for(var i=0;i<R.length;i++)R[i][0](R[i][1]);R=[],x=!1}function asyncCall(i,o){R.push([i,o]),x||(x=!0,S(asyncFlush,0))}function invokeCallback(i){var o=i.owner,a=o.state_,h=o.data_,c=i[a],l=i.then;if("function"==typeof c){a="fulfilled";try{h=c(h)}catch(i){reject(l,i)}}handleThenable(l,h)||("fulfilled"===a&&resolve(l,h),"rejected"===a&&reject(l,h))}function handleThenable(i,o){var a;try{if(i===o)throw new TypeError("A promises callback cannot return that same promise.");if(o&&("function"==typeof o||"object"==_typeof2(o))){var h=o.then;if("function"==typeof h)return h.call(o,(function(h){a||(a=!0,o!==h?resolve(i,h):fulfill(i,h))}),(function(o){a||(a=!0,reject(i,o))})),!0}}catch(o){return a||reject(i,o),!0}return!1}function resolve(i,o){i!==o&&handleThenable(i,o)||fulfill(i,o)}function fulfill(i,o){"pending"===i.state_&&(i.state_="sealed",i.data_=o,asyncCall(publishFulfillment,i))}function reject(i,o){"pending"===i.state_&&(i.state_="sealed",i.data_=o,asyncCall(publishRejection,i))}function publish(i){var o=i.then_;i.then_=void 0;for(var a=0;a<o.length;a++)invokeCallback(o[a])}function publishFulfillment(i){i.state_="fulfilled",publish(i)}function publishRejection(i){i.state_="rejected",publish(i)}function Promise(i){if("function"!=typeof i)throw new TypeError("Promise constructor takes a function argument");if(this instanceof Promise==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function invokeResolver(i,o){function rejectPromise(i){reject(o,i)}try{i((function resolvePromise(i){resolve(o,i)}),rejectPromise)}catch(i){rejectPromise(i)}}(i,this)}Promise.prototype={constructor:Promise,state_:"pending",then_:null,data_:void 0,then:function then(i,o){var a={owner:this,then:new this.constructor(_),fulfilled:i,rejected:o};return"fulfilled"===this.state_||"rejected"===this.state_?asyncCall(invokeCallback,a):this.then_.push(a),a.then},catch:function _catch(i){return this.then(null,i)}},Promise.all=function(i){if(!isArray(i))throw new TypeError("You must pass an array to Promise.all().");return new this((function(o,a){var h=[],c=0;function resolver(i){return c++,function(a){h[i]=a,--c||o(h)}}for(var l,m=0;m<i.length;m++)(l=i[m])&&"function"==typeof l.then?l.then(resolver(m),a):h[m]=l;c||o(h)}))},Promise.race=function(i){if(!isArray(i))throw new TypeError("You must pass an array to Promise.race().");return new this((function(o,a){for(var h,c=0;c<i.length;c++)(h=i[c])&&"function"==typeof h.then?h.then(o,a):o(h)}))},Promise.resolve=function(i){return i&&"object"==_typeof2(i)&&i.constructor===this?i:new this((function(o){o(i)}))},Promise.reject=function(i){return new this((function(o,a){a(i)}))}}("undefined"!=typeof window?window:void 0!==h?h:"undefined"!=typeof self?self:this)}).call(this,a(28),a(71).setImmediate)},function(i,o,a){var h=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;function toObject(i){if(null==i)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(i)}i.exports=function shouldUseNative(){try{if(!Object.assign)return!1;var i=new String("abc");if(i[5]="de","5"===Object.getOwnPropertyNames(i)[0])return!1;for(var o={},a=0;a<10;a++)o["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(o).map((function(i){return o[i]})).join(""))return!1;var h={};return"abcdefghijklmnopqrst".split("").forEach((function(i){h[i]=i})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},h)).join("")}catch(i){return!1}}()?Object.assign:function(i,o){for(var a,m,g=toObject(i),_=1;_<arguments.length;_++){for(var x in a=Object(arguments[_]))c.call(a,x)&&(g[x]=a[x]);if(h){m=h(a);for(var S=0;S<m.length;S++)l.call(a,m[S])&&(g[m[S]]=a[m[S]])}}return g}},function(i,o,a){a.d(o,"a",(function(){return g}));var h=a(4),c=a(6),l=a(7),m=a(31);function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var g=function(){function Screen(i,o){var a=this;!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Screen);var l=c.a.get("manager"),g=o.width,_=o.height,x=o.renderStyle,S=o.debug,R=o.backgroundColor;this.WG=i,this.options=o,this.clientSize=this.getClientSize(),this._initial_clientSize=this.getClientSize(),this._isKeyboardOn=!1,this.gameSize={width:g||this.clientSize.width,height:_||this.clientSize.height},this.renderStyle=x,this.renderer=new h.Renderer({width:this.clientSize.width,height:this.clientSize.height,backgroundColor:R,resolution:o.resolution||1,autoDensity:!0}),document.body.appendChild(this.renderer.view),this.renderer.view.style.position="absolute",this.renderer.view.onpointerdown=function(){setTimeout((function(){l.releaseCurrentFocus(),a.renderer.view.focus()}),50)},this.rootContainer=new h.Container,this.rootContainer._WGChild=[],this.rootContainer._dirty=[],this.rootContainer._addDirty=function(o){(o.constructor===i.Container?o._pixiObject:o).children.sort((function(i,o){return i._WGObject.zOrder!==o._WGObject.zOrder?o._WGObject.zOrder-i._WGObject.zOrder:i._WGObject._updateIndex-o._WGObject._updateIndex}))},this.rootContainer.addRootChild=function(i){i._isRoot=!0,i._parent=a.rootContainer,i._rootParent=i._rootParent?i._rootParent.set(i):new m.a(i),i._calculate(),i._inCamera&&i._addCamera(),a.rootContainer.addChild(i._pixiObject),i._rootIndex=a.rootContainer._WGChild.push(i)-1,i.zOrder=i.zOrder},this.rootContainer._destoryForSceneChange=function(){for(var i=0;i<=a.rootContainer.children.length-1;){var o=a.rootContainer.children[i];o.constructor!==h.Graphics?o.destroy({children:!0}):i++}a.rootContainer._WGChild=[],l.deleteAllTimers(),l.deleteAllActions(),l.deleteAllAnimationSprites(),l.deleteAllContainers(),l.deleteAllCubisms(),l.deleteAllInputs(),l.deleteAllParticles()},i.Stage=this.rootContainer,c.a.set("stage",i.Stage),c.a.set("screen",this),this._outsideMask=new h.Graphics,this._outsideMask.zOrder=0,S&&(this._debugGraphics=new h.Graphics,this._debugGraphics._WGObject={zOrder:-99999},i.Stage.addChild(this._debugGraphics)),this._calculate(),window.onresize=function(){a._resizeDelayDetectInterval&&(clearInterval(a._resizeDelayDetectInterval),a._resizeDelayDetectInterval=null),a._resizeCheckCount=0,a._resizeDelayDetectInterval=setInterval((function(){var i=a.getClientSize();i.width!==a.clientSize.width||i.height!==a.clientSize.height?(a._calculate(),a._resizeCheckCount=51):a._resizeCheckCount+=1,a._resizeCheckCount>50&&a._resizeDelayDetectInterval&&(clearInterval(a._resizeDelayDetectInterval),a._resizeDelayDetectInterval=null)}),100)}}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(Screen,[{key:"getClientSize",value:function getClientSize(){return{width:Math.min(document.documentElement.clientWidth,window.innerWidth)||document.body.clientWidth,height:Math.min(document.documentElement.clientHeight,window.innerHeight)||document.body.clientHeight}}},{key:"_getFixedSize",value:function _getFixedSize(){return{width:this.gameSize.width*this.ratio,height:this.gameSize.height*this.ratio}}},{key:"_calculate",value:function _calculate(){var i=this.options,o=i.renderStyle,a=i.outsideVisible,h=i.debug,m=i.guideLine,g=this.WG,_=this.clientSize.height;if(this.clientSize=this.getClientSize(),this._isKeyboardOn&&(this.clientSize.height=_),this.widthRatio=this.clientSize.width/this.gameSize.width,this.heightRatio=this.clientSize.height/this.gameSize.height,this.ratio=Math.min(this.widthRatio,this.heightRatio),c.a.set("widthRatio",this.widthRatio),c.a.set("heightRatio",this.heightRatio),c.a.set("ratio",this.ratio),this.renderer.resize(this.clientSize.width,this.clientSize.height),this.renderer.view.style.width=this.clientSize.width,this.renderer.view.style.height=this.clientSize.height,o===l.c.FIXED){var x=this._getFixedSize();g.Stage.x=this.clientSize.width/2-x.width/2,g.Stage.y=this.clientSize.height/2-x.height/2;for(var S=0;S<this.rootContainer._WGChild.length;S++)this.rootContainer._WGChild[S]._calculate();!1===a&&(this._outsideMask.clear(),this._outsideMask.beginFill(16777215,1),this._outsideMask.drawRect(this.clientSize.width/2-x.width/2,this.clientSize.height/2-x.height/2,x.width,x.height),g.Stage.mask=this._outsideMask),h&&m&&(this._debugGraphics.clear(),this._debugGraphics.lineStyle(1,16777215,1,0),this._debugGraphics.drawRect(0,0,x.width,x.height),this._debugGraphics.moveTo(0,x.height/2),this._debugGraphics.lineTo(x.width,x.height/2),this._debugGraphics.moveTo(x.width/2,0),this._debugGraphics.lineTo(x.width/2,x.height))}g.Camera&&g.Camera._resize(g.Screen.gameSize.width/2,g.Screen.gameSize.height/2),g.Scene&&g.Scene._resize()}}]),Screen}()},function(i,o,a){function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}function _createClass(i,o,a){return o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a),i}a.d(o,"a",(function(){return h}));var h=function(){function Sound(i,o){_classCallCheck(this,Sound);var a=window.AudioContext||window.webkitAudioContext||!1;!1!==a&&(this.context=new a,this._promises={},this._parseFunctionList=[],Object.defineProperties(this,{WG:{value:i,enumerable:!0},options:{value:o,enumerable:!0},srcBuffer:{value:{},enumerable:!0},sfx:{value:new c(this,this.context),enumerable:!0},bgm:{value:new l(this,this.context),enumerable:!0},_isActive:{value:!!i.isIOS,writable:!0},_isMute:{value:!1,writable:!0}}),this.WG.SFX=this.sfx,this.WG.BGM=this.bgm,this.init())}return _createClass(Sound,[{key:"init",value:function init(){var i=this;this._isActive&&"suspended"===this.context.state&&(console.log('[webgameJS] AudioContext is not "running" state. set resume :)'),document.body.addEventListener("touchend",(function resume(){i.context.resume(),setTimeout((function(){"running"===i.context.state&&document.body.removeEventListener("touchend",resume,!1)}),0)}),!1))}},{key:"_setSystemMute",value:function _setSystemMute(){var i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isActive&&[!0,!1].includes(i)&&i!==this._isMute&&(i?this.context.suspend():this.context.resume(),this._isMute=i)}},{key:"_send",value:function _send(i,o){var a=this;return o=o||{},new Promise((function(h,c){var l="_"+Math.random().toString(36).substr(2,9),m=JSON.stringify(o);window.webkit.messageHandlers.WG_Sound.postMessage({functionName:i,optionsToJson:m,uniqueId:l}),a._promises[l]={functionName:i,resolve:h}}))}},{key:"_resolve",value:function _resolve(i,o){this._promises[i]&&(this._parseFunctionList.includes(this._promises[i].functionName)&&(o=JSON.parse(o)),this._promises[i].resolve(o),delete this._promises[i])}},{key:"_iOSLoad",value:function _iOSLoad(i,o){return this._send("add",{key:i,path:o})}},{key:"_iOSPlay",value:function _iOSPlay(i,o,a){return this._send("play",{key:i,type:o,loop:a})}},{key:"_iOSStop",value:function _iOSStop(i){return this._send("stop",{index:i})}},{key:"_iOSSetBGMVolume",value:function _iOSSetBGMVolume(i){return this._send("setBGMVolume",{volume:i})}},{key:"_iOSSetSFXVolume",value:function _iOSSetSFXVolume(i){return this._send("setSFXVolume",{volume:i})}},{key:"isActive",get:function get(){return this._isActive},set:function set(i){this.context&&(this._isActive=i)}},{key:"isMute",get:function get(){return this._isMute}}]),Sound}(),c=function(){function Sfx(i){_classCallCheck(this,Sfx),Object.defineProperties(this,{Sound:{value:i,enumerable:!0},list:{value:{},enumerable:!0},_updateIdx:{value:0,writable:!0},_isMute:{value:!1,writable:!0},_muteVolume:{value:0,writable:!0},_gainNode:{value:i.context.createGain(),writable:!0},volumn:{set:function set(i){this._isMute?this._muteVolume=i:(this.Sound.WG.isIOS&&this.Sound._iOSSetSFXVolume(i+""),this._gainNode.gain.value=i)},get:function get(){return this._isMute?this._muteVolume:this._gainNode.gain.value},enumerable:!0}}),this._gainNode.connect(i.context.destination)}return _createClass(Sfx,[{key:"play",value:function play(i){var o=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.Sound._isActive){if(this.Sound.WG.isIOS)return new Promise((function(h){o.Sound._iOSPlay(i,"sfx",a+"").then((function(i){o.list[i]={onended:function onended(){}},h(i)}))}));if(void 0===this.Sound.srcBuffer[i])return console.error("ERR_INVALID_SID");var h=this._updateIdx++,c=this.list[h];return(c=this.Sound.context.createBufferSource()).buffer=this.Sound.srcBuffer[i],c.connect(this._gainNode),c.loop=a,c.onended=this.stop.bind(this,h,!0),this.list[h]=c,c.start(),new Promise((function(i){return i(h)}))}}},{key:"stop",value:function stop(i){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((o||this.Sound._isActive)&&void 0!==this.list[i]){if(this.Sound.WG.isIOS)return this.Sound._iOSStop(i);this.list[i].stop(),this.list[i].disconnect(this._gainNode),delete this.list[i]}}},{key:"setMute",value:function setMute(){var i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((o||this.Sound._isActive)&&[!0,!1].includes(i)&&i!==this._isMute){var a=[this._gainNode.gain.value,this._muteVolume];this._muteVolume=a[0],this._gainNode.gain.value=a[1],this.Sound.WG.isIOS&&this.Sound._iOSSetSFXVolume(this._gainNode.gain.value+""),this._isMute=i}}},{key:"onended",value:function onended(i,o){var a=this;if(this.Sound.WG.isIOS)this.list[i].onended=function(){return o()};else{if(void 0===this.list[i])return;this.list[i].onended=function(){o(),a.stop(i,!0)}}}},{key:"isMute",get:function get(){return this._isMute}}]),Sfx}(),l=function(){function Bgm(i){_classCallCheck(this,Bgm),Object.defineProperties(this,{Sound:{value:i,enumerable:!0},_playingSource:{value:null,writable:!0},_playingSourceName:{value:null,writable:!0},_isMute:{value:!1,writable:!0},_muteVolume:{value:!1,writable:!0},_gainNode:{value:i.context.createGain(),writable:!0},volumn:{set:function set(i){this._isMute?this._muteVolume=i:(this.Sound.WG.isIOS&&this.Sound._iOSSetBGMVolume(i+""),this._gainNode.gain.value=i)},get:function get(){return this._isMute?this._muteVolume:this._gainNode.gain.value},enumerable:!0}}),this._gainNode.connect(i.context.destination)}return _createClass(Bgm,[{key:"play",value:function play(i){var o=this;if(this.Sound._isActive)if(this.Sound.WG.isIOS)this._playingSource&&this.stop(),this.Sound._iOSPlay(i,"bgm","true").then((function(i){return o._playingSource=i}));else{if(void 0===this.Sound.srcBuffer[i])return console.error("ERR_INVALID_SID");null!==this._playingSource&&this.stop(),this._playingSource=this.Sound.context.createBufferSource(),this._playingSource.buffer=this.Sound.srcBuffer[i],this._playingSource.connect(this._gainNode),this._playingSource.loop=!0,this._playingSourceName=i,this._playingSource.start()}}},{key:"stop",value:function stop(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(i||this.Sound._isActive)&&void 0!==this._playingSource&&(this.Sound.WG.isIOS?this.Sound._iOSStop(this._playingSource):(this._playingSource.stop(),this._playingSource.disconnect(this._gainNode),this._playingSource=null,this._playingSourceName=null))}},{key:"setMute",value:function setMute(){var i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((o||this.Sound._isActive)&&[!0,!1].includes(i)&&i!==this._isMute){var a=[this._gainNode.gain.value,this._muteVolume];this._muteVolume=a[0],this._gainNode.gain.value=a[1],this.Sound.WG.isIOS&&this.Sound._iOSSetBGMVolume(this._gainNode.gain.value+""),this._isMute=i}}},{key:"isMute",get:function get(){return this._isMute}},{key:"playing",get:function get(){return this._playingSourceName}}]),Bgm}()},function(i,o,a){a.d(o,"a",(function(){return S}));var h=a(4),c=a(59),l=a(60),m=a(6),g=a(7),_=a(8);function _slicedToArray(i,o){return function _arrayWithHoles(i){if(Array.isArray(i))return i}(i)||function _iterableToArrayLimit(i,o){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(i)){var a=[],h=!0,c=!1,l=void 0;try{for(var m,g=i[Symbol.iterator]();!(h=(m=g.next()).done)&&(a.push(m.value),!o||a.length!==o);h=!0);}catch(i){c=!0,l=i}finally{try{h||null==g.return||g.return()}finally{if(c)throw l}}return a}}(i,o)||function _unsupportedIterableToArray(i,o){if(i){if("string"==typeof i)return _arrayLikeToArray(i,o);var a=Object.prototype.toString.call(i).slice(8,-1);return"Object"===a&&i.constructor&&(a=i.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(i,o):void 0}}(i,o)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(i,o){(null==o||o>i.length)&&(o=i.length);for(var a=0,h=new Array(o);a<o;a++)h[a]=i[a];return h}function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}function _createClass(i,o,a){return o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a),i}var x=["live2d","json","image","sound","end"],S=function(){function Loader(i,o,a){_classCallCheck(this,Loader),Object.defineProperties(this,{WG:{value:i,enumerable:!0},options:{value:o,enumerable:!0},_doneCallback:{value:a},_resourceList:{value:{retry:[],sound:[],font:[],haveOption:{}}},_retryCount:{value:0,writable:!0},_isDecomping:{value:!1,writable:!0},_decompTotalSize:{value:0,writable:!0},_decompIdx:{value:0,writable:!0},_loadPerfTime:{value:[]}}),Object.defineProperty(this.WG,"resource",{value:{},enumerable:!0}),m.a.set("resource",this.WG.resource),this.isLoaded=!1,this.progressTotal=100,this.progress={loadNetwork:0,decompress:0,loadDecompressed:0},this._options=o,this.supportExt={json:["json"],image:["png","jpeg","jpg"],sound:["mp3","ogg"],live2d:["moc3"]},this.init()}return _createClass(Loader,[{key:"init",value:function init(i){h.Loader.shared.add("_1px","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=");var o=i||this.options.resource;this._decompList={},this.options.debug&&this._checkLoadingTime();for(var a=0;a<o.length;a++){var c=void 0;o[a].constructor===String?c=o[a].split(".").pop():o[a].constructor===Object&&(c=o[a].type),c=c.split("?")[0];var l=void 0;if(["mp3","ogg"].includes(c))this.WG.isIOS?this.WG.Sound._iOSLoad(this._getFilePathWithDepth(o[a]),o[a]):this._resourceList.sound.push(o[a]);else if(["woff","ttf","otf","woff2"].includes(c))this._resourceList.font.push(o[a]);else if(["tar"].includes(c)?(this.progressTotal=100*Object.keys(this.progress).length,l={xhrType:h.LoaderResource.XHR_RESPONSE_TYPE.BLOB}):l=["moc3"].includes(c)?{xhrType:h.LoaderResource.XHR_RESPONSE_TYPE.BUFFER}:{},l.crossOrigin=!0,o[a].constructor===String)h.Loader.shared.add(o[a],o[a],l);else if(o[a].constructor===Object){var m=Object.assign({src:"",type:"",splitJson:!1,multiple:!1},o[a]);if(m.multiple.constructor===Object){m.multiple=Object.assign({isResrvdWord:-1!==m.src.indexOf("<$num>"),leadingZero:0,except:[]},m.multiple,{range:m.multiple.range.split("-")});for(var g=_slicedToArray(m.multiple.range.map((function(i){return Number(i)})),2),x=g[0],S=g[1],R=x;R<=S;R++)if(!m.multiple.except.includes(R)){var k=m.multiple.leadingZero>0?_.a.leadingZeros(R,m.multiple.leadingZero):R,j=m.multiple.isResrvdWord?m.src.replace(/<\$num>/g,k)+"."+m.type:m.src+k+"."+m.type;h.Loader.shared.add(j,j,l),this._resourceList.haveOption[j]=m}}else{var X=m.src+"."+m.type;h.Loader.shared.add(X,X,l),this._resourceList.haveOption[X]=m}}}0===this._retryCount&&(h.Loader.shared.onLoad.add(this._setProgress.bind(this,{type:"loadNetwork"})),h.Loader.shared.onError.add(this._errorLoad.bind(this)),h.Loader.shared.onComplete.add(this._completeLoad.bind(this))),h.Loader.shared.load()}},{key:"_checkLoadingTime",value:function _checkLoadingTime(i){var o;this._loadPerfTime.push(Date.now()),i&&("end"===i?(i="Total Preload end in $sec milliseconds.",o=this._loadPerfTime.pop()-this._loadPerfTime[0]):o=this._loadPerfTime.slice(this._loadPerfTime.length-2).reduceRight((function(i,o){return i-o})),console.log("[webgameJS] "+i.replace("$sec",parseInt(o))))}},{key:"_setProgress",value:function _setProgress(i){switch(i.type){case"decompress":this.progress[i.type]+=1/i.obj.etrLength*i.obj.blobSize/this._decompTotalSize*100;break;case"loadDecompressed":this.progress[i.type]+=i.rsc.size/this._decompTotalSize*100;break;case"loadNetwork":this.progress[i.type]=arguments[1].progress}var o={type:i.type,progress:parseFloat(this.progress[i.type].toPrecision(2)),progressTotal:Object.values(this.progress).map((function(i){return parseFloat(i.toPrecision(2))})).reduce((function(i,o){return i+o}),0)/this.progressTotal*100};this.WG.isIOS&&this.WG.Native._native.loading(o.progressTotal.toString()),this.WG.isAndroid&&this.WG.Native.loading("test",o.progressTotal.toString()),this.options.resourceProgressCallback(o)}},{key:"_errorLoad",value:function _errorLoad(i,o,a){a.texture&&(h.BaseTexture.removeFromCache(a.texture.baseTexture),h.Texture.removeFromCache(a.texture)),console.warn("[webgameJS] Resource load fail: ".concat(a.url,". This will be retried soon.\n"),i),this._resourceList.retry.push(a.url)}},{key:"_completeLoad",value:function _completeLoad(i,o){var a=this;this.options.debug&&this._checkLoadingTime("Network load completed in $sec ms.");for(var c=function _loop(){var i=_slicedToArray(m[l],2),o=i[0],c=i[1];if(null!==c.error)return"continue";var g=a._getFilePathWithDepth(o,0),x=a._getFilePathWithDepth(o);switch(c.type){case h.LoaderResource.TYPE.IMAGE:if("_image"==o.split("json")[1])return"continue";a.WG.resource[x]=c.texture;break;case h.LoaderResource.TYPE.JSON:var S=x.substring(0,x.lastIndexOf("/")+1);if(c.data.frames&&c.data.meta)if("http://zip-lab.co.kr"==c.data.meta.app)if(c.data.isSplit||o in a._resourceList.haveOption&&!0===a._resourceList.haveOption[o].splitJson)for(var R in c.data.frames)a.WG.resource[S+R]=h.utils.TextureCache[R];else c.data.data=c.data.data||{},a.WG.resource[x]=c.data;else{if(c.data.animations)for(var k in c.data.animations)a.WG.resource[S+k+".json"]={frames:Object.fromEntries(c.data.animations[k].map((function(i){return[i,c.data.frames[i]]}))),meta:c.data.meta,data:{}},c.data.animations[k].forEach((function(i){delete c.data.frames[i]}));for(var j in c.data.frames)a.WG.resource[S+j]=h.utils.TextureCache[j]}else a.WG.resource[x]=c.data;break;case h.LoaderResource.TYPE.UNKNOWN:"moc3"===c.extension?a.WG.resource[x]=c.data:a._addTar(g,c.data);break;case h.LoaderResource.TYPE.XML:case h.LoaderResource.TYPE.TEXT:if("fnt"===c.extension){var X=c.xhr.response;X.constructor===ArrayBuffer?_.a.arrayBufferToString(X,"UTF-8",(function(i){a.WG.resource[g]=i})):a.WG.resource[g]=c.xhr.response}}},l=0,m=Object.entries(o);l<m.length;l++)c();this._checkLoad(i)}},{key:"_checkLoad",value:function _checkLoad(){if(this._isDecomping)console.log("[webgameJS] Decompress in progress...");else if(this._resourceList.retry.length>0)if(this._retryCount++<3){h.Loader.shared.reset();var i=this._resourceList.retry.slice(0);this._resourceList.retry=[],this.init(i)}else alert("[webgameJS] Resource load fail.\nThe cause of the problem is most likely a network delay.\nPlease contact provider if the phenomenon continues."),this.options.reloadOnLoadFail&&location.reload();else this.options.debug&&(this._checkLoadingTime("PNG/JSON load or loadDecompressed completed in $sec ms."),this._checkLoadingTime("end")),WG._isLoadResource=!0,this._addFont()}},{key:"_addFont",value:function _addFont(){if(0!=this._resourceList.font.length){var i=[],o=document.createElement("style");this._resourceList.font.forEach((function(a){var h=a.split("/").pop(),c=h.substring(0,h.lastIndexOf(".")),l=h.substring(h.lastIndexOf(".")+1,h.length);i.push(c),o.appendChild(document.createTextNode("\n          @font-face {\n              font-family: ".concat(c,";\n              src: url('").concat(a,"') format('").concat(l,"');\n          }      ")))})),document.head.appendChild(o),c.load({custom:{families:i},active:this._addSound.bind(this),fontloading:function fontloading(i,o){var a=document.createElement("p");a.style.fontFamily=i,a.style.fontSize="0px",a.style.visibility="hidden",a.innerHTML=".",document.body.appendChild(a)},fontinactive:function fontinactive(i,o){console.error("[webgameJS] Font load fail: ".concat(i,"."))}})}else this._addSound()}},{key:"_addSound",value:function _addSound(){if(0!=this._resourceList.sound.length)for(var i=0,o=0;o<this._resourceList.sound.length;o++){var a=this._getFilePathWithDepth(this._resourceList.sound[o]),h=new XMLHttpRequest;h.open("GET",this._resourceList.sound[o],!0),h.responseType="arraybuffer",h.onload=function(o,a){var h="",c=void 0===o.status?200:o.status;["","text",void 0].includes(o.responseType)&&(h=o.responseText),0===o.status&&(["arraybuffer","blob"].includes(o.responseType)||h.length>0)&&(c=200),200==c&&this.WG.Sound.context.decodeAudioData(o.response,function(o,a){this.WG.Sound.srcBuffer[o]=a,++i===this._resourceList.sound.length&&(this.WG.Sound.isActive=!0,this._doneCallback())}.bind(this,a),(function(i){console.error("[webgameJS] Error decoding audio data: ".concat(i))}))}.bind(this,h,a),h.send()}else this._doneCallback()}},{key:"_getFilePathWithDepth",value:function _getFilePathWithDepth(i){for(var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.resourceDepth,a=i.lastIndexOf("/"),h=0;h<o;h++)a=i.lastIndexOf("/",a-1);return i.substring(a+1,i.length).split("?")[0]}},{key:"_addTar",value:function _addTar(i,o){var a=this;this._isDecomping=!0;var h=new FileReader;h.onload=function(o){Object(l.a)(h.result).then(function(i,o){var a=this,h=o.reduce((function(i,o){return i+o.size}),0);this._decompList[i]=new R(i,h,this),this._decompList[i].etrLength=o.length;for(var c=function _loop2(h){var c=o[h].name.split(".").pop(),l=(Object.entries(a.supportExt).find((function(i){return i[1].includes(c)}))||[])[0]||"none",m=a._getFilePathWithDepth(o[h].name),_=m.substring(0,m.lastIndexOf("."));if(a._decompList[i][l][_])return console.warn("[webgameJS] ".concat(_," file is duplicated. Please check file name or resourceDepth option.")),a._decompList[i].etrDone++,"continue";switch(l){case"image":if(a._options.loaderMode===g.b.SLOW){var x=new FileReader;x.onloadend=function(a,c,l){var m=this,g=new Image;this._decompList[i].image[c]={data:g,size:o[h].size,ext:a},g.onload=function(){return m._decompList[i].etrDone++},g.src=l.target.result}.bind(a,c,_),x.onerror=a._onErrorDecomp.bind(a),x.readAsDataURL(o[h].blob)}else a._options.loaderMode===g.b.FAST&&createImageBitmap(o[h].blob).then((function(l){a._decompList[i].image[_]={data:l,size:o[h].size,ext:c,width:l.width,height:l.height},a._decompList[i].etrDone++}));break;case"json":try{a._decompList[i].json[_]={data:JSON.parse(o[h].readAsString().trim()),size:o[h].size,ext:c}}catch(o){console.warn("[webgameJS] ".concat(i," > ").concat(_," JSON parse Error: (").concat(o,")"))}a._decompList[i].etrDone++;break;case"sound":a._decompList[i].sound[_]={data:o[h].buffer,size:o[h].size,ext:c},a._decompList[i].etrDone++;break;case"live2d":a._decompList[i].live2d[_]={data:o[h].buffer,size:o[h].size,ext:c},a._decompList[i].etrDone++;break;case"none":a._decompList[i].etrDone++}},l=0;l<o.length;l++)c(l)}.bind(a,i),a._onErrorDecomp.bind(a))},h.onerror=this._onErrorDecomp.bind(this),h.readAsArrayBuffer(o)}},{key:"_onErrorDecomp",value:function _onErrorDecomp(i){i=i.target?i.target.error:i;var o="[webgameJS] ".concat(i.name,": ").concat(i.message);WG.isIncognitoMode&&(o+="\nAlso, it does not guarantee operation in Incognito Mode."),alert(o),console.error(i),this._isDecomping=!1}},{key:"_runDecomp",value:function _runDecomp(){var i=this,o=0,a=x[this._decompIdx++];if("end"==a)return this._isDecomping=!1,void this._checkLoad();Object.values(this._decompList).forEach((function(c){var l=Object.keys(c[a]).length;if(0!==l){c.rscLength+=l;var m=function _loop3(l){var m=l+"."+c[a][l].ext;if("image"==a){if(void 0===c.image[l].data)return console.warn("[webgameJS] ".concat(m," was not found in ").concat(c.zipName)),"continue";var x;(i._options.loaderMode===g.b.SLOW||i._options.loaderMode===g.b.FAST)&&(x=h.BaseTexture.from(c.image[l].data));var S=null;if(l in c.json&&c.json[l].data.frames){S="zip/"+l+".json_image";var R=c.json[l].data,k=_.a.getUniqueId();for(var j in R.frames)h.Texture.addToCache(new h.Texture(x,new h.Rectangle(R.frames[j].frame.x,R.frames[j].frame.y,R.frames[j].frame.w,R.frames[j].frame.h),new h.Rectangle(0,0,x.realWidth,x.realHeight),R.frames[j].trimmed,R.frames[j].rotated),k+"_"+j),R.frames[k+"_"+j]=R.frames[j],delete R.frames[j]}else S="zip/"+l,h.Texture.addToCache(new h.Texture(x),S),i.WG.resource[m]=h.utils.TextureCache[S];i._setProgress({type:"loadDecompressed",rsc:c[a][l]}),++c.rscDone>=c.rscLength&&++o>=Object.keys(i._decompList).length&&i._runDecomp()}else if("sound"==a)i.WG.Sound.context.decodeAudioData(c.sound[l].data,function(i,h,c){this.WG.Sound.srcBuffer[h]=c,this._setProgress({type:"loadDecompressed",rsc:i[a][l]}),++i.rscDone>=i.rscLength&&++o>=Object.keys(this._decompList).length&&(this.WG.Sound.isActive=!0,this._runDecomp())}.bind(i,c,m),(function(i){console.error("[webgameJS] Error decoding audio data: ".concat(i))}));else{if("json"==a){var X=c.json[l].data;if(X.frames&&X.meta)if("http://zip-lab.co.kr"==X.meta.app)if(X.isSplit)console.warn("[webgameJS] tar 내 isSplit 옵션 미지원: ",m);else{X.data=X.data||{};var Y=m.substring(0,m.lastIndexOf(".")),q=Y.substring(0,Y.lastIndexOf("/")+1),Z=Y.substring(Y.lastIndexOf("/")+1),$=X.meta.image.substring(0,X.meta.image.lastIndexOf("."));$!=Z&&(c.image[l]=Object.assign({},c.image[q+$]),delete c.image[q+$]),i.WG.resource[m]=X}else console.warn("[webgameJS] tar 내 TexturePacker 미지원: ",m);else i.WG.resource[m]=X}else"live2d"==a&&(i.WG.resource[m]=c.live2d[l].data);i._setProgress({type:"loadDecompressed",rsc:c[a][l]}),++c.rscDone>=c.rscLength&&++o>=Object.keys(i._decompList).length&&i._runDecomp()}};for(var x in c[a])m(x)}else++o>=Object.keys(i._decompList).length&&i._runDecomp()}))}}]),Loader}(),R=function(){function CompressObject(i,o,a){_classCallCheck(this,CompressObject),this.zipName=i,this.blobSize=o,this.loader=a,this.loader._decompTotalSize+=o,this.rscDone=0,this.rscLength=null,this._etrDone=0,this.etrLength=null,this.json={},this.image={},this.sound={},this.live2d={},this.none={}}return _createClass(CompressObject,[{key:"etrDone",get:function get(){return this._etrDone},set:function set(i){if(this._etrDone=i,this.loader._setProgress({type:"decompress",obj:this}),this._etrDone>=this.etrLength){if(Object.values(this.loader._decompList).some((function(i){return null===i.etrLength||i._etrDone<i.etrLength})))return;this.loader.options.debug&&this.loader._checkLoadingTime("Decompress completed in $sec ms."),this.loader._runDecomp()}}}]),CompressObject}()},function(i,o,a){var h;!function(){function aa(i,o,a){return i.call.apply(i.bind,arguments)}function ba(i,o,a){if(!i)throw Error();if(2<arguments.length){var h=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,h),i.apply(o,a)}}return function(){return i.apply(o,arguments)}}function p(i,o,a){return(p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aa:ba).apply(null,arguments)}var c=Date.now||function(){return+new Date};function ca(i,o){this.a=i,this.o=o||i,this.c=this.o.document}var l=!!window.FontFace;function t(i,o,a,h){if(o=i.c.createElement(o),a)for(var c in a)a.hasOwnProperty(c)&&("style"==c?o.style.cssText=a[c]:o.setAttribute(c,a[c]));return h&&o.appendChild(i.c.createTextNode(h)),o}function u(i,o,a){(i=i.c.getElementsByTagName(o)[0])||(i=document.documentElement),i.insertBefore(a,i.lastChild)}function v(i){i.parentNode&&i.parentNode.removeChild(i)}function w(i,o,a){o=o||[],a=a||[];for(var h=i.className.split(/\s+/),c=0;c<o.length;c+=1){for(var l=!1,m=0;m<h.length;m+=1)if(o[c]===h[m]){l=!0;break}l||h.push(o[c])}for(o=[],c=0;c<h.length;c+=1){for(l=!1,m=0;m<a.length;m+=1)if(h[c]===a[m]){l=!0;break}l||o.push(h[c])}i.className=o.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function y(i,o){for(var a=i.className.split(/\s+/),h=0,c=a.length;h<c;h++)if(a[h]==o)return!0;return!1}function z(i,o,a){function d(){g&&h&&c&&(g(m),g=null)}o=t(i,"link",{rel:"stylesheet",href:o,media:"all"});var h=!1,c=!0,m=null,g=a||null;l?(o.onload=function(){h=!0,d()},o.onerror=function(){h=!0,m=Error("Stylesheet failed to load"),d()}):setTimeout((function(){h=!0,d()}),0),u(i,"head",o)}function A(i,o,a,h){var c=i.c.getElementsByTagName("head")[0];if(c){var l=t(i,"script",{src:o}),m=!1;return l.onload=l.onreadystatechange=function(){m||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(m=!0,a&&a(null),l.onload=l.onreadystatechange=null,"HEAD"==l.parentNode.tagName&&c.removeChild(l))},c.appendChild(l),setTimeout((function(){m||(m=!0,a&&a(Error("Script load timeout")))}),h||5e3),l}return null}function B(){this.a=0,this.c=null}function C(i){return i.a++,function(){i.a--,D(i)}}function E(i,o){i.c=o,D(i)}function D(i){0==i.a&&i.c&&(i.c(),i.c=null)}function F(i){this.a=i||"-"}function G(i,o){this.c=i,this.f=4,this.a="n";var a=(o||"n4").match(/^([nio])([1-9])$/i);a&&(this.a=a[1],this.f=parseInt(a[2],10))}function I(i){var o=[];i=i.split(/,\s*/);for(var a=0;a<i.length;a++){var h=i[a].replace(/['"]/g,"");-1!=h.indexOf(" ")||/^\d/.test(h)?o.push("'"+h+"'"):o.push(h)}return o.join(",")}function J(i){return i.a+i.f}function H(i){var o="normal";return"o"===i.a?o="oblique":"i"===i.a&&(o="italic"),o}function ga(i){var o=4,a="n",h=null;return i&&((h=i.match(/(normal|oblique|italic)/i))&&h[1]&&(a=h[1].substr(0,1).toLowerCase()),(h=i.match(/([1-9]00|normal|bold)/i))&&h[1]&&(/bold/i.test(h[1])?o=7:/[1-9]00/.test(h[1])&&(o=parseInt(h[1].substr(0,1),10)))),a+o}function ha(i,o){this.c=i,this.f=i.o.document.documentElement,this.h=o,this.a=new F("-"),this.j=!1!==o.events,this.g=!1!==o.classes}function L(i){if(i.g){var o=y(i.f,i.a.c("wf","active")),a=[],h=[i.a.c("wf","loading")];o||a.push(i.a.c("wf","inactive")),w(i.f,a,h)}K(i,"inactive")}function K(i,o,a){i.j&&i.h[o]&&(a?i.h[o](a.c,J(a)):i.h[o]())}function ja(){this.c={}}function M(i,o){this.c=i,this.f=o,this.a=t(this.c,"span",{"aria-hidden":"true"},this.f)}function N(i){u(i.c,"body",i.a)}function O(i){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+I(i.c)+";font-style:"+H(i)+";font-weight:"+i.f+"00;"}function P(i,o,a,h,c,l){this.g=i,this.j=o,this.a=h,this.c=a,this.f=c||3e3,this.h=l||void 0}function Q(i,o,a,h,c,l,m){this.v=i,this.B=o,this.c=a,this.a=h,this.s=m||"BESbswy",this.f={},this.w=c||3e3,this.u=l||null,this.m=this.j=this.h=this.g=null,this.g=new M(this.c,this.s),this.h=new M(this.c,this.s),this.j=new M(this.c,this.s),this.m=new M(this.c,this.s),i=O(i=new G(this.a.c+",serif",J(this.a))),this.g.a.style.cssText=i,i=O(i=new G(this.a.c+",sans-serif",J(this.a))),this.h.a.style.cssText=i,i=O(i=new G("serif",J(this.a))),this.j.a.style.cssText=i,i=O(i=new G("sans-serif",J(this.a))),this.m.a.style.cssText=i,N(this.g),N(this.h),N(this.j),N(this.m)}F.prototype.c=function(i){for(var o=[],a=0;a<arguments.length;a++)o.push(arguments[a].replace(/[\W_]+/g,"").toLowerCase());return o.join(this.a)},P.prototype.start=function(){var i=this.c.o.document,o=this,a=c(),h=new Promise((function(h,l){!function f(){c()-a>=o.f?l():i.fonts.load(function fa(i){return H(i)+" "+i.f+"00 300px "+I(i.c)}(o.a),o.h).then((function(i){1<=i.length?h():setTimeout(f,25)}),(function(){l()}))}()})),l=null,m=new Promise((function(i,a){l=setTimeout(a,o.f)}));Promise.race([m,h]).then((function(){l&&(clearTimeout(l),l=null),o.g(o.a)}),(function(){o.j(o.a)}))};var m={D:"serif",C:"sans-serif"},g=null;function T(){if(null===g){var i=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);g=!!i&&(536>parseInt(i[1],10)||536===parseInt(i[1],10)&&11>=parseInt(i[2],10))}return g}function la(i,o,a){for(var h in m)if(m.hasOwnProperty(h)&&o===i.f[m[h]]&&a===i.f[m[h]])return!0;return!1}function V(i,o){setTimeout(p((function(){v(this.g.a),v(this.h.a),v(this.j.a),v(this.m.a),o(this.a)}),i),0)}function W(i,o,a){this.c=i,this.a=o,this.f=0,this.m=this.j=!1,this.s=a}Q.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=c(),function U(i){var o,a=i.g.a.offsetWidth,h=i.h.a.offsetWidth;(o=a===i.f.serif&&h===i.f["sans-serif"])||(o=T()&&la(i,a,h)),o?c()-i.A>=i.w?T()&&la(i,a,h)&&(null===i.u||i.u.hasOwnProperty(i.a.c))?V(i,i.v):V(i,i.B):function ma(i){setTimeout(p((function(){U(this)}),i),50)}(i):V(i,i.v)}(this)};var _=null;function na(i){0==--i.f&&i.j&&(i.m?((i=i.a).g&&w(i.f,[i.a.c("wf","active")],[i.a.c("wf","loading"),i.a.c("wf","inactive")]),K(i,"active")):L(i.a))}function oa(i){this.j=i,this.a=new ja,this.h=0,this.f=this.g=!0}function qa(i,o,a,h,c){var l=0==--i.h;(i.f||i.g)&&setTimeout((function(){var i=c||null,m=h||{};if(0===a.length&&l)L(o.a);else{o.f+=a.length,l&&(o.j=l);var g,x=[];for(g=0;g<a.length;g++){var S=a[g],R=m[S.c],k=o.a,j=S;if(k.g&&w(k.f,[k.a.c("wf",j.c,J(j).toString(),"loading")]),K(k,"fontloading",j),k=null,null===_)if(window.FontFace){j=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var X=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);_=j?42<parseInt(j[1],10):!X}else _=!1;k=_?new P(p(o.g,o),p(o.h,o),o.c,S,o.s,R):new Q(p(o.g,o),p(o.h,o),o.c,S,o.s,i,R),x.push(k)}for(g=0;g<x.length;g++)x[g].start()}}),0)}function ra(i,o){this.c=i,this.a=o}function sa(i,o){this.c=i,this.a=o}function ta(i,o){this.c=i||x,this.a=[],this.f=[],this.g=o||""}W.prototype.g=function(i){var o=this.a;o.g&&w(o.f,[o.a.c("wf",i.c,J(i).toString(),"active")],[o.a.c("wf",i.c,J(i).toString(),"loading"),o.a.c("wf",i.c,J(i).toString(),"inactive")]),K(o,"fontactive",i),this.m=!0,na(this)},W.prototype.h=function(i){var o=this.a;if(o.g){var a=y(o.f,o.a.c("wf",i.c,J(i).toString(),"active")),h=[],c=[o.a.c("wf",i.c,J(i).toString(),"loading")];a||h.push(o.a.c("wf",i.c,J(i).toString(),"inactive")),w(o.f,h,c)}K(o,"fontinactive",i),na(this)},oa.prototype.load=function(i){this.c=new ca(this.j,i.context||this.j),this.g=!1!==i.events,this.f=!1!==i.classes,function pa(i,o,a){var h=[],c=a.timeout;!function ia(i){i.g&&w(i.f,[i.a.c("wf","loading")]),K(i,"loading")}(o),h=function ka(i,o,a){var h,c=[];for(h in o)if(o.hasOwnProperty(h)){var l=i.c[h];l&&c.push(l(o[h],a))}return c}(i.a,a,i.c);var l=new W(i.c,o,c);for(i.h=h.length,o=0,a=h.length;o<a;o++)h[o].load((function(o,a,h){qa(i,l,o,a,h)}))}(this,new ha(this.c,i),i)},ra.prototype.load=function(i){var o=this,a=o.a.projectId,h=o.a.version;if(a){var c=o.c.o;A(this.c,(o.a.api||"https://fast.fonts.net/jsapi")+"/"+a+".js"+(h?"?v="+h:""),(function(h){h?i([]):(c["__MonotypeConfiguration__"+a]=function(){return o.a},function b(){if(c["__mti_fntLst"+a]){var o,h=c["__mti_fntLst"+a](),l=[];if(h)for(var m=0;m<h.length;m++){var g=h[m].fontfamily;null!=h[m].fontStyle&&null!=h[m].fontWeight?(o=h[m].fontStyle+h[m].fontWeight,l.push(new G(g,o))):l.push(new G(g))}i(l)}else setTimeout((function(){b()}),50)}())})).id="__MonotypeAPIScript__"+a}else i([])},sa.prototype.load=function(i){var o,a,h=this.a.urls||[],c=this.a.families||[],l=this.a.testStrings||{},m=new B;for(o=0,a=h.length;o<a;o++)z(this.c,h[o],C(m));var g=[];for(o=0,a=c.length;o<a;o++)if((h=c[o].split(":"))[1])for(var _=h[1].split(","),x=0;x<_.length;x+=1)g.push(new G(h[0],_[x]));else g.push(new G(h[0]));E(m,(function(){i(g,l)}))};var x="https://fonts.googleapis.com/css";function ya(i){this.f=i,this.a=[],this.c={}}var S={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},R={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},k={i:"i",italic:"i",n:"n",normal:"n"},j=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function Ea(i,o){this.c=i,this.a=o}var X={Arimo:!0,Cousine:!0,Tinos:!0};function Ga(i,o){this.c=i,this.a=o}function Ha(i,o){this.c=i,this.f=o,this.a=[]}Ea.prototype.load=function(i){var o=new B,a=this.c,h=new ta(this.a.api,this.a.text),c=this.a.families;!function va(i,o){for(var a=o.length,h=0;h<a;h++){var c=o[h].split(":");3==c.length&&i.f.push(c.pop());var l="";2==c.length&&""!=c[1]&&(l=":"),i.a.push(c.join(l))}}(h,c);var l=new ya(c);!function Da(i){for(var o=i.f.length,a=0;a<o;a++){var h=i.f[a].split(":"),c=h[0].replace(/\+/g," "),l=["n4"];if(2<=h.length){var m;if(m=[],g=h[1])for(var g,_=(g=g.split(",")).length,x=0;x<_;x++){var X;if((X=g[x]).match(/^[\w-]+$/))if(null==(Y=j.exec(X.toLowerCase())))X="";else{if(X=null==(X=Y[2])||""==X?"n":k[X],null==(Y=Y[1])||""==Y)Y="4";else var Y=R[Y]||(isNaN(Y)?"4":Y.substr(0,1));X=[X,Y].join("")}else X="";X&&m.push(X)}0<m.length&&(l=m),3==h.length&&(m=[],0<(h=(h=h[2])?h.split(","):m).length&&(h=S[h[0]])&&(i.c[c]=h))}for(i.c[c]||(h=S[c])&&(i.c[c]=h),h=0;h<l.length;h+=1)i.a.push(new G(c,l[h]))}}(l),z(a,function wa(i){if(0==i.a.length)throw Error("No fonts to load!");if(-1!=i.c.indexOf("kit="))return i.c;for(var o=i.a.length,a=[],h=0;h<o;h++)a.push(i.a[h].replace(/ /g,"+"));return o=i.c+"?family="+a.join("%7C"),0<i.f.length&&(o+="&subset="+i.f.join(",")),0<i.g.length&&(o+="&text="+encodeURIComponent(i.g)),o}(h),C(o)),E(o,(function(){i(l.a,l.c,X)}))},Ga.prototype.load=function(i){var o=this.a.id,a=this.c.o;o?A(this.c,(this.a.api||"https://use.typekit.net")+"/"+o+".js",(function(o){if(o)i([]);else if(a.Typekit&&a.Typekit.config&&a.Typekit.config.fn){o=a.Typekit.config.fn;for(var h=[],c=0;c<o.length;c+=2)for(var l=o[c],m=o[c+1],g=0;g<m.length;g++)h.push(new G(l,m[g]));try{a.Typekit.load({events:!1,classes:!1,async:!0})}catch(i){}i(h)}}),2e3):i([])},Ha.prototype.load=function(i){var o=this.f.id,a=this.c.o,h=this;o?(a.__webfontfontdeckmodule__||(a.__webfontfontdeckmodule__={}),a.__webfontfontdeckmodule__[o]=function(o,a){for(var c=0,l=a.fonts.length;c<l;++c){var m=a.fonts[c];h.a.push(new G(m.name,ga("font-weight:"+m.weight+";font-style:"+m.style)))}i(h.a)},A(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function ea(i){return i.o.location.hostname||i.a.location.hostname}(this.c)+"/"+o+".js",(function(o){o&&i([])}))):i([])};var Y=new oa(window);Y.a.c.custom=function(i,o){return new sa(o,i)},Y.a.c.fontdeck=function(i,o){return new Ha(o,i)},Y.a.c.monotype=function(i,o){return new ra(o,i)},Y.a.c.typekit=function(i,o){return new Ga(o,i)},Y.a.c.google=function(i,o){return new Ea(o,i)};var q={load:p(Y.load,Y)};void 0===(h=function(){return q}.call(o,a,o,i))||(i.exports=h)}()},function(i,o,a){(function(i){var h=a(8);function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function _typeof(i){return _typeof2(i)}:function _typeof(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":_typeof2(i)})(i)}var c={};!function(o,h){"function"==typeof define&&a(82)?define([],h):"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?i.exports=h():o.untar=h()}(c,(function(){function e(i){function r(i){for(var h=0,c=o.length;h<c;++h)o[h](i);a.push(i)}if("function"!=typeof Promise)throw new Error("Promise implementation not available in this environment.");var o=[],a=[],h=new Promise((function(o,a){i(o,a,r)}));h.progress=function(i){if("function"!=typeof i)throw new Error("cb is not a function.");for(var c=0,l=a.length;c<l;++c)i(a[c]);return o.push(i),h};var c=h.then;return h.then=function(i,o,a){return c.call(h,i,o),void 0!==a&&h.progress(a),h},h}function t(i){return Object.defineProperties(i,c),i}var i,o=window||this,a=o.URL||o.webkitURL,c={blob:{get:function get(){return this._blob||(this._blob=new Blob([this.buffer]))}},getBlobUrl:{value:function value(){return this._blobUrl||(this._blobUrl=a.createObjectURL(this.blob))}},readAsString:{value:function value(){return h.a.decodeUTF8(new Uint8Array(this.buffer))}},readAsJSON:{value:function value(){return JSON.parse(this.readAsString())}}};return i=(window||this).URL.createObjectURL(new Blob(['"use strict";function UntarWorker(){}function decodeUTF8(e){for(var r="",t=0;t<e.length;){var a=e[t++];if(a>127){if(a>191&&a<224){if(t>=e.length)throw"UTF-8 decode: incomplete 2-byte sequence";a=(31&a)<<6|63&e[t]}else if(a>223&&a<240){if(t+1>=e.length)throw"UTF-8 decode: incomplete 3-byte sequence";a=(15&a)<<12|(63&e[t])<<6|63&e[++t]}else{if(!(a>239&&a<248))throw"UTF-8 decode: unknown multibyte start 0x"+a.toString(16)+" at index "+(t-1);if(t+2>=e.length)throw"UTF-8 decode: incomplete 4-byte sequence";a=(7&a)<<18|(63&e[t])<<12|(63&e[++t])<<6|63&e[++t]}++t}if(a<=65535)r+=String.fromCharCode(a);else{if(!(a<=1114111))throw"UTF-8 decode: code point 0x"+a.toString(16)+" exceeds UTF-16 reach";a-=65536,r+=String.fromCharCode(a>>10|55296),r+=String.fromCharCode(1023&a|56320)}}return r}function PaxHeader(e){this._fields=e}function TarFile(){}function UntarStream(e){this._bufferView=new DataView(e),this._position=0}function UntarFileStream(e){this._stream=new UntarStream(e),this._globalPaxHeader=null}if(UntarWorker.prototype={onmessage:function(e){try{if("extract"!==e.data.type)throw new Error("Unknown message type: "+e.data.type);this.untarBuffer(e.data.buffer)}catch(r){this.postError(r)}},postError:function(e){this.postMessage({type:"error",data:{message:e.message}})},postLog:function(e,r){this.postMessage({type:"log",data:{level:e,msg:r}})},untarBuffer:function(e){try{for(var r=new UntarFileStream(e);r.hasNext();){var t=r.next();this.postMessage({type:"extract",data:t},[t.buffer])}this.postMessage({type:"complete"})}catch(a){this.postError(a)}},postMessage:function(e,r){self.postMessage(e,r)}},"undefined"!=typeof self){var worker=new UntarWorker;self.onmessage=function(e){worker.onmessage(e)}}PaxHeader.parse=function(e){for(var r=new Uint8Array(e),t=[];r.length>0;){var a=parseInt(decodeUTF8(r.subarray(0,r.indexOf(32)))),n=decodeUTF8(r.subarray(0,a)),i=n.match(/^\\d+ ([^=]+)=(.*)\\n$/);if(null===i)throw new Error("Invalid PAX header data format.");var s=i[1],o=i[2];0===o.length?o=null:null!==o.match(/^\\d+$/)&&(o=parseInt(o));var f={name:s,value:o};t.push(f),r=r.subarray(a)}return new PaxHeader(t)},PaxHeader.prototype={applyHeader:function(e){this._fields.forEach(function(r){var t=r.name,a=r.value;"path"===t?(t="name",void 0!==e.prefix&&delete e.prefix):"linkpath"===t&&(t="linkname"),null===a?delete e[t]:e[t]=a})}},UntarStream.prototype={readString:function(e){for(var r=1,t=e*r,a=[],n=0;n<e;++n){var i=this._bufferView.getUint8(this.position()+n*r,!0);if(0===i)break;a.push(i)}return this.seek(t),String.fromCharCode.apply(null,a)},readBuffer:function(e){var r;if("function"==typeof ArrayBuffer.prototype.slice)r=this._bufferView.buffer.slice(this.position(),this.position()+e);else{r=new ArrayBuffer(e);var t=new Uint8Array(r),a=new Uint8Array(this._bufferView.buffer,this.position(),e);t.set(a)}return this.seek(e),r},seek:function(e){this._position+=e},peekUint32:function(){return this._bufferView.getUint32(this.position(),!0)},position:function(e){return void 0===e?this._position:void(this._position=e)},size:function(){return this._bufferView.byteLength}},UntarFileStream.prototype={hasNext:function(){return this._stream.position()+4<this._stream.size()&&0!==this._stream.peekUint32()},next:function(){return this._readNextFile()},_readNextFile:function(){var e=this._stream,r=new TarFile,t=!1,a=null,n=e.position(),i=n+512;switch(r.name=e.readString(100),r.mode=e.readString(8),r.uid=parseInt(e.readString(8)),r.gid=parseInt(e.readString(8)),r.size=parseInt(e.readString(12),8),r.mtime=parseInt(e.readString(12),8),r.checksum=parseInt(e.readString(8)),r.type=e.readString(1),r.linkname=e.readString(100),r.ustarFormat=e.readString(6),r.ustarFormat.indexOf("ustar")>-1&&(r.version=e.readString(2),r.uname=e.readString(32),r.gname=e.readString(32),r.devmajor=parseInt(e.readString(8)),r.devminor=parseInt(e.readString(8)),r.namePrefix=e.readString(155),r.namePrefix.length>0&&(r.name=r.namePrefix+"/"+r.name)),e.position(i),r.type){case"0":case"":r.buffer=e.readBuffer(r.size);break;case"1":break;case"2":break;case"3":break;case"4":break;case"5":break;case"6":break;case"7":break;case"g":t=!0,this._globalPaxHeader=PaxHeader.parse(e.readBuffer(r.size));break;case"x":t=!0,a=PaxHeader.parse(e.readBuffer(r.size))}void 0===r.buffer&&(r.buffer=new ArrayBuffer(0));var s=i+r.size;return r.size%512!==0&&(s+=512-r.size%512),e.position(s),t&&(r=this._readNextFile()),null!==this._globalPaxHeader&&this._globalPaxHeader.applyHeader(r),null!==a&&a.applyHeader(r),r}};'])),function r(a){if(!(a instanceof ArrayBuffer))throw new TypeError("arrayBuffer is not an instance of ArrayBuffer.");if(!o.Worker)throw new Error("Worker implementation is not available in this environment.");return new e((function(o,h,c){var l=new Worker(i),m=[];l.onerror=function(i){h(i)},l.onmessage=function(i){switch((i=i.data).type){case"log":console[i.data.level]("Worker: "+i.data.msg);break;case"extract":var a=t(i.data);m.push(a),c(a);break;case"complete":l.terminate(),o(m);break;case"error":l.terminate(),h(new Error(i.data.message));break;default:l.terminate(),h(new Error("Unknown message from worker: "+i.type))}},l.postMessage({type:"extract",buffer:a},[a])}))}})),o.a=c.untar}).call(this,a(81)(i))},function(i,o,a){a.d(o,"a",(function(){return l}));var h=a(17),c=a(6);function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var l=function(){function Camera(i){!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Camera),this._parent=i,this._prevPosition=new h.a(i.Screen.gameSize.width/2,i.Screen.gameSize.height/2),this.position=new h.a(i.Screen.gameSize.width/2,i.Screen.gameSize.height/2),this.destination=new h.a(i.Screen.gameSize.width/2,i.Screen.gameSize.height/2),this._startPosition=new h.a(i.Screen.gameSize.width/2,i.Screen.gameSize.height/2),this._prevZoom=1,this.zoom=1,this.zoomTo=1,this._startZoom=1,this._lastMoveTime=Date.now(),this._lastZoomTime=Date.now(),this._moveOptions={easing:function easing(i){return i},duration:0},this._zoomOptions={easing:function easing(i){return i},duration:0},c.a.set("camera",this)}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(Camera,[{key:"setMoveOptions",value:function setMoveOptions(i,o){this._moveOptions.easing=i,this._moveOptions.duration=o}},{key:"setMoveEasing",value:function setMoveEasing(i){this._moveOptions.easing=i}},{key:"setMoveDuration",value:function setMoveDuration(i){this._moveOptions.duration=i}},{key:"getMoveEasing",value:function getMoveEasing(){return this._moveOptions.easing}},{key:"getMoveDuration",value:function getMoveDuration(){return this._moveOptions.duration}},{key:"setZoomOptions",value:function setZoomOptions(i,o){this._zoomOptions.easing=i,this._zoomOptions.duration=o}},{key:"setZoomEasing",value:function setZoomEasing(i){this._zoomOptions.easing=i}},{key:"setZoomDuration",value:function setZoomDuration(i){this._zoomOptions.duration=i}},{key:"getZoomEasing",value:function getZoomEasing(){return this._zoomOptions.easing}},{key:"getZoomDuration",value:function getZoomDuration(){return this._zoomOptions.duration}},{key:"setPosition",value:function setPosition(i,o,a){this._moveOptions=Object.assign({},this._moveOptions,a),this._followObject=null,this._startPosition.x=this.position.x,this._startPosition.y=this.position.y,this.destination.x=i,this.destination.y=o,this._lastMoveTime=Date.now()}},{key:"setZoom",value:function setZoom(i,o){this._zoomOptions=Object.assign({},this._zoomOptions,o),this._lastZoomTime=Date.now(),this._startZoom=this.zoom,this.zoomTo=i}},{key:"follow",value:function follow(i,o){var a=this;this._lastMoveTime=Date.now();var h=this._followObject;if(this._followObject)for(;h&&h!==this._parent.Stage;)h._position.setOnChangeX(null),h._position.setOnChangeY(null),h=h._parent;if(this._followObject=i,this._moveOptions=Object.assign({},this._moveOptions,o),this._followObject)for(h=this._followObject;h&&this._parent.Screen.rootContainer!==h;)this._startPosition.x=this.position.x,this._startPosition.y=this.position.y,h._position.setOnChangeX((function(){a._startPosition.x=a.position.x,a._startPosition.y=a.position.y,a._lastMoveTime=Date.now()})),h._position.setOnChangeY((function(){a._startPosition.x=a.position.x,a._startPosition.y=a.position.y,a._lastMoveTime=Date.now()})),h=h._parent}},{key:"_update",value:function _update(){this._prevPosition.x=this.position.x,this._prevPosition.y=this.position.y,this._prevZoom=this.zoom;var i=this._followObject?this._followObject.getGlobalPosition():this.destination;if(this._moveOptions.duration>0){var o=Date.now();if(o-this._lastMoveTime<this._moveOptions.duration){var a=this._moveOptions.easing((o-this._lastMoveTime)/this._moveOptions.duration);this.position.x=Math.lerp(this._startPosition.x,i.x,a),this.position.y=Math.lerp(this._startPosition.y,i.y,a)}else this.position.x=i.x,this.position.y=i.y}else this.position.x=i.x,this.position.y=i.y;if(this._zoomOptions.duration>0){var h=Date.now();if(h-this._lastZoomTime<this._zoomOptions.duration){var c=this._zoomOptions.easing((h-this._lastZoomTime)/this._zoomOptions.duration);this.zoom=Math.lerp(this._startZoom,this.zoomTo,c)}else this.zoom=this.zoomTo}else this.zoom=this.zoomTo;if(this._prevPosition.x!==this.position.x||this._prevPosition.y!==this.position.y||this._prevZoom!==this.zoom)for(var l=this._parent.Screen.rootContainer._WGChild,m=0;m<l.length;m++)l[m]._isCamera&&l[m]._cameraUpdate(this.position.x,this.position.y,this.zoom)}},{key:"_resize",value:function _resize(i,o){for(var a=this._parent.Screen.rootContainer._WGChild,h=0;h<a.length;h++)a[h]._isCamera&&a[h]._cameraUpdate(this.position.x,this.position.y,this.zoom)}}]),Camera}();Math.lerp=function(i,o,a){return i+(o-i)*((a=a<0?0:a)>1?1:a)}},function(i,o,a){a.d(o,"a",(function(){return c}));var h=a(4);function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var c=function(){function Scene(i,o){var a=this;!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Scene),this.WG=i,this.list={},o.scene.map((function(i){a.list[i.name]=new i})),this.currentName=o.startScene||o.scene[0].name,this._changing=!1,this.list[this.currentName].init(),this._sceneGraphic=new h.Graphics,this._sceneGraphic._WGObject={zOrder:-999999},i.Stage.addChild(this._sceneGraphic),this._sceneGraphic.alpha=0,this._sceneGraphic.clear(),this._sceneGraphic.beginFill(0,1),this._sceneGraphic.drawRect(-i.Screen.clientSize.width/2+i.Screen.gameSize.width*i.Screen.ratio/2,-i.Screen.clientSize.height/2+i.Screen.gameSize.height*i.Screen.ratio/2,i.Screen.clientSize.width,i.Screen.clientSize.height),this._fadeDuration=3e3}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(Scene,[{key:"_update",value:function _update(i){if(this.list[this.currentName].update(i),this._fading){var o=(Date.now()-this._fadeStartTime)/this._fadeDuration;o<.5?this._sceneGraphic.alpha=2*o:(this._changing&&(this._changing=!1,this.change(this._fadingName,this._fadeData),delete this._fadeData),o>=1&&(o=1,this._fading=!1),this._sceneGraphic.alpha=1-2*(o-.5))}}},{key:"change",value:function change(i,o){this._changing||(this._changing=!0,this.list[this.currentName].destroy(),this.WG.Stage._destoryForSceneChange(),this.currentName=i,this.list[this.currentName].init(o),this._changing=!1)}},{key:"fadeChange",value:function fadeChange(i,o,a){this._changing||this._fading||(o&&(this._fadeDuration=o),this._changing=!0,this._fading=!0,this._fadingName=i,this._fadeStartTime=Date.now(),this._fadeData=a)}},{key:"reload",value:function reload(){this.change(this.currentName)}},{key:"fadeReload",value:function fadeReload(i,o){this.fadeChange(this.currentName,i,o)}},{key:"_resize",value:function _resize(){this._sceneGraphic.clear(),this._sceneGraphic.beginFill(0,1),this._sceneGraphic.drawRect(-this.WG.Screen.clientSize.width/2+this.WG.Screen.gameSize.width*this.WG.Screen.ratio/2,-this.WG.Screen.clientSize.height/2+this.WG.Screen.gameSize.height*this.WG.Screen.ratio/2,this.WG.Screen.clientSize.width,this.WG.Screen.clientSize.height)}}]),Scene}()},function(i,o,a){a.d(o,"a",(function(){return l}));var h=a(6),c=a(8);function _slicedToArray(i,o){return function _arrayWithHoles(i){if(Array.isArray(i))return i}(i)||function _iterableToArrayLimit(i,o){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(i)){var a=[],h=!0,c=!1,l=void 0;try{for(var m,g=i[Symbol.iterator]();!(h=(m=g.next()).done)&&(a.push(m.value),!o||a.length!==o);h=!0);}catch(i){c=!0,l=i}finally{try{h||null==g.return||g.return()}finally{if(c)throw l}}return a}}(i,o)||function _unsupportedIterableToArray(i,o){if(i){if("string"==typeof i)return _arrayLikeToArray(i,o);var a=Object.prototype.toString.call(i).slice(8,-1);return"Object"===a&&i.constructor&&(a=i.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(i,o):void 0}}(i,o)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(i,o){(null==o||o>i.length)&&(o=i.length);for(var a=0,h=new Array(o);a<o;a++)h[a]=i[a];return h}function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}a(22);var l=function(){function Manager(i){!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Manager),h.a.set("manager",this),this._animationSprites={},this._containers={},this._cubisms={},this._actions={},this._timers={},this._particles={},this._inputs={focused:null},this._bitmapFonts={}}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(Manager,[{key:"_update",value:function _update(i,o){this._cubismUpdate(o),this._particlesUpdate(i),this._animationUpdate(),this._actionsUpdate(),this._inputsUpdate(),this._timersUpdate()}},{key:"addParticles",value:function addParticles(i){var o=c.a.getUniqueId();return this._particles[o]=i,o}},{key:"_particlesUpdate",value:function _particlesUpdate(i){for(var o=Object.values(this._particles),a=0;a<o.length;a++)o[a]._update(i)}},{key:"deleteParticle",value:function deleteParticle(i){delete this._particles[i._id]}},{key:"addInput",value:function addInput(i){var o=c.a.getUniqueId();return this._inputs[o]=i,o}},{key:"_inputsUpdate",value:function _inputsUpdate(){for(var i=Object.entries(this._inputs),o=0;o<i.length;o++){var a=_slicedToArray(i[o],2),h=a[0],c=a[1];"focused"!==h&&c._update()}}},{key:"deleteInput",value:function deleteInput(i){i._dom.remove(),this._inputs.focused===i._id&&(this._inputs.focused=null),delete this._inputs[i._id]}},{key:"releaseCurrentFocus",value:function releaseCurrentFocus(){this._inputs.focused&&this._inputs[this._inputs.focused]._dom.blur()}},{key:"setFocusedInput",value:function setFocusedInput(i){this._inputs.focused=i._id}},{key:"getFocusedInput",value:function getFocusedInput(){return this._inputs.focused}},{key:"deleteAllInputs",value:function deleteAllInputs(){for(var i=document.getElementsByTagName("input");i.length;)i[0].remove();this._inputs={}}},{key:"addTimer",value:function addTimer(i){var o=c.a.getUniqueId();return this._timers[o]=i,o}},{key:"deleteTimer",value:function deleteTimer(i){delete this._timers[i._id]}},{key:"_timersUpdate",value:function _timersUpdate(){for(var i=Object.values(this._timers),o=0;o<i.length;o++)i[o]._update()}},{key:"addAction",value:function addAction(i){var o=c.a.getUniqueId();return this._actions[o]=i,o}},{key:"deleteAction",value:function deleteAction(i){delete this._actions[i._id]}},{key:"_actionsUpdate",value:function _actionsUpdate(){for(var i=Object.values(this._actions),o=0;o<i.length;o++)i[o]._update()}},{key:"addCubism",value:function addCubism(i){var o=c.a.getUniqueId();return this._cubisms[o]=i,o}},{key:"deleteCubism",value:function deleteCubism(i){delete this._cubisms[i._id]}},{key:"_cubismUpdate",value:function _cubismUpdate(i){for(var o=Object.values(this._cubisms),a=0;a<o.length;a++)o[a]._pixiObject.update(i*cubism.speed)}},{key:"addContainer",value:function addContainer(i){var o=i.name||i.id;this._containers[o]=i}},{key:"deleteContainer",value:function deleteContainer(i){var o=i.name||i.id;delete this._containers[o]}},{key:"installBitmapFont",value:function installBitmapFont(i,o){this._bitmapFonts[i]=o}},{key:"isInstalledBitmapFont",value:function isInstalledBitmapFont(i){return!!this._bitmapFonts[i]}},{key:"getFaceNameFromBitmapFont",value:function getFaceNameFromBitmapFont(i){return this._bitmapFonts[i]}},{key:"_animationUpdate",value:function _animationUpdate(){for(var i=Date.now(),o=Object.values(this._animationSprites),a=0;a<o.length;a++){var h=o[a],c=h._lastUpdateTime,l=h._frames,m=h._perFrameTime,g=h._onFrameFunctions,_=h._defaultTexture,x=h._deleteOnComplete,S=h._stoppedByComplete,R=h.stop,k=h.loop;if(!R&&!S){var j=i-c;if(j>m){var X=Math.floor(j/m),Y=h.currentFrame,q=h.currentFrame+X;k&&(q%=l.length);for(var Z=0;Z<X-1;Z++){var $=Y+Z+1;if($>=l.length){if(!k)break;$%=l.length}h.currentFrame=$}if(q>l.length-1){if(!k){var ee=g[-1];x?this.deleteAnimationSprite(h):h._stoppedByComplete=!0,ee&&ee();continue}q=0,_&&(h.texture=_,h._defaultTexture=null)}h.currentFrame=q,h._lastUpdateTime=i}}}}},{key:"addAnimationSprite",value:function addAnimationSprite(i){var o=c.a.getUniqueId();return this._animationSprites[o]=i,o}},{key:"deleteAnimationSprite",value:function deleteAnimationSprite(i){this._animationSprites[i._animationId]&&(delete this._animationSprites[i._animationId],i.destroy())}},{key:"deleteAllAnimationSprites",value:function deleteAllAnimationSprites(){this._animationSprites={}}},{key:"deleteAllContainers",value:function deleteAllContainers(){this._containers={}}},{key:"deleteAllCubisms",value:function deleteAllCubisms(){this._cubisms={}}},{key:"deleteAllActions",value:function deleteAllActions(){this._actions={}}},{key:"deleteAllTimers",value:function deleteAllTimers(){this._timers={}}},{key:"deleteAllParticles",value:function deleteAllParticles(){this._particles={}}}]),Manager}()},function(i,o,a){var h;i.exports=((h=function s(){function e(i){return o.appendChild(i.dom),i}function u(a){for(var h=0;h<o.children.length;h++)o.children[h].style.display=h===a?"block":"none";i=a}var i=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",(function(a){a.preventDefault(),u(++i%o.children.length)}),!1);var a=(performance||Date).now(),c=a,l=0,m=e(new h.Panel("FPS","#0ff","#002")),g=e(new h.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var _=e(new h.Panel("MB","#f08","#201"));return u(0),{REVISION:16,dom:o,addPanel:e,showPanel:u,begin:function begin(){a=(performance||Date).now()},end:function end(){l++;var i=(performance||Date).now();if(g.update(i-a,200),i>c+1e3&&(m.update(1e3*l/(i-c),100),c=i,l=0,_)){var o=performance.memory;_.update(o.usedJSHeapSize/1048576,o.jsHeapSizeLimit/1048576)}return i},update:function update(){a=this.end()},domElement:o,setMode:u}}).Panel=function(i,o,a){var h=1/0,c=0,l=Math.round,m=l(window.devicePixelRatio||1),g=80*m,_=48*m,x=3*m,S=2*m,R=3*m,k=15*m,j=74*m,X=30*m,Y=document.createElement("canvas");Y.width=g,Y.height=_,Y.style.cssText="width:80px;height:48px";var q=Y.getContext("2d");return q.font="bold "+9*m+"px Helvetica,Arial,sans-serif",q.textBaseline="top",q.fillStyle=a,q.fillRect(0,0,g,_),q.fillStyle=o,q.fillText(i,x,S),q.fillRect(R,k,j,X),q.fillStyle=a,q.globalAlpha=.9,q.fillRect(R,k,j,X),{dom:Y,update:function update(_,Z){h=Math.min(h,_),c=Math.max(c,_),q.fillStyle=a,q.globalAlpha=1,q.fillRect(0,0,g,k),q.fillStyle=o,q.fillText(l(_)+" "+i+" ("+l(h)+"-"+l(c)+")",x,S),q.drawImage(Y,R+m,k,j-m,X,R,k,j-m,X),q.fillRect(R+j-m,k,m,X),q.fillStyle=a,q.globalAlpha=.9,q.fillRect(R+j-m,k,m,l((1-_/Z)*X))}}},h)},function(i,o,a){a.d(o,"a",(function(){return c}));var h=a(6);function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var c=function(){function ErrorLog(i,o){var a=this;!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,ErrorLog),void 0!==o.name&&void 0!==o.log&&(o.debug||(window.onerror=function(c,l,m,g,_){var x={name:o.name,browser:a.getBrowser(),message:c.replace(/'/g,"\\'"),line:m,col:g,stack:_.stack.replace(/'/g,"\\'"),elapsed:Math.floor(Date.now()/1e3)};if(i.isMobile){var S=h.a.get("native");x.version=S.clientVersion}fetch(o.log,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)}).then((function(i){console.log(i)}))}))}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(ErrorLog,[{key:"isMobile",value:function isMobile(){return/Mobi/.test(navigator.userAgent)}},{key:"getBrowserName",value:function getBrowserName(){return window.opr&&window.opr.addons||window.opera||navigator.userAgent.indexOf(" OPR/")>=0?"Opera":"undefined"!=typeof InstallTrigger?"Firefox":/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari).toString()?"Safari":document.documentMode?"Internet Explorer":!document.documentMode&&window.StyleMedia?"Microsoft Edge":window.chrome?"Chrome":void 0}},{key:"getOSName",value:function getOSName(){var i;if(this.isMobile())if(/Windows/.test(navigator.userAgent))i="Windows",/Phone 8.0/.test(navigator.userAgent)?i+=" Phone 8.0":/Phone 10.0/.test(navigator.userAgent)&&(i+=" Phone 10.0");else if(/Android/.test(navigator.userAgent)){var o=parseFloat(navigator.userAgent.slice(navigator.userAgent.indexOf("Android")+8));i="android ".concat(o)}else if(/iPhone;/.test(navigator.userAgent))i="iOS "+(a=function iOSversion(){if(/iP(hone|od|ad)/.test(navigator.appVersion)){var i=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3]||0,10)]}}())[0]+"."+a[1]+"."+a[2];else if(/iPad;/.test(navigator.userAgent)){var a;i="iOS "+(a=function _iOSversion(){if(/iP(hone|od|ad)/.test(navigator.appVersion)){var i=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3]||0,10)]}}())[0]+"."+a[1]+"."+a[2]}else/BBd*/.test(navigator.userAgent)&&(i="BlackBerry");else/Windows/.test(navigator.userAgent)?(i="Windows",/5.1;/.test(navigator.userAgent)?i+=" XP":/6.0;/.test(navigator.userAgent)?i+=" Vista":/6.1;/.test(navigator.userAgent)?i+=" 7":/6.2/.test(navigator.userAgent)?i+=" 8":/10.0;/.test(navigator.userAgent)&&(i+=" 10"),/64/.test(navigator.userAgent)?i+=" 64-bit":i+=" 32-bit"):/Macintosh/.test(navigator.userAgent)&&(i="Macintosh",/OS X/.test(navigator.userAgent)&&(i+=" OS X"));return i}},{key:"getBrowser",value:function getBrowser(){return{os:this.getOSName(),browser:this.getBrowserName(),language:navigator.language,languages:navigator.languages,user_agent:navigator.userAgent,device:this.isMobile()?"Mobile":"Desktop",referrer:document.referrer||"N/A",online:navigator.onLine,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,screen_resolution:screen.width+" x "+screen.height,cookie_enabled:navigator.cookieEnabled}}}]),ErrorLog}()},function(i,o,a){a.d(o,"a",(function(){return x}));var h=a(13),c=(a(25),a(26)),l=a(8),m=a(19),g=a(27),_=a(15);function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var x=function(){function Button(i){var o=this;!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Button),this._key=l.a.getUniqueId();var a=function emptyFunction(){},x={name:this._key+"_Container",scale:1,onPointerDown:a,onPointerUp:a,easingDuration:100,disable:!1,shadow:!0},S=Object.assign({},x,i),R=Object.assign({},{parent:this._key+"_Container"},S.textOptions),k=S.easing?S.easing:_.a.linear;this._container=new h.a(S),this._scale=S.scale,this._easingDuration=S.easingDuration,this._onPointerDown=S.onPointerDown,this._onPointerUp=S.onPointerUp,this._onPointerPress=S.onPointerPress,this._disable=S.disable,this._shadow=S.shadow,this._disable&&(this._container.tint=11184810),this._shadowFilter=new g.a.DropShadowFilter,S.image&&(this._image=new WG.Sprite(S.image,{parent:this._key+"_Container"}),this._shadowObject=this._image),this._text=new c.a(S.text,R),S.image||(this._shadowObject=this._text),this._shadow&&(this._shadowObject.filters=[this._shadowFilter]),this._container.on("pointerdown",(function(){o._disable||(o._onPointerDown(o),o._isDown=!0,new m.a(o._container,{value:"scale",to:.9*o._scale,duration:o._easingDuration,easing:k}))}));var j=function getExitAction(){return{value:"scale",to:o._scale,duration:o._easingDuration,easing:k}};this._container.on("pointerup",(function(){!o._disable&&o._isDown&&(o._onPointerUp(o),o._onPointerPress(o),o._isDown=!1,new m.a(o._container,j()))})),this._container.on("pointerupoutside",(function(){o._disable||(o._onPointerUp(o),o._isDown=!1,new m.a(o._container,j()))}))}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(Button,[{key:"x",get:function get(){return this._container.x},set:function set(i){this._container.x=i}},{key:"y",get:function get(){return this._container.y},set:function set(i){this._container.y=i}},{key:"text",get:function get(){return this._text}},{key:"image",get:function get(){return this._image}},{key:"container",get:function get(){return this._container}},{key:"disable",get:function get(){return this._disable},set:function set(i){this._disable=i,this._container.tint=i?11184810:16777215}},{key:"shadow",get:function get(){return this._shadow},set:function set(i){this._shadow=i,this._shadowObject.filters=i?[this._shadowFilter]:[]}}]),Button}()},function(i,o,a){var h=function isMergeableObject(i){return function isNonNullObject(i){return!!i&&"object"==_typeof2(i)}(i)&&!function isSpecial(i){var o=Object.prototype.toString.call(i);return"[object RegExp]"===o||"[object Date]"===o||function isReactElement(i){return i.$$typeof===c}(i)}(i)},c="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function cloneUnlessOtherwiseSpecified(i,o){return!1!==o.clone&&o.isMergeableObject(i)?deepmerge(function emptyTarget(i){return Array.isArray(i)?[]:{}}(i),i,o):i}function defaultArrayMerge(i,o,a){return i.concat(o).map((function(i){return cloneUnlessOtherwiseSpecified(i,a)}))}function getKeys(i){return Object.keys(i).concat(function getEnumerableOwnPropertySymbols(i){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(i).filter((function(o){return i.propertyIsEnumerable(o)})):[]}(i))}function propertyIsOnObject(i,o){try{return o in i}catch(i){return!1}}function deepmerge(i,o,a){(a=a||{}).arrayMerge=a.arrayMerge||defaultArrayMerge,a.isMergeableObject=a.isMergeableObject||h,a.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var c=Array.isArray(o);return c===Array.isArray(i)?c?a.arrayMerge(i,o,a):function mergeObject(i,o,a){var h={};return a.isMergeableObject(i)&&getKeys(i).forEach((function(o){h[o]=cloneUnlessOtherwiseSpecified(i[o],a)})),getKeys(o).forEach((function(c){(function propertyIsUnsafe(i,o){return propertyIsOnObject(i,o)&&!(Object.hasOwnProperty.call(i,o)&&Object.propertyIsEnumerable.call(i,o))})(i,c)||(propertyIsOnObject(i,c)&&a.isMergeableObject(o[c])?h[c]=function getMergeFunction(i,o){if(!o.customMerge)return deepmerge;var a=o.customMerge(i);return"function"==typeof a?a:deepmerge}(c,a)(i[c],o[c],a):h[c]=cloneUnlessOtherwiseSpecified(o[c],a))})),h}(i,o,a):cloneUnlessOtherwiseSpecified(o,a)}deepmerge.all=function deepmergeAll(i,o){if(!Array.isArray(i))throw new Error("first argument should be an array");return i.reduce((function(i,a){return deepmerge(i,a,o)}),{})};var l=deepmerge;i.exports=l},function(i,o,a){a.d(o,"a",(function(){return l}));var h=a(18),c=a(6);function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var l=function(){function Panel(i){!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Panel),this.Screen=i,this.defaultOptions={tint:16777215,duration:500,alpha:.5,zOrder:0},this.create()}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(Panel,[{key:"create",value:function create(){var i=this.Screen;this._panel=new h.Sprite("_1px",{}),this._panel.width=i.gameSize.width*i.widthRatio/i.ratio,this._panel.height=i.gameSize.height*i.heightRatio/i.ratio,this._panel.visible=!1,this._panel.x=i.gameSize.width/2,this._panel.y=i.gameSize.height/2}},{key:"show",value:function show(i,o){var a=this;this._panel.isDestroy&&this.create();var l=c.a.get("manager");this._panel._parent&&this._panel._parent.removeChild(this._panel);var m=null;i.constructor===String&&(m=l._containers[i])&&m.addChild(this._panel);var g=Object.assign({},this.defaultOptions,o);this._panel.tint=g.tint,this._panel.zOrder=g.zOrder,this._panel.alpha=0,this._panel.visible=!0,new h.Timer({duration:g.duration,onProgress:function onProgress(i){a._panel.alpha=g.alpha*i}})}},{key:"hide",value:function hide(i){var o=this,a=Object.assign({},this.defaultOptions,i),c=this._panel.alpha;new h.Timer({duration:a.duration,onProgress:function onProgress(i){o._panel.alpha=c-c*i}})}}]),Panel}()},function(i,o,a){function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}a.d(o,"a",(function(){return g}));var h={admob:"Admob",facebook:"Facebook",unity:"Unity"},c=function(){function NativeAndroid(i){!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,NativeAndroid),this.Native=i}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(NativeAndroid,[{key:"_send",value:function _send(i,o,a){var h=this,c="_"+Math.random().toString(36).substr(2,9);return new Promise((function(l,m){if(h.Native.promises[c]={functionName:o,resolve:l},a){var g=JSON.stringify(a);Android.HtoA(c,i,o,g)}else Android.HtoA(c,i,o)}))}},{key:"unityInitialize",value:function unityInitialize(i,o){this._send("Unity","initialize",{id:i,testMode:o})}},{key:"showBannerAd",value:function showBannerAd(i,o){return this._send(h[i],"showBannerAd",{id:o})}},{key:"hideBannerAd",value:function hideBannerAd(i){return this._send(h[i],"hideBannerAd")}},{key:"loadInterstitial",value:function loadInterstitial(i,o){return this._send(h[i],"loadInterstitial",o)}},{key:"showInterstitial",value:function showInterstitial(i){this._send(h[i],"showInterstitial")}},{key:"loadRewardedAd",value:function loadRewardedAd(i,o){return this._send(h[i],"loadRewardedAd",o)}},{key:"showRewardedAd",value:function showRewardedAd(i){this._send(h[i],"showRewardedAd")}},{key:"buy",value:function buy(i,o,a){o=o||!1,a=a||"",this._send("Payment","buy",{productId:i,isConsume:o,developerPayload:a})}},{key:"getIsLogin",value:function getIsLogin(){return this._send("GooglePlay","getIsLogin")}},{key:"loading",value:function loading(i,o){this._send("Utility","loading",{description:i,progress:o})}},{key:"showWG",value:function showWG(){this._send("Utility","showWG")}},{key:"isPurchased",value:function isPurchased(i){return this._send("Payment","isPurchased",{productId:i})}},{key:"getSkuDetails",value:function getSkuDetails(i){return this._send("Payment","getSkuDetails",{productId:i})}},{key:"isConnectedNetwork",value:function isConnectedNetwork(){return this._send("Utility","isConnectedNetwork")}},{key:"saveData",value:function saveData(i){return this._send("GooglePlay","saveData",i)}},{key:"loadData",value:function loadData(){return this._send("GooglePlay","loadData")}},{key:"loadDataList",value:function loadDataList(i){return new Promise((function(i){return i(!0)}))}},{key:"getLanguage",value:function getLanguage(){return this._send("Utility","getLanguageInfo")}},{key:"getIsAvailableICloudDrive",value:function getIsAvailableICloudDrive(){return new Promise((function(i){return i(!0)}))}},{key:"showLeaderboard",value:function showLeaderboard(i){return this._send("GooglePlay","showLeaderboard",{leaderboardId:i})}},{key:"showAchievements",value:function showAchievements(){return this._send("GooglePlay","showAchievements")}},{key:"getTopScores",value:function getTopScores(i){return this._send("GooglePlay","getTopScores",{leaderboardId:i})}},{key:"submitScore",value:function submitScore(i,o){return this._send("GooglePlay","submitScore",{leaderboardId:i,score:o})}},{key:"unlockAchievement",value:function unlockAchievement(i){return this._send("GooglePlay","unlockAchievement",{achievementId:i})}},{key:"incrementAchievement",value:function incrementAchievement(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._send("GooglePlay","incrementAchievement",{achievementId:i,increment:o})}},{key:"addLog",value:function addLog(i,o,a){return this._send("Utility","addLog",{eventName:i,key:o,value:a})}},{key:"addLogWithJson",value:function addLogWithJson(i,o){return this._send("Utility","addLogWithJson",{eventName:i,stringifiedJson:o})}},{key:"getUID",value:function getUID(){return this._send("GooglePlay","getUID")}},{key:"getDisplayName",value:function getDisplayName(){return this._send("GooglePlay","getDisplayName")}},{key:"getGameVersion",value:function getGameVersion(){return this._send("Utility","getGameVersion")}},{key:"subscribeFCM",value:function subscribeFCM(i){return this._send("FCM","subscribe",{topic:i})}},{key:"unsubscribeFCM",value:function unsubscribeFCM(i){return this._send("FCM","unsubscribe",{topic:i})}},{key:"getPushMessageAgreement",value:function getPushMessageAgreement(){return this._send("FCM","getPushMessageAgreement")}},{key:"setPushMessageAgreement",value:function setPushMessageAgreement(i){return this._send("FCM","setPushMessageAgreement",{agreement:i})}},{key:"getMode",value:function getMode(){return this._send("Utility","getMode")}},{key:"requestReview",value:function requestReview(){this._send("Utility","requestReview")}}]),NativeAndroid}();function Native_iOS_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var l=function(){function NativeIOS(i){!function Native_iOS_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,NativeIOS),this.Native=i}return function Native_iOS_createClass(i,o,a){o&&Native_iOS_defineProperties(i.prototype,o),a&&Native_iOS_defineProperties(i,a)}(NativeIOS,[{key:"_send",value:function _send(i,o){var a=this;return o=o||{},new Promise((function(h,c){var l="_"+Math.random().toString(36).substr(2,9),m=JSON.stringify(o);window.webkit.messageHandlers.WG.postMessage({functionName:i,optionsToJson:m,uniqueId:l}),a.Native.promises[l]={functionName:i,resolve:h}}))}},{key:"showBannerAd",value:function showBannerAd(i,o){this._send("showBannerAd",{adType:i,id:o})}},{key:"hideBannerAd",value:function hideBannerAd(i){this._send("hideBannerAd",{adType:i})}},{key:"loadInterstitial",value:function loadInterstitial(i,o){return this._send("loadInterstitial",{adType:i,id:o})}},{key:"showInterstitial",value:function showInterstitial(i){this._send("showInterstitial",{adType:i})}},{key:"loadRewardedAd",value:function loadRewardedAd(i,o){return this._send("loadRewardedAd",{adType:i,id:o})}},{key:"showRewardedAd",value:function showRewardedAd(i){this._send("showRewardedAd",{adType:i})}},{key:"buy",value:function buy(i){this._send("buy",{productId:i})}},{key:"isPurchased",value:function isPurchased(i){return this._send("isPurchased",{productId:i})}},{key:"getSkuDetails",value:function getSkuDetails(i){return this._send("getSkuDetails",{productId:i})}},{key:"isConnectedNetwork",value:function isConnectedNetwork(){return this._send("isConnectedNetwork")}},{key:"saveData",value:function saveData(i){return this._send("saveData",i)}},{key:"loadData",value:function loadData(){return this._send("loadData")}},{key:"getLanguage",value:function getLanguage(){return this._send("getLanguage")}},{key:"showWG",value:function showWG(){this._send("showWG")}},{key:"readyWG",value:function readyWG(){this._send("readyWG")}},{key:"loading",value:function loading(i){this._send("loading",{progress:i})}},{key:"getIsAvailableICloudDrive",value:function getIsAvailableICloudDrive(){return this._send("getIsAvailableICloudDrive")}},{key:"showLeaderboard",value:function showLeaderboard(i){return new Promise((function(i){return i(!0)}))}},{key:"showAchievements",value:function showAchievements(){return new Promise((function(i){return i(!0)}))}},{key:"getTopScores",value:function getTopScores(i){return new Promise((function(i){return i(!0)}))}},{key:"submitScore",value:function submitScore(i,o){return new Promise((function(i){return i(!0)}))}},{key:"unlockAchievement",value:function unlockAchievement(i){return new Promise((function(i){return i(!0)}))}},{key:"incrementAchievement",value:function incrementAchievement(i){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],new Promise((function(i){return i(!0)}))}},{key:"addLog",value:function addLog(i,o,a){return this._send("addLog",{eventName:i,key:o,value:a})}},{key:"addLogWithJson",value:function addLogWithJson(i,o){return new Promise((function(i){return i(!0)}))}},{key:"getIsLogin",value:function getIsLogin(){return this._send("getIsLogin")}},{key:"getUID",value:function getUID(){return this._send("getUID")}},{key:"getDisplayName",value:function getDisplayName(){return this._send("getDisplayName")}},{key:"getGameVersion",value:function getGameVersion(){return this._send("getGameVersion")}},{key:"getPushMessageAgreement",value:function getPushMessageAgreement(){return new Promise((function(i){return i(!1)}))}},{key:"setPushMessageAgreement",value:function setPushMessageAgreement(i){return new Promise((function(i){return i(!1)}))}},{key:"getMode",value:function getMode(){return this._send("getMode")}}]),NativeIOS}(),m=a(6);function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function _typeof(i){return _typeof2(i)}:function _typeof(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":_typeof2(i)})(i)}function Native_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var g=function(){function Native(i,o){var h=this;if(function Native_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Native),i.isMobile)this.promises={},i.isAndroid?(this._platform="android",this._native=new c(this)):i.isIOS?(a(109),this._platform="iOS",this._native=new l(this)):this._platform="else",this.getGameVersion().then((function(i){h.clientVersion=i}));else{this._platform="pc",this.clientVersion="unknown";var g=Object.getOwnPropertyNames(Native.prototype),_=["constructor","_emptyFunction"];g.map((function(i){_.includes(i)||(h[i]=function(){console.log("Native 환경이 아닙니다.")})}))}var x={admob:{android:{bannerAd:"ca-app-pub-3940256099942544/6300978111",interstitial:"ca-app-pub-3940256099942544/1033173712",rewardedAd:"ca-app-pub-3940256099942544/5224354917"},iOS:{bannerAd:"ca-app-pub-3940256099942544/2934735716",interstitial:"ca-app-pub-3940256099942544/4411468910",rewardedAd:"ca-app-pub-3940256099942544/1712485313"}},facebook:{bannerAd:"IMG_16_9_APP_INSTALL#",interstitial:"VID_HD_9_16_39S_LINK#",rewardedAd:"VID_HD_9_16_39S_APP_INSTALL#"},unity:{id:null}};this.ad={rewardedAd:{loadSuccess:this._emptyFunction,loadFail:this._emptyFunction,userEarnReward:this._emptyFunction,present:this._emptyFunction,error:this._emptyFunction,close:this._emptyFunction},interstitial:{loadSuccess:this._emptyFunction,loadFail:this._emptyFunction,present:this._emptyFunction,close:this._emptyFunction},bannerAd:{error:this._emptyFunction}},this.admob={rewardedAd:{id:o.debug&&"pc"!==this._platform?x.admob[this._platform].rewardedAd:o.admob.rewardedAd,isLoaded:!1,isLoading:!1},interstitial:{id:o.debug&&"pc"!==this._platform?x.admob[this._platform].interstitial:o.admob.interstitial,isLoaded:!1,isLoading:!1},bannerAd:{id:o.debug&&"pc"!==this._platform?x.admob[this._platform].bannerAd:o.admob.bannerAd}},this.facebook={rewardedAd:{id:o.debug&&"pc"!==this._platform?x.facebook.rewardedAd+o.facebook.rewardedAd:o.facebook.rewardedAd,isLoaded:!1,isLoading:!1},interstitial:{id:o.debug&&"pc"!==this._platform?x.facebook.interstitial+o.facebook.interstitial:o.facebook.interstitial,isLoaded:!1,isLoading:!1},bannerAd:{id:o.debug&&"pc"!==this._platform?x.facebook.bannerAd+o.facebook.bannerAd:o.facebook.bannerAd}},this.unity={rewardedAd:{id:o.debug&&"pc"!==this._platform?x.unity.id:o.unity.id,isLoaded:!1,isLoading:!1},interstitial:{id:o.debug&&"pc"!==this._platform?x.unity.id:o.unity.id,isLoaded:!1,isLoading:!1},bannerAd:{id:o.debug&&"pc"!==this._platform?x.unity.id:o.unity.id}},this.ad.interstitial.loadSuccess=function(i){h[i].interstitial.isLoading=!1,h[i].interstitial.isLoaded=!0},this.ad.interstitial.loadFail=function(i){return h[i].interstitial.isLoading=!1},this.ad.interstitial.present=function(o){h[o].interstitial.isLoaded=!1,i.Sound._setSystemMute(!0)},this.ad.interstitial.close=function(){return i.Sound._setSystemMute(!1)},this.ad.rewardedAd.loadSuccess=function(i){h[i].rewardedAd.isLoading=!1,h[i].rewardedAd.isLoaded=!0},this.ad.rewardedAd.loadFail=function(i){return h[i].rewardedAd.isLoading=!1},this.ad.rewardedAd.present=function(o){h[o].rewardedAd.isLoaded=!1,i.Sound._setSystemMute(!0)},this.ad.rewardedAd.close=function(){return i.Sound._setSystemMute(!1)},this.payment={purchased:this._emptyFunction,purchaseFailed:this._emptyFunction},this.social={loginSuccess:this._emptyFunction,loginFail:this._emptyFunction},this.ad.bannerAd.setOnError=function(i){h.ad.bannerAd.error=i},this.ad.rewardedAd.setOnLoadSuccess=function(i){h.ad.rewardedAd.loadSuccess=function(o){h[o].rewardedAd.isLoaded=!0,h[o].rewardedAd.isLoading=!1,i()}},this.ad.rewardedAd.setOnLoadFail=function(i){h.ad.rewardedAd.loadFail=function(o){h[o].rewardedAd.isLoading=!1,i()}},this.ad.rewardedAd.setOnUserEarnReward=function(i){h.ad.rewardedAd.userEarnReward=i},this.ad.rewardedAd.setOnPresent=function(o){h.ad.rewardedAd.present=function(a){h[a].rewardedAd.isLoaded=!1,i.Sound._setSystemMute(!0),o()}},this.ad.rewardedAd.setOnError=function(i){h.ad.rewardedAd.error=i},this.ad.rewardedAd.setOnClose=function(o){h.ad.rewardedAd.close=function(){i.Sound._setSystemMute(!1),o()}},this.ad.interstitial.setOnLoadSuccess=function(i){h.ad.interstitial.loadSuccess=function(o){h[o].interstitial.isLoaded=!0,h[o].interstitial.isLoading=!1,i()}},this.ad.interstitial.setOnLoadFail=function(i){h.ad.interstitial.loadFail=function(o){h[o].interstitial.isLoading=!1,i()}},this.ad.interstitial.setOnPresent=function(o){h.ad.interstitial.present=function(a){h[a].interstitial.isLoaded=!1,i.Sound._setSystemMute(!0),o()}},this.ad.interstitial.setOnClose=function(o){h.ad.interstitial.close=function(){i.Sound._setSystemMute(!1),o()}},this.payment.purchased=this._emptyFunction,this.payment.purchaseFailed=this._emptyFunction,this.payment.setOnPurchased=function(i){h.payment.purchased=i},this.payment.setOnPurchaseFailed=function(i){h.payment.purchaseFailed=i},this.social.setOnLoginSuccess=function(i){h.getIsLogin().then((function(o){"true"===o?i():h.social.loginSuccess=i}))},this.social.setOnLoginFail=function(i){"fail"===h._socialState?i():!1===h._socialState&&(h.social.loginFail=i)},this._socialState=!1,this.parseFunctionList=["loadData","getTopScores","getSkuDetails","loadInterstitial","loadRewardedAd"],this.productList=o.productList,this._getAllProductList=!1,this._productDetail={},m.a.set("native",this)}return function Native_createClass(i,o,a){o&&Native_defineProperties(i.prototype,o),a&&Native_defineProperties(i,a)}(Native,[{key:"_emptyFunction",value:function _emptyFunction(){}},{key:"_socialLoginFunction",value:function _socialLoginFunction(i){this._socialState=i,"success"===this._socialState?this.social.loginSuccess():this.social.loginFail()}},{key:"_resolve",value:function _resolve(i,o){this.promises[i]&&(this.parseFunctionList.includes(this.promises[i].functionName)&&(o=JSON.parse(o)),this.promises[i].resolve(o),delete this.promises[i])}},{key:"getPlatform",value:function getPlatform(){return this._platform}},{key:"getIsLogin",value:function getIsLogin(){return this._native.getIsLogin()}},{key:"showBannerAd",value:function showBannerAd(i){this._native.showBannerAd(i,this[i].bannerAd.id)}},{key:"hideBannerAd",value:function hideBannerAd(i){this._native.hideBannerAd(i)}},{key:"loadInterstitial",value:function loadInterstitial(i){if(!1===this[i].interstitial.isLoading&&!1===this[i].interstitial.isLoaded)return this[i].interstitial.isLoading=!0,this._native.loadInterstitial(i,this[i].interstitial.id);var o={};return o.state=this[i].interstitial.isLoaded?"success":"fail",new Promise((function(i){return i(o)}))}},{key:"showInterstitial",value:function showInterstitial(i){this[i].interstitial.isLoaded&&this._native.showInterstitial(i)}},{key:"loadRewardedAd",value:function loadRewardedAd(i){if(!1===this[i].rewardedAd.isLoading&&!1===this[i].rewardedAd.isLoaded)return this[i].rewardedAd.isLoading=!0,this._native.loadRewardedAd(i,this[i].rewardedAd.id);var o={};return o.state=this[i].rewardedAd.isLoaded?"success":"fail",new Promise((function(i){return i(o)}))}},{key:"showRewardedAd",value:function showRewardedAd(i){this[i].rewardedAd.isLoaded&&this._native.showRewardedAd(i)}},{key:"buy",value:function buy(i,o){this._native.buy(i,o)}},{key:"isPurchased",value:function isPurchased(i){return this._native.isPurchased(i)}},{key:"getSkuDetails",value:function getSkuDetails(i){return this._native.getSkuDetails(i)}},{key:"isConnectedNetwork",value:function isConnectedNetwork(){return this._native.isConnectedNetwork()}},{key:"saveData",value:function saveData(i){return this._native.saveData(i)}},{key:"loadData",value:function loadData(){return this._native.loadData()}},{key:"getLanguage",value:function getLanguage(){return this._native.getLanguage()}},{key:"getIsAvailableICloudDrive",value:function getIsAvailableICloudDrive(){return this._native.getIsAvailableICloudDrive()}},{key:"showLeaderboard",value:function showLeaderboard(i){return this._native.showLeaderboard(i)}},{key:"showAchievements",value:function showAchievements(){return this._native.showAchievements()}},{key:"getTopScores",value:function getTopScores(i){return this._native.getTopScores(i)}},{key:"submitScore",value:function submitScore(i,o){return this._native.submitScore(i,o)}},{key:"unlockAchievement",value:function unlockAchievement(i){return this._native.unlockAchievement(i)}},{key:"incrementAchievement",value:function incrementAchievement(i,o){return this._native.incrementAchievement(i,o)}},{key:"addLog",value:function addLog(i,o,a){return"object"===_typeof(o)?this._native.addLogWithJson(i,JSON.stringify(o)):this._native.addLog(i,o,a)}},{key:"loading",value:function loading(i,o){return this._native.loading(i,o)}},{key:"showWG",value:function showWG(){return this._native.showWG()}},{key:"getUID",value:function getUID(){return this._native.getUID()}},{key:"getDisplayName",value:function getDisplayName(){return this._native.getDisplayName()}},{key:"getGameVersion",value:function getGameVersion(){return this._native.getGameVersion()}},{key:"subscribeFCM",value:function subscribeFCM(i){return this._native.subscribeFCM(i)}},{key:"unsubscribeFCM",value:function unsubscribeFCM(i){return this._native.unsubscribeFCM(i)}},{key:"getPushMessageAgreement",value:function getPushMessageAgreement(){return this._native.getPushMessageAgreement()}},{key:"setPushMessageAgreement",value:function setPushMessageAgreement(i){return this._native.setPushMessageAgreement(i)}},{key:"getMode",value:function getMode(){return this._native.getMode()}},{key:"requestReview",value:function requestReview(){return this._native.requestReview()}}]),Native}()},function(i,o,a){a.d(o,"a",(function(){return j}));var h=a(4),c={};function type(i){var o=c.toString.call(i);return null===i?i+"":Number.isNaN(i)?"NaN":"object"==_typeof2(i)||"function"==typeof i?c[o]||"object":_typeof2(i)}"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach((function(i){c["[object "+i+"]"]=i.toLowerCase()}));var l={primitive:function primitive(i){return["string","number"].includes(type(i))},array:function array(i){return"array"===type(i)},num:function num(i){return"number"===type(i)},str:function str(i){return"string"===type(i)},obj:function obj(i){return"object"===type(i)},fn:function fn(i){return"function"===type(i)},undef:function undef(i){return"undefined"===type(i)},def:function def(i){return!l.undef(i)},null:function _null(i){return"null"===type(i)},empty:function empty(i){switch(type(i)){case"object":return 0===Object.keys(i).length;case"array":return 0===i.length;case"string":return!i.trim();case"undefined":case"null":case"NaN":case"boolean":return!0;default:return!1}},Nil:function Nil(i){return["null","undefined"].includes(type(i))},NaN:function NaN(i){return"NaN"===type(i)}};function isPlainObject(i){var o,a,h={},c=h.toString,l=h.hasOwnProperty,m=l.toString,g=m.call(Object);return!(!i||"[object Object]"!==c.call(i)||(o=Object.getPrototypeOf(i))&&("function"!=typeof(a=l.call(o,"constructor")&&o.constructor)||m.call(a)!==g))}function getPoint(i){return{t:Date.now(),id:i.data.identifier,x:Math.round(i.data.global.x),y:Math.round(i.data.global.y)}}var m=window.requestAnimationFrame||function(i){return setTimeout(i,17)},g=function loop(i,o){void 0===o&&(o=!0),o?function _fn(){!1!==i()&&m(_fn)}():function _fn(){i((function(){return m(_fn)}))}()},_=[{name:"pointerdown",fn:"_start"},{name:"pointermove",fn:"_move"},{name:"pointerup",fn:"_end"},{name:"pointerupoutside",fn:"_end"},{name:"pointercancel",fn:"_end"}];function isVer(i){return!i||!["horizontal","hor"].includes(i)}var x=function(){function PixiBetterScroller(i,o){var a=this;void 0===i&&(i={}),this.direction="vertical",this.width=500,this.height=500,this.x=0,this.y=0,this.radius=0,this.overflow="scroll",this.target="x",this.antiTarget="y",this.maxScrollDis=0,this.touching=!1,this.touchStartPoints=[],this.curPoints=[],this.bouncing=0,this.scrolling=!1,this.config={timeForEndScroll:300,scrollCurve:7,minDeltaToStop:.3,speedDecay:function speedDecay(i){return i-.02*i},antiFactor:!1,bounceResist:function bounceResist(i){var o;if(a.bouncing<0)o=.8-.005*a.content[a.target];else if(a.bouncing>0){var h=isVer(a.direction)?"height":"width",c=a[h],l=a.content[h];o=.8-.005*(c-a.content[a.target]-l)}else o=1;return i*o}},this.options=i,this.parent=o,["x","y","width","height","direction","overflow","radius"].map((function(o){l.undef(i[o])||(a[o]=i[o])})),isVer(this.direction)?(this.target="y",this.antiTarget="x"):(this.target="x",this.antiTarget="y"),this.config=function extend(){for(var i,o,a,h,c,l,m=[],g=0;g<arguments.length;g++)m[g]=arguments[g];var _=arguments[0]||{},x=1,S=arguments.length,R=!1;for("boolean"==typeof _&&(R=_,_=arguments[x]||{},x++),"object"!=_typeof2(_)&&"function"!=typeof _&&(_={}),x===S&&(_=this,x--);x<S;x++)if(null!==(i=arguments[x]))for(o in i)if(i.hasOwnProperty(o)){if(c=_[o],_===(h=i[o]))continue;R&&h&&(isPlainObject(h)||(l=Array.isArray(h)))?(l?(l=!1,a=c&&Array.isArray(c)?c:[]):a=c&&isPlainObject(c)?c:{},_[o]=extend(R,a,h)):void 0!==h&&(_[o]=h)}return _}(this.config,this.options.config),this.init()}return PixiBetterScroller.prototype.init=function(){this.container=new h.Container,this.container.x=this.x,this.container.y=this.y,this.container.sortableChildren=!0,this.container.name="Scroller",this.container.addChild(this.static=new h.Container),this.static.name="Static",this.static.zIndex=1,this.container.addChild(this.content=new h.Container),this.content.name="Context",this.content.zIndex=9,this.parent&&this.parent.addChild&&this.parent.addChild(this.container),this._createMask(),this._bindOriginEvent()},PixiBetterScroller.prototype._createMask=function(){var i=new h.Graphics;if(i.beginFill(16777215,1),this.radius?i.drawRoundedRect(0,0,this.width,this.height,this.radius):i.drawRect(0,0,this.width,this.height),i.endFill(),this.radius)this.container.mask=i;else{var o=new h.MaskData(i);o.type=1,o.autoDetect=!1,this.container.mask=o,this.container.hitArea=new h.Rectangle(0,0,this.width,this.height)}this.container.addChild(i)},PixiBetterScroller.prototype._bindOriginEvent=function(){var i=this;this.container.interactive=!0,_.map((function(o){var a=o.name,h=o.fn;i.container.on(a,i[h],i)}))},PixiBetterScroller.prototype._unbindOriginEvent=function(){var i=this;this.container.interactive=!1,_.map((function(o){var a=o.name,h=o.fn;i.container.off(a,i[h],i)}))},PixiBetterScroller.prototype._start=function(i){var o=getPoint(i);this.touchStartPoints.push(o),this.curPoints.push(o),this.touching=!0},PixiBetterScroller.prototype._move=function(i){var o=this;if(this.touching){var a=getPoint(i),h=this._findLastPoint(a.id);if(h){var c=a[this.target]-h[this.target],m=a[this.antiTarget]-h[this.antiTarget];if(c){var g=this.config.antiFactor;if(!1!==g){var _=l.num(g)?g:0;if(Math.abs(m)+_>=Math.abs(c))return}this.scrolling=!0,this._scroll(c,(function(i){i&&(o.bouncing=i,c=o.config.bounceResist(c),o._addPos(c))})),this._replaceCurPoint(a)}}}},PixiBetterScroller.prototype._end=function(i){this.touching=!1;var o=getPoint(i),a=this._findStartPoint(o.id);if(a){var h=o.t-a.t;!this.bouncing||this.bouncing<0&&this.content[this.target]<0||this.bouncing>0&&this.content[this.target]>-this.maxScrollDis?h<this.config.timeForEndScroll&&this._endScroll(o,h):this._bounceBack(),this.touchStartPoints=[],this.curPoints=[]}},PixiBetterScroller.prototype._findStartPoint=function(i){for(var o=0;o<this.touchStartPoints.length;o++){var a=this.touchStartPoints[o];if(a.id===i)return a}},PixiBetterScroller.prototype._findLastPoint=function(i){for(var o=0;o<this.curPoints.length;o++){var a=this.curPoints[o];if(a.id===i)return a}},PixiBetterScroller.prototype._replaceCurPoint=function(i){var o=this._findLastPoint(i.id);if(o){var a=this.curPoints.indexOf(o);this.curPoints.splice(a,1,i)}},PixiBetterScroller.prototype._bounceBack=function(){var i=this,o=function _back(o){var a=i.bouncing<0?0:-i.maxScrollDis;i._scrollTo("number"==typeof o?o:a,(function(o,h){h?(i.content[i.target]===a&&(i.bouncing=0),i.scrolling=!1):i._setPos(o)}))};l.fn(this.options.onBounce)?this.options.onBounce(this.bouncing,(function(i){return o(i)}),this.content[this.target]):o()},PixiBetterScroller.prototype._scrollTo=function(i,o){var a=this,h=this.content[this.target];h!==i&&g((function(){return!a.touching&&(h+=(i-h)/a.config.scrollCurve,Math.abs(h-i)<a.config.minDeltaToStop?(a._setPos(i),o&&o(i,!0),!1):(o&&o(h,!1),!0))}))},PixiBetterScroller.prototype._scroll=function(i,o){if(void 0===o&&(o=function n(i){}),"scroll"===this.overflow){var a=this.content[this.target]+i;a<=0&&a>=-this.maxScrollDis?(this._addPos(i),o(!1),this.options.onScroll&&this.options.onScroll(this.content[this.target])):a<=0?o(1):a>=-this.maxScrollDis&&o(-1)}},PixiBetterScroller.prototype._endScroll=function(i,o){var a=this,h=this._findStartPoint(i.id);if(h){var c=i[this.target]-h[this.target];if(c){var l,m=c/o;g((function(i){a.touching?a.scrolling=!1:(l=16*m,Math.abs(l)>1?a._scroll(l,(function(o){o?(a.bouncing=o,g((function(){return!(a.touching||(a._addPos(l),l=a.config.bounceResist(l),Math.abs(l)<a.config.minDeltaToStop&&(a._bounceBack(),1)))}))):Math.abs(l)>1&&(m=a.config.speedDecay(m),i())})):a.scrolling=!1)}),!1)}}},PixiBetterScroller.prototype._addPos=function(i){l.num(i)&&(this.content[this.target]+=Math.round(i))},PixiBetterScroller.prototype._setPos=function(i){l.num(i)&&(this.content[this.target]=Math.round(i))},PixiBetterScroller.prototype.addChild=function(i,o){if(void 0===o&&(o=!0),o){this.content.addChild(i);var a=isVer(this.direction)?"height":"width",h=this[a],c=this.content[a];c>h?(this.maxScrollDis=c-h,"hidden"!==this.options.overflow&&(this.overflow="scroll")):"scroll"!==this.options.overflow&&(this.overflow="hidden")}else this.static.addChild(i)},PixiBetterScroller.prototype.removeChild=function(i){i?(this.content.removeChild(i),this.static.removeChild(i)):(this.static.removeChildren(),this.content.removeChildren())},PixiBetterScroller.prototype.destroy=function(i){this._unbindOriginEvent(),this.container.destroy(i)},PixiBetterScroller.prototype.scrollTo=function(i,o){var a=this;void 0===o&&(o=!0),o?this._scrollTo(-i,(function(i,o){var h=i-a.content[a.target];a._scroll(h,(function(h){a._setPos(i),o&&h&&(a.bouncing=h,a._bounceBack())}))})):this._setPos(-i)},PixiBetterScroller}(),S=a(8),R=a(18),k=a(6);function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var j=function(){function Scroll(i){!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Scroll);var o=k.a.get("screen"),a={width:o.gameSize.width,height:o.gameSize.height,scrollHeight:o.gameSize.height,direction:"vertical"},h=S.a.getUniqueId(),c=Object.assign({},i,{name:h});this.container=new R.default.Container(c);var l=Object.assign({},a,i);this.scroller=new x({direction:l.direction,width:l.width,height:l.height,onScroll:function onScroll(i){},onBounce:function onBounce(i,o){o()}},this.container._pixiObject),this.scroller.container._WGObject={zOrder:0}}return function _createClass(i,o,a){o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a)}(Scroll,[{key:"addChild",value:function addChild(i){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.scroller.addChild(i._pixiObject,o)}}]),Scroll}()},function(i,o,a){(function(i){var h=void 0!==i&&i||"undefined"!=typeof self&&self||window,c=Function.prototype.apply;function Timeout(i,o){this._id=i,this._clearFn=o}o.setTimeout=function(){return new Timeout(c.call(setTimeout,h,arguments),clearTimeout)},o.setInterval=function(){return new Timeout(c.call(setInterval,h,arguments),clearInterval)},o.clearTimeout=o.clearInterval=function(i){i&&i.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(h,this._id)},o.enroll=function(i,o){clearTimeout(i._idleTimeoutId),i._idleTimeout=o},o.unenroll=function(i){clearTimeout(i._idleTimeoutId),i._idleTimeout=-1},o._unrefActive=o.active=function(i){clearTimeout(i._idleTimeoutId);var o=i._idleTimeout;o>=0&&(i._idleTimeoutId=setTimeout((function onTimeout(){i._onTimeout&&i._onTimeout()}),o))},a(72),o.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==i&&i.setImmediate||this&&this.setImmediate,o.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==i&&i.clearImmediate||this&&this.clearImmediate}).call(this,a(28))},function(i,o,a){(function(i,o){!function(i,a){if(!i.setImmediate){var h,c=1,l={},m=!1,g=i.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(i);_=_&&_.setTimeout?_:i,"[object process]"==={}.toString.call(i.process)?function installNextTickImplementation(){h=function s(i){o.nextTick((function(){runIfPresent(i)}))}}():function canUsePostMessage(){if(i.postMessage&&!i.importScripts){var o=!0,a=i.onmessage;return i.onmessage=function(){o=!1},i.postMessage("","*"),i.onmessage=a,o}}()?function installPostMessageImplementation(){var o="setImmediate$"+Math.random()+"$",a=function onGlobalMessage(a){a.source===i&&"string"==typeof a.data&&0===a.data.indexOf(o)&&runIfPresent(+a.data.slice(o.length))};i.addEventListener?i.addEventListener("message",a,!1):i.attachEvent("onmessage",a),h=function s(a){i.postMessage(o+a,"*")}}():i.MessageChannel?function installMessageChannelImplementation(){var i=new MessageChannel;i.port1.onmessage=function(i){runIfPresent(i.data)},h=function s(o){i.port2.postMessage(o)}}():g&&"onreadystatechange"in g.createElement("script")?function installReadyStateChangeImplementation(){var i=g.documentElement;h=function s(o){var a=g.createElement("script");a.onreadystatechange=function(){runIfPresent(o),a.onreadystatechange=null,i.removeChild(a),a=null},i.appendChild(a)}}():function installSetTimeoutImplementation(){h=function s(i){setTimeout(runIfPresent,0,i)}}(),_.setImmediate=function setImmediate(i){"function"!=typeof i&&(i=new Function(""+i));for(var o=new Array(arguments.length-1),a=0;a<o.length;a++)o[a]=arguments[a+1];var m={callback:i,args:o};return l[c]=m,h(c),c++},_.clearImmediate=clearImmediate}function clearImmediate(i){delete l[i]}function runIfPresent(i){if(m)setTimeout(runIfPresent,0,i);else{var o=l[i];if(o){m=!0;try{!function run(i){var o=i.callback,a=i.args;switch(a.length){case 0:o();break;case 1:o(a[0]);break;case 2:o(a[0],a[1]);break;case 3:o(a[0],a[1],a[2]);break;default:o.apply(void 0,a)}}(o)}finally{clearImmediate(i),m=!1}}}}}("undefined"==typeof self?void 0===i?this:i:self)}).call(this,a(28),a(73))},function(i,o){var a,h,c=i.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(i){if(a===setTimeout)return setTimeout(i,0);if((a===defaultSetTimout||!a)&&setTimeout)return a=setTimeout,setTimeout(i,0);try{return a(i,0)}catch(o){try{return a.call(null,i,0)}catch(o){return a.call(this,i,0)}}}!function(){try{a="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(i){a=defaultSetTimout}try{h="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(i){h=defaultClearTimeout}}();var l,m=[],g=!1,_=-1;function cleanUpNextTick(){g&&l&&(g=!1,l.length?m=l.concat(m):_=-1,m.length&&drainQueue())}function drainQueue(){if(!g){var i=runTimeout(cleanUpNextTick);g=!0;for(var o=m.length;o;){for(l=m,m=[];++_<o;)l&&l[_].run();_=-1,o=m.length}l=null,g=!1,function runClearTimeout(i){if(h===clearTimeout)return clearTimeout(i);if((h===defaultClearTimeout||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(i);try{h(i)}catch(o){try{return h.call(null,i)}catch(o){return h.call(this,i)}}}(i)}}function Item(i,o){this.fun=i,this.array=o}function noop(){}c.nextTick=function(i){var o=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)o[a-1]=arguments[a];m.push(new Item(i,o)),1!==m.length||g||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=noop,c.addListener=noop,c.once=noop,c.off=noop,c.removeListener=noop,c.removeAllListeners=noop,c.emit=noop,c.prependListener=noop,c.prependOnceListener=noop,c.listeners=function(i){return[]},c.binding=function(i){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(i){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(i,o,a){(function(i,h){var c;!function(l){o&&o.nodeType,i&&i.nodeType;var m="object"==_typeof2(h)&&h;m.global!==m&&m.window!==m&&m.self;var g,_=2147483647,x=/^xn--/,S=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},j=Math.floor,X=String.fromCharCode;function error(i){throw new RangeError(k[i])}function map(i,o){for(var a=i.length,h=[];a--;)h[a]=o(i[a]);return h}function mapDomain(i,o){var a=i.split("@"),h="";return a.length>1&&(h=a[0]+"@",i=a[1]),h+map((i=i.replace(R,".")).split("."),o).join(".")}function ucs2decode(i){for(var o,a,h=[],c=0,l=i.length;c<l;)(o=i.charCodeAt(c++))>=55296&&o<=56319&&c<l?56320==(64512&(a=i.charCodeAt(c++)))?h.push(((1023&o)<<10)+(1023&a)+65536):(h.push(o),c--):h.push(o);return h}function ucs2encode(i){return map(i,(function(i){var o="";return i>65535&&(o+=X((i-=65536)>>>10&1023|55296),i=56320|1023&i),o+X(i)})).join("")}function digitToBasic(i,o){return i+22+75*(i<26)-((0!=o)<<5)}function adapt(i,o,a){var h=0;for(i=a?j(i/700):i>>1,i+=j(i/o);i>455;h+=36)i=j(i/35);return j(h+36*i/(i+38))}function decode(i){var o,a,h,c,l,m,g,x,S,R,k,X=[],Y=i.length,q=0,Z=128,$=72;for((a=i.lastIndexOf("-"))<0&&(a=0),h=0;h<a;++h)i.charCodeAt(h)>=128&&error("not-basic"),X.push(i.charCodeAt(h));for(c=a>0?a+1:0;c<Y;){for(l=q,m=1,g=36;c>=Y&&error("invalid-input"),((x=(k=i.charCodeAt(c++))-48<10?k-22:k-65<26?k-65:k-97<26?k-97:36)>=36||x>j((_-q)/m))&&error("overflow"),q+=x*m,!(x<(S=g<=$?1:g>=$+26?26:g-$));g+=36)m>j(_/(R=36-S))&&error("overflow"),m*=R;$=adapt(q-l,o=X.length+1,0==l),j(q/o)>_-Z&&error("overflow"),Z+=j(q/o),q%=o,X.splice(q++,0,Z)}return ucs2encode(X)}function encode(i){var o,a,h,c,l,m,g,x,S,R,k,Y,q,Z,$,ee=[];for(Y=(i=ucs2decode(i)).length,o=128,a=0,l=72,m=0;m<Y;++m)(k=i[m])<128&&ee.push(X(k));for(h=c=ee.length,c&&ee.push("-");h<Y;){for(g=_,m=0;m<Y;++m)(k=i[m])>=o&&k<g&&(g=k);for(g-o>j((_-a)/(q=h+1))&&error("overflow"),a+=(g-o)*q,o=g,m=0;m<Y;++m)if((k=i[m])<o&&++a>_&&error("overflow"),k==o){for(x=a,S=36;!(x<(R=S<=l?1:S>=l+26?26:S-l));S+=36)$=x-R,Z=36-R,ee.push(X(digitToBasic(R+$%Z,0))),x=j($/Z);ee.push(X(digitToBasic(x,0))),l=adapt(a,q,h==c),a=0,++h}++a,++o}return ee.join("")}g={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:function toASCII(i){return mapDomain(i,(function(i){return S.test(i)?"xn--"+encode(i):i}))},toUnicode:function toUnicode(i){return mapDomain(i,(function(i){return x.test(i)?decode(i.slice(4).toLowerCase()):i}))}},void 0===(c=function(){return g}.call(o,a,o,i))||(i.exports=c)}()}).call(this,a(75)(i),a(28))},function(i,o){i.exports=function(i){return i.webpackPolyfill||(i.deprecate=function(){},i.paths=[],i.children||(i.children=[]),Object.defineProperty(i,"loaded",{enumerable:!0,get:function get(){return i.l}}),Object.defineProperty(i,"id",{enumerable:!0,get:function get(){return i.i}}),i.webpackPolyfill=1),i}},function(i,o,a){i.exports={isString:function isString(i){return"string"==typeof i},isObject:function isObject(i){return"object"==_typeof2(i)&&null!==i},isNull:function isNull(i){return null===i},isNullOrUndefined:function isNullOrUndefined(i){return null==i}}},function(i,o,a){o.decode=o.parse=a(78),o.encode=o.stringify=a(79)},function(i,o,a){function hasOwnProperty(i,o){return Object.prototype.hasOwnProperty.call(i,o)}i.exports=function(i,o,a,c){o=o||"&",a=a||"=";var l={};if("string"!=typeof i||0===i.length)return l;var m=/\+/g;i=i.split(o);var g=1e3;c&&"number"==typeof c.maxKeys&&(g=c.maxKeys);var _=i.length;g>0&&_>g&&(_=g);for(var x=0;x<_;++x){var S,R,k,j,X=i[x].replace(m,"%20"),Y=X.indexOf(a);Y>=0?(S=X.substr(0,Y),R=X.substr(Y+1)):(S=X,R=""),k=decodeURIComponent(S),j=decodeURIComponent(R),hasOwnProperty(l,k)?h(l[k])?l[k].push(j):l[k]=[l[k],j]:l[k]=j}return l};var h=Array.isArray||function(i){return"[object Array]"===Object.prototype.toString.call(i)}},function(i,o,a){var h=function stringifyPrimitive(i){switch(_typeof2(i)){case"string":return i;case"boolean":return i?"true":"false";case"number":return isFinite(i)?i:"";default:return""}};i.exports=function(i,o,a,m){return o=o||"&",a=a||"=",null===i&&(i=void 0),"object"==_typeof2(i)?map(l(i),(function(l){var m=encodeURIComponent(h(l))+a;return c(i[l])?map(i[l],(function(i){return m+encodeURIComponent(h(i))})).join(o):m+encodeURIComponent(h(i[l]))})).join(o):m?encodeURIComponent(h(m))+a+encodeURIComponent(h(i)):""};var c=Array.isArray||function(i){return"[object Array]"===Object.prototype.toString.call(i)};function map(i,o){if(i.map)return i.map(o);for(var a=[],h=0;h<i.length;h++)a.push(o(i[h],h));return a}var l=Object.keys||function(i){var o=[];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o}},function(i,o,a){(function(i){!function(){Object.defineProperties(i.Transform.prototype,{dock:{get:function get(){var o=this;return void 0===this._dock&&(this._offset={x:0,y:0},this._margin=[0,0,0,0],this._dock=new i.ObservablePoint((function(i){return o._updateDock=!0}),this,0,0),this._updateDock=!0),this._dock}}}),Object.defineProperties(i.Container.prototype,{defaultWidth:{get:function get(){return null==this.transform?0:this.transform._width},set:function set(i){this.transform._width=i}},defaultHeight:{get:function get(){return null==this.transform?0:this.transform._height},set:function set(i){this.transform._height=i}},dock:{get:function get(){return this.transform.dock}},margin:{get:function get(){return this.transform._margin},set:function set(i){return this.transform._margin=i}},offset:{get:function get(){return this.transform._offset},set:function set(i){return this.transform._offset=i}}});var o=i.Transform.prototype.updateTransform;i.Transform.prototype.updateTransform=function(i){if(!0===this._updateDock){var a=(i._width||this._width||0)*(-1*this._dock.x)-(1===this._dock.x?this._margin[1]:this._margin[3]),h=(i._height||this._height||0)*(-1*this._dock.y)-(1===this._dock.y?this._margin[2]:this._margin[0]);this.position.set(a+this._offset.x,h+this._offset.y),this._updateDock=!1}o.call(this,i)}}()}).call(this,a(4))},function(i,o){i.exports=function(i){if(!i.webpackPolyfill){var o=Object.create(i);o.children||(o.children=[]),Object.defineProperty(o,"loaded",{enumerable:!0,get:function get(){return o.l}}),Object.defineProperty(o,"id",{enumerable:!0,get:function get(){return o.i}}),Object.defineProperty(o,"exports",{enumerable:!0}),o.webpackPolyfill=1}return o}},function(i,o){(function(o){i.exports=o}).call(this,{})},function(i,o,a){o.clone=a(41),o.concat=a(84),o.every=a(85),o.filter=a(42),o.forEach=a(43),o.indexOf=a(86),o.lastIndexOf=a(87),o.map=a(44),o.pluck=a(88),o.reduce=a(45),o.reduceRight=a(46),o.some=a(89),o.fill=a(90)},function(i,o,a){i.exports=function fastConcat(){var i,o,a,h,c=arguments.length,l=[];for(i=0;i<c;i++)if(o=arguments[i],Array.isArray(o))for(a=o.length,h=0;h<a;h++)l.push(o[h]);else l.push(o);return l}},function(i,o,a){var h=a(16);i.exports=function fastEvery(i,o,a){var c,l=i.length,m=void 0!==a?h(o,a):o;for(c=0;c<l;c++)if(!m(i[c],c,i))return!1;return!0}},function(i,o,a){i.exports=function fastIndexOf(i,o,a){var h=i.length,c=0;for("number"==typeof a&&(c=a)<0&&(c+=h)<0&&(c=0);c<h;c++)if(i[c]===o)return c;return-1}},function(i,o,a){i.exports=function fastLastIndexOf(i,o,a){var h=i.length,c=h-1;for("number"==typeof a&&(c=a)<0&&(c+=h);c>=0;c--)if(i[c]===o)return c;return-1}},function(i,o,a){i.exports=function fastPluck(i,o){var a,h,c=i.length,l=[],m=0;for(h=0;h<c;h++)null!=(a=i[h])&&void 0!==a[o]&&(l[m++]=a[o]);return l}},function(i,o,a){var h=a(16);i.exports=function fastSome(i,o,a){var c,l=i.length,m=void 0!==a?h(o,a):o;for(c=0;c<l;c++)if(m(i[c],c,i))return!0;return!1}},function(i,o,a){i.exports=function fastFill(i,o,a,h){var c,l=i.length;for(void 0===a&&(a=0),void 0===h&&(h=l),c=a;c<h;c++)i[c]=o;return i}},function(i,o,a){o.apply=a(92),o.bind=a(93),o.partial=a(94),o.partialConstructor=a(95),o.try=a(96)},function(i,o,a){var h=a(30),c=a(47);i.exports=function fastApply(i,o,a){return void 0!==o?h(i,o,a):c(i,a)}},function(i,o,a){var h=a(30),c=a(47);i.exports=function fastBind(i,o){var a,l=arguments.length-2;if(l>0){a=new Array(l);for(var m=0;m<l;m++)a[m]=arguments[m+2];return void 0!==o?function(){var c,m=arguments.length,g=new Array(l+m);for(c=0;c<l;c++)g[c]=a[c];for(c=0;c<m;c++)g[l+c]=arguments[c];return h(i,o,g)}:function(){var o,h=arguments.length,m=new Array(l+h);for(o=0;o<l;o++)m[o]=a[o];for(o=0;o<h;o++)m[l+o]=arguments[o];return c(i,m)}}return void 0!==o?function(){return h(i,o,arguments)}:function(){return c(i,arguments)}}},function(i,o,a){var h=a(30);i.exports=function fastPartial(i){var o,a=arguments.length-1;o=new Array(a);for(var c=0;c<a;c++)o[c]=arguments[c+1];return function(){var c,l=arguments.length,m=new Array(a+l);for(c=0;c<a;c++)m[c]=o[c];for(c=0;c<l;c++)m[a+c]=arguments[c];return h(i,this,m)}}},function(i,o,a){var h=a(30);i.exports=function fastPartialConstructor(i){var o,a=arguments.length-1;o=new Array(a);for(var c=0;c<a;c++)o[c]=arguments[c+1];return function partialed(){var c,l=arguments.length,m=new Array(a+l);for(c=0;c<a;c++)m[c]=o[c];for(c=0;c<l;c++)m[a+c]=arguments[c];var g=Object.create(i.prototype),_=h(i,g,m);return null==_||"object"!=_typeof2(_)&&"function"!=typeof _?g:_}}},function(i,o,a){i.exports=function fastTry(i){try{return i()}catch(i){return i instanceof Error?i:new Error(i)}}},function(i,o,a){o.assign=a(98),o.clone=a(48),o.filter=a(49),o.forEach=a(50),o.map=a(51),o.reduce=a(52),o.reduceRight=a(53),o.keys=a(99),o.values=a(100)},function(i,o,a){i.exports=function fastAssign(i){var o,a,h,c,l,m,g=arguments.length;for(a=1;a<g;a++)for(o=arguments[a],h=(c=Object.keys(o)).length,m=0;m<h;m++)i[l=c[m]]=o[l];return i}},function(i,o,a){i.exports="function"==typeof Object.keys?Object.keys:function fastKeys(i){var o=[];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o}},function(i,o,a){i.exports=function fastValues(i){for(var o=Object.keys(i),a=o.length,h=new Array(a),c=0;c<a;c++)h[c]=i[o[c]];return h}},function(i,o,a){o.intern=a(102)},function(i,o,a){var h={"- ":!0};delete h["- "],i.exports=function fastIntern(i){h[i]=!0;var o=Object.keys(h)[0];return delete h[o],o}},function(i,o,a){var h=a(41),c=a(48);i.exports=function clone(i){return i&&"object"==_typeof2(i)?Array.isArray(i)?h(i):c(i):i}},function(i,o,a){var h=a(44),c=a(51);i.exports=function fastMap(i,o,a){return i instanceof Array?h(i,o,a):c(i,o,a)}},function(i,o,a){var h=a(42),c=a(49);i.exports=function fastFilter(i,o,a){return i instanceof Array?h(i,o,a):c(i,o,a)}},function(i,o,a){var h=a(43),c=a(50);i.exports=function fastForEach(i,o,a){return i instanceof Array?h(i,o,a):c(i,o,a)}},function(i,o,a){var h=a(45),c=a(52);i.exports=function fastReduce(i,o,a,l){return i instanceof Array?h(i,o,a,l):c(i,o,a,l)}},function(i,o,a){var h=a(46),c=a(53);i.exports=function fastReduceRight(i,o,a,l){return i instanceof Array?h(i,o,a,l):c(i,o,a,l)}},function(i,o){window.wgPolyfill={promises:{}};window.wgPolyfill.resolve=function(i,o){window.wgPolyfill.promises[i].resolve(o),delete window.wgPolyfill.promises[i]},function(){function FileHandler(i,o){this._reqContext=i,this._config=o}function HttpHandler(i,o){this._reqContext=i,this._config=o}function DelegateHandler(i,o){this._reqContext=i,this._reqContext.delegate=new window._XMLHttpRequest,this._config=o}function HandlerFactory(){}function _XMLHttpRequestUpload(){this._context={listeners:{}}}FileHandler._getMimeType=function(i){if(i.overrideMimeType)return i.overrideMimeType;if(i.responseHeaders["content-type"])return i.responseHeaders["content-type"];var o=i.url,a=o.substr(o.lastIndexOf("."));return FileHandler._EXT_TO_MIME[a]?FileHandler._EXT_TO_MIME[a]:""},FileHandler.getHandlerForResponseType=function(i){var o=i.responseType;return FileHandler._RESPONSE_HANDLERS[o]?FileHandler._RESPONSE_HANDLERS[o]:FileHandler._RESPONSE_HANDLERS.text},FileHandler._EXT_TO_MIME={".img":"image/jpeg",".png":"image/png",".gif":"image/gif",".xml":"application/xml",".xsl":"application/xml",".html":"text/html",".htm":"text/html",".svg":"image/svg+xml",".svgz":"image/svg+xml",".json":"application/json",".js":"application/javascript",".tar":"application/x-tar"},FileHandler._RESPONSE_HANDLERS={text:{action:"readAsText",properties:["response","responseText"],convert:function convert(i,o){return this._size=o.length,o},responseSize:function responseSize(){return isNaN(this._size)?0:this._size}},arraybuffer:{action:"readAsArrayBuffer",properties:["response"],convert:function convert(i,o){return this._size=o.byteLength,o},responseSize:function responseSize(){return isNaN(this._size)?0:this._size}},json:{action:"readAsText",properties:["response"],convert:function convert(i,o){this._size=o.length;try{o=JSON.parse(o)}catch(i){console.log(i)}return o},responseSize:function responseSize(){return isNaN(this._size)?0:this._size}},document:{action:"readAsText",properties:["response","responseXML"],convert:function convert(i,o){this._size=o.length;try{o=(new DOMParser).parseFromString(o,"text/xml")}catch(i){}return o},responseSize:function responseSize(){return isNaN(this._size)?0:this._size}},blob:{action:"readAsArrayBuffer",properties:["response"],convert:function convert(i,o){var a=new Blob([o],{type:i});return this._size=a.size,a},responseSize:function responseSize(){return isNaN(this._size)?0:this._size}}},FileHandler.prototype._isTraceLoggingEnabled=function(){return"full"===this._config.NativeXHRLogging},FileHandler._presend=function(i){i.dispatchReadyStateChangeEvent(1),i.dispatchProgressEvent("loadstart")},FileHandler._error=function(i,o){this._isTraceLoggingEnabled()&&console.log("xhr-polyfill.js - native file XHR Response: Unable to find file %o\n%o",i.url,o),i.status=404,i.responseText="File Not Found",i.dispatchReadyStateChangeEvent(2),i.dispatchReadyStateChangeEvent(3),i.dispatchProgressEvent("progress"),i.dispatchReadyStateChangeEvent(4),i.dispatchProgressEvent("error"),i.dispatchProgressEvent("loadend")},FileHandler._success=function(i,o,a){this._isTraceLoggingEnabled()&&console.log("xhr-polyfill.js - native file XHR Response:\n%o\n",i.url,a);for(var h=FileHandler._getMimeType(i),c=o.convert(h,a),l=o.responseSize(),m=0;m<o.properties.length;m++)i[o.properties[m]]=c;i.status=200,i.statusText="OK",i.responseURL=i.url,i.dispatchReadyStateChangeEvent(2),i.dispatchReadyStateChangeEvent(3),i.dispatchProgressEvent("progress",l),i.dispatchReadyStateChangeEvent(4),i.dispatchProgressEvent("load",l),i.dispatchProgressEvent("loadend",l)},FileHandler.prototype.send=function(){var i=this,o=this._reqContext,a=FileHandler.getHandlerForResponseType(o);this._isTraceLoggingEnabled()&&console.log("xhr-polyfill.js - native file XHR Request:\n%o",o.url),FileHandler._presend(o),function exec(i,o,a,h){var c=function makeUniqueId(){return"_"+(Number(String(Math.random()).slice(2))+Date.now()+Math.round(Date.now())).toString(36)}();new Promise((function(i,o){window.wgPolyfill.promises[c]={resolve:i,reject:o},window.webkit.messageHandlers.nativeResolve.postMessage({action:a,argument:h,promiseId:c})})).then(i).catch(o)}((function(h){o.url.includes(".json")||(h=function convertMessageNativeToJs(i){return function base64ToArrayBuffer(i){return function stringToArrayBuffer(i){for(var o=new Uint8Array(i.length),a=0;a<i.length;a++)o[a]=i.charCodeAt(a);return o.buffer}(atob(i))}(i)}(h)),FileHandler._success.bind(i,o,a,h)()}),null,a.action,o.url)},HttpHandler._generateId=function(){return[Date.now().toString(16),Math.random().toString(16)].join("-")},HttpHandler._convertTextToBinaryBase64String=function(i,o){var a=new Blob([o],{type:i}),h=new FileReader,c=new Promise((function(i,o){h.onload=function(){var o=btoa(h.result);i(o)},h.onerror=function(){var i=btoa(h.error);o(i)}}));return h.readAsBinaryString(a),c},HttpHandler._REQUEST_HANDLERS={"":{convert:function convert(i){return Promise.resolve(null)}},ArrayBuffer:{convert:function convert(i){var o=i.requestData,a=i.requestHeaders["content-type"];a||(a=i.requestHeaders["content-type"]="application/octet-binary;");var h=new Blob([o],{type:a}),c=new FileReader,l=new Promise((function(i,o){c.onload=function(){var o=btoa(c.result);i(o)},c.onerror=function(){var i=btoa(c.error);o(i)}}));return c.readAsBinaryString(h),l}},FormData:{convert:function convert(i){var o=i.requestData;return new Promise((function(a,h){var c=i.requestHeaders["content-type"];o.__getRequestParts().then((function(o){c||(i.requestHeaders["content-type"]=o.contentType);var l=new FileReader;l.onload=function(){var i=btoa(l.result);a(i)},l.onerror=function(){var i=btoa(l.error);h(i)},l.readAsBinaryString(o.body)}))}))}},Blob:{convert:function convert(i){i.requestHeaders["content-type"]||(i.requestHeaders["content-type"]="application/octet-binary;");var o=i.requestData,a=new FileReader,h=new Promise((function(i,o){a.onload=function(){var o=btoa(a.result);i(o)},a.onerror=function(){var i=btoa(a.error);o(i)}}));return a.readAsBinaryString(o),h}},string:{convert:function convert(i){i.requestHeaders["content-type"]||(i.requestHeaders["content-type"]="text/plain;");var o=i.requestData,a=i.requestHeaders["content-type"];return HttpHandler._convertTextToBinaryBase64String(a,o)}},Object:{convert:function convert(i){i.requestHeaders["content-type"]||(i.requestHeaders["content-type"]="application/json;");var o=JSON.stringify(i.requestData),a=i.requestHeaders["content-type"];return HttpHandler._convertTextToBinaryBase64String(a,o)}},Document:{convert:function convert(i){i.requestHeaders["content-type"]||(i.requestHeaders["content-type"]="application/xhtml+xml;");var o=i.requestData,a=(o=(new XMLSerializer).serializeToString(o),i.requestHeaders["content-type"]);return HttpHandler._convertTextToBinaryBase64String(a,o)}}},HttpHandler._convertEncode64StringToText=function(i,o,a){for(var h=atob(a),c=new Array(h.length),l=0;l<h.length;l++)c[l]=h.charCodeAt(l);var m=new Uint8Array(c),g=new Blob([m],{type:i}),_=new FileReader,x=new Promise((function(i,o){_.onload=function(){i(_.result)},_.onerror=function(){o(_.error)}}));return _.readAsText(g,o),x},HttpHandler._convertEncode64StringToArrayBuffer=function(i,o,a){for(var h=atob(a),c=new Array(h.length),l=0;l<h.length;l++)c[l]=h.charCodeAt(l);var m=new Uint8Array(c),g=new Blob([m],{type:i}),_=new FileReader,x=new Promise((function(i,o){_.onload=function(){i(_.result)},_.onerror=function(){o(_.error)}}));return _.readAsArrayBuffer(g),x},HttpHandler._RESPONSE_HANDLERS={text:{convert:HttpHandler._convertEncode64StringToText},arraybuffer:{convert:HttpHandler._convertEncode64StringToArrayBuffer},blob:{convert:HttpHandler._convertEncode64StringToArrayBuffer},json:{convert:HttpHandler._convertEncode64StringToText},document:{convert:HttpHandler._convertEncode64StringToText}},HttpHandler._UNDERLYING_ERROR_CODES={NSURLErrorUnknown:-1,NSURLErrorCancelled:-999,NSURLErrorBadURL:-1e3,NSURLErrorTimedOut:-1001,NSURLErrorUnsupportedURL:-1002,NSURLErrorCannotFindHost:-1003,NSURLErrorCannotConnectToHost:-1004,NSURLErrorNetworkConnectionLost:-1005,NSURLErrorDNSLookupFailed:-1006,NSURLErrorHTTPTooManyRedirects:-1007,NSURLErrorResourceUnavailable:-1008,NSURLErrorNotConnectedToInternet:-1009,NSURLErrorRedirectToNonExistentLocation:-1010,NSURLErrorBadServerResponse:-1011,NSURLErrorUserCancelledAuthentication:-1012,NSURLErrorUserAuthenticationRequired:-1013,NSURLErrorZeroByteResource:-1014,NSURLErrorCannotDecodeRawData:-1015,NSURLErrorCannotDecodeContentData:-1016,NSURLErrorCannotParseResponse:-1017,NSURLErrorAppTransportSecurityRequiresSecureConnection:-1022,NSURLErrorFileDoesNotExist:-1100,NSURLErrorFileIsDirectory:-1101,NSURLErrorNoPermissionsToReadFile:-1102,NSURLErrorDataLengthExceedsMaximum:-1103,NSURLErrorFileOutsideSafeArea:-1104,NSURLErrorSecureConnectionFailed:-1200,NSURLErrorServerCertificateHasBadDate:-1201,NSURLErrorServerCertificateUntrusted:-1202,NSURLErrorServerCertificateHasUnknownRoot:-1203,NSURLErrorServerCertificateNotYetValid:-1204,NSURLErrorClientCertificateRejected:-1205,NSURLErrorClientCertificateRequired:-1206,NSURLErrorCannotLoadFromNetwork:-2e3,NSURLErrorCannotCreateFile:-3e3,NSURLErrorCannotOpenFile:-3001,NSURLErrorCannotCloseFile:-3002,NSURLErrorCannotWriteToFile:-3003,NSURLErrorCannotRemoveFile:-3004,NSURLErrorCannotMoveFile:-3005,NSURLErrorDownloadDecodingFailedMidStream:-3006,NSURLErrorDownloadDecodingFailedToComplete:-3007,NSURLErrorInternationalRoamingOff:-1018,NSURLErrorCallIsActive:-1019,NSURLErrorDataNotAllowed:-1020,NSURLErrorRequestBodyStreamExhausted:-1021,NSURLErrorBackgroundSessionRequiresSharedContainer:-995,NSURLErrorBackgroundSessionInUseByAnotherProcess:-996,NSURLErrorBackgroundSessionWasDisconnected:-997},HttpHandler._getHandlerForRequestBodyType=function(i){var o=i.requestData;return o?"string"==typeof o?HttpHandler._REQUEST_HANDLERS.string:Blob.prototype.isPrototypeOf(o)?HttpHandler._REQUEST_HANDLERS.Blob:FormData.prototype.isPrototypeOf(o)?HttpHandler._REQUEST_HANDLERS.FormData:ArrayBuffer.prototype.isPrototypeOf(o)||o.buffer?HttpHandler._REQUEST_HANDLERS.ArrayBuffer:Document.prototype.isPrototypeOf(o)?HttpHandler._REQUEST_HANDLERS.Document:HttpHandler._REQUEST_HANDLERS.Object:HttpHandler._REQUEST_HANDLERS[""]},HttpHandler._getHandlerForResponseType=function(i){var o=i.responseType;return HttpHandler._RESPONSE_HANDLERS[o]?HttpHandler._RESPONSE_HANDLERS[o]:HttpHandler._RESPONSE_HANDLERS.text},HttpHandler.prototype._isTraceLoggingEnabled=function(){return"full"===this._config.NativeXHRLogging},HttpHandler._resolveUri=function(i){if(i.indexOf("://")>-1)return i;var o=document.createElement("a");document.body.appendChild(o),o.href=i;var a=o.href;return o.parentNode.removeChild(o),a},HttpHandler.prototype.send=function(){var i=this._reqContext,o=HttpHandler._generateId();if(i.user&&i.password){var a=[i.user,i.password].join(":");i.requestHeaders.authorization=["Basic",btoa(a)].join(" ")}window.__nativeXHRResponseQueue.set(o,this),HttpHandler._getHandlerForRequestBodyType(i).convert(i).then(function(a){var h=a?a.length:0;i.requestData=void 0;var c=isNaN(i.timeout)?void 0:i.timeout/1e3,l={id:o,callback:"nativeXHRResponse",url:HttpHandler._resolveUri(i.url),method:i.method,headers:i.requestHeaders,body:a,timeout:c};this._isTraceLoggingEnabled()&&console.log("xhr-polyfill.js - native XHR Request:\n %o",l),HttpHandler._presend(i,h),window.webkit.messageHandlers.nativeXHR.postMessage(l)}.bind(this)).catch(HttpHandler._error.bind(this,i))},HttpHandler._presend=function(i,o){i.dispatchReadyStateChangeEvent(1),i.dispatchProgressEvent("loadstart"),i.dispatchUploadProgressEvent("loadstart"),i.dispatchUploadProgressEvent("progress",o),i.dispatchUploadProgressEvent("load",o),i.dispatchUploadProgressEvent("loadend",o)},HttpHandler._success=function(i,o,a,h){for(var c=FileHandler.getHandlerForResponseType(i),l=c.convert(a,h),m=o.response.allHeaderFields,g={},_=Object.keys(m),x=0;x<_.length;x++){var S=_[x];g[S.toLowerCase()]=m[S]}for(i.responseHeaders=g,i.responseURL=o.response.url,i.status=o.response.statusCode,i.statusText=o.response.localizedStatusCode,x=0;x<c.properties.length;x++)i[c.properties[x]]=l;var R=c.responseSize();i.dispatchReadyStateChangeEvent(2),i.dispatchReadyStateChangeEvent(3),i.dispatchProgressEvent("progress",R),i.dispatchReadyStateChangeEvent(4),i.dispatchProgressEvent("load",R),i.dispatchProgressEvent("loadend",R)},HttpHandler._error=function(i,o,a){var h=HttpHandler._UNDERLYING_ERROR_CODES.NSURLErrorTimedOut===a;h?(i.status=0,i.statusText=i.responseText=null):(i.status=400,i.statusText="Bad Request",i.responseText=o),i.dispatchReadyStateChangeEvent(2),i.dispatchReadyStateChangeEvent(3),i.dispatchProgressEvent("progress"),i.dispatchReadyStateChangeEvent(4),h?i.dispatchProgressEvent("timeout"):i.dispatchProgressEvent("error"),i.dispatchProgressEvent("loadend")},HttpHandler.prototype.load=function(i){var o=this._reqContext;if(this._isTraceLoggingEnabled()&&console.log("xhr-polyfill.js - native XHR Response:\n%o",i),i.error)HttpHandler._error(o,i.error,i.underlyingErrorCode);else{var a=HttpHandler._getHandlerForResponseType(o),h=i.response.mimeType;o.overrideMimeType?h=o.overrideMimeType:i.response.allHeaderFields&&i.response.allHeaderFields["content-type"]&&(h=i.response.allHeaderFields["content-type"]);var c=i.response.textEncodingName?i.response.textEncodingName:"UTF-8";a.convert(h,c,i.data).then(HttpHandler._success.bind(this,o,i,h))}},window.__nativeXHRResponseQueue=new Map,window.nativeXHRResponse=function(i,o){try{var a=window.__nativeXHRResponseQueue.get(i);o.id=i,a.load(o)}catch(o){console.log("xhr-polyfill.js - exception delivering request %o\n%o",i,o)}finally{window.__nativeXHRResponseQueue.delete(i)}},DelegateHandler._FROM_PROPERTIES=["response","responseText","responseXML","responseURL","status","statusText"],DelegateHandler._TO_PROPERTIES=["responseType","timeout","withCredentials"],DelegateHandler._parseResponseHeaders=function(i,o){for(var a=i.getAllResponseHeaders().split(/\r?\n/),h=0;h<a.length;h++){var c=a[h],l=c.indexOf(": ");if(l>-1){var m=c.substr(0,l).toLowerCase(),g=c.substr(l+2);o[m]=g}}},DelegateHandler._progressEventRelay=function(i,o){var a=isNaN(o.totalSize)?0:o.totalSize;i.dispatchProgressEvent(o.type,a)},DelegateHandler._uploadProgressEventRelay=function(i,o){var a=isNaN(o.totalSize)?0:o.totalSize;i.dispatchUploadProgressEvent(o.type,a)},DelegateHandler._readystatechangeEventRelay=function(i,o,a){if(o.readyState>1){0===Object.keys(i.responseHeaders).length&&DelegateHandler._parseResponseHeaders(o,i.responseHeaders);for(var h=0;h<DelegateHandler._FROM_PROPERTIES.length;h++)try{i[DelegateHandler._FROM_PROPERTIES[h]]=o[DelegateHandler._FROM_PROPERTIES[h]]}catch(i){}i.dispatchReadyStateChangeEvent(o.readyState)}},DelegateHandler.prototype.send=function(){var i=this._reqContext,o=i.delegate;o.onreadystatechange=DelegateHandler._readystatechangeEventRelay.bind(o,i,o),["ontimeout","onloadstart","onprogress","onabort","onerror","onload","onloadend"].forEach((function(a){o[a]=DelegateHandler._progressEventRelay.bind(o,i),o.upload[a]=DelegateHandler._uploadProgressEventRelay.bind(o,i)})),i.overrideMimeType&&o.overrideMimeType(i.overrideMimeType),o.open(i.method,i.url,i.async,i.user,i.password);for(var a=0;a<DelegateHandler._TO_PROPERTIES.length;a++)o[DelegateHandler._TO_PROPERTIES[a]]=i[DelegateHandler._TO_PROPERTIES[a]];var h=Object.keys(i.requestHeaders);for(a=0;a<h.length;a++)o.setRequestHeader(h[a],i.requestHeaders[h[a]]);var c=i.requestData;i.requestData=void 0,FormData.prototype.isPrototypeOf(c)&&(c=c.__getNative()),o.send(c)},HandlerFactory._getConfig=function(){return HandlerFactory._config?Promise.resolve(HandlerFactory._config):new Promise((function(i){!function error(){HandlerFactory._config={InterceptRemoteRequests:"secureOnly",NativeXHRLogging:"none"},i(HandlerFactory._config)}()}))},HandlerFactory.getHandler=function(i){return new Promise((function(o){HandlerFactory._getConfig().then((function(a){var h=a.InterceptRemoteRequests;i.interceptRemoteRequests&&(h=i.interceptRemoteRequests),"GET"===i.method&&"string"==typeof i.url&&(-1===i.url.indexOf("://")&&"file:"===window.location.protocol||i.url.toLowerCase().startsWith("file://"))?o(new FileHandler(i,a)):"all"===h||"secureOnly"===h&&i.url.startsWith("https://")?o(new HttpHandler(i,a)):o(new DelegateHandler(i,a))}))}))},_XMLHttpRequestUpload.prototype.removeEventListener=function(i,o){var a=this._context.listeners;if(o){var h=a[i]?a[i]:[],c=h.indexOf(o);c>-1&&h.splice(c,1)}else a[i]=[]},_XMLHttpRequestUpload.prototype.addEventListener=function(i,o){if(o){var a=this._context.listeners,h=a[i];h||(h=a[i]=[]),h.indexOf(a)<0&&h.push(o)}},_XMLHttpRequestUpload.prototype.dispatchEvent=function(i){if(i){var o=i.type,a=this._context.listeners,h=(a[o]&&a[o],this._context[["on",o].join("")]);if(h)try{h.call(this,i)}catch(o){console.log("xhr-polyfill.js - exception delivering upload event %o\n%o",i,o)}}},window._XMLHttpRequest=window.XMLHttpRequest,window.XMLHttpRequest=function(){this._context={delegate:null,requestHeaders:{},responseHeaders:{},listeners:{},readyState:0,responseType:"text",withCredentials:!1,upload:new _XMLHttpRequestUpload,status:0},this._context.dispatchProgressEvent=function(i,o,a){isNaN(a)&&(a=0);var h=document.createEvent("Event");h.initEvent(o,!1,!1),["total","totalSize","loaded","position"].forEach((function(i){Object.defineProperty(h,i,{value:a})})),Object.defineProperty(h,"lengthComputable",{value:0!==a}),i.dispatchEvent(h)}.bind(this._context,this),this._context.dispatchReadyStateChangeEvent=function(i,o){var a=document.createEvent("Event");a.initEvent("readystatechange",!1,!1),this.readyState=o,i.dispatchEvent(a)}.bind(this._context,this),this._context.dispatchUploadProgressEvent=function(i,o){if("GET"!==this.method){isNaN(o)&&(o=0);var a=document.createEvent("Event");a.initEvent(i,!1,!1),["total","totalSize","loaded","position"].forEach((function(i){Object.defineProperty(a,i,{value:o})})),Object.defineProperty(a,"lengthComputable",{value:0!==o}),this.upload.dispatchEvent(a)}}.bind(this._context)},["UNSENT","OPENED","HEADERS_RECIEVED","LOADING","DONE"].forEach((function(i,o){Object.defineProperty(window.XMLHttpRequest.prototype,i,{get:function get(){return o}})})),["readyState","response","responseText","responseURL","responseXML","status","statusText","upload"].forEach((function(i){Object.defineProperty(window.XMLHttpRequest.prototype,i,{get:function get(){return this._context[i]}})})),["responseType","timeout","withCredentials"].forEach((function(i){Object.defineProperty(window.XMLHttpRequest.prototype,i,{get:function get(){return this._context[i]},set:function set(o){this._context[i]=o}})})),Object.defineProperty(window.XMLHttpRequest.prototype,"onreadystatechange",{get:function get(){return this._context.onreadystatechange},set:function set(i){"function"==typeof i&&(this._context.onreadystatechange=i)}}),["ontimeout","onloadstart","onprogress","onabort","onerror","onload","onloadend"].forEach((function(i){Object.defineProperty(window.XMLHttpRequest.prototype,i,{get:function get(){return this._context[i]},set:function set(o){"function"==typeof o&&(this._context[i]=o)}}),Object.defineProperty(_XMLHttpRequestUpload.prototype,i,{get:function get(){return this._context[i]},set:function set(o){"function"==typeof o&&(this._context[i]=o)}})})),window.XMLHttpRequest.prototype.setRequestHeader=function(i,o){i=String(i).toLowerCase(),o=String(o),this._context.requestHeaders[i]=o},window.XMLHttpRequest.prototype.abort=function(){this._context.delegate&&this._context.delegate.abort()},window.XMLHttpRequest.prototype.getResponseHeader=function(i){return i=i.toLowerCase(),this._context.responseHeaders[i]},window.XMLHttpRequest.prototype.overrideMimeType=function(i){return this._context.overrideMimeType=i},window.XMLHttpRequest.prototype.getAllResponseHeaders=function(){for(var i=this._context.responseHeaders,o=Object.keys(i),a=[],h=0;h<o.length;h++)a.push([o[h],i[o[h]]].join(":"));return a.join("\n")},window.XMLHttpRequest.prototype.removeEventListener=function(i,o){var a=this._context.listeners;if(o){var h=a[i]?a[i]:[],c=h.indexOf(o);c>-1&&h.splice(c,1)}else a[i]=[]},window.XMLHttpRequest.prototype.addEventListener=function(i,o){if(o){var a=this._context.listeners,h=a[i];h||(h=a[i]=[]),h.indexOf(a)<0&&h.push(o)}},window.XMLHttpRequest.prototype.dispatchEvent=function(i){if(i){var o=i.type,a=this._context.listeners,h=a[o]?a[o]:[],c=this._context[["on",o].join("")];if(c)try{c.call(this,i)}catch(o){console.log("xhr-polyfill.js - exception delivering event %o\n%o",i,o)}for(var l=0;l<h.length;l++)if(c=h[l])try{c.call(this,i)}catch(o){console.log("xhr-polyfill.js - exception delivering event %o\n%o",i,o)}}},window.XMLHttpRequest.prototype.open=function(i,o,a,h,c){this._context.method=i?i.toUpperCase():"GET",this._context.url=o,this._context.async=void 0===a||a,this._context.user=h,this._context.password=c},window.XMLHttpRequest.prototype.send=function(i){"GET"!==this._context.method&&"HEAD"!==this._context.method&&(this._context.requestData=i),HandlerFactory.getHandler(this._context).then((function(i){i.send()}))},window.XMLHttpRequest.prototype.__setInterceptRemoteRequests=function(i){["all","secureOnly","none"].indexOf(i)>-1&&(this._context.interceptRemoteRequests=i)}}()}]),c=(h.Container,h.Sprite,h.Text,h.Easing,h.Types,h.Graphics,h.Action,h.Input,h.Timer,h.Particle,h.Point,h.Polygon,h.Filters,h.Geometry,h.Shader,h.Mesh,h.BitmapText,h.default);function _defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var l=function(){function Utils(){!function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Utils)}return function _createClass(i,o,a){return o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a),i}(Utils,null,[{key:"getUniqueId",value:function getUniqueId(){return"_"+Math.random().toString(36).substr(2,9)}},{key:"addZero",value:function addZero(i){return i<10?"0".concat(i):"".concat(i)}},{key:"AABB",value:function AABB(i,o){return!(i.right<o.left||i.bottom<o.top||i.left>o.right||i.top>o.bottom)}},{key:"AOBB",value:function AOBB(i,o){var a=i.x,h=i.y;i.x<o.left?a=o.left:i.x>o.right&&(a=o.right),i.y<o.top?h=o.top:i.y>o.bottom&&(h=o.bottom);var c=i.x-a,l=i.y-h;return Math.sqrt(Math.pow(c,2)+Math.pow(l,2))<=i.radius}},{key:"shuffle",value:function shuffle(i){var o,a,h;for(a=i.length;a;)o=Math.random()*(1+--a)|0,h=i[a],i[a]=i[o],i[o]=h;return i}},{key:"color",value:function color(i,o,a){var h=this.hexToRGB(i),c=this.hexToRGB(o),l=Math.abs(h.r-c.r),m=Math.abs(h.g-c.g),g=Math.abs(h.b-c.b),_=a/50,x={r:h.r+Math.floor(l*_),g:h.g+Math.floor(m*_),b:h.b+Math.floor(g*_)};return this.RGBToHex(x.r,x.g,x.b)}},{key:"RGBToHex",value:function RGBToHex(i,o,a){return""+((1<<24)+(i<<16)+(o<<8)+a).toString(16).slice(1)}},{key:"hexToRGB",value:function hexToRGB(i){i=i.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(i,o,a,h){return o+o+a+a+h+h}));var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);return o?{r:parseInt(o[1],16),g:parseInt(o[2],16),b:parseInt(o[3],16)}:null}},{key:"lerp",value:function lerp(i,o,a){return(1-a)*i+a*o}},{key:"getRandomColor",value:function getRandomColor(){for(var i="#",o=0;o<6;o++)i+="0123456789ABCDEF"[Math.floor(16*Math.random())];return i}},{key:"deepCopy",value:function deepCopy(i){return JSON.parse(JSON.stringify(i))}}]),Utils}();function Life_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var m=function(){function Life(){!function Life_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Life),this.container=new WG.Container({x:-we.heroSize,y:-we.heroSize,parent:"GAME"}),this.index=null,this.sprite=new WG.Sprite("character/".concat(we.character,"_idle.json"),{scaleMode:WG.Types.ScaleMode.NEAREST,zOrder:0,scale:.8,alpha:.8}),this.lifeText=new WG.BitmapText("0",{fontFamily:"borsok@x4",x:-3,y:-30,parent:"UI"}),this.lifeText.tint=12582656,this.lifeText.scale=.2,this.container.addChild(this.sprite),this.container.addChild(this.lifeText)}return function Life_createClass(i,o,a){return o&&Life_defineProperties(i.prototype,o),a&&Life_defineProperties(i,a),i}(Life,[{key:"setting",value:function setting(i,o){this.index=i,this.container.x=i*we.blockSize,this.container.y=we.blockSize*o+we.blockSize/2,this.value=Math.floor(5*Math.random())+1,this.refreshLife()}},{key:"out",value:function out(){this.index=null,this.container.x=this.container.y=-we.blockSize}},{key:"refreshLife",value:function refreshLife(){this.lifeText.text=""+this.value}},{key:"update",value:function update(){null!==this.index&&this.container.x+we.blockSize/2<-we.gameContainer.x&&(we.addLine(this.index+we.maxLine),this.out(),g.returnLife(this))}},{key:"destroy",value:function destroy(){this.sprite.destroy(),this.lifeText.destroy()}},{key:"getCollisionBox",value:function getCollisionBox(){return{width:we.heroSize,height:we.heroSize,left:this.container.x-we.heroSize/2,right:this.container.x+we.heroSize/2,top:this.container.y-we.heroSize/2,bottom:this.container.y+we.heroSize/2}}}]),Life}();function LifeManager_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var g=function(){function LifeManager(){!function LifeManager_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,LifeManager)}return function LifeManager_createClass(i,o,a){return o&&LifeManager_defineProperties(i.prototype,o),a&&LifeManager_defineProperties(i,a),i}(LifeManager,null,[{key:"init",value:function init(){this.useLifes={},this.unuseLifes={};for(var i=0;i<20;i++)this.makeLife()}},{key:"makeLife",value:function makeLife(){var i=new m,o=l.getUniqueId();i.id=o,this.unuseLifes[o]=i}},{key:"borrowLife",value:function borrowLife(){this.getUnuseLifes().length<=0&&this.makeLife();var i=this.getUnuseLifes()[0];return delete this.unuseLifes[i.id],this.useLifes[i.id]=i,i}},{key:"returnLife",value:function returnLife(i){delete this.useLifes[i.id],this.unuseLifes[i.id]=i}},{key:"getUnuseLifes",value:function getUnuseLifes(){return Object.values(this.unuseLifes)}},{key:"getUseLifes",value:function getUseLifes(){return Object.values(this.useLifes)}},{key:"update",value:function update(i,o){if(we.blockUpdate)for(var a=this.getUseLifes(),h=0;h<a.length;h++)a[h].update(i,o)}}]),LifeManager}();function EffectManager_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var _=function(){function EffectManager(){!function EffectManager_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,EffectManager)}return function EffectManager_createClass(i,o,a){return o&&EffectManager_defineProperties(i.prototype,o),a&&EffectManager_defineProperties(i,a),i}(EffectManager,null,[{key:"init",value:function init(){this.boostEffects=[];for(var i=0;i<30;i++){var o=new WG.Sprite("game/block.png",{alpha:0,parent:"EFFECT"});o.width=100*Math.random(),o.height=2,this.boostEffects.push(o)}this.comboEffects={};for(var a=7;a<=10;a++){var h=x[a-5],c=10===a?"COMBO!":a+"";this.comboEffects[a]=new WG.BitmapText(c,{fontFamily:"borsok@x4",x:WG.Screen.gameSize.width/2,y:WG.Screen.gameSize.height/2,alpha:0,parent:"UI"}),this.comboEffects[a].scale=2,this.comboEffects[a].tint=parseInt(l.RGBToHex(h[0],h[1],h[2]),16)}}},{key:"earthQuake",value:function earthQuake(){var i=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;this.earthQuakeTimer&&this.earthQuakeTimer.stop();var c=Date.now();this.earthQuakeTimer=new WG.Timer({duration:a,onProgress:function onProgress(){var i=Date.now()-c;we.gameContainer.y=0,i>h&&(we.gameContainer.y=we.gameContainer.y-o/2+Math.random()*o)},onComplete:function onComplete(){i.earthQuakeTimer=null}})}},{key:"boost",value:function boost(i){var o=this;this.boostTimer&&this.boostTimer.stop();var a=Date.now(),h=!1;this.boostTimer=new WG.Timer({duration:i,onStart:function onStart(){for(var i=0;i<o.boostEffects.length;i++){var a=o.boostEffects[i];a.x=WG.Screen.gameSize.width+Math.random()*(.7*WG.Screen.gameSize.width),a.y=Math.random()*WG.Screen.gameSize.height,new WG.Action(a,{duration:300,value:"alpha",to:1})}},onProgress:function onProgress(c){var l=Date.now(),m=l-a;a=l;for(var g=0;g<o.boostEffects.length;g++){var _=o.boostEffects[g];_.x-=2*we.speed/1e3*m,_.x-_.width/2<0&&(_.x=WG.Screen.gameSize.width+Math.random()*(.7*WG.Screen.gameSize.width),_.y=WG.Screen.gameSize.height*Math.random())}if(c>.9&&!1===h){for(var x=0;x<o.boostEffects.length;x++){var S=o.boostEffects[x],R=(1-c)*i;new WG.Action(S,{duration:R,value:"alpha",to:0})}h=!0}},onComplete:function onComplete(){}})}},{key:"combo",value:function combo(i){var o=this.comboEffects[i];o.scale=2,o.x=WG.Screen.gameSize.width/2,o.y=WG.Screen.gameSize.height/2,new WG.Action(o,{duration:200,to:.5,value:"scale"}),new WG.Action(o,{duration:200,to:1-(1-i/10),value:"alpha",onComplete:function onComplete(){new WG.Action(o,{duration:200,delay:100,to:.1*WG.Screen.gameSize.width,value:"x"}),new WG.Action(o,{duration:200,delay:100,to:.9*WG.Screen.gameSize.height,value:"y"}),new WG.Action(o,{duration:200,delay:100,to:.01,value:"scale"}),new WG.Action(o,{duration:200,delay:100,to:0,value:"alpha"})}})}}]),EffectManager}(),x=[[58,134,255],[2,195,154],[255,190,11],[251,86,7],[255,0,110],[221,28,26]];function Combo_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}window.a=_;var S=function(){function Combo(){!function Combo_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Combo),this.standardY=.9,this.height=60,this.container=new WG.Container({x:ae.x,y:WG.Screen.gameSize.height*this.standardY,name:"UI-COMBO",parent:"UI"});var i=new WG.Sprite("game/block.png",{alpha:.5,parent:"UI-COMBO"});i.width=ae.width,i.height=this.height,this.text=new WG.BitmapText("0",{fontFamily:"bebasneue",parent:"UI-COMBO"}),this.text.scale=.7,this.text.tint=0;var o=new WG.BitmapText("COMBO",{fontFamily:"bebasneue",y:this.height/2,parent:"UI-COMBO"});o.scale=.45,o.tint=2894892}return function Combo_createClass(i,o,a){return o&&Combo_defineProperties(i.prototype,o),a&&Combo_defineProperties(i,a),i}(Combo,[{key:"update",value:function update(){}},{key:"set",value:function set(i){this.text.text=i+""}},{key:"setY",value:function setY(i){this.container.y=i}},{key:"setX",value:function setX(i){this.container.x=i}}]),Combo}();function Distance_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var R=function(){function Distance(){!function Distance_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Distance),this.to=1,this.term=1,this.termWidth=.05*WG.Screen.gameSize.width,this.texts=[],this.standardX=.1*WG.Screen.gameSize.width,this.standardY=.8,this.scale=.3,this.height=60,this.newRecordable=!0,this.lastRecord=localStorage.getItem("ctb_infinity"),this.container=new WG.Container({x:ae.x,y:WG.Screen.gameSize.height*this.standardY,name:"UI-DISTANCE",parent:"UI"});var i=new WG.Sprite("game/block.png",{alpha:.5,parent:"UI-DISTANCE"});i.width=ae.width,i.height=this.height,this.hero=new WG.Sprite("character/".concat(we.character,"_idle.json"),{y:this.height/2,scaleMode:WG.Types.ScaleMode.NEAREST,parent:"UI-DISTANCE"}),this.newText=new WG.BitmapText("new",{fontFamily:"borsok@x4",scale:.5,y:-this.height/2,parent:"UI-DISTANCE",tint:16754947,visible:!1});for(var o=0;o<4;o++){var a=new WG.BitmapText("",{fontFamily:"bebasneue",x:(o-1)*this.termWidth,parent:"UI-DISTANCE"});a.tint=0,a.scale=this.scale,this.texts.push(a)}this.elapsedTime=0}return function Distance_createClass(i,o,a){return o&&Distance_defineProperties(i.prototype,o),a&&Distance_defineProperties(i,a),i}(Distance,[{key:"update",value:function update(i){this.elapsedTime+=i,this.elapsedTime>100&&(this.hero.degree=20===Math.round(this.hero.degree)?345:20,this.elapsedTime=0),we.hero.moveDistance/1e3>this.to&&(this.to+=this.term);for(var o=this.to-we.hero.moveDistance/1e3,a=0;a<4;a++){var h=this.to-(2-a),c=this.texts[a];switch(c.text=h+" Km",c.x=(a-1)*this.termWidth-this.termWidth*(1-o),a){case 0:c.alpha=0;break;case 1:c.alpha=o,c.scale=this.scale+this.scale*o;break;case 2:c.alpha=1-o,c.scale=this.scale+this.scale*(1-o);break;case 3:c.alpha=0,c.scale=this.scale*(1-o)}}"infinity"===we.mode&&this.newRecordable&&we.hero.moveDistance>this.lastRecord&&(this.newRecord(),this.newRecordable=!1)}},{key:"setY",value:function setY(i){this.container.y=i}},{key:"setX",value:function setX(i){this.container.x=i}},{key:"newRecord",value:function newRecord(){this.newText.visible=!0,new WG.Action(this.newText,{to:.15,easing:WG.Easing.easeOutElastic,value:"scale"})}}]),Distance}();function Gem_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var k=function(){function Gem(){!function Gem_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Gem),this.standardY=.9,this.height=60,this.container=new WG.Container({x:ae.x,y:WG.Screen.gameSize.height*this.standardY,name:"UI-COIN",parent:"UI"});var i=new WG.Sprite("game/block.png",{alpha:.5,parent:"UI-COIN"});i.width=ae.width,i.height=this.height,this.text=new WG.BitmapText("0",{fontFamily:"bebasneue",parent:"UI-COIN"}),this.text.scale=.7,this.text.tint=0,new WG.Sprite("game/coin.json",{y:this.height/2,scaleMode:WG.Types.ScaleMode.NEAREST,parent:"UI-COIN"}).scale=1.5}return function Gem_createClass(i,o,a){return o&&Gem_defineProperties(i.prototype,o),a&&Gem_defineProperties(i,a),i}(Gem,[{key:"update",value:function update(){}},{key:"set",value:function set(i){this.text.text=i+""}},{key:"setY",value:function setY(i){this.container.y=i}},{key:"setX",value:function setX(i){this.container.x=i}}]),Gem}();function Sound_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var j=function(){function Sound(){!function Sound_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Sound)}return function Sound_createClass(i,o,a){return o&&Sound_defineProperties(i.prototype,o),a&&Sound_defineProperties(i,a),i}(Sound,null,[{key:"jump",value:function jump(){WG.Sound.sfx.play("sound/jump.mp3")}},{key:"click",value:function click(){WG.Sound.sfx.play("sound/click.mp3")}},{key:"confirm",value:function confirm(){WG.Sound.sfx.play("sound/confirm.mp3")}},{key:"hit",value:function hit(){var i=Math.floor(2*Math.random())+1;WG.Sound.sfx.play("sound/hit_".concat(i,".mp3"))}},{key:"life",value:function life(){WG.Sound.sfx.play("sound/life.mp3")}},{key:"gem",value:function gem(){WG.Sound.sfx.play("sound/gem.mp3")}},{key:"booster",value:function booster(){this.backgroundSpeed(1.2),WG.Sound.sfx.play("sound/booster.mp3")}},{key:"background",value:function background(i){WG.Sound.bgm.play("sound/background-".concat(i,".mp3"))}},{key:"backgroundSpeed",value:function backgroundSpeed(i){WG.isIOS||WG.Sound.bgm._playingSource&&(WG.Sound.bgm._playingSource.playbackRate.value=i)}},{key:"finish",value:function finish(i){new WG.Timer({duration:500,onProgress:function onProgress(i){WG.Sound.bgm.volumn=1-1*i},onComplete:function onComplete(){WG.Sound.bgm.volumn=1,WG.Sound.bgm.stop(),WG.Sound.sfx.play("sound/".concat(i,".mp3")),new WG.Timer({duration:1e3,onComplete:function onComplete(){WG.Sound.bgm.play("sound/".concat(i,"-jingle.mp3"))}})}})}}]),Sound}();function _defineProperty(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}function Button_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var X=function(){function Button(i){var o=this;!function Button_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Button);var a=Object.assign({},{type:"default",color:"green",event:function event(){},scale:1},i),h=new WG.Container(a);this.buttonContainer=h,this.baseScale=a.scale,this.type=a.type,this.color=a.color,this.buttonBackground=new WG.Sprite("".concat("default"===a.type?"button":"textbox","/").concat(a.color,".png"),{parent:a.name}),h.on("pointerdown",(function(){o.disable||(o._isDown=!0,o._runnable=!0,o._currentActionStop(),o._currentAction=new WG.Timer({duration:1e3,onProgress:function onProgress(i){h.scale=o.baseScale-.1*i},easing:WG.Easing.easeOutElastic}))}));var c={duration:1e3,easing:WG.Easing.easeOutElastic,onProgress:function onProgress(i){h.scale=o.baseScale-.1+.1*i}};return h.event=a.event,h.on("pointerup",(function(){if(!o.disable&&o._isDown){o._isDown=!1,o._currentActionStop();var i=function _objectSpread(i){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{},h=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(h=h.concat(Object.getOwnPropertySymbols(a).filter((function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})))),h.forEach((function(o){_defineProperty(i,o,a[o])}))}return i}({},c);i.onProgress=function(i,a){h.scale=o.baseScale-.1+.1*i},o._currentAction=new WG.Timer(i),j.click(),h.event()}})),h.on("pointerupoutside",(function(){o.disable||(o._isDown=!1,o._currentActionStop(),o._currentAction=new WG.Timer(c))})),h.button=this,h}return function Button_createClass(i,o,a){return o&&Button_defineProperties(i.prototype,o),a&&Button_defineProperties(i,a),i}(Button,[{key:"_currentActionStop",value:function _currentActionStop(){this._currentAction&&this._currentAction.stop(),this._currentAction=null}},{key:"setDisable",value:function setDisable(){this.disable=!0,this.buttonContainer.tint=10066329}},{key:"setEnable",value:function setEnable(){this.disable=!1,this.buttonContainer.tint=16777215}},{key:"setColor",value:function setColor(i){this.color=i,this.buttonBackground.texture="".concat("default"===this.type?"button":"textbox","/").concat(this.color,".png")}},{key:"getColor",value:function getColor(i){return this.color}}]),Button}();function State_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var Y=function(){function State(){!function State_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,State)}return function State_createClass(i,o,a){return o&&State_defineProperties(i.prototype,o),a&&State_defineProperties(i,a),i}(State,null,[{key:"init",value:function init(){this.deleteAnimations(),this.animationSpeed=150,new WG.Container({name:"STATE-BACKGROUND",parent:WG.Stage,mode:WG.Types.CoordinateMode.FILL}),this.container=new WG.Container({name:"STATE",x:WG.Screen.gameSize.width/2,y:1.5*WG.Screen.gameSize.height,parent:WG.Stage,mode:WG.Types.CoordinateMode.FIT}),this.container.scale=0,this.black=new WG.Sprite("ui/one.png",{x:WG.Screen.gameSize.width/2,y:WG.Screen.gameSize.height/2,parent:"STATE-BACKGROUND",alpha:0}),this.black.tint=0,this.black.width=WG.Screen.gameSize.width,this.black.height=WG.Screen.gameSize.height,this.box=new WG.Sprite("ui/result-background.png",{parent:"STATE"}),this.text=new WG.BitmapText("saving...",{fontFamily:"borsok@x4",scale:.3,tint:5658198,parent:"STATE"})}},{key:"show",value:function show(i){var o=this;this.deleteAnimations(),this.text.tint=5658198,this.baseText=i,this.dot=".",this.text.text=this.baseText+this.dot,this.black._pixiObject.interactive=!0,this.updateInterval=setInterval((function(){o.dot=o.dot+".",4===o.dot.length&&(o.dot=""),o.text.text=o.baseText+o.dot}),333),this.animations.push(new WG.Action(this.black,{to:.8,value:"alpha",duration:this.animationSpeed})),this.animations.push(new WG.Action(this.container,{to:WG.Screen.gameSize.height/2,value:"y",duration:this.animationSpeed})),this.animations.push(new WG.Action(this.container,{to:1,value:"scale",duration:this.animationSpeed}))}},{key:"hide",value:function hide(){this.deleteAnimations(),this.black._pixiObject.interactive=!1,this.animations.push(new WG.Action(this.black,{to:0,value:"alpha",duration:this.animationSpeed})),this.animations.push(new WG.Action(this.container,{to:1.5*WG.Screen.gameSize.height,value:"y",duration:this.animationSpeed})),this.animations.push(new WG.Action(this.container,{to:0,value:"scale",duration:this.animationSpeed}))}},{key:"done",value:function done(){var i=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"complete",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:27903;return this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null),this.text.tint=a,this.text.text=o,this.animations.push(new WG.Timer({duration:4*this.animationSpeed,onComplete:function onComplete(){return i.hide()}})),new Promise((function(o){return setTimeout((function(){return o()}),4*i.animationSpeed+i.animationSpeed)}))}},{key:"deleteAnimations",value:function deleteAnimations(){if(this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null),this.animations)for(var i=0;i<this.animations.length;i++)this.animations[i].stop();this.animations=[]}}]),State}();function Glo_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}function Glo_defineProperty(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}var q={_init:!0,character:{marlin:"open"},reinforce:{marlin:0},adRemove:{interstitial:!1,double:!1},coin:0,lastFreeAdTime:0,stage:0},Z=function(){function Glo(){!function Glo_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Glo)}return function Glo_createClass(i,o,a){return o&&Glo_defineProperties(i.prototype,o),a&&Glo_defineProperties(i,a),i}(Glo,null,[{key:"save",value:function save(){Y.show("save"),WG.Native.saveData(this.data).then((function(i){"success"===i&&(resolve(),Y.done())}))}},{key:"load",value:function load(){var i=this,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.data=q,this._firstLoad&&!1===o?new Promise((function(i){return i()})):(this._firstLoad=!0,new Promise((function(o){if(Y.show("loading"),WG.isMobile){var a=setTimeout((function(){Y.done("Load Fail - Timeout"),o()}),1e4);WG.Native.social.setOnLoginSuccess((function(){WG.Native.loadData().then((function(h){clearTimeout(a),h.constructor===String&&h.includes("fail")?(i._loadFail+=1,i._loadFail<=3&&i.load(!0),Y.done("Load Fail - ".concat(i._loadFail))):h._init?(i.data=h,console.log("Load",i.data,h),i.restorePurchases().then((function(){Y.done(),o()}))):(i.data=q,i.restorePurchases().then((function(){i.save().then((function(){Y.done(),o()}))})))}))}))}else i.data=q,window.testDataSetting=function(o,a,h){return i.testDataSetting(o,a,h)},i.testDataSetting(!0,1e5,50),Y.done(),o()})))}},{key:"save",value:function save(){var i=this,o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=arguments.length>1?arguments[1]:void 0;return o&&Y.show("saving"),new Promise((function(h){WG.isMobile?i.networkCheck((function(){WG.Native.saveData(i.data).then((function(c){"success"===c?o?Y.done().then((function(){a?a():h()})):a?a():h():i.save(o,a||h)}))})):o?Y.done().then((function(){return h()})):h()}))}},{key:"restorePurchases",value:function restorePurchases(){var i=this;if(WG.isMobile){Y.show("check store");for(var o=[],a=function _loop(a){var h=i.items[a];return"free_ruby"===h?"continue":i.noConsumeList.includes(h)?void o.push(new Promise((function(o){WG.Native.isPurchased(h).then((function(a){if("true"===a){if(i.characterListInItem.includes(h)){var c="dragons"===h?"dragon":h;void 0===i.data.reinforce[c]&&(i.data.reinforce[c]=0),i.data.character[c]="open"}else i.itemPurchasedEvents[h]();i.purchasedList.push(h)}o()}))}))):"continue"},h=0;h<this.items.length;h++)a(h);return Promise.all(o)}return new Promise((function(i){return i()}))}},{key:"getFreeAdTime",value:function getFreeAdTime(){return 6e5}},{key:"canIWatchFreeAd",value:function canIWatchFreeAd(){return Date.now()-this.data.lastFreeAdTime>this.getFreeAdTime()}},{key:"watchedFreeAd",value:function watchedFreeAd(){this.data.lastFreeAdTime=Date.now()}},{key:"addRuby",value:function addRuby(i){var o=this;this.networkCheck((function(){o.data.coin+=i,Y.show(""),Y.done("+ ".concat(i.toLocaleString()," Ruby")).then((function(){o.save()}))}))}},{key:"openCharacter",value:function openCharacter(i){var o=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.networkCheck((function(){o.data.character[i]="open",o.data.reinforce[i]=0,a&&o.save()}))}},{key:"removeAd",value:function removeAd(i){var o=this;this.networkCheck((function(){o.data.adRemove[i]=!0,Y.show(""),Y.done("interstitial"===i?"No more ads":"You always get double the reward.")}))}},{key:"networkCheck",value:function networkCheck(i){WG.isMobile?WG.Native.isConnectedNetwork().then((function(o){"true"===o?i():Y.done("Network Error")})):i()}},{key:"stageClear",value:function stageClear(i){var o=this;this.networkCheck((function(){o.data.stage+1===i&&(o.data.stage=i,o.data.coin+=Math.floor(i/3)+20,o.save(!1))}))}},{key:"testDataSetting",value:function testDataSetting(i,o,a){var h={character:{},coin:o,stage:a,reinforce:{}};if(h=Object.assign({},q,h),i)for(var c=Object.keys(WG.resource["data/character.json"]),l=0;l<c.length;l++){var m=c[l];h.character[m]="open",h.reinforce[m]=0}this.data=h}},{key:"canIWatchInterstitial",value:function canIWatchInterstitial(){return console.log(this.data),!this.data.adRemove.interstitial&&Date.now()-this.lastInterstitialTime>6e4}},{key:"adInit",value:function adInit(){var i=this;WG.isMobile&&(WG.Native.loadInterstitial("admob").then((function(o){"success"===o.state&&(i.isLoadedInterstitial=!0)})),WG.Native.loadRewardedAd("admob").then((function(o){"success"===o.state&&(i.isLoadedRewardedAd=!0)})))}},{key:"interstitial",value:function interstitial(i){var o=this;WG.isMobile&&this.isLoadedInterstitial?(this.lastInterstitialTime=Date.now(),this.isLoadedInterstitial=!1,WG.Native.ad.interstitial.setOnClose((function(){WG.Native.loadInterstitial("admob").then((function(i){"success"===i.state&&(o.isLoadedInterstitial=!0)})),i()})),WG.Native.showInterstitial("admob")):(this.lastInterstitialTime=Date.now(),console.log("show Interstitial"),i())}},{key:"rewardedAd",value:function rewardedAd(i){var o=this;if(WG.isMobile&&this.isLoadedRewardedAd){this._isEarnedReward=!1,this.isLoadedRewardedAd=!1,WG.Native.showRewardedAd("admob"),!0!==this._settingEventListener&&(WG.Native.ad.rewardedAd.setOnClose((function(){!1===o._isEarnedReward&&Y.done("Cancel Ad",16711752),WG.Native.loadRewardedAd("admob").then((function(i){"success"===i.state&&(o.isLoadedRewardedAd=!0)}))})),this._settingEventListener=!0);WG.Native.ad.rewardedAd.setOnUserEarnReward((function _success(){o._isEarnedReward=!0,i()}))}else i()}}]),Glo}();function Confirm_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}Glo_defineProperty(Z,"_loadFail",0),Glo_defineProperty(Z,"lastInterstitialTime",Date.now()),Glo_defineProperty(Z,"items",["free_ruby","ad_remove","double_ad_remove","all_ad_remove","ruby_2000","ruby_4400","ruby_10000","ruby_22000","ruby_49000","ruby_100000","chameleon","toilet","missile","dragons"]),Glo_defineProperty(Z,"noConsumeList",["ad_remove","double_ad_remove","all_ad_remove","chameleon","toilet","missile","dragons"]),Glo_defineProperty(Z,"characterListInItem",["chameleon","toilet","missile","dragons"]),Glo_defineProperty(Z,"itemPurchasedEvents",{ad_remove:function ad_remove(){Z.removeAd("interstitial")},double_ad_remove:function double_ad_remove(){Z.removeAd("double")},all_ad_remove:function all_ad_remove(){Z.removeAd("interstitial"),Z.removeAd("double")},ruby_2000:function ruby_2000(){Z.addRuby(2e3)},ruby_4400:function ruby_4400(){Z.addRuby(4400)},ruby_10000:function ruby_10000(){Z.addRuby(1e4)},ruby_22000:function ruby_22000(){Z.addRuby(22e3)},ruby_49000:function ruby_49000(){Z.addRuby(49e3)},ruby_100000:function ruby_100000(){Z.addRuby(1e5)},chameleon:function chameleon(){Z.unlockCharacter("chameleon")},toilet:function toilet(){Z.unlockCharacter("toilet")},missile:function missile(){Z.unlockCharacter("missile")},dragons:function dragons(){Z.unlockCharacter("dragon")}}),Glo_defineProperty(Z,"purchasedList",[]),console.log(Z);var $=function(){function Confirm(){!function Confirm_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Confirm)}return function Confirm_createClass(i,o,a){return o&&Confirm_defineProperties(i.prototype,o),a&&Confirm_defineProperties(i,a),i}(Confirm,null,[{key:"init",value:function init(){var i=this;this.container=new WG.Container({parent:WG.Stage,mode:WG.Types.CoordinateMode.FIT,name:"CONFIRM"}),this.background=new WG.Sprite("ui/one.png",{x:WG.Screen.gameSize.width/2,y:WG.Screen.gameSize.height/2,parent:"CONFIRM",alpha:0}),this.background.tint=0,this.background.width=2*WG.Screen.gameSize.width,this.background.height=2*WG.Screen.gameSize.height,this.background.on("pointerdown",(function(){return i.hide()})),this.background._pixiObject.interactive=!1,this.topContainer=new WG.Container({x:WG.Screen.gameSize.width/2,y:-500,name:"CONFIRM-TOP",parent:"CONFIRM"});new WG.Sprite("ui/result-background.png",{scale:.5,parent:"CONFIRM-TOP"});this.coin=new WG.Sprite("game/coin.json",{parent:"CONFIRM-TOP",scale:3,scaleMode:WG.Types.ScaleMode.NEAREST,x:-150,y:50}),this.coinValue=new WG.BitmapText("1,000",{x:150,y:60,fontFamily:"borsok@x4",parent:"CONFIRM-TOP",scale:.25}),this.coinValue.tint=3223857,this.coinValue.anchor.x=1,this.bottomContainer=new WG.Container({x:WG.Screen.gameSize.width/2,y:WG.Screen.gameSize.height+500,name:"CONFIRM-BOTTOM",parent:"CONFIRM"});new WG.Sprite("ui/result-background.png",{parent:"CONFIRM-BOTTOM"});this.coinButton=new X({x:-175,y:-90,scale:.85,type:"textbox",color:"pink",parent:"CONFIRM-BOTTOM",name:"COIN-BUTTON"}),new WG.Sprite("game/coin.json",{parent:"COIN-BUTTON",scale:3,scaleMode:WG.Types.ScaleMode.NEAREST,x:-70,y:-5}),this.coinButtonTextShadow=new WG.BitmapText("100",{x:63,y:3,fontFamily:"borsok@x4",parent:"COIN-BUTTON",scale:.25}),this.coinButtonTextShadow.anchor.x=1,this.coinButtonText=new WG.BitmapText("100",{x:60,fontFamily:"borsok@x4",parent:"COIN-BUTTON",scale:.25}),this.coinButtonText.tint=10813477,this.coinButtonText.anchor.x=1,this.adButton=new X({x:175,y:-90,scale:.85,type:"textbox",color:"pink",parent:"CONFIRM-BOTTOM",name:"AD-BUTTON"}),this.adIcon=new WG.Sprite("ui/ad.json",{parent:"AD-BUTTON"})}},{key:"refreshRuby",value:function refreshRuby(){this.coinValue.text=Z.data.coin.toLocaleString()}},{key:"show",value:function show(i){var o=Object.assign({},{myCoin:!0,coinButton:!0,adButton:!0,coinEvent:function coinEvent(){},adEvent:function adEvent(){}},i);this.coinValue.text=Z.data.coin.toLocaleString(),o.adButton&&o.coinButton?(this.coinButton.x=-175,this.adButton.x=175):o.adButton?this.adButton.x=0:this.coinButton.x=0,o.adButton?this.adButton.alpha=1:this.adButton.alpha=0,o.coinButton?this.coinButton.alpha=1:this.coinButton.alpha=0,this.coinButton.event=o.coinEvent,this.adButton.event=o.adEvent,this.background._pixiObject.interactive=!0,new WG.Action(this.background,{to:.8,value:"alpha",duration:400}),o.myCoin&&new WG.Action(this.topContainer,{to:0,easing:WG.Easing.easeInOutQuint,value:"y",duration:400}),new WG.Action(this.bottomContainer,{to:WG.Screen.gameSize.height,easing:WG.Easing.easeInOutQuint,value:"y",duration:400})}},{key:"hide",value:function hide(i){this.background._pixiObject.interactive=!1,new WG.Action(this.background,{to:0,value:"alpha",duration:400}),new WG.Action(this.topContainer,{to:-500,easing:WG.Easing.easeInOutQuint,value:"y",duration:400}),new WG.Action(this.bottomContainer,{to:WG.Screen.gameSize.height+500,easing:WG.Easing.easeInOutQuint,value:"y",duration:400,onComplete:function onComplete(){i&&i()}})}}]),Confirm}();function Result_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var ee=function(){function Result(){var i=this;!function Result_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Result),console.log(this),this.container=new WG.Container({x:WG.Screen.gameSize.width/2,y:WG.Screen.gameSize.height+WG.Screen.gameSize.height/2,name:"RESULT",parent:WG.Stage});var o=new WG.Sprite("ui/result-background.png",{parent:"RESULT"});this.title=new WG.Sprite("ui/game-over.png",{y:-o.height/2/1.5,parent:"RESULT"});var a=new WG.Sprite("ui/result-gray.png",{parent:"RESULT",y:10}).width;new WG.BitmapText("DISTANCE",{fontFamily:"borsok@x4",x:-a/2/2,y:-10,scale:.12,tint:5658198,parent:"RESULT"}),new WG.BitmapText("COIN",{fontFamily:"borsok@x4",x:a/2/2,y:-10,scale:.12,tint:5658198,parent:"RESULT"}),this.distance=new WG.BitmapText("1,023",{fontFamily:"borsok@x4",x:-a/2/2-12,y:30,scale:.2,tint:181146,parent:"RESULT"}),this.km=new WG.BitmapText("km",{fontFamily:"borsok@x4",x:this.distance.x+this.distance.width/2+20,y:30,scale:.1,tint:5658198,parent:"RESULT"}),this.coin=new WG.BitmapText("23",{fontFamily:"borsok@x4",x:a/2/2+15,y:30,scale:.2,tint:16711790,parent:"RESULT"}),this.coinIcon=new WG.Sprite("game/coin.json",{scaleMode:WG.Types.ScaleMode.NEAREST,x:this.coin.x-this.coin.width/2-20,y:23,scale:2,parent:"RESULT"});WG.Screen.widthRatio,WG.Screen.heightRatio;var h=["home","yellow","x2","again"],c={home:function home(){WG.Scene.fadeChange("Title",500)},yellow:function yellow(){$.show({coinEvent:function coinEvent(){Z.data.coin>=100&&$.hide((function(){i.hide((function(){Z.data.coin-=100,Z.save(!1),we.resurrection()}))}))},adEvent:function adEvent(){Z.rewardedAd((function(){$.hide((function(){i.hide((function(){we.resurrection()}))}))}))}})},x2:function x2(){$.show({coinButton:!1,myCoin:!1,adEvent:function adEvent(){Z.rewardedAd((function(){var o=we.coin+we.afterResurrectionCoin;Z.data.coin+=o,Z.save().then((function(){$.hide((function(){new WG.Particle({scaleMode:WG.Types.ScaleMode.NEAREST,image:"game/coin.json",options:WG.resource["effect/x2_effect.json"],parent:"RESULT",x:i.coin.x-i.coin.width/2-20,y:23}),i.coin.text=(2*(we.coin+we.afterResurrectionCoin)).toLocaleString(),i.coinIcon.x=i.coin.x-i.coin.width/2-20,i.buttonObject.yellow.button.setDisable(),i.buttonObject.x2.button.setDisable()}))}))}))}})},again:function again(){if(i._fireworks&&i._fireworks.length)for(var o=0;o<i._fireworks.length;o++)clearTimeout(i._fireworks[o]);Z.canIWatchInterstitial()?Z.interstitial((function(){return WG.Scene.fadeReload()})):WG.Scene.fadeReload()},next:function next(){WG.Scene.fadeChange("Title",500,"stage")}};this.buttonEvent=c;var l=(o.width-147*.8*4)/(h.length+1);this.buttonObject={};for(var m=0;m<h.length;m++){var g=h[m];this.buttonObject[g]=new X({x:-o.width/2+147*.8*m+l*(m+1)+147*.8/2,y:o.height/2,scale:.8,parent:"RESULT",color:g,event:c[g],name:g}),"yellow"===g?(new WG.Sprite("character/".concat(we.character,"_idle.json"),{scaleMode:WG.Types.ScaleMode.NEAREST,y:10,alpha:.5,parent:g}),new WG.Sprite("ui/life.png",{scaleMode:WG.Types.ScaleMode.NEAREST,y:-28,parent:g})):"x2"===g&&new WG.Sprite("game/coin.json",{scaleMode:WG.Types.ScaleMode.NEAREST,y:-28,scale:2.2,parent:g})}}return function Result_createClass(i,o,a){return o&&Result_defineProperties(i.prototype,o),a&&Result_defineProperties(i,a),i}(Result,[{key:"show",value:function show(i,o,a){var h=this;this.title.texture="ui/".concat(i,".png"),this.distance.text=(o/1e3).toFixed(1),this.coin.text=a,this.km.x=this.distance.x+this.distance.width/2+20,this.coinIcon.x=this.coin.x-this.coin.width/2-20,we.resurrectionable||this.buttonObject.yellow.button.setDisable(),Z.data.adRemove.double&&this.buttonObject.x2.button.setDisable(),"mission-success"===i&&(this.buttonObject.again.event=this.buttonEvent.next,this.buttonObject.again.button.setColor("play"),this.buttonObject.yellow.button.setDisable()),"infinity"===we.mode&&localStorage.getItem("ctb_infinity")<we.hero.moveDistance&&(localStorage.setItem("ctb_infinity",we.hero.moveDistance),this.newText?(this.newText.scale=.5,this.newText.degree=0,this.newText.visible=!1):this.newText=new WG.BitmapText("new",{fontFamily:"borsok@x4",scale:.5,x:this.distance.x-30,y:this.distance.y-70,parent:"RESULT",tint:16754947,visible:!1}),new WG.Timer({duration:500,onComplete:function onComplete(){return h.newText.visible=!0}}),new WG.Action(this.newText,{to:.2,value:"scale",delay:500,easing:WG.Easing.easeOutElastic}),new WG.Action(this.newText,{to:-10,value:"degree",delay:500,easing:WG.Easing.easeOutElastic})),new WG.Action(this.container,{duration:1500,easing:WG.Easing.easeOutElastic,to:WG.Screen.gameSize.height/2,value:"y",onComplete:function onComplete(){if("mission-success"===i){h._fireworks=[];for(var o=function _loop(i){var o=te[i%te.length],a=800*Math.random()-400,c=600*Math.random()-300;h._fireworks.push(setTimeout((function(){var i=l.deepCopy(WG.resource["effect/block_break.json"]);i.color.start=i.color.end=o,new WG.Particle({image:"game/block.png",options:i,parent:"RESULT",x:a,y:c})}),100*i))},a=0;a<20;a++)o(a)}}})}},{key:"hide",value:function hide(i){new WG.Action(this.container,{duration:500,easing:WG.Easing.easeOutElastic,to:WG.Screen.gameSize.height+WG.Screen.gameSize.height/2,value:"y",onComplete:i})}}]),Result}(),te=["#02c39a","#fc2e6d","#fcce2e","#0690fb","#02c39a"];function _slicedToArray(i,o){return function _arrayWithHoles(i){if(Array.isArray(i))return i}(i)||function _iterableToArrayLimit(i,o){var a=[],h=!0,c=!1,l=void 0;try{for(var m,g=i[Symbol.iterator]();!(h=(m=g.next()).done)&&(a.push(m.value),!o||a.length!==o);h=!0);}catch(i){c=!0,l=i}finally{try{h||null==g.return||g.return()}finally{if(c)throw l}}return a}(i,o)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function MissionBox_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var re=function(){function MissionBox(){!function MissionBox_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,MissionBox),this.height=60;this.container=new WG.Container({x:ae.x,y:ae.margin.height,name:"UI-MISSIONBOX",mode:WG.Types.CoordinateMode.FIT,parent:"UI"}),this.data={},this.shake={};for(var i=0;i<se.clearConditionArray.length;i++){var o=_slicedToArray(se.clearConditionArray[i],2),a=o[0],h=o[1];this.data[a]={value:h};var c="UI-MISSIONBOX-".concat(a);this.data[a].container=new WG.Container({y:this.height*i+20*i,name:c,parent:"UI-MISSIONBOX"}),this.data[a].container._originalY=this.data[a].container.y;var l=new WG.Sprite("game/block.png",{alpha:.5,parent:c});l.width=ae.width,l.height=this.height,this.data[a].background=new WG.Sprite("game/block.png",{alpha:.5,parent:c}),this.data[a].background.tint=65280,this.data[a].background.anchor.x=0,this.data[a].background.x-=l.width/2,this.data[a].background.width=0,this.data[a].background.height=this.height,new WG.BitmapText(a.replace("-"," ").toUpperCase(),{fontFamily:"bebasneue",y:this.height/2,scale:.45,parent:c}),this.data[a].text=new WG.BitmapText("life-limit"===a?h+"":"0 / ".concat(h),{fontFamily:"bebasneue",scale:.7,parent:c})}}return function MissionBox_createClass(i,o,a){return o&&MissionBox_defineProperties(i.prototype,o),a&&MissionBox_defineProperties(i,a),i}(MissionBox,[{key:"setY",value:function setY(i){this.container.y=i}},{key:"setX",value:function setX(i){this.container.x=i}},{key:"update",value:function update(i,o){console.log(i,o),"distance"===i&&(o=Math.floor(o)),this.data[i].text.text="".concat(o," / ").concat(this.data[i].value);var a=o/this.data[i].value,h=a-(this.prevProgress||0);if(this.prevProgress=a,"jump"===i){if(a>.8){var c=.8*(this.data[i].value+1),m=(o-c)/(this.data[i].value+1-c),g={r:255,g:255,b:255},_={r:255,g:0,b:60},x={r:parseInt(l.lerp(g.r,_.r,m)),g:parseInt(l.lerp(g.g,_.g,m)),b:parseInt(l.lerp(g.b,_.b,m))},S=x.r,R=x.g,k=x.b;this.shakeEffect(i),this.data[i].text.tint=parseInt(l.RGBToHex(S,R,k),16)}}else"distance"!==i&&this.shakeEffect(i);h&&(a<=1&&"distance"===i&&this.shakeEffect(i),a>=1&&(a=1,this.data[i].background.tint=255),new WG.Action(this.data[i].background,{value:"width",to:ae.width*a,duration:500}))}},{key:"shakeEffect",value:function shakeEffect(i){this.shake[i]&&this.shake[i].stop(),this.shake["".concat(i,"_lastTime")]=Date.now();this.data[i].container.scale=1.2,this.shake[i]=new WG.Action(this.data[i].container,{duration:300,value:"scale",to:1,easing:WG.Easing.easeOutBounce})}}]),MissionBox}();function Background_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var ie=function(){function Background(){!function Background_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Background),this.backgrounds=[];var i=new WG.Sprite("game/gradient.png",{x:WG.Screen.gameSize.width/2,y:WG.Screen.gameSize.height/2,parent:"BACKGROUND"});this.colorMatrixFilter=new WG.Filters.ColorMatrixFilter,i.filters=[this.colorMatrixFilter],i.width=WG.Screen.gameSize.width,i.height=WG.Screen.gameSize.height;for(var o=0;o<1;o++)this.backgrounds.push(new WG.Sprite("game/background".concat(o+1,".png"),{parent:"BACKGROUND",x:WG.Screen.gameSize.width/2*(o+1),y:WG.Screen.gameSize.height/2}));this.hueAngle=0}return function Background_createClass(i,o,a){return o&&Background_defineProperties(i.prototype,o),a&&Background_defineProperties(i,a),i}(Background,[{key:"update",value:function update(i){this.hueAngle+=.03*i,this.hueAngle>360&&(this.hueAngle=0),this.colorMatrixFilter.hue(this.hueAngle,!1)}}]),Background}();function OptionItem_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function OptionItem_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var ne=function(){function OptionItem(i,o,a,h){var c=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"left";OptionItem_classCallCheck(this,OptionItem),this.events=h;var m="UI-ITEM-".concat(i);new WG.Container({parent:"OPTION",name:m,x:o,y:a});var g=15,_=new WG.BitmapText(i,{x:g,y:3,fontFamily:"borsok@x4",parent:m,scale:.12,tint:0});_.anchor.x=0;var x=5;this.left=new WG.Sprite("option/left-normal.png",{parent:m,x:207}),this.left.on("pointerdown",(function(){return c.set("left",!0)})),this.center=new WG.Sprite("option/center-normal.png",{parent:m,x:290+x}),this.center.on("pointerdown",(function(){return c.set("center",!0)})),this.right=new WG.Sprite("option/right-normal.png",{parent:m,x:373+2*x}),this.right.on("pointerdown",(function(){return c.set("right",!0)})),this.current=l,this.set(l)}return function OptionItem_createClass(i,o,a){return o&&OptionItem_defineProperties(i.prototype,o),a&&OptionItem_defineProperties(i,a),i}(OptionItem,[{key:"set",value:function set(i,o){this[this.current].texture="option/".concat(this.current,"-normal.png"),this.current=i,this[i].texture="option/".concat(i,"-selected.png"),this.left.zOrder=0,this.center.zOrder=0,this.right.zOrder=0,this[i].zOrder=-1,o&&this.events[i]&&this.events[i]()}}]),OptionItem}();function Option_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var oe=function(){function Option(){!function Option_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Option)}return function Option_createClass(i,o,a){return o&&Option_defineProperties(i.prototype,o),a&&Option_defineProperties(i,a),i}(Option,null,[{key:"init",value:function init(){var i=this;new WG.Container({parent:"UI",name:"OPTION-BUTTON",mode:WG.Types.CoordinateMode.FIT}),this.container=new WG.Container({parent:"UI",name:"OPTION",x:WG.Screen.gameSize.width/2,y:WG.Screen.gameSize.height/2+WG.Screen.gameSize.height});var o=new X({color:"pause-game",parent:"OPTION-BUTTON",name:"PAUSE-BUTTON",scale:.6,x:WG.Screen.gameSize.width-70,y:70,event:function event(){we.isPause()?(o.button.setColor("pause-game"),i.hide((function(){return we.play()}))):(o.button.setColor("play-game"),we.pause(),i.show())}});this.pauseButton=o;var a=JSON.parse(localStorage.getItem("ctb_UIOptions"));this.setPauseButtonPosition("left"===a.missionBox?"right":"left");var h=new WG.Sprite("option/background.png",{parent:"OPTION"});new WG.BitmapText("volume",{x:-h.width/2+30,y:-180,fontFamily:"borsok@x4",parent:"OPTION",scale:.12,tint:6842472}).anchor.x=0;var c=new WG.Sprite("option/volume-background.png",{x:-h.width/2+30,y:-100,parent:"OPTION"});c.x+=c.width/2;var l=new X({color:"music-enable",parent:"OPTION",name:"OPTION-music",x:c.x,y:c.y,scale:.5,event:function event(){"music-enable"===l.button.getColor()?(l.button.setColor("music-disable"),WG.Sound.bgm.setMute(!0)):(l.button.setColor("music-enable"),WG.Sound.bgm.setMute(!1))}}),m=new WG.Sprite("option/volume-background.png",{x:h.width/2-30,y:-100,parent:"OPTION"});m.x-=m.width/2;var g=new X({color:"sound-enable",parent:"OPTION",name:"OPTION-SOUND",x:m.x,y:m.y,scale:.5,event:function event(){"sound-enable"===g.button.getColor()?(g.button.setColor("sound-disable"),WG.Sound.sfx.setMute(!0)):(g.button.setColor("sound-enable"),WG.Sound.sfx.setMute(!1))}}),_=new WG.BitmapText("UI",{x:-h.width/2+30,y:-10,fontFamily:"borsok@x4",parent:"OPTION",scale:.12,tint:6842472});_.anchor.x=0;var x=new WG.Sprite("option/ui-background.png",{x:-h.width/2+30,y:0,parent:"OPTION"});x.x+=x.width/2,x.y=h.height/2-30,x.anchor.y=1;var S=x.y-x.height;["missions","gem","combo","distance"].map((function(i,o){new ne(i,_.x,S+40+60*o,function makeEvent(i){return"missions"===i&&(i="missionBox"),{left:function left(){ae.set(i,"left",!0)},center:function center(){ae.set(i,"center",!0)},right:function right(){ae.set(i,"right",!0)}}}(i),a[i])}))}},{key:"show",value:function show(){new WG.Action(this.container,{to:WG.Screen.gameSize.height/2,value:"y",duration:500,easing:WG.Easing.easeOutBack}),WG.Screen.panel.show("OPTION-BUTTON",{tint:0,alpha:.7,zOrder:1})}},{key:"hide",value:function hide(i){new WG.Action(this.container,{to:WG.Screen.gameSize.height/2+WG.Screen.gameSize.height,value:"y",duration:500,easing:WG.Easing.easeOutBack,onComplete:i}),WG.Screen.panel.hide()}},{key:"setPauseButtonPosition",value:function setPauseButtonPosition(i){if(void 0!==this.pauseButton){var o="left"===i?70:WG.Screen.gameSize.width-70;new WG.Action(this.pauseButton,{to:o,value:"x",duration:500,easing:WG.Easing.easeOutExpo})}}}]),Option}();function UIManager_slicedToArray(i,o){return function UIManager_arrayWithHoles(i){if(Array.isArray(i))return i}(i)||function UIManager_iterableToArrayLimit(i,o){var a=[],h=!0,c=!1,l=void 0;try{for(var m,g=i[Symbol.iterator]();!(h=(m=g.next()).done)&&(a.push(m.value),!o||a.length!==o);h=!0);}catch(i){c=!0,l=i}finally{try{h||null==g.return||g.return()}finally{if(c)throw l}}return a}(i,o)||function UIManager_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function UIManager_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var ae=function(){function UIManager(){!function UIManager_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,UIManager)}return function UIManager_createClass(i,o,a){return o&&UIManager_defineProperties(i.prototype,o),a&&UIManager_defineProperties(i,a),i}(UIManager,null,[{key:"init",value:function init(){this.options={distance:"right",combo:"left",gem:"left",missionBox:"left"},this.options=JSON.parse(localStorage.getItem("ctb_UIOptions")),this.width=150,this.margin={width:.1*WG.Screen.gameSize.width,height:80},this.marginBetween=20,this.x=.1*WG.Screen.gameSize.width,this.distance=new R,this.combo=new S,this.gem=new k,this.result=new ee,"stage"===we.mode&&(this.missionBox=new re),this.arrangeAnimations=[],this.arrange()}},{key:"update",value:function update(i){this.distance.update(i)}},{key:"destroy",value:function destroy(){this.distance=null,this.combo=null,this.gem=null,this.result=null,this.missionBox=null}},{key:"set",value:function set(i,o){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object.keys(this.options).includes(i)?(this.options[i]=o,localStorage.setItem("ctb_UIOptions",JSON.stringify(this.options)),this.arrange(a)):console.warn("변경할 수 없는 UI 입니다 Key를 확인해주세요",i)}},{key:"arrange",value:function arrange(){var i=this,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.arrangeAnimations.map((function(i){return i.stop()})),this.arrangeAnimations=[];var a={left:1,center:1,right:1};Object.entries(this.options).map((function(h){var c=UIManager_slicedToArray(h,2),l=c[0],m=c[1],g=i[l];if(g){var _=i.margin.width,x=1;switch(m){case"center":_=WG.Screen.gameSize.width/2,x=0;break;case"right":_=WG.Screen.gameSize.width-i.margin.width}if(o?(i.arrangeAnimations.push(new WG.Action(g.container,{to:_,value:"x",duration:500,easing:WG.Easing.easeOutExpo})),i.arrangeAnimations.push(new WG.Action(g.container,{to:x,value:"alpha",duration:500,easing:WG.Easing.easeOutExpo}))):(g.setX(_),g.container.alpha=x),"missionBox"!==l){var S=WG.Screen.gameSize.height-i.margin.height*a[m];o?i.arrangeAnimations.push(new WG.Action(g.container,{to:S,value:"y",duration:500,easing:WG.Easing.easeOutExpo})):g.setY(S),a[m]+=1}else oe.setPauseButtonPosition("right"===m?"left":"right")}}))}},{key:"missionUpdate",value:function missionUpdate(i,o){this.missionBox&&this.missionBox.update(i,o)}},{key:"Hide",value:function Hide(){var i=we.UIContainer;new WG.Action(i,{to:0,value:"alpha",duration:500})}}]),UIManager}();function MissionManager_slicedToArray(i,o){return function MissionManager_arrayWithHoles(i){if(Array.isArray(i))return i}(i)||function MissionManager_iterableToArrayLimit(i,o){var a=[],h=!0,c=!1,l=void 0;try{for(var m,g=i[Symbol.iterator]();!(h=(m=g.next()).done)&&(a.push(m.value),!o||a.length!==o);h=!0);}catch(i){c=!0,l=i}finally{try{h||null==g.return||g.return()}finally{if(c)throw l}}return a}(i,o)||function MissionManager_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function MissionManager_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var se=function(){function MissionManager(){!function MissionManager_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,MissionManager)}return function MissionManager_createClass(i,o,a){return o&&MissionManager_defineProperties(i.prototype,o),a&&MissionManager_defineProperties(i,a),i}(MissionManager,null,[{key:"set",value:function set(i){this.clearCondition=WG.resource["data/stage.json"][i],this.clearConditionArray=Object.entries(this.clearCondition)}},{key:"init",value:function init(){this._isClear=!1,this.clear={hit:0,combo:0,distance:0,life:0,star:0,jump:0,ruby:0}}},{key:"clearCheck",value:function clearCheck(){for(var i=0,o=0;o<this.clearConditionArray.length;o++){var a=MissionManager_slicedToArray(this.clearConditionArray[o],2),h=a[0],c=a[1];switch(h){case"jump":this.clear.jump>c?we.gameOver("mission-fail",we.hero.moveDistance,we.coin):i+=1;break;case"life-limit":i+=1;break;default:this.clear[h]>=c&&(i+=1)}i===this.clearConditionArray.length&&!1===this._isClear&&(this._isClear=!0,we.stageClearProduction(),Z.stageClear(we.currentStage))}}},{key:"update",value:function update(i,o){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];console.log(i,o,a,this.clearCondition[i]),"infinity"!==we.mode&&void 0!==this.clearCondition[i]&&("distance"===i&&(o/=1e3),a?this.clear[i]+=o:this.clear[i]=o,ae.missionUpdate(i,this.clear[i]),this.clearCheck())}}]),MissionManager}();function Particle_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var ue=function(){function Particle(){!function Particle_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Particle);var i=WG.resource["effect/block_break.json"],o=new WG.Particle({image:"game/block.png",options:i,parent:"GAME",x:100,y:100,playOnce:!1});this.particle=o,o.stop()}return function Particle_createClass(i,o,a){return o&&Particle_defineProperties(i.prototype,o),a&&Particle_defineProperties(i,a),i}(Particle,[{key:"play",value:function play(i,o,a){this.particle.container.x=i,this.particle.container.y=o,this.particle.setting(a)}},{key:"setOnComplete",value:function setOnComplete(i){this.particle.setOnComplete(i)}}]),Particle}();function ParticleManager_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var he=function(){function ParticleManager(){!function ParticleManager_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,ParticleManager)}return function ParticleManager_createClass(i,o,a){return o&&ParticleManager_defineProperties(i.prototype,o),a&&ParticleManager_defineProperties(i,a),i}(ParticleManager,null,[{key:"init",value:function init(){this.useParticles={},this.unuseParticles={};for(var i=0;i<20;i++)this.makeParticle()}},{key:"makeParticle",value:function makeParticle(){var i=new ue,o=l.getUniqueId();i.id=o,this.unuseParticles[o]=i}},{key:"borrowParticle",value:function borrowParticle(){this.getUnuseParticles().length<=0&&this.makeParticle();var i=this.getUnuseParticles()[0];return delete this.unuseParticles[i.id],this.useParticles[i.id]=i,i}},{key:"returnParticle",value:function returnParticle(i){delete this.useParticles[i.id],this.unuseParticles[i.id]=i}},{key:"play",value:function play(i,o,a){var h=this,c=this.borrowParticle();c.play(i,o,a),c.setOnComplete((function(){return h.returnParticle(c)}))}},{key:"getUnuseParticles",value:function getUnuseParticles(){return Object.values(this.unuseParticles)}},{key:"getUseParticles",value:function getUseParticles(){return Object.values(this.useParticles)}}]),ParticleManager}();function Block_slicedToArray(i,o){return function Block_arrayWithHoles(i){if(Array.isArray(i))return i}(i)||function Block_iterableToArrayLimit(i,o){var a=[],h=!0,c=!1,l=void 0;try{for(var m,g=i[Symbol.iterator]();!(h=(m=g.next()).done)&&(a.push(m.value),!o||a.length!==o);h=!0);}catch(i){c=!0,l=i}finally{try{h||null==g.return||g.return()}finally{if(c)throw l}}return a}(i,o)||function Block_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Block_defineProperty(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}function Block_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var ce=function(){function Block(){!function Block_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Block),this.size=we.blockSize,this.index=null,this.isStar=!1,this.lifeTextScale=.2,this.live=!1,this.container=new WG.Container({x:-this.size,y:-this.size,parent:"GAME"});var i=.99*this.size;this.height=i/(WG.Screen.heightRatio>1?WG.Screen.widthRatio/WG.Screen.heightRatio:1),this.sprite=new WG.Sprite("game/block.png",{scaleMode:WG.Types.ScaleMode.NEAREST}),this.sprite.tint=16711711,this.sprite.width=i,this.sprite.height=this.height,this.container.addChild(this.sprite),this.star=new WG.Sprite("game/star.png",{y:-20,alpha:0}),this.star.width=.25*i,this.star.height=.25*i,this.container.addChild(this.star),this.lifeText=new WG.BitmapText("",{fontFamily:"borsok@x4",x:-2,y:7}),this.lifeText.scale=this.lifeTextScale,this.container.addChild(this.lifeText)}return function Block_createClass(i,o,a){return o&&Block_defineProperties(i.prototype,o),a&&Block_defineProperties(i,a),i}(Block,[{key:"setting",value:function setting(i,o,a){var h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:50,l=arguments.length>5?arguments[5]:void 0;this.index=o,this.isStar=l,this.blockLine=i,this.live=!0;var m=c-h,g=Math.floor(Math.random()*m)+1;this.life=h+g,this.container.x=o*this.size,this.container.y=this.size*a+this.size/2,l?(this.star.alpha=1,this.lifeText.y=20):this.lifeText.y=7,this.refreshLife()}},{key:"out",value:function out(){this.index=null,this.container.zOrder=0,this.collisionEffectTimer&&(this.collisionEffectTimer.stop(),this.collisionEffectTimer=null),this.container.x=this.container.y=-this.size;var i=.99*this.size;this.sprite.width=i,this.sprite.height=this.height,this.lifeText.scale=this.lifeTextScale,this.star.alpha=0}},{key:"update",value:function update(i,o){null!==this.index&&this.container.x+we.blockSize/2<-we.gameContainer.x&&(we.addLine(this.index+we.maxLine),this.out(),pe.returnBlock(this))}},{key:"destroy",value:function destroy(){this.container.destroy()}},{key:"destroyByLife",value:function destroyByLife(){this.container.x=this.container.y=-this.size,this.live=!1,we.moveForward()}},{key:"testTint",value:function testTint(i){var o=.99*this.size;this.sprite.clear(),this.sprite.beginFill(i,1),this.sprite.drawRoundedRect(-o/2,-o/2,o,o,8),this.sprite.endFill()}},{key:"getCollisionBox",value:function getCollisionBox(){return{width:we.blockSize,height:we.blockSize,left:this.container.x-we.blockSize/2,right:this.container.x+we.blockSize/2,top:this.container.y-we.blockSize/2,bottom:this.container.y+we.blockSize/2}}},{key:"reduceLife",value:function reduceLife(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.life>0&&(this.hitEffect(),j.hit(),"boolean"==typeof i?this.life=0:(se.update("hit",1),this.life-=i,pe.toFront(this),this.collisionEffect()),this.life<=0?(this.isStar&&we.hero.forceModeOn(),_.earthQuake(10,100,10),this.breakEffect(),this.collisionEffectTimer&&this.collisionEffectTimer.stop(),this.destroyByLife()):this.refreshLife())}},{key:"refreshLife",value:function refreshLife(){this.colorByLife(),this.lifeText.text=this.life+""}},{key:"setIndex",value:function setIndex(i){this.index=i}},{key:"breakEffect",value:function breakEffect(){he.play(this.container.x,this.container.y,WG.resource["effect/block_break.json"])}},{key:"hitEffect",value:function hitEffect(){var i=function Block_objectSpread(i){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{},h=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(h=h.concat(Object.getOwnPropertySymbols(a).filter((function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})))),h.forEach((function(o){Block_defineProperty(i,o,a[o])}))}return i}({},WG.resource["effect/block_hit.json"]);i.color.start=i.color.end="#"+this.sprite.tint.toString(16),i.lifetime.min=i.lifetime.max=.3,i.scale.end=0,he.play(this.container.x,this.container.y,i)}},{key:"collisionEffect",value:function collisionEffect(){var i=this;if(!this.collisionEffectTimer){var o={x:this.sprite.scale.x,y:this.sprite.scale.y};this.collisionEffectTimer=new WG.Timer({duration:300,easing:WG.Easing.easeOutElastic,onStart:function onStart(){new WG.Timer({duration:150,onComplete:function onComplete(){i.collisionEffectTimer&&i.collisionEffectTimer.stop(),new WG.Action(i.lifeText,{value:"scale",to:i.lifeTextScale,duration:100}),new WG.Action(i.sprite,{value:"scale.y",to:o.y,duration:100}),i.collisionEffectTimer=new WG.Action(i.sprite,{value:"scale.x",to:o.x,duration:100,onComplete:function onComplete(){i.collisionEffectTimer=null}})}})},onProgress:function onProgress(a){i.sprite.scale.x=o.x+.16*a,i.sprite.scale.y=o.y+.16*a,i.lifeText.scale=i.lifeTextScale+.2*a},onComplete:function onComplete(){}})}}},{key:"collisionEffectPart",value:function collisionEffectPart(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"colorByLife",value:function colorByLife(){if(!(this.life<=0)){var i=Math.floor(this.life/50/2*10);i>5&&(i=5);var o=this.life%10/10;if(5===i){var a=Block_slicedToArray(de[i],3),h=a[0],c=a[1],m=a[2];this.sprite.tint=parseInt(l.RGBToHex(h,c,m),16)}else{var g={r:de[i][0],g:de[i][1],b:de[i][2]},_={r:de[i+1][0],g:de[i+1][1],b:de[i+1][2]},x={r:parseInt(l.lerp(g.r,_.r,o)),g:parseInt(l.lerp(g.g,_.g,o)),b:parseInt(l.lerp(g.b,_.b,o))},S=x.r,R=x.g,k=x.b;this.sprite.tint=parseInt(l.RGBToHex(S,R,k),16)}}}}]),Block}(),de=[[58,134,255],[2,195,154],[255,190,11],[251,86,7],[255,0,110],[221,28,26]];function BlockManager_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var pe=function(){function BlockManager(){!function BlockManager_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,BlockManager)}return function BlockManager_createClass(i,o,a){return o&&BlockManager_defineProperties(i.prototype,o),a&&BlockManager_defineProperties(i,a),i}(BlockManager,null,[{key:"init",value:function init(){this.useBlocks={},this.unuseBlocks={},this.frontBlock=null;for(var i=0;i<20;i++)this.makeBlock()}},{key:"makeBlock",value:function makeBlock(){var i=new ce,o=l.getUniqueId();i.id=o,this.unuseBlocks[o]=i}},{key:"borrowBlock",value:function borrowBlock(){this.getUnuseBlocks().length<=0&&this.makeBlock();var i=this.getUnuseBlocks()[0];return delete this.unuseBlocks[i.id],this.useBlocks[i.id]=i,i}},{key:"returnBlock",value:function returnBlock(i){delete this.useBlocks[i.id],this.unuseBlocks[i.id]=i}},{key:"getUnuseBlocks",value:function getUnuseBlocks(){return Object.values(this.unuseBlocks)}},{key:"getUseBlocks",value:function getUseBlocks(){return Object.values(this.useBlocks)}},{key:"update",value:function update(i,o){if(we.blockUpdate)for(var a=this.getUseBlocks(),h=0;h<a.length;h++)a[h].update(i,o)}},{key:"toFront",value:function toFront(i){null===this.frontBlock?(i.container.zOrder=-1,this.frontBlock=i):this.frontBlock&&this.frontBlock!==i&&(this.frontBlock.container.zOrder=0,i.container.zOrder=-1,this.frontBlock=i)}},{key:"getInScreenBlocks",value:function getInScreenBlocks(){for(var i=this.getUseBlocks(),o=-we.gameContainer.x,a={width:WG.Screen.gameSize.width,height:WG.Screen.gameSize.height,left:o,right:o+WG.Screen.gameSize.width,top:0,bottom:WG.Screen.gameSize.height},h=0;h<i.length;h++){var c=i[h];l.AABB(c.getCollisionBox(),a)&&(c.container.tint=16711680)}}},{key:"breakScreen",value:function breakScreen(){for(var i=this.getUseBlocks(),o=-we.gameContainer.x,a={width:WG.Screen.gameSize.width,height:WG.Screen.gameSize.height,left:o,right:o+WG.Screen.gameSize.width,top:0,bottom:WG.Screen.gameSize.height},h=0,c=function _loop(o){var c=i[o];l.AABB(c.getCollisionBox(),a)&&new WG.Timer({duration:20*h++,onComplete:function onComplete(){c.reduceLife(!0)}})},m=0;m<i.length;m++)c(m)}}]),BlockManager}();function Empty_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var fe=function(){function Empty(){!function Empty_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Empty),this.index}return function Empty_createClass(i,o,a){return o&&Empty_defineProperties(i.prototype,o),a&&Empty_defineProperties(i,a),i}(Empty,[{key:"setting",value:function setting(i){this.index=i,this.x=i*we.blockSize}},{key:"update",value:function update(){null!==this.index&&this.x+we.blockSize/2<-we.gameContainer.x&&(we.addLine(this.index+we.maxLine),this.out())}},{key:"out",value:function out(){this.index=null,this.x=0}}]),Empty}();function EmptyManager_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var me=function(){function EmptyManager(){!function EmptyManager_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,EmptyManager)}return function EmptyManager_createClass(i,o,a){return o&&EmptyManager_defineProperties(i.prototype,o),a&&EmptyManager_defineProperties(i,a),i}(EmptyManager,null,[{key:"init",value:function init(){this.useEmpty={},this.unuseEmpty={};for(var i=0;i<20;i++)this.makeEmpty()}},{key:"makeEmpty",value:function makeEmpty(){var i=new fe,o=l.getUniqueId();i.id=o,this.unuseEmpty[o]=i}},{key:"borrowEmpty",value:function borrowEmpty(){this.getUnuseEmpty().length<=0&&this.makeEmpty();var i=this.getUnuseEmpty()[0];return delete this.unuseEmpty[i.id],this.useEmpty[i.id]=i,i}},{key:"returnBlock",value:function returnBlock(i){delete this.useEmpty[i.id],this.unuseEmpty[i.id]=i}},{key:"getUnuseEmpty",value:function getUnuseEmpty(){return Object.values(this.unuseEmpty)}},{key:"getUseEmpty",value:function getUseEmpty(){return Object.values(this.useEmpty)}},{key:"update",value:function update(i,o){if(we.blockUpdate)for(var a=this.getUseEmpty(),h=0;h<a.length;h++)a[h].update(i,o)}}]),EmptyManager}();function Coin_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var ye=function(){function Coin(){!function Coin_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Coin),this.container=new WG.Container({x:-we.heroSize,y:-we.heroSize,parent:"GAME"}),this.index=null,this.sprite=new WG.Sprite("game/coin.json",{scaleMode:WG.Types.ScaleMode.NEAREST,zOrder:0,scale:.8,alpha:.8}),this.sprite.width=we.heroSize,this.sprite.height=we.heroSize,this.tracking=[],this.container.addChild(this.sprite)}return function Coin_createClass(i,o,a){return o&&Coin_defineProperties(i.prototype,o),a&&Coin_defineProperties(i,a),i}(Coin,[{key:"setting",value:function setting(i,o){this.index=i,this.container.x=i*we.blockSize,this.container.y=we.blockSize*o+we.blockSize/2}},{key:"out",value:function out(){this.index=null,this.container.x=this.container.y=-we.blockSize}},{key:"update",value:function update(){null!==this.index&&this.container.x+we.blockSize/2<-we.gameContainer.x&&(we.addLine(this.index+we.maxLine),this.out(),_e.returnCoin(this))}},{key:"destroy",value:function destroy(){this.sprite.destroy()}},{key:"getCollisionBox",value:function getCollisionBox(){return{width:we.heroSize,height:we.heroSize,left:this.container.x-we.heroSize/2,right:this.container.x+we.heroSize/2,top:this.container.y-we.heroSize/2,bottom:this.container.y+we.heroSize/2}}}]),Coin}();function CoinManager_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var _e=function(){function CoinManager(){!function CoinManager_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,CoinManager)}return function CoinManager_createClass(i,o,a){return o&&CoinManager_defineProperties(i.prototype,o),a&&CoinManager_defineProperties(i,a),i}(CoinManager,null,[{key:"init",value:function init(){this.useCoins={},this.unuseCoins={};for(var i=0;i<20;i++)this.makeCoin()}},{key:"makeCoin",value:function makeCoin(){var i=new ye,o=l.getUniqueId();i.id=o,this.unuseCoins[o]=i}},{key:"borrowCoin",value:function borrowCoin(){this.getUnuseCoins().length<=0&&this.makeCoin();var i=this.getUnuseCoins()[0];return delete this.unuseCoins[i.id],this.useCoins[i.id]=i,i}},{key:"returnCoin",value:function returnCoin(i){delete this.useCoins[i.id],this.unuseCoins[i.id]=i}},{key:"getUnuseCoins",value:function getUnuseCoins(){return Object.values(this.unuseCoins)}},{key:"getUseCoins",value:function getUseCoins(){return Object.values(this.useCoins)}},{key:"update",value:function update(i,o){if(we.blockUpdate)for(var a=this.getUseCoins(),h=0;h<a.length;h++)a[h].update(i,o)}}]),CoinManager}();function Line_defineProperty(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}function Line_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var ve=[{min:1,max:5},{min:1,max:20},{min:5,max:40},{min:10,max:50},{min:35,max:50}],xe={0:!1,1:!1,2:!1,3:!1,4:!1},Se=function(){function Line(i){!function Line_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Line);var o=WG.resource["data/character.json"][we.character];we.fullLimit>0&&we.reduceFullLimit();var a=0===we.fullLimit&&!we.mustEmpty&&100*Math.random()>60;if(this.blocks=[],this.line=function Line_objectSpread(i){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{},h=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(h=h.concat(Object.getOwnPropertySymbols(a).filter((function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})))),h.forEach((function(o){Line_defineProperty(i,o,a[o])}))}return i}({},xe),a)we.resetFullLimit(),we.resetEmptyLimit(),we.setMustEmpty(!0);else{var h=!!we.mustEmpty||100*Math.random()>50;if(we.emptyLimit<=0&&(h=!1,we.resetEmptyLimit()),h)return we.reduceEmptyLimit(),we.setMustEmpty(!1),void me.borrowEmpty().setting(i);we.setMustEmpty(!0)}for(var c=a?5:Math.floor(2*Math.random())+1,m=0,_=c;_<5;_++)Math.random()>.85&&(m+=1);for(var x=0,S=c+m;S<5;S++)Math.random()<(o.luck+we.getReinforceValue("luck",we.reinforce))/100&&(x+=1);for(var R=l.shuffle([0,1,2,3,4]),k=we.hero.life>30?Math.floor((we.hero.life-30)*Math.random()):0,j=0;j<c;j++){var X=R.shift(),Y=1+k,q=50+k;a&&(Y=ve[j].min+k,q=ve[j].max+k),pe.borrowBlock().setting(this,i,X,Y,q,we.isStarBlock())}for(var Z=0;Z<m;Z++){var $=R.shift();g.borrowLife().setting(i,$)}for(var ee=0;ee<x;ee++){var te=R.shift();_e.borrowCoin().setting(i,te)}}return function Line_createClass(i,o,a){return o&&Line_defineProperties(i.prototype,o),a&&Line_defineProperties(i,a),i}(Line,[{key:"update",value:function update(i,o){for(var a=0;a<this.blocks.length;a++)this.blocks[a].block.update(i,o)}},{key:"checkOverlapPosition",value:function checkOverlapPosition(i){var o=!1;return this.line[i]&&(o=!0),o}},{key:"getFirst",value:function getFirst(){return this.blocks[0]}}]),Line}();function GameInformation_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}window.GI;var be={life:[1,1,1,2,2],luck:[2,2,2,5,5],star:[.5,.5,.5,1,1],rate:[90,70,50,40,25],price:[50,100,150,300,500],green:1,orange:1.5,red:2,black:2.5},we=function(){function GI(){!function GameInformation_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,GI)}return function GameInformation_createClass(i,o,a){return o&&GameInformation_defineProperties(i.prototype,o),a&&GameInformation_defineProperties(i,a),i}(GI,null,[{key:"setMode",value:function setMode(i){this.mode=i}},{key:"setCurrentStage",value:function setCurrentStage(i){this.currentStage=i}},{key:"gameInit",value:function gameInit(){this.MAX_STAR_BLOCK_COUNT=30,this.DEFAULT_SPEED=500,this.BOOST_SPEED=1200,this.state="alive",this.resurrectionable=!0,this.speed=this.DEFAULT_SPEED,this.kmSpeed=0,this.blockSize=WG.Screen.gameSize.height/5,this.heroSize=64,this.starBlockCount=this.MAX_STAR_BLOCK_COUNT,this.blockUpdate=!0,this.maxLine=Math.floor(WG.Screen.gameSize.width/this.blockSize*1.5),this.lineIndex=this.maxLine,this.afterResurrectionCoin=0,this.resetFullLimit(),this.resetEmptyLimit(),this.mustEmpty=!1,this.camera=0,this.updates={},this.coin=0,this.blurFilter=new WG.Filters.KawaseBlurFilter,this.reinforce=Z.data.reinforce[this.character]||0,this._pause=!1,GI.resetFullLimit(),GI.resetEmptyLimit()}},{key:"isPause",value:function isPause(){return this._pause}},{key:"pause",value:function pause(){this._pauseTime=Date.now(),this._pause=!0,this.hero.forceModeTimer&&this.hero.forceModeTimer.pause(),this.hero.forceModeColorTimer&&this.hero.forceModeColorTimer.pause(),_.boostTimer&&_.boostTimer.pause()}},{key:"play",value:function play(){this._pause=!1,this.hero.forceModeTimer&&this.hero.forceModeTimer.resume(),this.hero.forceModeColorTimer&&this.hero.forceModeColorTimer.resume(),_.boostTimer&&_.boostTimer.resume()}},{key:"addCoin",value:function addCoin(){this.resurrectionable?this.coin+=1:this.afterResurrectionCoin+=1,ae.gem.set(this.coin+this.afterResurrectionCoin)}},{key:"resetFullLimit",value:function resetFullLimit(){this.fullLimit=16}},{key:"reduceFullLimit",value:function reduceFullLimit(){this.fullLimit-=1}},{key:"resetEmptyLimit",value:function resetEmptyLimit(){this.emptyLimit=2}},{key:"reduceEmptyLimit",value:function reduceEmptyLimit(){this.emptyLimit-=1}},{key:"setMustEmpty",value:function setMustEmpty(i){this.mustEmpty=i}},{key:"setBlockUpdate",value:function setBlockUpdate(i){this.blockUpdate=i}},{key:"setGameContainer",value:function setGameContainer(i){this.gameContainer=i}},{key:"setUIContainer",value:function setUIContainer(i){this.UIContainer=i}},{key:"setHero",value:function setHero(i){this.hero=i}},{key:"addLine",value:function addLine(i){i<this.lineIndex||(new Se(this.lineIndex),this.lineIndex+=1)}},{key:"isStarBlock",value:function isStarBlock(){this.starBlockCount--;var i=0===this.starBlockCount;return i&&(this.starBlockCount=this.MAX_STAR_BLOCK_COUNT),i}},{key:"moveBack",value:function moveBack(){var i=this;if(this.cameraFowardTimer&&(this.cameraFowardTimer.stop(),this.cameraFowardTimer=null),!this.cameraBackTimer){var o=this.camera,a=200-o;this.cameraBackTimer=new WG.Timer({duration:2e3,easing:WG.Easing.easeOutCubic,onProgress:function onProgress(h){"alive"===i.state&&(i.camera=o+a*h)},onComplete:function onComplete(){i.cameraBackTimer=null}})}}},{key:"moveForward",value:function moveForward(){var i=this;if(this.cameraBackTimer&&(this.cameraBackTimer.stop(),this.cameraBackTimer=null),!this.cameraFowardTimer){var o=this.camera,a=0-this.camera;this.cameraFowardTimer=new WG.Timer({duration:2e3,easing:WG.Easing.easeOutCubic,onProgress:function onProgress(h){"alive"===i.state&&(i.camera=o+a*h)},onComplete:function onComplete(){i.cameraFowardTimer=null}})}}},{key:"updateTimeChecker",value:function updateTimeChecker(i,o){o?this.updates[i]=Date.now():this.updates[i]&&console.log("[".concat(i,"] : ").concat((Date.now()-this.updates[i]).toFixed(2)))}},{key:"gameOver",value:function gameOver(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:GI.hero.moveDistance,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:GI.coin,h=this.resurrectionable?a:this.afterResurrectionCoin;Z.data.adRemove.double&&(h*=2),Z.data.coin+=h,Z.save(!1),"mission-success"===i?j.finish("clear"):j.finish("fail"),this.state="dead",this.gameContainer.filters=[this.blurFilter],this.UIContainer.filters=[this.blurFilter],ae.result.show(i,o,a*(Z.data.adRemove.double?2:1)+this.afterResurrectionCoin*(Z.data.adRemove.double?2:1))}},{key:"stageClearProduction",value:function stageClearProduction(){var i=this;this.state="dead",pe.breakScreen(),ae.Hide(),new WG.Action(this.hero.container,{to:this.hero.container.x+1.5*WG.Screen.gameSize.width,value:"x",duration:1e3}),new WG.Timer({duration:600,onComplete:function onComplete(){i.gameOver("mission-success")}})}},{key:"resurrection",value:function resurrection(){var i=this;this.resurrectionable&&(this.resurrectionable=!1,this.hero._resurrectionSetting(),this.hero._resurrectionMove(),new WG.Timer({duration:1e3,onProgress:function onProgress(o){var a=4*o;i.blurFilter.blur=4-a},onComplete:function onComplete(){i.state="alive",i.gameContainer.filters=[],i.UIContainer.filters=[],i.hero._resurrection(),i.blurFilter.blur=4}}))}},{key:"setCharacter",value:function setCharacter(i){this.character=i,this.reinforce=Z.data.reinforce[this.character]||0}},{key:"getReinforceValue",value:function getReinforceValue(i,o,a){if("rate"===i||"price"===i){var h=be[i][o];return"price"===i&&(h*=be[a]),h}for(var c=0,l=0;l<o;l++)c+=be[i][l];return c}},{key:"getStaticReinforceValue",value:function getStaticReinforceValue(i,o){return be[i][o-1]}}]),GI}();function DynamicSpriteManager_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}console.log(we);var Te=function(){function DSM(){!function DynamicSpriteManager_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,DSM)}return function DynamicSpriteManager_createClass(i,o,a){return o&&DynamicSpriteManager_defineProperties(i.prototype,o),a&&DynamicSpriteManager_defineProperties(i,a),i}(DSM,null,[{key:"init",value:function init(){this.useSprites={},this.unuseSprites={};for(var i=0;i<20;i++)this.makeSprite()}},{key:"makeSprite",value:function makeSprite(){var i=this,o=new WG.Sprite("effect/jump_effect.json",{scaleMode:WG.Types.ScaleMode.NEAREST,loop:!1,deleteOnComplete:!1,zOrder:0,alpha:0,parent:"GAME",onComplete:function onComplete(){o.alpha=0,i.returnSprite(o)}}),a=l.getUniqueId();o._DSMId=a,this.unuseSprites[a]=o}},{key:"borrowSprite",value:function borrowSprite(){this.getUnuseSprites().length<=0&&this.makeSprite();var i=this.getUnuseSprites()[0];return delete this.unuseSprites[i._DSMId],this.useSprites[i._DSMId]=i,i}},{key:"returnSprite",value:function returnSprite(i){delete this.useSprites[i._DSMId],this.unuseSprites[i._DSMId]=i}},{key:"getUnuseSprites",value:function getUnuseSprites(){return Object.values(this.unuseSprites)}},{key:"getUseSprites",value:function getUseSprites(){return Object.values(this.useSprites)}},{key:"play",value:function play(i,o){var a=this.borrowSprite(),h=Object.keys(o);a.texture=i;for(var c=0;c<h.length;c++){var l=h[c];a[l]=o[l]}0===a.alpha&&(a.alpha=1),a.replay()}}]),DSM}();function Hero_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var Ce=function(){function Hero(){var i=this;!function Hero_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Hero),this.size=we.heroSize,this.forceMode=!1,this.heroStartPoint=WG.Screen.gameSize.width/10*3.7,this.moveDistance=0,this.comboDistance=1e3,this.comboTerm=we.blockSize,this.info=WG.resource["data/character.json"][we.character],this.magnetRadius=1.3*we.blockSize,this.damage=this.info.damage,this.life=this.info.life+we.getReinforceValue("life",we.reinforce),this.velocity=0,this.mass=.5,this.power=1.5,this.combo=0,this.upgrade=Z.data.reinforce[we.character],this.starDegree=0,this.container=new WG.Container({x:-1e3,y:WG.Screen.gameSize.height/2,name:"HERO",parent:"GAME"}),5===this.upgrade&&new WG.Sprite("effect/magnet.json",{zOrder:-1,parent:"HERO"}),this.sprite=new WG.Sprite("character/".concat(we.character,"_idle.json"),{scaleMode:WG.Types.ScaleMode.NEAREST,zOrder:-1,scale:1.2+.16*we.reinforce,parent:"HERO"}),this.effects=[];for(var o=0;o<5;o++)this.effects.push(new WG.Sprite("character/".concat(we.character,"_idle.json"),{x:0,y:-300,scaleMode:WG.Types.ScaleMode.NEAREST,zOrder:1,parent:"GAME"}));this.lifeText=new WG.BitmapText(""+this.life,{fontFamily:"borsok@x4",x:-3,y:-this.sprite.height/2,parent:"HERO"}),this.lifeText.tint=12582656,this.lifeText.scale=.2,this.lifeText.y-=this.lifeText.height/3,this.lifeTextHeight=this.lifeText.height,window.onkeydown=function(o){var a=o.code;"Space"===a?i.jump():"KeyS"===a?we.speed=0:"KeyA"===a?we.speed-=200:"KeyD"===a?we.speed+=200:"KeyF"===a?i.forceModeOn():"KeyQ"===a&&pe.breakScreen()},this.lastUpdateX=0,this.lastCollisionTime=Date.now(),this.lastComboTime=1e3,this.shashashakTime=Date.now(),this.shashashakSprites=[];for(var a=0;a<10;a++){var h=new WG.Sprite("character/".concat(we.character,"_idle.json"),{x:-500,y:-500,scaleMode:WG.Types.ScaleMode.NEAREST,zOrder:1,parent:"GAME",scale:1.2+.16*we.reinforce});this.shashashakSprites.push(h)}this.stars=[];for(var c=0;c<5;c++)this.stars[c]=new WG.Sprite("ui/star.png",{parent:"HERO",visible:!1})}return function Hero_createClass(i,o,a){return o&&Hero_defineProperties(i.prototype,o),a&&Hero_defineProperties(i,a),i}(Hero,[{key:"update",value:function update(i,o){var a=this;if("dead"!==we.state){var h=Date.now();if(h-this.shashashakTime>50&&this.forceMode){var c=this.shashashakSprites.shift();c.x=this.container.x,c.y=this.container.y,c.alpha=1,new WG.Action(c,{to:0,duration:200,value:"alpha",onComplete:function onComplete(){a.shashashakSprites.push(c)}}),this.shashashakTime=h}this.velocity+=-9.8/(this.mass/100)*(i/1e3),this.collisionWithBlockLine(o),this.container.y-=this.velocity*(i/1e3),this.container.y>=WG.Screen.gameSize.height-this.size/2?(this.container.y=WG.Screen.gameSize.height-this.size/2,this.velocity=0,this.velocity+=200*this.power,this.resetCombo()):this.container.y<=this.size/2&&(this.container.y=this.size/2,this.velocity=0,this.resetCombo()),this.forceMode||(this.lastComboTime-=i),we.blockUpdate&&(this.container.x+=o,this.moveDistance+=o,this.comboDistance-=o,se.update("distance",o),this.comboDistance<0&&(this.comboDistance=this.comboTerm,this.addCombo())),we.gameContainer.x=-this.container.x+WG.Screen.gameSize.width/10*3.7-we.camera,this.collisionWithLife(),this.collisionWithCoin(),5===this.upgrade&&this.magnet(),this.upgrade&&this.star()}}},{key:"getCollisionBox",value:function getCollisionBox(){return{width:we.heroSize,height:we.heroSize,left:this.container.x-we.heroSize/2,right:this.container.x+we.heroSize/2,top:this.container.y-we.heroSize/2,bottom:this.container.y+we.heroSize/2}}},{key:"getCollisionCircle",value:function getCollisionCircle(){return{x:this.container.x,y:this.container.y,radius:this.magnetRadius}}},{key:"collisionWithBlockLine",value:function collisionWithBlockLine(i){var o=this,a=!1,h=this.getCollisionBox(),c=this.getCollisionBox();c.left+=i,c.right+=i;for(var m=pe.getUseBlocks(),g=0;g<m.length;g++){var _=m[g];if(_.live){var x=_.getCollisionBox();if(!_.blockLine.pass&&x.left<h.right&&(_.blockLine.pass=!0),l.AABB(c,x))if(a=!0,this.resetCombo(),c.right>x.left&&!_.blockLine.pass){we.setBlockUpdate(!1);var S=Date.now();S-this.lastCollisionTime>(this.forceMode?0:100)&&(this.lastCollisionTime=S,we.moveBack(),_.reduceLife(!!this.forceMode||this.damage),this.forceMode||(this.reduceLife(),this.sprite.x-=10,new WG.Timer({duration:80,onComplete:function onComplete(){o.sprite.x=0}})))}else _.blockLine.pass&&(this.forceMode?_.reduceLife(!0):(this.stopCollisionParticle(),h.bottom>x.bottom?(this.container.y=x.bottom+h.height/2+1,this.velocity=.5*-this.velocity):h.bottom<x.bottom&&this.velocity<0&&(this.velocity=0,this.velocity+=200*this.power)))}}a||(we.setBlockUpdate(!0),Date.now()-this.lastCollisionTime>150&&we.moveForward(),this.collisionParticle&&this.stopCollisionParticle())}},{key:"collisionWithLife",value:function collisionWithLife(){for(var i=this.getCollisionBox(),o=g.getUseLifes(),a=0;a<o.length;a++){var h=o[a],c=h.getCollisionBox();l.AABB(i,c)&&(Te.play("effect/life_effect.json",{x:this.container.x,y:this.container.y,scale:3}),this.increaseLife(h.value),se.update("life",this.life,!1),h.out(),g.returnLife(h))}}},{key:"collisionWithCoin",value:function collisionWithCoin(){for(var i=this.getCollisionBox(),o=_e.getUseCoins(),a=0;a<o.length;a++){var h=o[a],c=h.getCollisionBox();l.AABB(i,c)&&(h.tracking.length&&(h.tracking[0].stop(),h.tracking[1].stop(),h.tracking=[]),Te.play("effect/coin_effect.json",{x:this.container.x,y:this.container.y,scale:3}),j.gem(),we.addCoin(),se.update("ruby",1),h.out(),_e.returnCoin(h))}}},{key:"jump",value:function jump(){"alive"!==we.state||we.isPause()||(se.update("jump",1),this.velocity+=this.power*(320+10*this.info.jump),j.jump(),Te.play("effect/jump_effect.json",{x:this.container.x,y:this.container.y+30,scale:1,alpha:1}))}},{key:"increaseLife",value:function increaseLife(i){if(this.life+=i,j.life(),"stage"===we.mode){var o=se.clearCondition["life-limit"];o&&this.life>o&&(this.life=o)}this.refreshLife()}},{key:"reduceLife",value:function reduceLife(){"alive"===we.state&&this.life>0&&(this.life-=1),this.hitEffect(),this.refreshLife(),0===this.life&&we.gameOver("stage"===we.mode?"mission-fail":"game-over",this.moveDistance,we.coin)}},{key:"refreshLife",value:function refreshLife(){this.lifeText.text=""+this.life}},{key:"touchEffect",value:function touchEffect(){new WG.Particle({image:"character/".concat(we.character,"_idle.json"),options:WG.resource["effect/block_test.json"],parent:"GAME",x:this.container.x,y:this.container.y}).container.zOrder=1}},{key:"startCollisionParticle",value:function startCollisionParticle(){this.collisionParticle||(this.collisionParticle=new WG.Particle({image:"character/".concat(we.character,"_idle.json"),options:WG.resource["effect/block_touch.json"],parent:"GAME",x:this.container.x}))}},{key:"stopCollisionParticle",value:function stopCollisionParticle(){this.collisionParticle&&(this.collisionParticle.stop(),this.collisionParticle=null)}},{key:"updateCollisionParticle",value:function updateCollisionParticle(){this.collisionParticle&&this.collisionParticle._emitter.updateSpawnPos(0,this.container.y+1.5*we.heroSize)}},{key:"forceModeOn",value:function forceModeOn(){var i=this;if(!this.forceMode){this.forceMode=!0,se.update("star",1),we.speed=we.BOOST_SPEED;var o=1e3*this.info.star+1e3*we.getReinforceValue("star",we.reinforce);this.forceModeTimer=new WG.Timer({duration:o,onStart:function onStart(){j.booster(),i.turnHeroColor([138,201,38],[255,112,166],250),_.boost(o)},onComplete:function onComplete(){j.backgroundSpeed(1),i.forceModeColorTimer&&(i.forceModeColorTimer.stop(),i.forceModeColorTimer=null),i.forceModeTimer&&(i.forceModeTimer=null),we.speed=we.DEFAULT_SPEED,i.sprite.tint=16777215,i.forceMode=!1}})}}},{key:"turnHeroColor",value:function turnHeroColor(i,o,a){var h=this;this.forceMode&&(this.forceModeColorTimer=new WG.Timer({duration:a,onProgress:function onProgress(a){if(h.forceMode){var c={r:parseInt(l.lerp(i[0],o[0],a)),g:parseInt(l.lerp(i[1],o[1],a)),b:parseInt(l.lerp(i[2],o[2],a))},m=c.r,g=c.g,_=c.b;h.sprite.tint=parseInt(l.RGBToHex(m,g,_),16)}},onComplete:function onComplete(){h.turnHeroColor(o,i,a)}}))}},{key:"resetCombo",value:function resetCombo(){this.combo=0,ae.combo.set(this.combo)}},{key:"addCombo",value:function addCombo(){this.combo+=1,ae.combo.set(this.combo),this.lastComboTime=1e3,this.combo>6&&_.combo(this.combo),this.combo>=10&&(this.combo=0,ae.combo.set(this.combo),se.update("combo",1),pe.breakScreen())}},{key:"hitEffect",value:function hitEffect(){var i=this,o=this.effects.shift();o&&(o.x=this.container.x,o.y=this.container.y,o.scale=1,o.alpha=1,new WG.Timer({duration:200,onProgress:function onProgress(i){o.scale=1+10*i,o.alpha=1-i},onComplete:function onComplete(){i.effects.push(o)}}))}},{key:"magnet",value:function magnet(){for(var i=this.getCollisionCircle(),o=_e.getUseCoins(),a=0;a<o.length;a++){var h=o[a],c=h.getCollisionBox();if(l.AOBB(i,c)){if(h.tracking.length)return;h.tracking[0]=new WG.Action(h.container,{tracking:this.container,value:"x",duration:500}),h.tracking[1]=new WG.Action(h.container,{tracking:this.container,value:"y",duration:500})}}}},{key:"star",value:function star(){this.starDegree+=we.speed/1e3,this.starDegree>360&&(this.starDegree-=360);for(var i=0;i<this.upgrade;i++){var o=(360/this.upgrade*i+this.starDegree)*(Math.PI/180),a=Math.cos(o)*(this.sprite.width/2),h=Math.sin(o)*(this.sprite.width/2);this.stars[i].visible=!0,this.stars[i].x=a,this.stars[i].y=h,this.stars[i].scale=this.sprite.scale}}},{key:"_resurrectionMove",value:function _resurrectionMove(){new WG.Action(this.container,{value:"y",to:WG.Screen.gameSize.height/2,duration:1e3})}},{key:"_resurrectionSetting",value:function _resurrectionSetting(){this.velocity=0,this.life=this.info.life+we.getReinforceValue("life",we.reinforce),this.refreshLife(),this.resetCombo()}},{key:"_resurrection",value:function _resurrection(){this.forceModeOn()}}]),Hero}();function NewLine_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var Pe=function(){function NewLine(){!function NewLine_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,NewLine);var i=localStorage.getItem("ctb_infinity");if(0!==i){var o=i-1e3,a=new WG.Sprite("_1px",{parent:"GAME",x:o,y:WG.Screen.gameSize.height/2,alpha:.5});this.newLine=a,a.width=30,a.height=WG.Screen.gameSize.height}}return function NewLine_createClass(i,o,a){return o&&NewLine_defineProperties(i.prototype,o),a&&NewLine_defineProperties(i,a),i}(NewLine,[{key:"break",value:function _break(){this.newLine.visible=!1;var i=we.hero.container.y;this.topLine=new WG.Sprite("_1px",{parent:"GAME",x:this.newLine.x,y:i,alpha:.5}),this.topLine.anchor.y=1,this.bottomLine=new WG.Sprite("_1px",{parent:"GAME",x:this.newLine.x,y:i,alpha:.5}),this.bottomLine.anchor.y=0,this.topLine.width=this.bottomLine.width=30,this.topLine.height=i,this.bottomLine.height=WG.Screen.gameSize.height-i,new WG.Action(this.topLine,{to:-3600,value:"degree",duration:5e3}),new WG.Action(this.bottomLine,{to:3600,value:"degree",duration:5e3}),new WG.Action(this.topLine,{to:this.topLine.x+1e3,value:"x",duration:2e3}),new WG.Action(this.bottomLine,{to:this.bottomLine.x+1e3,value:"x",duration:2e3}),new WG.Action(this.topLine,{to:-1e3,value:"y",duration:3e3}),new WG.Action(this.bottomLine,{to:WG.Screen.gameSize.height+1e3,value:"y",duration:3e3}),new WG.Action(this.topLine,{to:0,value:"alpha",duration:2e3}),new WG.Action(this.bottomLine,{to:0,value:"alpha",duration:2e3})}}]),NewLine}();function game_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var Oe=function(){function Game(){!function game_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Game)}return function game_createClass(i,o,a){return o&&game_defineProperties(i.prototype,o),a&&game_defineProperties(i,a),i}(Game,[{key:"init",value:function init(){var i=this;we.gameInit(),new WG.Container({name:"BACKGROUND",mode:WG.Types.CoordinateMode.FILL,parent:WG.Stage});var o=new WG.Container({name:"EFFECT",mode:WG.Types.CoordinateMode.FIT}),a=new WG.Container({x:0,y:0,name:"GAME",mode:WG.Types.CoordinateMode.FIT});new WG.Container({name:"TOUCH",mode:WG.Types.CoordinateMode.FILL,parent:WG.Stage});var h=new WG.Sprite("ui/one.png",{x:WG.Screen.gameSize.width/2,y:WG.Screen.gameSize.height/2,parent:"TOUCH",alpha:1e-5});h.width=WG.Screen.gameSize.width,h.height=WG.Screen.gameSize.height;var c=new WG.Container({x:0,y:0,name:"UI",mode:WG.Types.CoordinateMode.FIT});h.on("pointerdown",(function(){i.hero.jump()})),me.init(),pe.init(),g.init(),_e.init(),se.init(),Te.init(),we.setGameContainer(a),we.setUIContainer(c),this.hero=new Ce,this.background=new ie,we.setHero(this.hero),WG.Stage.addRootChild(o),WG.Stage.addRootChild(a),WG.Stage.addRootChild(c),this.lastTime=Date.now();for(var l=0;l<we.maxLine;l++)new Se(l);_.init(),ae.init(),$.init(),Y.init(),he.init(),oe.init(),window.c=$,"infinity"===we.mode&&(this.newLine=new Pe,this.newValue=localStorage.getItem("ctb_infinity"),this.breakable=!0),j.background("game"),this._pauseTime=0}},{key:"update",value:function update(i){i>1e3&&console.log(i);var o=Date.now();if(we._pause)this._pauseTime=we._pauseTime;else{if(this._pauseTime){var a=o-this._pauseTime;this.lastTime+=a,this._pauseTime=0}var h=o-this.lastTime;this.lastTime=o;var c=(we.speed+we.kmSpeed)/1e3*i;we.kmSpeed=5*Math.floor(this.hero.moveDistance/1e3),this.hero.update(h,c),this.background.update(h),me.update(),pe.update(h,c),g.update(h,c),ae.update(h),"infinity"===we.mode&&this.breakable&&we.hero.moveDistance>this.newValue&&(this.breakable=!1,this.newLine.break())}}},{key:"destroy",value:function destroy(){ae.destroy()}}]),Game}(),Ae=a(99),Re=a.n(Ae);function ShopItem_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var Ie=["name","code","price","currency"],ke=["chameleon","toilet","missile","dragons"],Fe=function(){function ShopItem(i,o,a,h){var c=this;!function ShopItem_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,ShopItem),this.itemData=i;for(var l=0;l<Ie.length;l++)if(void 0===i[Ie[l]])return void console.warn("상점 필요데이터 누락",i,Ie[l]);var m="SHOP-".concat(i.code),g=new WG.Container({name:m,x:241*o+20*(o+1)+120.5,y:174.5}),_="free_ruby"===i.code?1:2,x=new WG.Sprite("shop/item-background".concat(_,".png"),{parent:m}),S=ke.includes(i.code)?"character/".concat("dragons"===i.code?"dragon":i.code,"_idle.json"):"shop/".concat(i.code,".png"),R=ke.includes(i.code)?2:1,k=(new WG.Sprite(S,{parent:m,scale:R}),new WG.BitmapText(i.name,{fontFamily:"borsok-shallow-shadow@x4",y:-x.height/2+40,scale:.15,parent:m}));(k._pixiObject.maxWidth=.9*x.width/.15,k._pixiObject.roundPixels=!0,k.align="center",this.soldOutBackground=new WG.Sprite("shop/item-background".concat(_,".png"),{parent:m,alpha:.8,tint:0,visible:!1}),this.soldOutText=new WG.BitmapText("sold out",{fontFamily:"borsok-shallow-shadow@x4",scale:.2,parent:m,visible:!1}),this.button=new X({type:"textbox",color:"pink",scale:.6,x:0,y:154.5,name:"".concat(m,"-BUY"),parent:m,event:function event(){if("free_ruby"===i.code)Z.canIWatchFreeAd()&&Z.rewardedAd((function(){Z.watchedFreeAd(),Z.addRuby(1e3),c.timerStart(Z.getFreeAdTime()/1e3),h()}));else{var o=!Z.noConsumeList.includes(i.code);WG.Native.buy(i.code,o)}}}),"free_ruby"===i.code)?(new WG.Sprite("ui/ad.json",{parent:"".concat(m,"-BUY")}),this.timerText=new WG.BitmapText("00:00",{fontFamily:"borsok-shallow-shadow@x4",y:5,scale:.25,parent:"".concat(m,"-BUY")}),this.timerText.visible=!1):new WG.BitmapText("".concat(i.price.toLocaleString(),"\n").concat(i.currency),{fontFamily:"borsok-shallow-shadow@x4",y:5,scale:.25,parent:"".concat(m,"-BUY")}).align="center";this.soldOutCheck(),a.addChild(g)}return function ShopItem_createClass(i,o,a){return o&&ShopItem_defineProperties(i.prototype,o),a&&ShopItem_defineProperties(i,a),i}(ShopItem,[{key:"soldOutCheck",value:function soldOutCheck(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(Z.purchasedList.includes(this.itemData.code)||i)&&this.soldOut()}},{key:"setting",value:function setting(){if("free_ruby"===this.itemData.code&&!1===Z.canIWatchFreeAd()){var i=Z.getFreeAdTime()/1e3-Math.floor((Date.now()-Z.data.lastFreeAdTime)/1e3);this.timerStart(i)}}},{key:"timerStart",value:function timerStart(i){var o=this;"free_ruby"===this.itemData.code&&(this.button.button.setDisable(),this.timerText.tint=16777215,this.timerText.visible=!0,this.timer=new Re.a({countdown:!0,startValues:{seconds:i}}),this.timer.addEventListener("secondsUpdated",(function(i){var a=o.timer.getTimeValues(),h=a.minutes,c=a.seconds;o.timerText.text="".concat(l.addZero(h)," : ").concat(l.addZero(c))})),this.timer.addEventListener("targetAchieved",(function(){o.button.button.setEnable(),o.timerText.visible=!1})),this.timer.start())}},{key:"soldOut",value:function soldOut(){this.soldOutBackground.visible=!0,this.soldOutText.visible=!0,this.button.button.setDisable()}}]),ShopItem}();function Shop_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var ze=function(){function Shop(){!function Shop_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Shop)}return function Shop_createClass(i,o,a){return o&&Shop_defineProperties(i.prototype,o),a&&Shop_defineProperties(i,a),i}(Shop,null,[{key:"create",value:function create(i,o){var a=this,h=Z.items;this.shopItems={},WG.Native.payment.setOnPurchased((function(i){Z.itemPurchasedEvents[i]&&(Z.itemPurchasedEvents[i](),a.shopItems[i].soldOutCheck(),o())})),this.container=i;var c=new WG.Sprite("ui/one.png",{x:WG.Screen.gameSize.width/2,y:WG.Screen.gameSize.height/2,tint:0,parent:"SHOP",alpha:0});c.width=2*WG.Screen.gameSize.width,c.height=2*WG.Screen.gameSize.height,c.visible=!1,c.on("pointerdown",(function(){return a.hide()})),this.black=c,this.contentContainer=new WG.Container({name:"SHOP-CONTENT",parent:"SHOP",x:WG.Screen.gameSize.width/2,y:2*WG.Screen.gameSize.height}),this.contentContainer.scale=0;new X({color:"restore",parent:"SHOP-CONTENT",name:"SHOP-RESTORE",scale:.5,x:WG.Screen.gameSize.width/2-100,y:100,event:function event(){Z.noConsumeList.map((function(i){console.log(i),WG.Native.isPurchased(i)}))}});new WG.Sprite("shop/background.png",{y:WG.Screen.gameSize.height/2,parent:"SHOP-CONTENT"}).on("pointerdown",(function(){}));var l=new WG.Scroll({x:50.5-WG.Screen.gameSize.width/2,y:WG.Screen.gameSize.height/2-174.5+20,direction:"horizontal",width:1179,height:374,name:"SHOP-SCROLL",parent:"SHOP-CONTENT"});this.scrollContainer=l;for(var m={},g=function loadDoneCheck(){Object.keys(m).length===h.length&&function createShopItems(){for(var i=0;i<h.length;i++){var c=h[i],g=m[i],_=g.title,x=g.currency,S=g.value,R=_.indexOf("(Crush"),k=WG.isIOS?_:_.substring(0,R-1);a.shopItems[c]=new Fe({name:k,code:c,price:S,currency:x},i,l,o)}}()},_=0;_<h.length;_++){var x=h[_];WG.isMobile?function(){var i=_;"free_ruby"===x?m[i]={title:"Free Ruby (Crush",currency:"rewardedAd",value:0}:WG.Native.getSkuDetails(x).then((function(o){m[i]=o,g()}))}():this.shopItems[x]=new Fe({name:x,code:x,price:7777,currency:"KRW"},_,l,o)}var S=new WG.Sprite("ui/one.png",{x:241*h.length+20*(h.length+1)+120.5,y:WG.Screen.gameSize.height/2,tint:0,alpha:.8});S.x-=100,l.addChild(S)}},{key:"show",value:function show(){var i=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=Z.items;0===this.black.alpha&&(this.black.visible=!0,this.shopItems.free_ruby&&this.shopItems.free_ruby.setting(),new WG.Action(this.black,{to:.7,value:"alpha",duration:500}),new WG.Action(this.contentContainer,{to:1,value:"scale",duration:500,easing:WG.Easing.easeOutBack}),new WG.Action(this.contentContainer,{to:0,value:"y",duration:500,easing:WG.Easing.easeOutBack,onComplete:function onComplete(){}}),setTimeout((function(){var h=241*a.length+20*a.length-1179+20,c=241*o+20*o;c<0?c=0:c>h&&(c=h),i.scrollContainer.scroller.scrollTo(c)}),200))}},{key:"hide",value:function hide(){var i=this;.7===this.black.alpha&&(new WG.Action(this.black,{to:0,value:"alpha",duration:500,onComplete:function onComplete(){i.black.visible=!1}}),new WG.Action(this.contentContainer,{to:0,value:"scale",duration:500,easing:WG.Easing.easeOutBack}),new WG.Action(this.contentContainer,{to:2*WG.Screen.gameSize.height,value:"y",duration:500,easing:WG.Easing.easeOutBack}))}}]),Shop}();function Main_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var De=function(){function Main(i){!function Main_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Main),new WG.Container({parent:WG.Stage,name:"MAIN-BACKGROUND",mode:WG.Types.CoordinateMode.FILL}),this.glow=new WG.Sprite("title/glow.png",{parent:"BACKGROUND",x:WG.Screen.gameSize.width/2,y:WG.Screen.gameSize.height/2}),this.glow.width=WG.Screen.gameSize.width,this.glow.height=WG.Screen.gameSize.height,this.earth=new WG.Sprite("title/earth.png",{parent:"TITLE",x:WG.Screen.gameSize.width/2,y:WG.Screen.gameSize.height/2,scale:1e-5}),this.part1=new WG.Sprite("title/part1.png",{parent:"TITLE",x:WG.Screen.gameSize.width/2,y:WG.Screen.gameSize.height/2,scale:1e-6}),this.part2=new WG.Sprite("title/part2.png",{parent:"TITLE",x:WG.Screen.gameSize.width/2,y:WG.Screen.gameSize.height/2,scale:1e-6}),this.part3=new WG.Sprite("title/part3.png",{parent:"TITLE",x:WG.Screen.gameSize.width/2,y:WG.Screen.gameSize.height/2,scale:1e-6}),this.part4=new WG.Sprite("title/part4.png",{parent:"TITLE",x:WG.Screen.gameSize.width/2,y:WG.Screen.gameSize.height/2,scale:1e-6}),this.title=new WG.Sprite("title/title.png",{parent:"TITLE",x:WG.Screen.gameSize.width/2,y:WG.Screen.gameSize.height/2,scale:1e-6}),this.infinity=new X({color:"infinity",name:"infinity-mode",parent:"TITLE",x:WG.Screen.gameSize.width/2-64-10,y:.85*WG.Screen.gameSize.height,scale:1e-6,event:function event(){we.setMode("infinity"),Z.canIWatchInterstitial()?Z.interstitial((function(){return WG.Scene.fadeChange("Game",500)})):WG.Scene.fadeChange("Game",500)}}),this.stage=new X({color:"stage",name:"stage-mode",parent:"TITLE",x:this.infinity.x-128-20,y:.85*WG.Screen.gameSize.height,scale:1e-6,event:function event(){we.setMode("stage"),i.showStage()}}),this.character=new X({color:"character",name:"selct-character",parent:"TITLE",x:WG.Screen.gameSize.width/2+64+10,y:.85*WG.Screen.gameSize.height,scale:1e-6,event:function event(){i._charactersCreate().then((function(){i.showSelect()}))}}),this.shop=new X({color:"shop",name:"shop-mode",parent:"TITLE",x:this.character.x+128+20,y:.85*WG.Screen.gameSize.height,scale:1e-6,event:function event(){ze.show()}}),this.stage.button.baseScale=this.infinity.button.baseScale=this.character.button.baseScale=this.shop.button.baseScale=1,this._animation()}return function Main_createClass(i,o,a){return o&&Main_defineProperties(i.prototype,o),a&&Main_defineProperties(i,a),i}(Main,[{key:"_animation",value:function _animation(){var i=this;this._effect(this.earth,{value:"scale",to:1,duration:400,delay:250});this._effect(this.part1,{delay:350,x:WG.Screen.gameSize.width/2+200+120,y:WG.Screen.gameSize.height/2+130}),this._effect(this.part2,{delay:550,x:WG.Screen.gameSize.width/2+200,y:WG.Screen.gameSize.height/2-200}),this._effect(this.part3,{delay:750,x:WG.Screen.gameSize.width/2-200,y:WG.Screen.gameSize.height/2-200}),this._effect(this.part4,{delay:950,x:WG.Screen.gameSize.width/2-200-100,y:WG.Screen.gameSize.height/2+70}),new WG.Action(this.title,{duration:1e3,delay:1050,value:"scale",to:1,easing:WG.Easing.easeOutBounce,onComplete:function onComplete(){new WG.Action(i.part1,{to:i.part1.y-10,value:"y",duration:1500,easing:WG.Easing.easeInOutSine,loop:1/0}),new WG.Action(i.part2,{to:i.part2.y-10,value:"y",duration:1700,easing:WG.Easing.easeInOutSine,loop:1/0}),new WG.Action(i.part3,{to:i.part3.y-10,value:"y",duration:1300,easing:WG.Easing.easeInOutSine,loop:1/0}),new WG.Action(i.part4,{to:i.part4.y-10,value:"y",duration:2100,easing:WG.Easing.easeInOutSine,loop:1/0}),new WG.Action(i.title,{to:i.title.y-30,value:"y",duration:2e3,easing:WG.Easing.easeInOutSine,loop:1/0})}}),new WG.Action(this.stage,{duration:1e3,delay:1050,value:"scale",to:1,easing:WG.Easing.easeOutElastic,onComplete:function onComplete(){return i.stage.button.baseScale=1}}),new WG.Action(this.infinity,{duration:1e3,delay:1100,value:"scale",to:1,easing:WG.Easing.easeOutElastic,onComplete:function onComplete(){return i.infinity.button.baseScale=1}}),new WG.Action(this.character,{duration:1e3,delay:1150,value:"scale",to:1,easing:WG.Easing.easeOutElastic,onComplete:function onComplete(){return i.character.button.baseScale=1}}),new WG.Action(this.shop,{duration:1e3,delay:1200,value:"scale",to:1,easing:WG.Easing.easeOutElastic,onComplete:function onComplete(){return i.shop.button.baseScale=1}})}},{key:"_effect",value:function _effect(i,o){o.x&&new WG.Action(i,{value:"x",to:o.x,duration:1e3,delay:o.delay,easing:WG.Easing.easeOutQuart}),o.y&&new WG.Action(i,{value:"y",to:o.y,duration:1e3,delay:o.delay,easing:WG.Easing.easeOutQuart}),new WG.Action(i,{value:"scale",to:1,duration:1e3,delay:o.delay,easing:WG.Easing.easeOutQuart})}}]),Main}();function FilterManager_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var Le=function(){function FilterManager(){!function FilterManager_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,FilterManager)}return function FilterManager_createClass(i,o,a){return o&&FilterManager_defineProperties(i.prototype,o),a&&FilterManager_defineProperties(i,a),i}(FilterManager,null,[{key:"set",value:function set(i,o){this[i]=o}},{key:"get",value:function get(i){if(this[i])return this[i];console.warn("filter가 없습니다")}},{key:"is",value:function is(i){return!!this[i]}}]),FilterManager}();function Character_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var Be=["red","black"],Ne=function(){function Character(i,o,a,h){!function Character_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Character);var c=WG.resource["data/character.json"][i],l="Character_"+o;this.info=c;var m=WG.Screen.widthRatio>WG.Screen.heightRatio?WG.Screen.widthRatio/WG.Screen.heightRatio:1;this.container=new WG.Container({x:50+(73.5+o%3*147+o%3*63.5)*m,y:184*Math.floor(o/3)+160,name:l}),this.selectedEffect=new WG.Sprite("ui/selected.json",{alpha:0,parent:l}),this.hideType=Be.includes(c.grade);var g=this.hideType?"".concat(c.grade,"-hide"):c.grade;this.background=new X({color:g,parent:l,name:"Character-".concat(i,"-select"),event:function event(){return h()}}),new WG.Sprite(null,{parent:l}).height=300;var _=new WG.Sprite("character/".concat(i,"_idle.json"),{scaleMode:WG.Types.ScaleMode.NEAREST,parent:l});this.character=_,"open"!==Z.data.character[i]?(_.tint=0,_.alpha=this.hideType?0:.5,this.lock=new WG.Sprite("ui/lock.png",{x:0,y:-70,parent:l,scale:.7,alpha:.8})):this.background.button.setColor(c.grade),a.addChild(this.container)}return function Character_createClass(i,o,a){return o&&Character_defineProperties(i.prototype,o),a&&Character_defineProperties(i,a),i}(Character,[{key:"effectOff",value:function effectOff(){this.selectedEffect.alpha=0}},{key:"effectOn",value:function effectOn(){this.selectedEffect.alpha=1}},{key:"unlock",value:function unlock(){this.background.button.setColor(this.info.grade),this.character.tint=16777215,this.character.alpha=1,this.lock.alpha=0}}]),Character}();function Select_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var Ge={green:0,orange:1,red:2,black:3},Ue=function(){function Select(i){var o=this;!function Select_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Select);var a=WG.Screen.widthRatio/WG.Screen.heightRatio;this.container=new WG.Scroll({x:50,y:WG.Screen.gameSize.height,width:768*(WG.Screen.widthRatio>WG.Screen.heightRatio?a:1),height:WG.Screen.gameSize.height/(WG.Screen.widthRatio<WG.Screen.heightRatio?a:1),name:"SELECT",parent:"TITLE"});var h=WG.resource["data/character.json"];delete h.data;var c=Object.entries(h),l=localStorage.getItem("ctb_characterSeed");this._shuffle(c,l),c.sort((function(i,o){return Ge[i[1].grade]-Ge[o[1].grade]})),this.characters={},this.current=null;for(var m=function _loop(a){var h=c[a][0];o.characters[h]=new Ne(h,a,o.container,(function(){j.click(),i.setCharacter(h)}))},g=0;g<c.length;g++)m(g);new X({color:"exit",parent:"TITLE",name:"stage-exit",scale:.6,x:100,y:WG.Screen.gameSize.height+100,event:function event(){i.showTitle(),i.selected._hideReinforceConfirm()}}),this.shop=new X({color:"shop",name:"shop-select",parent:"TITLE",x:2*WG.Screen.gameSize.width+.6*WG.Screen.gameSize.width,y:75,scale:.7,event:function event(){ze.show()}})}return function Select_createClass(i,o,a){return o&&Select_defineProperties(i.prototype,o),a&&Select_defineProperties(i,a),i}(Select,[{key:"_setCharacter",value:function _setCharacter(i){this.current&&this.characters[this.current].effectOff(),this.current=i,this.characters[this.current].effectOn()}},{key:"_shuffle",value:function _shuffle(i,o){var a,h,c=i.length;o=o||1;for(var l=function random(){var i=1e4*Math.sin(o++);return i-Math.floor(i)};0!==c;)h=Math.floor(l()*c),a=i[c-=1],i[c]=i[h],i[h]=a;return i}}]),Select}();function Star_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var je=function(){function Star(i,o){!function Star_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Star);var a=Object.assign({},{inactiveVisible:!0},o);this.container=new WG.Container(a);this.stars=[];for(var h=0;h<5;h++){var c=h<i?"star":"star_empty";this.stars.push(new WG.Sprite("ui/".concat(c,".png"),{parent:a.name,x:h<3?48*h-58+10*h:48*(h-3)-58+10*(h-3)+10+24,y:h<3?-24:24,scale:1.5,scaleMode:WG.Types.ScaleMode.NEAREST,alpha:c.includes("empty")?a.inactiveVisible?.3:0:1}))}}return function Star_createClass(i,o,a){return o&&Star_defineProperties(i.prototype,o),a&&Star_defineProperties(i,a),i}(Star,[{key:"fill",value:function fill(i){for(var o=0;o<i;o++)this.stars[o].texture="ui/star.png",this.stars[o].alpha=1;for(var a=i;a<5;a++)this.stars[a].texture="ui/star_empty.png",this.stars[a].alpha=.5}},{key:"flicker",value:function flicker(i,o){var a=this;new WG.Timer({duration:4e3,onStart:function onStart(){a._flickerAction&&a._flickerAction.stop(),a._flickerInner(i)},onComplete:function onComplete(){a._flickerAction&&a._flickerAction.stop(),a._flickerAction=null,o(a.stars[i-1])}})}},{key:"_flickerInner",value:function _flickerInner(i){var o=this;this._flickerAction=new WG.Action(this.stars[i-1],{duration:600,to:1===this.stars[i-1].alpha?.2:1,value:"alpha",onComplete:function onComplete(){o._flickerInner(i)}})}}]),Star}();function UpgradeStat_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var We=function(){function UpgradeStat(){!function UpgradeStat_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,UpgradeStat);var i=.4*WG.Screen.gameSize.width,o="UPGRADE-STAT";new WG.Container({y:.71*WG.Screen.gameSize.height,parent:"SELECTED-REINFORCE",name:o}),new WG.Sprite("ui/life.png",{x:.3*-i,scaleMode:WG.Types.ScaleMode.NEAREST,scale:1.2,parent:o});this.lifeStat=new WG.BitmapText("+ 1",{x:.3*-i,y:50,fontFamily:"borsok@x4",parent:o,scale:.15,tint:16711764});new WG.Sprite("ui/luck.png",{parent:o,scale:1.2,scaleMode:WG.Types.ScaleMode.NEAREST});this.luckStat=new WG.BitmapText("+ 2",{x:-10,y:50,fontFamily:"borsok@x4",parent:o,scale:.15,tint:16711764}),this.luckUnit=new WG.BitmapText("%",{x:this.luckStat.x+this.luckStat.width/2+5,y:50,fontFamily:"borsok@x4",parent:o,scale:.1,tint:16711764}),this.luckUnit.anchor.x=0;new WG.Sprite("ui/rocket.png",{x:.3*i,scale:1.2,scaleMode:WG.Types.ScaleMode.NEAREST,parent:o});this.starStat=new WG.BitmapText("+ 0.5",{x:.3*i-10,y:50,fontFamily:"borsok@x4",parent:o,scale:.15,tint:16711764}),this.starUnit=new WG.BitmapText("s",{x:this.starStat.x+this.starStat.width/2+5,y:50,fontFamily:"borsok@x4",parent:o,scale:.1,tint:16711764}),this.starUnit.anchor.x=0}return function UpgradeStat_createClass(i,o,a){return o&&UpgradeStat_defineProperties(i.prototype,o),a&&UpgradeStat_defineProperties(i,a),i}(UpgradeStat,[{key:"set",value:function set(i){this.lifeStat.text="+ ".concat(we.getStaticReinforceValue("life",i)),this.luckStat.text="+ ".concat(we.getStaticReinforceValue("luck",i)),this.starStat.text="+ ".concat(we.getStaticReinforceValue("star",i)),this.luckUnit=this.luckStat.x+this.luckStat.width/2+5,this.starUnit=this.starStat.x+this.starStat.width/2+5}}]),UpgradeStat}();function Upgrade_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var Xe=function(){function Upgrade(){var i=this;!function Upgrade_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Upgrade);var o=new WG.Container({parent:WG.Stage,x:WG.Screen.gameSize.width/2,y:WG.Screen.gameSize.height/2,name:"UPGRADE"});o.visible=!1,this.container=o,this.black=new WG.Sprite("game/gradient.png",{parent:"UPGRADE",alpha:0}),this.black.on("pointerdown",(function(){})),this.black.width=2*WG.Screen.gameSize.width,this.black.height=2*WG.Screen.gameSize.height,this.pattern=new WG.Sprite("game/background1.png",{parent:"UPGRADE",alpha:0}),this.pattern.width=2*WG.Screen.gameSize.width,this.pattern.height=2*WG.Screen.gameSize.height,this.contentContainer=new WG.Container({parent:"UPGRADE",name:"UPGRADE-CONTENT",y:2*WG.Screen.gameSize.height});new WG.Sprite("ui/upgrade-background.png",{parent:"UPGRADE-CONTENT"});this.gradient=new WG.Sprite("ui/upgrade-gradient.png",{parent:"UPGRADE-CONTENT"}),this.character=new WG.Sprite("character/bat_idle.json",{scaleMode:WG.Types.ScaleMode.NEAREST,scale:2.5,y:-50,parent:"UPGRADE-CONTENT"}),this.star=new je(5,{y:.2*WG.Screen.gameSize.height,parent:"UPGRADE-CONTENT",name:"UPGRADE-STAR",scale:1.2}),this.closeButton=new X({y:.4*-WG.Screen.gameSize.height,parent:"UPGRADE-CONTENT",name:"UPGRADE-CHECK-BUTTON",type:"default",color:"exit",alpha:0,scale:.7,event:function event(){i.onClose&&(i.onClose(),i.onClose=null),i.hide()}}),this.closeButton.visible=!1}return function Upgrade_createClass(i,o,a){return o&&Upgrade_defineProperties(i.prototype,o),a&&Upgrade_defineProperties(i,a),i}(Upgrade,[{key:"start",value:function start(i,o){var a=this,h=WG.resource["data/character.json"][i];this.onClose=o;var c=Z.data.reinforce[i],l=we.getReinforceValue("rate",c),m=100*Math.random()<l,g=we.getReinforceValue("price",c,h.grade);Z.data.coin<g||(Z.data.coin-=g,m&&(Z.data.reinforce[i]+=1),Z.save().then((function(){a.container.visible=!0,new WG.Action(a.black,{value:"alpha",to:1,duration:1e3}),new WG.Action(a.pattern,{value:"alpha",to:1,duration:1e3}),a._setting(i),new WG.Action(a.contentContainer,{value:"y",to:0,duration:1e3,easing:WG.Easing.easeOutCubic,onComplete:function onComplete(){a.star.flicker(c+1,(function(i){m?(new WG.Particle({image:"ui/star.png",options:WG.resource["effect/star_upgrade.json"],parent:"UPGRADE-STAR",x:i.x,y:i.y}),a.star.fill(c+1)):a.star.fill(c),a.closeButton.visible=!0,new WG.Action(a.closeButton,{to:1,value:"alpha",duration:500}),new WG.Timer({duration:1e3,onProgress:function onProgress(i){a._smoothGradient(i,m)}})}))}})})))}},{key:"_setting",value:function _setting(i){var o=Z.data.reinforce[i];this.character.texture="character/".concat(i,"_idle.json"),this.gradient.tint=16777215,this.closeButton.visible=!1,this.closeButton.alpha=0,this.star.fill(o)}},{key:"_smoothGradient",value:function _smoothGradient(i,o){this.startColor={r:255,g:255,b:255},this.gradientColor={r:o?240:102,g:o?181:102,b:o?0:102};var a={r:this.startColor.r,g:this.startColor.g,b:this.startColor.b},h={r:this.gradientColor.r,g:this.gradientColor.g,b:this.gradientColor.b},c={r:parseInt(l.lerp(a.r,h.r,i)),g:parseInt(l.lerp(a.g,h.g,i)),b:parseInt(l.lerp(a.b,h.b,i))},m=c.r,g=c.g,_=c.b;this.gradient.tint=parseInt(l.RGBToHex(m,g,_),16)}},{key:"hide",value:function hide(){var i=this;new WG.Action(this.black,{value:"alpha",to:0,duration:400,onComplete:function onComplete(){i.container.visible=!1}}),new WG.Action(this.pattern,{value:"alpha",to:0,duration:400,onComplete:function onComplete(){}}),new WG.Action(this.contentContainer,{value:"y",to:2*WG.Screen.gameSize.height,duration:500,easing:WG.Easing.easeOutCubic})}}]),Upgrade}();function Selected_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var He=["red","black"],Ve=function(){function Selected(i){var o=this;!function Selected_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Selected),this.selected="pigeon",this.disable=!1,this._buy=!1,this.parent=i;var a=.4*WG.Screen.gameSize.width,h=new WG.Sprite("ui/one.png",{x:WG.Screen.gameSize.width-.4*WG.Screen.gameSize.width/2+100,y:WG.Screen.gameSize.height/2+WG.Screen.gameSize.height,parent:"BACKGROUND"});h.width=.5*WG.Screen.gameSize.width,h.height=2*WG.Screen.gameSize.height,h.tint=16759296,h.degree=10,this.mask=h;var c=new WG.Sprite("ui/one.png",{x:WG.Screen.gameSize.width-.4*WG.Screen.gameSize.width/2+100,y:WG.Screen.gameSize.height/2+WG.Screen.gameSize.height,parent:"BACKGROUND"});c.height=WG.Screen.gameSize.height,c.width=WG.Screen.gameSize.width;var l=new WG.Sprite("ui/one.png",{x:WG.Screen.gameSize.width-.4*WG.Screen.gameSize.width/2+100,y:WG.Screen.gameSize.height/2+WG.Screen.gameSize.height,parent:"BACKGROUND"});l.width=.5*WG.Screen.gameSize.width,l.height=2*WG.Screen.gameSize.height,l.tint=16759296,l.degree=10,l.mask=c,this.previewBackground=l,this.container=new WG.Container({x:.6*WG.Screen.gameSize.width,y:WG.Screen.gameSize.height,name:"SELECTED",parent:"TITLE",mode:WG.Types.CoordinateMode.FIT});var m=new WG.Sprite("ui/my-coin.png",{x:WG.Screen.gameSize.width-.4*WG.Screen.gameSize.width/2+100-320+10,y:.1*WG.Screen.gameSize.height+WG.Screen.gameSize.height,alpha:.8,parent:"BACKGROUND",anchor:{x:0,y:.5}});m.width=400,m.mask=h;new WG.Sprite("game/coin.json",{x:.25*a,y:.1*WG.Screen.gameSize.height,scaleMode:WG.Types.ScaleMode.NEAREST,scale:3,parent:"SELECTED"});this.coinValue=new WG.BitmapText(Z.data.coin.toLocaleString(),{x:.8*a,y:.1*WG.Screen.gameSize.height+10,fontFamily:"borsok@x4",parent:"SELECTED",scale:.3}),this.coinValue.tint=3223857,this.coinValue.anchor.x=1,this.sprite=new WG.Sprite("character/".concat(this.selected,"_idle.json"),{x:.5*a,y:.25*WG.Screen.gameSize.height,scaleMode:WG.Types.ScaleMode.NEAREST,parent:"SELECTED"}),this.sprite.scale=3,this.spriteText=new X({x:.5*a,y:.28*WG.Screen.gameSize.height,parent:"SELECTED",name:"question-mark",color:"green"}),this.spriteText.visible=!1,this.star=new je(4,{x:.8*a,y:.22*WG.Screen.gameSize.height,name:"SELECTED-STAR",parent:"SELECTED"}),new WG.Sprite("ui/life.png",{x:.25*a,scale:1.25,y:.45*WG.Screen.gameSize.height,scaleMode:WG.Types.ScaleMode.NEAREST,parent:"SELECTED"}),this.lifeStat=new WG.BitmapText("10",{x:.32*a,y:.45*WG.Screen.gameSize.height+8,fontFamily:"borsok@x4",parent:"SELECTED",scale:.23}),this.lifeStatPlus=new WG.BitmapText("+17",{x:.4*a,y:.45*WG.Screen.gameSize.height-20,fontFamily:"borsok@x4",parent:"SELECTED",tint:16717372,scale:.15}),new WG.Sprite("ui/jump.png",{x:.25*a,scale:1.25,y:.55*WG.Screen.gameSize.height,scaleMode:WG.Types.ScaleMode.NEAREST,parent:"SELECTED"}).degree=270,this.jumpStat=new WG.BitmapText("5",{x:.32*a,y:.55*WG.Screen.gameSize.height+8,fontFamily:"borsok@x4",parent:"SELECTED",scale:.23}),new WG.Sprite("ui/damage.png",{x:.25*a,scale:1.25,y:.65*WG.Screen.gameSize.height,scaleMode:WG.Types.ScaleMode.NEAREST,parent:"SELECTED"}),this.damageStat=new WG.BitmapText("1",{x:.32*a,y:.65*WG.Screen.gameSize.height+8,fontFamily:"borsok@x4",parent:"SELECTED",scale:.23}),new WG.Sprite("ui/luck.png",{x:.6*a,scale:1.25,y:.45*WG.Screen.gameSize.height,scaleMode:WG.Types.ScaleMode.NEAREST,parent:"SELECTED"}),this.luckStat=new WG.BitmapText("10",{x:.67*a,y:.45*WG.Screen.gameSize.height+8,fontFamily:"borsok@x4",parent:"SELECTED",scale:.23}),this.luckStatPlus=new WG.BitmapText("+17",{x:.75*a,y:.45*WG.Screen.gameSize.height-20,fontFamily:"borsok@x4",parent:"SELECTED",tint:16717372,scale:.15}),this.luckStatUnit=new WG.BitmapText("%",{x:.75*a,y:.45*WG.Screen.gameSize.height+12,fontFamily:"borsok@x4",parent:"SELECTED",scale:.12}),this.luckStatUnit.anchor.x=0,new WG.Sprite("ui/rocket.png",{x:.6*a,scale:1.25,y:.55*WG.Screen.gameSize.height,scaleMode:WG.Types.ScaleMode.NEAREST,parent:"SELECTED"}),this.starStat=new WG.BitmapText("5",{x:.67*a,y:.55*WG.Screen.gameSize.height+8,fontFamily:"borsok@x4",parent:"SELECTED",scale:.23}),this.starStatPlus=new WG.BitmapText("+17",{x:.75*a,y:.55*WG.Screen.gameSize.height-20,fontFamily:"borsok@x4",parent:"SELECTED",tint:16717372,scale:.15}),this.starStatUnit=new WG.BitmapText("sec",{x:.75*a,y:.55*WG.Screen.gameSize.height+12,fontFamily:"borsok@x4",parent:"SELECTED",scale:.12}),this.starStatUnit.anchor.x=0,new WG.Sprite("ui/magnet.png",{x:.6*a,scale:1.25,y:.65*WG.Screen.gameSize.height,scaleMode:WG.Types.ScaleMode.NEAREST,parent:"SELECTED"}),this.magnetStat=new WG.BitmapText("1",{x:.67*a,y:.65*WG.Screen.gameSize.height+8,fontFamily:"borsok@x4",parent:"SELECTED",scale:.23}),this.jumpStat.anchor.x=this.lifeStat.anchor.x=this.lifeStatPlus.anchor.x=this.damageStat.anchor.x=this.luckStat.anchor.x=this.luckStatPlus.anchor.x=this.starStat.anchor.x=this.magnetStat.anchor.x=this.starStatPlus.anchor.x=0;var g=new WG.Container({x:.5*a,y:.85*WG.Screen.gameSize.height,name:"STARTBUTTON",parent:"SELECTED"});this.buttonContainer=g,this.buttonBackground=new WG.Sprite("textbox/blue.png",{parent:"STARTBUTTON",scale:.7}),g.on("pointerdown",(function(){o.disable||(o._isDown=!0,o._currentActionStop(),o._currentAction=new WG.Timer({duration:1e3,onProgress:function onProgress(i){g.scale=1-.1*i},easing:WG.Easing.easeOutElastic}))}));var _={duration:1e3,easing:WG.Easing.easeOutElastic,onProgress:function onProgress(i){g.scale=.9+.1*i}};g.on("pointerup",(function(){if(!o.disable&&o._isDown){o._isDown=!1;var a=o.info,h=(a.life,a.damage,a.jump,a.name,a.grade,a.type),c=a.price;if("open"===Z.data.character[o.selected])localStorage.setItem("ctb_lastCharacter",o.selected),we.setCharacter(o.selected),j.confirm(),i.selectCharacter(o.selected),o._setting();else if("ad"===h)if(WG.isMobile)Z.rewardedAd((function(){var i=Z.data.character[o.selected];Z.data.character[o.selected]=void 0===i?1:i+1,Z.data.character[o.selected]===c?o._unlockCharacter():o._setting(),Z.save()}));else{Y.done("This is PC Version",16711752);var l=Z.data.character[o.selected];Z.data.character[o.selected]=void 0===l?1:l+1,Z.data.character[o.selected]===c?o._unlockCharacter():o._setting(),console.log("[Character] RewardedAd")}else"coin"===h?o._showConfirm():"shop"===h&&ze.show(99);o._currentActionStop(),o._currentAction=new WG.Timer(_)}})),g.on("pointerupoutside",(function(){o.disable||(o._isDown=!1,o._currentActionStop(),o._currentAction=new WG.Timer(_))})),this.buttonContentContainer=new WG.Container({parent:"STARTBUTTON",name:"STARTBUTTON-CONTENT"}),this.buttonTextShadow=new WG.BitmapText("START",{y:6,x:3,fontFamily:"borsok@x4",parent:"STARTBUTTON-CONTENT",scale:.2}),this.buttonText=new WG.BitmapText("START",{y:3,fontFamily:"borsok@x4",parent:"STARTBUTTON-CONTENT",scale:.2}),this.buttonIcon=new WG.Sprite("game/coin.json",{y:-5,scaleMode:WG.Types.ScaleMode.NEAREST,alpha:0,parent:"STARTBUTTON-CONTENT"}),this.reinforceConfirmButton=new X({type:"textbox",color:"pink",scale:.7,x:.5*a,y:.85*WG.Screen.gameSize.height,name:"SELECTED-REINFORCE-BUTTON",parent:"SELECTED",event:function event(){return o._showReinforceConfirm()}}),this.confirmBackground=new WG.Sprite("ui/one.png",{x:WG.Screen.gameSize.width/2,y:WG.Screen.gameSize.height/2,parent:"SELECTED",alpha:0}),this.confirmBackground.tint=0,this.confirmBackground.width=2*WG.Screen.gameSize.width,this.confirmBackground.height=2*WG.Screen.gameSize.height,this.confirmBackground.mask=h,this.confirmButtonContainer=new WG.Container({x:.5*a,y:2*WG.Screen.gameSize.height,parent:"SELECTED",name:"SELECTED-CONFIRM"}),this.confirmBackground.on("pointerdown",(function(){"buy"===o._currentConfirm?o._hideConfirm():o._hideReinforceConfirm()})),this.confirmBackground._pixiObject.interactive=!1;var x=new WG.Sprite("ui/result-background.png",{parent:"SELECTED-CONFIRM"});x.tint=16760832,x.mask=h,this.confirmButton=new X({scale:.7,y:-85,type:"textbox",color:"pink",parent:"SELECTED-CONFIRM",name:"SELECTED-CONFIRM-BUTTON",event:function event(){var i=o.info,a=i.type,h=i.price;"coin"===a&&h<=Z.data.coin&&(o._hideConfirm(),o._unlockCharacter())}}),this.confirmTextShadow=new WG.BitmapText("BUY",{x:3,y:8,fontFamily:"borsok@x4",parent:"SELECTED-CONFIRM-BUTTON",scale:.25}),this.confirmText=new WG.BitmapText("BUY",{y:5,fontFamily:"borsok@x4",parent:"SELECTED-CONFIRM-BUTTON",scale:.25}),this.confirmText.tint=10813477,this.reinforceConfirmButton.x-=10+this.reinforceConfirmButton.width/2,this.upgradeTextShadow=new WG.BitmapText("UPGRADE",{y:6,x:3,fontFamily:"borsok@x4",parent:"SELECTED-REINFORCE-BUTTON",tint:11077923,scale:.27}),this.upgradeText=new WG.BitmapText("UPGRADE",{y:3,fontFamily:"borsok@x4",parent:"SELECTED-REINFORCE-BUTTON",scale:.27}),this.reinforceConfirmContainer=new WG.Container({x:.5*a,y:WG.Screen.gameSize.height,parent:"SELECTED",mode:WG.Types.CoordinateMode.FIT,name:"SELECTED-REINFORCE"});var S=new WG.Sprite("ui/one.png",{parent:"SELECTED-REINFORCE"}),R=WG.Screen.widthRatio/WG.Screen.heightRatio;S.width=2*a,S.height=WG.Screen.gameSize.height/1.5/(R<1?WG.Screen.widthRatio/WG.Screen.heightRatio:1),S.y=WG.Screen.gameSize.height,S.anchor.y=1,S.mask=h,this.reinforceRateText=new WG.BitmapText("",{y:.42*WG.Screen.gameSize.height,fontFamily:"borsok@x4",parent:"SELECTED-REINFORCE",scale:.25,tint:16711764}),new WG.Sprite("ui/result-gray.png",{parent:"SELECTED-REINFORCE",y:.57*WG.Screen.gameSize.height}).width=.86*a,this.beforeStar=new je(2,{parent:"SELECTED-REINFORCE",name:"SELECTED_REINFORCE-STAR",x:.22*-a,y:.57*WG.Screen.gameSize.height}),new WG.BitmapText(">",{y:.57*WG.Screen.gameSize.height+10,fontFamily:"borsok@x4",parent:"SELECTED-REINFORCE",scale:.25,tint:16711764}),this.afterStar=new je(3,{parent:"SELECTED-REINFORCE",name:"SELECTED_REINFORCE-STAR",x:.22*a,y:.57*WG.Screen.gameSize.height}),this.upgradeStat=new We,this.upgrade=new Xe,new X({scale:.7,y:.9*WG.Screen.gameSize.height,type:"textbox",color:"pink",parent:"SELECTED-REINFORCE",name:"SELECTED-REINFORCE-CONFIRM",event:function event(){o.upgrade.start(o.selected,(function(){return o.set(o.selected)})),o._refreshCoinValue(),o._hideReinforceConfirm()}}),this.upgradePriceRuby=new WG.Sprite("game/coin.json",{x:-40,y:-5,scaleMode:WG.Types.ScaleMode.NEAREST,scale:3,parent:"SELECTED-REINFORCE-CONFIRM"}),this.upgradePriceTextShadow=new WG.BitmapText("",{y:6,x:-12,fontFamily:"borsok@x4",parent:"SELECTED-REINFORCE-CONFIRM",tint:11077923,scale:.27}),this.upgradePriceText=new WG.BitmapText("",{x:-15,fontFamily:"borsok@x4",parent:"SELECTED-REINFORCE-CONFIRM",scale:.27}),this.upgradePriceText.anchor.x=this.upgradePriceTextShadow.anchor.x=0,console.log(this),this.set(this.selected),this._setting()}return function Selected_createClass(i,o,a){return o&&Selected_defineProperties(i.prototype,o),a&&Selected_defineProperties(i,a),i}(Selected,[{key:"set",value:function set(i){this.selected=i,this.info=WG.resource["data/character.json"][i],this._buy=!1,this._hideReinforceConfirm(),this._hideConfirm(),this._setting()}},{key:"_unlockCharacter",value:function _unlockCharacter(i){var o=this;void 0===i&&(i=this.selected),this.sprite.filters=[Le.get("characterOpen")],this.sprite.filters[0].color=3487029;var a=this.info,h=a.type,c=a.price;"coin"===h&&(Z.data.coin-=c),Z.data.character[i]="open",Z.data.reinforce[i]=0,Z.save().then((function(){o._refreshCoinValue(),new WG.Timer({duration:10,onProgress:function onProgress(i){var a=53,h=53,c=53,m=255,g=255,_=255,x={r:parseInt(l.lerp(a,m,i)),g:parseInt(l.lerp(h,g,i)),b:parseInt(l.lerp(c,_,i))},S=x.r,R=x.g,k=x.b;o.sprite.filters[0].color=parseInt(l.RGBToHex(S,R,k),16)},onComplete:function onComplete(){o.sprite.filters=[],new WG.Particle({image:"game/block.png",options:WG.resource["effect/unlock_effect.json"],x:.4*WG.Screen.gameSize.width*.5,y:.25*WG.Screen.gameSize.height,zOrder:1,parent:"SELECTED"}),o.parent._unlockCharacter(i),o.set(i)}})}))}},{key:"_showConfirm",value:function _showConfirm(){this._currentConfirm="buy",this.confirmBackgroundAnimation&&this.confirmBackgroundAnimation.stop(),this.confirmButtonAnimation&&this.confirmButtonAnimation.stop();var i=this.info,o=i.type,a=i.price;"coin"===o&&Z.data.coin<a?console.log("no money"):(this.confirmBackground._pixiObject.interactive=!0,this.confirmBackgroundAnimation=new WG.Action(this.confirmBackground,{value:"alpha",to:.8,duration:400}),this.confirmButtonAnimation=new WG.Action(this.confirmButtonContainer,{value:"y",to:.97*WG.Screen.gameSize.height,duration:400,easing:WG.Easing.easeInOutQuint}))}},{key:"_hideConfirm",value:function _hideConfirm(){this.confirmBackgroundAnimation&&this.confirmBackgroundAnimation.stop(),this.confirmButtonAnimation&&this.confirmButtonAnimation.stop(),this.confirmBackground._pixiObject.interactive=!1,this.confirmBackgroundAnimation=new WG.Action(this.confirmBackground,{value:"alpha",to:0,duration:400}),this.confirmButtonAnimation=new WG.Action(this.confirmButtonContainer,{value:"y",to:2*WG.Screen.gameSize.height,duration:400,easing:WG.Easing.easeInOutQuint})}},{key:"_showReinforceConfirm",value:function _showReinforceConfirm(){this._currentConfirm="reinforce",this.confirmBackgroundAnimation&&this.confirmBackgroundAnimation.stop(),this.confirmButtonAnimation&&this.confirmButtonAnimation.stop(),this.confirmBackground._pixiObject.interactive=!0;var i=Z.data.reinforce[this.selected];this.reinforceRateText.text="success ".concat(we.getReinforceValue("rate",i),"%"),this.beforeStar.fill(i),this.afterStar.fill(i+1),this.upgradeStat.set(i+1),this.confirmBackgroundAnimation=new WG.Action(this.confirmBackground,{value:"alpha",to:.8,duration:400}),this.confirmButtonAnimation=new WG.Action(this.reinforceConfirmContainer,{value:"y",to:0,duration:400,easing:WG.Easing.easeInOutQuint})}},{key:"_hideReinforceConfirm",value:function _hideReinforceConfirm(){this.confirmBackgroundAnimation&&this.confirmBackgroundAnimation.stop(),this.reinforceConfirmAnimation&&this.reinforceConfirmAnimation.stop(),this.confirmBackground._pixiObject.interactive=!1,this.confirmBackgroundAnimation=new WG.Action(this.confirmBackground,{value:"alpha",to:0,duration:400}),this.reinforceConfirmAnimation=new WG.Action(this.reinforceConfirmContainer,{value:"y",to:WG.Screen.gameSize.height,duration:400,easing:WG.Easing.easeInOutQuint})}},{key:"_setting",value:function _setting(){var i=.4*WG.Screen.gameSize.width,o=this.info,a=o.grade,h=o.life,c=o.price,l=o.damage,m=o.jump,g=o.type,_=o.luck,x=o.star,S=He.includes(a);this.sprite.texture="character/".concat(this.selected,"_idle.json"),this.buttonContainer.x=.5*i,this.buttonContainer.tint=16777215,this.reinforceConfirmButton.visible=!1;var R=Z.data.reinforce[this.selected];if(this.sprite.visible=!0,this.spriteText.visible=!1,"open"!==Z.data.character[this.selected])if(S&&(this.sprite.visible=!1,this.spriteText.visible=!0,this.spriteText.button.setColor("".concat(a,"-hide"))),this.star.container.visible=!1,this.sprite.filters=[Le.get("characterHide")],this.lifeStat.text=this.jumpStat.text=this.damageStat.text=this.luckStat.text=this.starStat.text="?",this.lifeStatPlus.text=this.luckStatPlus.text=this.starStatPlus.text="",this.magnetStat.text="off",this.magnetStat.tint=16777215,this.luckStatUnit.x=this.luckStat.x+this.luckStat.width+6,this.starStatUnit.x=this.starStat.x+this.starStat.width+6,this.buttonText.text=c.toLocaleString(),this.buttonText.x=25,this.buttonIcon.alpha=1,this.buttonBackground.texture="textbox/pink.png",this.buttonText.tint=10813477,this.buttonTextShadow.tint=16777215,"coin"===g)this.buttonIcon.visible=!0,this.buttonIcon.texture="game/coin.json",this.buttonIcon.scale=2.3,this.buttonIcon.x=this.buttonText.x-this.buttonText.width/2-25;else if("ad"===g){this.buttonIcon.visible=!0,this.buttonIcon.texture="ui/ad.json",this.buttonIcon.scale=.6;var k=Z.data.character[this.selected];this.buttonText.text="".concat(void 0===k?0:k," / ").concat(c),this.buttonIcon.x=this.buttonText.x-this.buttonText.width/2-30}else"shop"===g&&(this.buttonIcon.visible=!1,this.buttonText.text="SHOP",this.buttonText.x=0);else{this.star.container.visible=!0,this.star.fill(R),5!==R&&(this.buttonContainer.x=.5*i+10+110.5,this.reinforceConfirmButton.visible=!0),this.sprite.filters=[],this.buttonText.text="SELECT",this.selected===we.character?this.buttonContainer.tint=9211020:this.buttonContainer.tint=16777215,this.lifeStat.text=h,this.jumpStat.text=m,this.damageStat.text=l,this.luckStat.text=_,this.starStat.text=x,this.luckStatUnit.x=this.luckStat.x+this.luckStat.width+6,this.starStatUnit.x=this.starStat.x+this.starStat.width+6,0===R?this.lifeStatPlus.text=this.luckStatPlus.text=this.starStatPlus.text="":(this.lifeStatPlus.x=this.lifeStat.x+this.lifeStat.width+5,this.lifeStatPlus.text="+".concat(we.getReinforceValue("life",R)),this.luckStatPlus.x=this.luckStat.x+this.luckStat.width+5,this.luckStatPlus.text="+".concat(we.getReinforceValue("luck",R)),this.starStatPlus.x=this.starStat.x+this.starStat.width+5,this.starStatPlus.text="+".concat(we.getReinforceValue("star",R))),5===R?(this.magnetStat.text="on",this.magnetStat.tint=16717372):(this.magnetStat.text="off",this.magnetStat.tint=16777215);var j=we.getReinforceValue("price",R,a);this.upgradePriceTextShadow.text=this.upgradePriceText.text=j.toLocaleString(),this.upgradePriceText.x=-20*Math.floor(j/1e3)-20,this.upgradePriceTextShadow.x=this.upgradePriceText.x+3,this.upgradePriceRuby.x=this.upgradePriceText.x-this.upgradePriceRuby.width/2-10,this.buttonText.x=0,this.buttonIcon.alpha=0,this.buttonBackground.texture="textbox/blue.png",this.buttonText.tint=16777215,this.buttonTextShadow.tint=298981}this.buttonTextShadow.text=this.buttonText.text,this.buttonTextShadow.scale=this.buttonText.scale,this.buttonTextShadow.x=this.buttonText.x+3,this.buttonTextShadow.y=this.buttonText.y+3,console.log(this.buttonContainer.x,4)}},{key:"_currentActionStop",value:function _currentActionStop(){this._currentAction&&this._currentAction.stop(),this._currentAction=null}},{key:"_refreshCoinValue",value:function _refreshCoinValue(){this.coinValue.text=Z.data.coin.toLocaleString()}}]),Selected}();function MissionBox_slicedToArray(i,o){return function MissionBox_arrayWithHoles(i){if(Array.isArray(i))return i}(i)||function MissionBox_iterableToArrayLimit(i,o){var a=[],h=!0,c=!1,l=void 0;try{for(var m,g=i[Symbol.iterator]();!(h=(m=g.next()).done)&&(a.push(m.value),!o||a.length!==o);h=!0);}catch(i){c=!0,l=i}finally{try{h||null==g.return||g.return()}finally{if(c)throw l}}return a}(i,o)||function MissionBox_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Title_MissionBox_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var Ye=function(){function MissionBox(){!function Title_MissionBox_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,MissionBox),this.missions=[],this.typeText=[],this.valueText=[],this.animations=[];for(var i=0;i<3;i++){var o="MISSIOBOX-".concat(i);this.missions.push(new WG.Container({x:.5*WG.Screen.gameSize.width,y:.4*WG.Screen.gameSize.height,name:o,parent:"STAGE",alpha:0})),new WG.Sprite("ui/result-gray.png",{scale:.8,parent:o}),this.typeText.push(new WG.BitmapText("",{fontFamily:"borsok-outline-blue@x4",y:117*.8/2,scale:.2,parent:o})),this.typeText[i].letterSpacing=-20,this.valueText.push(new WG.BitmapText("",{fontFamily:"borsok@x4",scale:.25,parent:o})),this.valueText[i].tint=16759296}}return function Title_MissionBox_createClass(i,o,a){return o&&Title_MissionBox_defineProperties(i.prototype,o),a&&Title_MissionBox_defineProperties(i,a),i}(MissionBox,[{key:"set",value:function set(i){for(var o=0;o<3;o++)this.missions[o].alpha=0,this.missions[o].y=.36*WG.Screen.gameSize.height;for(var a=0;a<this.animations.length;a++)this.animations[a].stop();this.animations=[],se.set(i);for(var h=Object.entries(WG.resource["data/stage.json"][i]),c=0;c<h.length;c++){var l=MissionBox_slicedToArray(h[c],2),m=l[0],g=l[1];this.missions[c].x=.5*WG.Screen.gameSize.width+209.4+418.8*c-418.8*h.length/2,this.typeText[c].text=m.replace("-"," ").toUpperCase(),this.valueText[c].text=g.toLocaleString(),"distance"===m&&(this.valueText[c].text+=" km"),this.animations.push(new WG.Action(this.missions[c],{to:1,value:"alpha",delay:100*c,easing:WG.Easing.easeOutCubic,duration:500})),this.animations.push(new WG.Action(this.missions[c],{to:.3*WG.Screen.gameSize.height,value:"y",delay:100*c,easing:WG.Easing.easeOutCubic,duration:500}))}}}]),MissionBox}();function Stage_slicedToArray(i,o){return function Stage_arrayWithHoles(i){if(Array.isArray(i))return i}(i)||function Stage_iterableToArrayLimit(i,o){var a=[],h=!0,c=!1,l=void 0;try{for(var m,g=i[Symbol.iterator]();!(h=(m=g.next()).done)&&(a.push(m.value),!o||a.length!==o);h=!0);}catch(i){c=!0,l=i}finally{try{h||null==g.return||g.return()}finally{if(c)throw l}}return a}(i,o)||function Stage_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var qe={green:283425,orange:11010048,red:8388674,black:3355443},Ke=function Stage(i){var o=this;!function Stage_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Stage),this.parent=i;var a=1;try{a=Z.data.stage}catch(i){a=1}this.page=Math.floor(a/10)+1,this.page<=0&&(this.page=1),this.missionBox=new Ye,this.container=new WG.Container({x:.5*WG.Screen.gameSize.width,y:.73*WG.Screen.gameSize.height,name:"STAGE-WRAPPER",parent:"STAGE"}),new WG.Sprite("ui/mission.png",{parent:"STAGE",x:WG.Screen.gameSize.width/2,y:100});var h=.6*WG.Screen.gameSize.width/4,c=!0;this.content=new WG.Container({x:2*-h,y:0,name:"STAGES",parent:"STAGE-WRAPPER"});var l=new WG.Sprite("ui/selected.json",{parent:"STAGES"});this.buttons=[];for(var m=0;m<10;m++){var g="STAGE-BUTTON-".concat(m),_=new X({x:h*(m%5),y:147*Math.floor(m/5)-73.5+20*Math.floor(m/5)-10,name:g,parent:"STAGES"});this.buttons.push(_),_._stageText=new WG.BitmapText("",{parent:g,fontFamily:"borsok@x4",y:5,scale:.25,tint:283425})}var x=function paging(i){if(!o._pageAnimation){var a=WG.resource["data/stage.json"],h=Object.keys(a).length-2;o.page+=i,o.page<1?o.page=1:(10*o.page-9>h&&(o.page=o.page-1),S())}},S=function refreshPage(){for(var i=function _loop(i){var a=10*(o.page-1)+i+1,h=1;try{h=Z.data.stage}catch(i){h=1}var m=h+1>=a,g=o.buttons[i];m?(g.alpha=1,c&&(l._stage=a,l.x=g.x,l.y=g.y,o.missionBox.set(a),we.setCurrentStage(a))):(c&&(c=!1),g.alpha=.5);var _=function getStageColor(i){for(var o=WG.resource["data/stage.json"].color,a=Object.keys(o),h=0;h<a.length;h++){var c=a[h],l=Stage_slicedToArray(o[c],2),m=l[0],g=l[1];if(i>=m&&i<=g)return c}}(a);g.button.buttonBackground.texture="button/".concat(_,".png"),g._stageText.text=a+"",g._stageText.tint=qe[_],g.event=function(){m?(l._stage=a,l.x=g.x,l.y=g.y,l.alpha=1,we.setCurrentStage(a),o.missionBox.set(a)):console.log("권한없음")}},a=0;a<10;a++)i(a);l._stage>10*(o.page-1)&&l._stage<=10*(o.page-1)+10?l.alpha=1:l.alpha=0};S(),new X({x:.09*WG.Screen.gameSize.width,y:.73*WG.Screen.gameSize.height,scale:.7,color:"long-left",parent:"STAGE",name:"leftArrow",event:function event(){return x(-1)}}),new X({x:WG.Screen.gameSize.width-.09*WG.Screen.gameSize.width,y:.73*WG.Screen.gameSize.height,scale:.7,color:"long-right",parent:"STAGE",name:"rightArrow",event:function event(){return x(1)}}),new X({color:"exit",parent:"STAGE",name:"stage-exit",scale:.6,x:100,y:100,event:function event(){return i.showTitle()}}),new X({color:"play",parent:"STAGE",name:"stage-play",scale:.6,x:WG.Screen.gameSize.width-100,y:100,event:function event(){Z.canIWatchInterstitial()?Z.interstitial((function(){return WG.Scene.fadeChange("Game",500)})):WG.Scene.fadeChange("Game",500)}})};function title_defineProperties(i,o){for(var a=0;a<o.length;a++){var h=o[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}var Ze=function(){function Title(){!function title_classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,Title),Z.adInit()}return function title_createClass(i,o,a){return o&&title_defineProperties(i.prototype,o),a&&title_defineProperties(i,a),i}(Title,[{key:"init",value:function init(i){var o=this;this.state="title",Le.is("characterHide")||(Le.set("characterHide",new WG.Filters.ColorOverlayFilter(3487029)),Le.set("characterOpen",new WG.Filters.ColorOverlayFilter(3487029)),Le.set("dropShadow",new WG.Filters.DropShadowFilter)),this.staticBackground=new WG.Container({name:"STATIC-BACKGROUND",parent:WG.Stage,mode:WG.Types.CoordinateMode.FILL}),this.background=new WG.Container({name:"BACKGROUND",parent:WG.Stage,mode:WG.Types.CoordinateMode.FILL}),new WG.Sprite("title/background.png",{parent:"STATIC-BACKGROUND",x:WG.Screen.gameSize.width/2,y:WG.Screen.gameSize.height/2}),this.container=new WG.Container({name:"TITLE",parent:WG.Stage,mode:WG.Types.CoordinateMode.FIT}),this.stageContainer=new WG.Container({x:WG.Screen.gameSize.width,name:"STAGE",parent:"TITLE",mode:WG.Types.CoordinateMode.FIT});var a=new WG.Container({name:"SHOP",parent:WG.Stage});$.init(),Y.init(),this.main=new De(this),Z.load().then((function(){ze.create(a,(function(){o.selected&&o.selected._refreshCoinValue()})),o.stage=new Ke(o),o._localStorageSetting();var i=localStorage.getItem("ctb_lastCharacter");we.setCharacter(i)})),window.onkeydown=function(i){var a=i.code;"Space"===a||("KeyA"===a?o.showTitle():"KeyS"===a?o.showStage():"KeyD"===a&&o.showSelect())},"stage"===i&&this.showStage(),j.background("title"),this.selected=null}},{key:"update",value:function update(i){}},{key:"destroy",value:function destroy(){}},{key:"_charactersCreate",value:function _charactersCreate(){var i=this;return new Promise((function(o){if(null===i.selected){Y.show("loading");var a=localStorage.getItem("ctb_lastCharacter");i.selected=new Ve(i),i.select=new Ue(i),Z.unlockCharacter=i.selected._unlockCharacter,i.setCharacter(a),i.selectCharacter(a),new WG.Timer({duration:500,onComplete:function onComplete(){Y.done(),o()}})}else o()}))}},{key:"showTitle",value:function showTitle(){this.prevState=this.state,this.state="title",new WG.Action(this.container,{to:0,easing:WG.Easing.easeInOutQuint,value:"x",duration:1e3}),new WG.Action(this.background,{to:0,easing:WG.Easing.easeInOutQuint,value:"x",duration:1e3}),new WG.Action(this.container,{to:0,easing:WG.Easing.easeInOutQuint,value:"y",duration:1e3}),new WG.Action(this.background,{to:0,easing:WG.Easing.easeInOutQuint,value:"y",duration:1e3})}},{key:"showSelect",value:function showSelect(){this.prevState=this.state,this.state="select","title"===this.prevState&&(this.stageContainer.alpha=0),this.selected._refreshCoinValue(),new WG.Action(this.container,{to:-WG.Screen.gameSize.height,easing:WG.Easing.easeInOutQuint,value:"y",duration:1e3}),new WG.Action(this.background,{to:-WG.Screen.gameSize.height,easing:WG.Easing.easeInOutQuint,value:"y",duration:1e3})}},{key:"showStage",value:function showStage(){this.prevState=this.state,this.state="stage",this.stageContainer.alpha=1,new WG.Action(this.container,{to:-WG.Screen.gameSize.width,easing:WG.Easing.easeInOutQuint,value:"x",duration:1e3}),new WG.Action(this.background,{to:-WG.Screen.gameSize.width,easing:WG.Easing.easeInOutQuint,value:"x",duration:1e3})}},{key:"setCharacter",value:function setCharacter(i){this.selected._hideConfirm(),this.selected.set(i)}},{key:"selectCharacter",value:function selectCharacter(i){this.select._setCharacter(i)}},{key:"_unlockCharacter",value:function _unlockCharacter(i){this.select.characters[i].unlock()}},{key:"_localStorageSetting",value:function _localStorageSetting(){if(null===localStorage.getItem("ctb_init")){localStorage.setItem("ctb_init","done"),localStorage.setItem("ctb_lastCharacter","marlin"),localStorage.setItem("ctb_characterSeed",Math.floor(99999*Math.random())),localStorage.setItem("ctb_infinity",0);localStorage.setItem("ctb_UIOptions",JSON.stringify({missionBox:"left",combo:"left",gem:"left",distance:"left"}))}}}]),Title}(),Qe=[];!function requireAll(i){i.keys().forEach((function(i){if(/\.[^/]*$/g.test(i)){var o="./source/".concat(i.slice(2));/\/image\/uncompress/.test(o)?/\.(json|png|jpg|gif|json|moc3|woff|woff2|fnt)$/.test(i)&&Qe.push(o):(/\.(tar)$/.test(i)||/\.(?:wav|mp3)$/i.test(i))&&Qe.push(o)}}))}(a(100)),c.init({width:1280,height:720,renderStyle:c.Types.RenderType.FIXED,guideLine:!1,debug:!1,resolution:2,scene:[Ze,Oe],resource:Qe,resourceDepth:1,backgroundColor:10612,startScene:"Title",admob:{bannerAd:"ca-app-pub-7759742070728164/9012142557",interstitial:c.isIOS?"ca-app-pub-7759742070728164/1509088876":"ca-app-pub-7759742070728164/3573442600",rewardedAd:c.isIOS?"ca-app-pub-7759742070728164/8310957486":"ca-app-pub-7759742070728164/8079168982"},facebook:{bannerAd:"2835515373343081_2835518180009467",interstitial:"2835515373343081_2835516800009605",rewardedAd:"2835515373343081_2835515970009688"},unity:{id:"3801051"}}),window.WG=c}]);